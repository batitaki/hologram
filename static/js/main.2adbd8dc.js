/*! For license information please see main.2adbd8dc.js.LICENSE.txt */
(()=>{var t={4405:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const o=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}))},5619:(e,t,n)=>{"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2483),a=(r=i)&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return a.default.createElement("svg",o({viewBox:"0 0 24 24",style:o({fill:n,width:i,height:l},u)},d),a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},9912:(e,t,n)=>{"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2483),a=(r=i)&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return a.default.createElement("svg",o({viewBox:"0 0 24 24",style:o({fill:n,width:i,height:l},u)},d),a.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},9394:t=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var i={},a={};function s(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=c(e,(0|e)<0?-1:0,!0),o&&(a[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return _}else{if(e<=-m)return k;if(e+1>=m)return S}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var o=l(u(n,8)),i=y,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var h=l(u(n,s));i=i.mul(h).add(l(c))}else i=(i=i.mul(o)).add(l(c))}return i.unsigned=t,i}function h(e,t){return"number"===typeof e?l(e,t):"string"===typeof e?d(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,m=f/2,g=s(1<<24),y=s(0);r.ZERO=y;var v=s(0,!0);r.UZERO=v;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var w=s(-1);r.NEG_ONE=w;var S=c(-1,2147483647,!1);r.MAX_VALUE=S;var _=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=_;var k=c(0,-2147483648,!1);r.MIN_VALUE=k;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=l(u(e,6),this.unsigned),i=this,a="";;){var s=i.div(o),c=(i.sub(s.mul(o)).toInt()>>>0).toString(e);if((i=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return o(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(o(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(b)},T.neg=T.negate,T.add=function(e){o(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,l=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,d+=(p+=r+l)>>>16,u+=(d+=n+s)>>>16,u+=t+a,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return o(e)||(e=h(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return y;if(o(e)||(e=h(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(k))return e.isOdd()?k:y;if(e.eq(k))return this.isOdd()?k:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,a=65535&this.low,s=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,m=0,v=0,b=0;return v+=(b+=a*p)>>>16,m+=(v+=i*p)>>>16,v&=65535,m+=(v+=a*d)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=i*d)>>>16,m&=65535,f+=(m+=a*u)>>>16,f+=t*p+r*d+i*u+a*s,c((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(o(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return x;i=v}else{if(this.eq(k))return e.eq(b)||e.eq(w)?k:e.eq(k)?b:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:w:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(k))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),s=a<=48?1:u(2,a-48),d=l(t),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=l(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=b),i=i.add(d),r=r.sub(p)}return i},T.div=T.divide,T.modulo=function(e){return o(e)||(e=h(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return o(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return o(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return o(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return o(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3253:function(e){e.exports=function(){"use strict";const e=new Map,t={set(t,n,r){e.has(t)||e.set(t,new Map);const o=e.get(t);o.has(n)||0===o.size?o.set(n,r):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(o.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const r=e.get(t);r.delete(n),0===r.size&&e.delete(t)}},n="transitionend",r=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>"#".concat(CSS.escape(t))))),e),o=e=>{e.dispatchEvent(new Event(n))},i=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),a=e=>i(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(r(e)):null,s=e=>{if(!i(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},l=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),c=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?c(e.parentNode):null},u=()=>{},d=e=>{e.offsetHeight},h=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,m=e=>{var t;t=()=>{const t=h();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of p)e()})),p.push(t)):t()},g=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):t},y=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void g(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),o=Number.parseFloat(n);return r||o?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let i=!1;const a=r=>{let{target:o}=r;o===t&&(i=!0,t.removeEventListener(n,a),g(e))};t.addEventListener(n,a),setTimeout((()=>{i||o(t)}),r)},v=(e,t,n,r)=>{const o=e.length;let i=e.indexOf(t);return-1===i?!n&&r?e[o-1]:e[0]:(i+=n?1:-1,r&&(i=(i+o)%o),e[Math.max(0,Math.min(i,o-1))])},b=/[^.]*(?=\..*)\.|.*/,x=/\..*/,w=/::\d+$/,S={};let _=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"},T=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function E(e,t){return t&&"".concat(t,"::").concat(_++)||e.uidEvent||_++}function C(e){const t=E(e);return e.uidEvent=t,S[t]=S[t]||{},S[t]}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function j(e,t,n){const r="string"==typeof t,o=r?n:t||n;let i=R(e);return T.has(i)||(i=e),[r,o,i]}function A(e,t,n,r,o){if("string"!=typeof t||!e)return;let[i,a,s]=j(t,n,r);if(t in k){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};a=e(a)}const l=C(e),c=l[s]||(l[s]={}),u=I(c,a,i?n:null);if(u)return void(u.oneOff=u.oneOff&&o);const d=E(a,t.replace(b,"")),h=i?function(e,t,n){return function r(o){const i=e.querySelectorAll(t);for(let{target:a}=o;a&&a!==this;a=a.parentNode)for(const s of i)if(s===a)return M(o,{delegateTarget:a}),r.oneOff&&P.off(e,o.type,t,n),n.apply(a,[o])}}(e,n,a):function(e,t){return function n(r){return M(r,{delegateTarget:e}),n.oneOff&&P.off(e,r.type,t),t.apply(e,[r])}}(e,a);h.delegationSelector=i?n:null,h.callable=a,h.oneOff=o,h.uidEvent=d,c[d]=h,e.addEventListener(s,h,i)}function O(e,t,n,r,o){const i=I(t[n],r,o);i&&(e.removeEventListener(n,i,Boolean(o)),delete t[n][i.uidEvent])}function N(e,t,n,r){const o=t[n]||{};for(const[i,a]of Object.entries(o))i.includes(r)&&O(e,t,n,a.callable,a.delegationSelector)}function R(e){return e=e.replace(x,""),k[e]||e}const P={on(e,t,n,r){A(e,t,n,r,!1)},one(e,t,n,r){A(e,t,n,r,!0)},off(e,t,n,r){if("string"!=typeof t||!e)return;const[o,i,a]=j(t,n,r),s=a!==t,l=C(e),c=l[a]||{},u=t.startsWith(".");if(void 0===i){if(u)for(const n of Object.keys(l))N(e,l,n,t.slice(1));for(const[n,r]of Object.entries(c)){const o=n.replace(w,"");s&&!t.includes(o)||O(e,l,a,r.callable,r.delegationSelector)}}else{if(!Object.keys(c).length)return;O(e,l,a,i,o?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=h();let o=null,i=!0,a=!0,s=!1;t!==R(t)&&r&&(o=r.Event(t,n),r(e).trigger(o),i=!o.isPropagationStopped(),a=!o.isImmediatePropagationStopped(),s=o.isDefaultPrevented());const l=M(new Event(t,{bubbles:i,cancelable:!0}),n);return s&&l.preventDefault(),a&&e.dispatchEvent(l),l.defaultPrevented&&o&&o.preventDefault(),l}};function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,r]of Object.entries(t))try{e[n]=r}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>r})}return e}function D(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function L(e){return e.replace(/[A-Z]/g,(e=>"-".concat(e.toLowerCase())))}const F={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(L(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(L(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=D(e.dataset[r])}return t},getDataAttribute:(e,t)=>D(e.getAttribute("data-bs-".concat(L(t))))};class B{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=i(t)?F.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...i(t)?F.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[r,o]of Object.entries(t)){const t=e[r],a=i(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(r,'" provided type "').concat(a,'" but expected type "').concat(o,'".'))}var n}}class U extends B{constructor(e,n){super(),(e=a(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){y(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(a(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const z=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?r(n.trim()):null}return t},V={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>"".concat(e,':not([tabindex^="-"])'))).join(",");return this.find(t,e).filter((e=>!l(e)&&s(e)))},getSelectorFromElement(e){const t=z(e);return t&&V.findOne(t)?t:null},getElementFromSelector(e){const t=z(e);return t?V.findOne(t):null},getMultipleElementsFromSelector(e){const t=z(e);return t?V.find(t):[]}},G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),r=e.NAME;P.on(document,n,'[data-bs-dismiss="'.concat(r,'"]'),(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),l(this))return;const o=V.getElementFromSelector(this)||this.closest(".".concat(r));e.getOrCreateInstance(o)[t]()}))},W=".bs.alert",H="close".concat(W),q="closed".concat(W);class X extends U{static get NAME(){return"alert"}close(){if(P.trigger(this._element,H).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),P.trigger(this._element,q),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=X.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}G(X,"close"),m(X);const Y='[data-bs-toggle="button"]';class K extends U{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=K.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}P.on(document,"click.bs.button.data-api",Y,(e=>{e.preventDefault();const t=e.target.closest(Y);K.getOrCreateInstance(t).toggle()})),m(K);const Z=".bs.swipe",Q="touchstart".concat(Z),J="touchmove".concat(Z),$="touchend".concat(Z),ee="pointerdown".concat(Z),te="pointerup".concat(Z),ne={endCallback:null,leftCallback:null,rightCallback:null},re={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class oe extends B{constructor(e,t){super(),this._element=e,e&&oe.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return re}static get NAME(){return"swipe"}dispose(){P.off(this._element,Z)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&g(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,ee,(e=>this._start(e))),P.on(this._element,te,(e=>this._end(e))),this._element.classList.add("pointer-event")):(P.on(this._element,Q,(e=>this._start(e))),P.on(this._element,J,(e=>this._move(e))),P.on(this._element,$,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ie=".bs.carousel",ae=".data-api",se="next",le="prev",ce="left",ue="right",de="slide".concat(ie),he="slid".concat(ie),pe="keydown".concat(ie),fe="mouseenter".concat(ie),me="mouseleave".concat(ie),ge="dragstart".concat(ie),ye="load".concat(ie).concat(ae),ve="click".concat(ie).concat(ae),be="carousel",xe="active",we=".active",Se=".carousel-item",_e=we+Se,ke={ArrowLeft:ue,ArrowRight:ce},Te={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ee={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ce extends U{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===be&&this.cycle()}static get Default(){return Te}static get DefaultType(){return Ee}static get NAME(){return"carousel"}next(){this._slide(se)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(le)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,he,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void P.one(this._element,he,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?se:le;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&P.on(this._element,pe,(e=>this._keydown(e))),"hover"===this._config.pause&&(P.on(this._element,fe,(()=>this.pause())),P.on(this._element,me,(()=>this._maybeEnableCycle()))),this._config.touch&&oe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of V.find(".carousel-item img",this._element))P.on(t,ge,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(ce)),rightCallback:()=>this._slide(this._directionToOrder(ue)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new oe(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=ke[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=V.findOne(we,this._indicatorsElement);t.classList.remove(xe),t.removeAttribute("aria-current");const n=V.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(xe),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),r=e===se,o=t||v(this._getItems(),n,r,this._config.wrap);if(o===n)return;const i=this._getItemIndex(o),a=t=>P.trigger(this._element,t,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:i});if(a(de).defaultPrevented)return;if(!n||!o)return;const s=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=o;const l=r?"carousel-item-start":"carousel-item-end",c=r?"carousel-item-next":"carousel-item-prev";o.classList.add(c),d(o),n.classList.add(l),o.classList.add(l),this._queueCallback((()=>{o.classList.remove(l,c),o.classList.add(xe),n.classList.remove(xe,c,l),this._isSliding=!1,a(he)}),n,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(_e,this._element)}_getItems(){return V.find(Se,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===ce?le:se:e===ce?se:le}_orderToDirection(e){return f()?e===le?ce:ue:e===le?ue:ce}static jQueryInterface(e){return this.each((function(){const t=Ce.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)}))}}P.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=V.getElementFromSelector(this);if(!t||!t.classList.contains(be))return;e.preventDefault();const n=Ce.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===F.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),P.on(window,ye,(()=>{const e=V.find('[data-bs-ride="carousel"]');for(const t of e)Ce.getOrCreateInstance(t)})),m(Ce);const Ie=".bs.collapse",je="show".concat(Ie),Ae="shown".concat(Ie),Oe="hide".concat(Ie),Ne="hidden".concat(Ie),Re="click".concat(Ie,".data-api"),Pe="show",Me="collapse",De="collapsing",Le=":scope .".concat(Me," .").concat(Me),Fe='[data-bs-toggle="collapse"]',Be={parent:null,toggle:!0},Ue={parent:"(null|element)",toggle:"boolean"};class ze extends U{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=V.find(Fe);for(const r of n){const e=V.getSelectorFromElement(r),t=V.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Be}static get DefaultType(){return Ue}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>ze.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(P.trigger(this._element,je).defaultPrevented)return;for(const r of e)r.hide();const t=this._getDimension();this._element.classList.remove(Me),this._element.classList.add(De),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(De),this._element.classList.add(Me,Pe),this._element.style[t]="",P.trigger(this._element,Ae)}),this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,Oe).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),d(this._element),this._element.classList.add(De),this._element.classList.remove(Me,Pe);for(const t of this._triggerArray){const e=V.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(De),this._element.classList.add(Me),P.trigger(this._element,Ne)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(Pe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=a(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Fe);for(const t of e){const e=V.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=V.find(Le,this._config.parent);return V.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=ze.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}}))}}P.on(document,Re,Fe,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of V.getMultipleElementsFromSelector(this))ze.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(ze);var Ve="top",Ge="bottom",We="right",He="left",qe="auto",Xe=[Ve,Ge,We,He],Ye="start",Ke="end",Ze="clippingParents",Qe="viewport",Je="popper",$e="reference",et=Xe.reduce((function(e,t){return e.concat([t+"-"+Ye,t+"-"+Ke])}),[]),tt=[].concat(Xe,[qe]).reduce((function(e,t){return e.concat([t,t+"-"+Ye,t+"-"+Ke])}),[]),nt="beforeRead",rt="read",ot="afterRead",it="beforeMain",at="main",st="afterMain",lt="beforeWrite",ct="write",ut="afterWrite",dt=[nt,rt,ot,it,at,st,lt,ct,ut];function ht(e){return e?(e.nodeName||"").toLowerCase():null}function pt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ft(e){return e instanceof pt(e).Element||e instanceof Element}function mt(e){return e instanceof pt(e).HTMLElement||e instanceof HTMLElement}function gt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof pt(e).ShadowRoot||e instanceof ShadowRoot)}const yt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];mt(o)&&ht(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mt(r)&&ht(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var bt=Math.max,xt=Math.min,wt=Math.round;function St(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function _t(){return!/^((?!chrome|android).)*safari/i.test(St())}function kt(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&mt(e)&&(o=e.offsetWidth>0&&wt(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&wt(r.height)/e.offsetHeight||1);var a=(ft(e)?pt(e):window).visualViewport,s=!_t()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/o,c=(r.top+(s&&a?a.offsetTop:0))/i,u=r.width/o,d=r.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Tt(e){var t=kt(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Et(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&gt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ct(e){return pt(e).getComputedStyle(e)}function It(e){return["table","td","th"].indexOf(ht(e))>=0}function jt(e){return((ft(e)?e.ownerDocument:e.document)||window.document).documentElement}function At(e){return"html"===ht(e)?e:e.assignedSlot||e.parentNode||(gt(e)?e.host:null)||jt(e)}function Ot(e){return mt(e)&&"fixed"!==Ct(e).position?e.offsetParent:null}function Nt(e){for(var t=pt(e),n=Ot(e);n&&It(n)&&"static"===Ct(n).position;)n=Ot(n);return n&&("html"===ht(n)||"body"===ht(n)&&"static"===Ct(n).position)?t:n||function(e){var t=/firefox/i.test(St());if(/Trident/i.test(St())&&mt(e)&&"fixed"===Ct(e).position)return null;var n=At(e);for(gt(n)&&(n=n.host);mt(n)&&["html","body"].indexOf(ht(n))<0;){var r=Ct(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Rt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pt(e,t,n){return bt(e,xt(t,n))}function Mt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Dt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const Lt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=vt(n.placement),l=Rt(s),c=[He,We].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(e,t){return Mt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Dt(e,Xe))}(o.padding,n),d=Tt(i),h="y"===l?Ve:He,p="y"===l?Ge:We,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=Nt(i),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[h],x=y-d[c]-u[p],w=y/2-d[c]/2+v,S=Pt(b,w,x),_=l;n.modifiersData[r]=((t={})[_]=S,t.centerOffset=S-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Et(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ft(e){return e.split("-")[1]}var Bt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ut(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,p=void 0===h?0:h,f=a.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=He,x=Ve,w=window;if(c){var S=Nt(n),_="clientHeight",k="clientWidth";S===pt(n)&&"static"!==Ct(S=jt(n)).position&&"absolute"===s&&(_="scrollHeight",k="scrollWidth"),(o===Ve||(o===He||o===We)&&i===Ke)&&(x=Ge,m-=(d&&S===w&&w.visualViewport?w.visualViewport.height:S[_])-r.height,m*=l?1:-1),o!==He&&(o!==Ve&&o!==Ge||i!==Ke)||(b=We,p-=(d&&S===w&&w.visualViewport?w.visualViewport.width:S[k])-r.width,p*=l?1:-1)}var T,E=Object.assign({position:s},c&&Bt),C=!0===u?function(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:wt(n*o)/o||0,y:wt(r*o)/o||0}}({x:p,y:m},pt(n)):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},E,((T={})[x]=v?"0":"",T[b]=y?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",T)):Object.assign({},E,((t={})[x]=v?m+"px":"",t[b]=y?p+"px":"",t.transform="",t))}const zt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,l=void 0===s||s,c={placement:vt(t.placement),variation:Ft(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ut(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ut(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Vt={passive:!0};const Gt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,l=pt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,Vt)})),s&&l.addEventListener("resize",n.update,Vt),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Vt)})),s&&l.removeEventListener("resize",n.update,Vt)}},data:{}};var Wt={left:"right",right:"left",bottom:"top",top:"bottom"};function Ht(e){return e.replace(/left|right|bottom|top/g,(function(e){return Wt[e]}))}var qt={start:"end",end:"start"};function Xt(e){return e.replace(/start|end/g,(function(e){return qt[e]}))}function Yt(e){var t=pt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Kt(e){return kt(jt(e)).left+Yt(e).scrollLeft}function Zt(e){var t=Ct(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Qt(e){return["html","body","#document"].indexOf(ht(e))>=0?e.ownerDocument.body:mt(e)&&Zt(e)?e:Qt(At(e))}function Jt(e,t){var n;void 0===t&&(t=[]);var r=Qt(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),i=pt(r),a=o?[i].concat(i.visualViewport||[],Zt(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(Jt(At(a)))}function $t(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t,n){return t===Qe?$t(function(e,t){var n=pt(e),r=jt(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var c=_t();(c||!c&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+Kt(e),y:l}}(e,n)):ft(t)?function(e,t){var n=kt(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):$t(function(e){var t,n=jt(e),r=Yt(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=bt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=bt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Kt(e),l=-r.scrollTop;return"rtl"===Ct(o||n).direction&&(s+=bt(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}(jt(e)))}function tn(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?vt(o):null,a=o?Ft(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case Ve:t={x:s,y:n.y-r.height};break;case Ge:t={x:s,y:n.y+n.height};break;case We:t={x:n.x+n.width,y:l};break;case He:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?Rt(i):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ye:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Ke:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function nn(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.strategy,a=void 0===i?e.strategy:i,s=n.boundary,l=void 0===s?Ze:s,c=n.rootBoundary,u=void 0===c?Qe:c,d=n.elementContext,h=void 0===d?Je:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=Mt("number"!=typeof g?g:Dt(g,Xe)),v=h===Je?$e:Je,b=e.rects.popper,x=e.elements[f?v:h],w=function(e,t,n,r){var o="clippingParents"===t?function(e){var t=Jt(At(e)),n=["absolute","fixed"].indexOf(Ct(e).position)>=0&&mt(e)?Nt(e):e;return ft(n)?t.filter((function(e){return ft(e)&&Et(e,n)&&"body"!==ht(e)})):[]}(e):[].concat(t),i=[].concat(o,[n]),a=i[0],s=i.reduce((function(t,n){var o=en(e,n,r);return t.top=bt(o.top,t.top),t.right=xt(o.right,t.right),t.bottom=xt(o.bottom,t.bottom),t.left=bt(o.left,t.left),t}),en(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(ft(x)?x:x.contextElement||jt(e.elements.popper),l,u,a),S=kt(e.elements.reference),_=tn({reference:S,element:b,strategy:"absolute",placement:o}),k=$t(Object.assign({},b,_)),T=h===Je?k:S,E={top:w.top-T.top+y.top,bottom:T.bottom-w.bottom+y.bottom,left:w.left-T.left+y.left,right:T.right-w.right+y.right},C=e.modifiersData.offset;if(h===Je&&C){var I=C[o];Object.keys(E).forEach((function(e){var t=[We,Ge].indexOf(e)>=0?1:-1,n=[Ve,Ge].indexOf(e)>=0?"y":"x";E[e]+=I[n]*t}))}return E}function rn(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?tt:l,u=Ft(r),d=u?s?et:et.filter((function(e){return Ft(e)===u})):Xe,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=nn(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[vt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}const on={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=vt(g),v=l||(y!==g&&f?function(e){if(vt(e)===qe)return[];var t=Ht(e);return[Xt(e),t,Xt(t)]}(g):[Ht(g)]),b=[g].concat(v).reduce((function(e,n){return e.concat(vt(n)===qe?rn(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,S=new Map,_=!0,k=b[0],T=0;T<b.length;T++){var E=b[T],C=vt(E),I=Ft(E)===Ye,j=[Ve,Ge].indexOf(C)>=0,A=j?"width":"height",O=nn(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),N=j?I?We:He:I?Ge:Ve;x[A]>w[A]&&(N=Ht(N));var R=Ht(N),P=[];if(i&&P.push(O[C]<=0),s&&P.push(O[N]<=0,O[R]<=0),P.every((function(e){return e}))){k=E,_=!1;break}S.set(E,P)}if(_)for(var M=function(e){var t=b.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},D=f?3:1;D>0&&"break"!==M(D);D--);t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function an(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function sn(e){return[Ve,We,Ge,He].some((function(t){return e[t]>=0}))}const ln={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=nn(t,{elementContext:"reference"}),s=nn(t,{altBoundary:!0}),l=an(a,r),c=an(s,o,i),u=sn(l),d=sn(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},cn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=tt.reduce((function(e,n){return e[n]=function(e,t,n){var r=vt(e),o=[He,Ve].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[He,We].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},un={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=tn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},dn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=nn(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=vt(t.placement),v=Ft(t.placement),b=!v,x=Rt(y),w="x"===x?"y":"x",S=t.modifiersData.popperOffsets,_=t.rects.reference,k=t.rects.popper,T="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(S){if(i){var j,A="y"===x?Ve:He,O="y"===x?Ge:We,N="y"===x?"height":"width",R=S[x],P=R+g[A],M=R-g[O],D=p?-k[N]/2:0,L=v===Ye?_[N]:k[N],F=v===Ye?-k[N]:-_[N],B=t.elements.arrow,U=p&&B?Tt(B):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=z[A],G=z[O],W=Pt(0,_[N],U[N]),H=b?_[N]/2-D-W-V-E.mainAxis:L-W-V-E.mainAxis,q=b?-_[N]/2+D+W+G+E.mainAxis:F+W+G+E.mainAxis,X=t.elements.arrow&&Nt(t.elements.arrow),Y=X?"y"===x?X.clientTop||0:X.clientLeft||0:0,K=null!=(j=null==C?void 0:C[x])?j:0,Z=R+q-K,Q=Pt(p?xt(P,R+H-K-Y):P,R,p?bt(M,Z):M);S[x]=Q,I[x]=Q-R}if(s){var J,$="x"===x?Ve:He,ee="x"===x?Ge:We,te=S[w],ne="y"===w?"height":"width",re=te+g[$],oe=te-g[ee],ie=-1!==[Ve,He].indexOf(y),ae=null!=(J=null==C?void 0:C[w])?J:0,se=ie?re:te-_[ne]-k[ne]-ae+E.altAxis,le=ie?te+_[ne]+k[ne]-ae-E.altAxis:oe,ce=p&&ie?function(e,t,n){var r=Pt(e,t,n);return r>n?n:r}(se,te,le):Pt(p?se:re,te,p?le:oe);S[w]=ce,I[w]=ce-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]};function hn(e,t,n){void 0===n&&(n=!1);var r,o,i=mt(t),a=mt(t)&&function(e){var t=e.getBoundingClientRect(),n=wt(t.width)/e.offsetWidth||1,r=wt(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=jt(t),l=kt(e,a,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!n)&&(("body"!==ht(t)||Zt(s))&&(c=(r=t)!==pt(r)&&mt(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:Yt(r)),mt(t)?((u=kt(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=Kt(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function pn(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}var fn={placement:"bottom",modifiers:[],strategy:"absolute"};function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function gn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,i=void 0===o?fn:o;return function(e,t,n){void 0===n&&(n=i);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},fn,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var o="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},i,s.options,o),s.scrollParents={reference:ft(e)?Jt(e):e.contextElement?Jt(e.contextElement):[],popper:Jt(t)};var a,c,h=function(e){var t=pn(e);return dt.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((a=[].concat(r,s.options.modifiers),c=a.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return s.orderedModifiers=h.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:s,name:t,instance:u,options:r});l.push(i||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(mn(t,n)){s.rects={reference:hn(t,Nt(n),"fixed"===s.options.strategy),popper:Tt(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],i=o.fn,a=o.options,l=void 0===a?{}:a,d=o.name;"function"==typeof i&&(s=i({state:s,options:l,name:d,instance:u})||s)}else s.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))),a}),destroy:function(){d(),c=!0}};if(!mn(e,t))return u;function d(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var yn=gn(),vn=gn({defaultModifiers:[Gt,un,zt,yt]}),bn=gn({defaultModifiers:[Gt,un,zt,yt,cn,on,dn,Lt,ln]});const xn=Object.freeze(Object.defineProperty({__proto__:null,afterMain:st,afterRead:ot,afterWrite:ut,applyStyles:yt,arrow:Lt,auto:qe,basePlacements:Xe,beforeMain:it,beforeRead:nt,beforeWrite:lt,bottom:Ge,clippingParents:Ze,computeStyles:zt,createPopper:bn,createPopperBase:yn,createPopperLite:vn,detectOverflow:nn,end:Ke,eventListeners:Gt,flip:on,hide:ln,left:He,main:at,modifierPhases:dt,offset:cn,placements:tt,popper:Je,popperGenerator:gn,popperOffsets:un,preventOverflow:dn,read:rt,reference:$e,right:We,start:Ye,top:Ve,variationPlacements:et,viewport:Qe,write:ct},Symbol.toStringTag,{value:"Module"})),wn="dropdown",Sn=".bs.dropdown",_n=".data-api",kn="ArrowUp",Tn="ArrowDown",En="hide".concat(Sn),Cn="hidden".concat(Sn),In="show".concat(Sn),jn="shown".concat(Sn),An="click".concat(Sn).concat(_n),On="keydown".concat(Sn).concat(_n),Nn="keyup".concat(Sn).concat(_n),Rn="show",Pn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Mn="".concat(Pn,".").concat(Rn),Dn=".dropdown-menu",Ln=f()?"top-end":"top-start",Fn=f()?"top-start":"top-end",Bn=f()?"bottom-end":"bottom-start",Un=f()?"bottom-start":"bottom-end",zn=f()?"left-start":"right-start",Vn=f()?"right-start":"left-start",Gn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Wn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Hn extends U{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,Dn)[0]||V.prev(this._element,Dn)[0]||V.findOne(Dn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Gn}static get DefaultType(){return Wn}static get NAME(){return wn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!P.trigger(this._element,In,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))P.on(e,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Rn),this._element.classList.add(Rn),P.trigger(this._element,jn,e)}}hide(){if(l(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!P.trigger(this._element,En,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.off(e,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(Rn),this._element.classList.remove(Rn),this._element.setAttribute("aria-expanded","false"),F.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,Cn,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!i(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(wn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===xn)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:i(this._config.reference)?e=a(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=bn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Rn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return zn;if(e.classList.contains("dropstart"))return Vn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Fn:Ln:t?Un:Bn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(F.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...g(this._config.popperConfig,[e])}}_selectMenuItem(e){let{key:t,target:n}=e;const r=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>s(e)));r.length&&v(r,n,t===Tn,!r.includes(n)).focus()}static jQueryInterface(e){return this.each((function(){const t=Hn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=V.find(Mn);for(const n of t){const t=Hn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),o=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!o||"outside"===t._config.autoClose&&o)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const i={relatedTarget:t._element};"click"===e.type&&(i.clickEvent=e),t._completeHide(i)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,r=[kn,Tn].includes(e.key);if(!r&&!n)return;if(t&&!n)return;e.preventDefault();const o=this.matches(Pn)?this:V.prev(this,Pn)[0]||V.next(this,Pn)[0]||V.findOne(Pn,e.delegateTarget.parentNode),i=Hn.getOrCreateInstance(o);if(r)return e.stopPropagation(),i.show(),void i._selectMenuItem(e);i._isShown()&&(e.stopPropagation(),i.hide(),o.focus())}}P.on(document,On,Pn,Hn.dataApiKeydownHandler),P.on(document,On,Dn,Hn.dataApiKeydownHandler),P.on(document,An,Hn.clearMenus),P.on(document,Nn,Hn.clearMenus),P.on(document,An,Pn,(function(e){e.preventDefault(),Hn.getOrCreateInstance(this).toggle()})),m(Hn);const qn="backdrop",Xn="show",Yn="mousedown.bs.".concat(qn),Kn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Zn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qn extends B{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Kn}static get DefaultType(){return Zn}static get NAME(){return qn}show(e){if(!this._config.isVisible)return void g(e);this._append();const t=this._getElement();this._config.isAnimated&&d(t),t.classList.add(Xn),this._emulateAnimation((()=>{g(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(Xn),this._emulateAnimation((()=>{this.dispose(),g(e)}))):g(e)}dispose(){this._isAppended&&(P.off(this._element,Yn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=a(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),P.on(e,Yn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){y(e,this._getElement(),this._config.isAnimated)}}const Jn=".bs.focustrap",$n="focusin".concat(Jn),er="keydown.tab".concat(Jn),tr="backward",nr={autofocus:!0,trapElement:null},rr={autofocus:"boolean",trapElement:"element"};class or extends B{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return nr}static get DefaultType(){return rr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Jn),P.on(document,$n,(e=>this._handleFocusin(e))),P.on(document,er,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Jn))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=V.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===tr?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?tr:"forward")}}const ir=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ar=".sticky-top",sr="padding-right",lr="margin-right";class cr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,sr,(t=>t+e)),this._setElementAttributes(ir,sr,(t=>t+e)),this._setElementAttributes(ar,lr,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,sr),this._resetElementAttributes(ir,sr),this._resetElementAttributes(ar,lr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const o=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(o)),"px"))}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&F.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=F.getDataAttribute(e,t);null!==n?(F.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(i(e))t(e);else for(const n of V.find(e,this._element))t(n)}}const ur=".bs.modal",dr="hide".concat(ur),hr="hidePrevented".concat(ur),pr="hidden".concat(ur),fr="show".concat(ur),mr="shown".concat(ur),gr="resize".concat(ur),yr="click.dismiss".concat(ur),vr="mousedown.dismiss".concat(ur),br="keydown.dismiss".concat(ur),xr="click".concat(ur,".data-api"),wr="modal-open",Sr="show",_r="modal-static",kr={backdrop:!0,focus:!0,keyboard:!0},Tr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Er extends U{constructor(e,t){super(e,t),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new cr,this._addEventListeners()}static get Default(){return kr}static get DefaultType(){return Tr}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||P.trigger(this._element,fr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wr),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,dr).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Sr),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,ur),P.off(this._dialog,ur),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new or({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=V.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),d(this._element),this._element.classList.add(Sr),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,mr,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,br,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,gr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,vr,(e=>{P.one(this._element,yr,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(wr),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,pr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,hr).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(_r)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(_r),this._queueCallback((()=>{this._element.classList.remove(_r),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Er.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}}))}}P.on(document,xr,'[data-bs-toggle="modal"]',(function(e){const t=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),P.one(t,fr,(e=>{e.defaultPrevented||P.one(t,pr,(()=>{s(this)&&this.focus()}))}));const n=V.findOne(".modal.show");n&&Er.getInstance(n).hide(),Er.getOrCreateInstance(t).toggle(this)})),G(Er),m(Er);const Cr=".bs.offcanvas",Ir=".data-api",jr="load".concat(Cr).concat(Ir),Ar="show",Or="showing",Nr="hiding",Rr=".offcanvas.show",Pr="show".concat(Cr),Mr="shown".concat(Cr),Dr="hide".concat(Cr),Lr="hidePrevented".concat(Cr),Fr="hidden".concat(Cr),Br="resize".concat(Cr),Ur="click".concat(Cr).concat(Ir),zr="keydown.dismiss".concat(Cr),Vr={backdrop:!0,keyboard:!0,scroll:!1},Gr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Wr extends U{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vr}static get DefaultType(){return Gr}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||P.trigger(this._element,Pr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new cr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Or),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ar),this._element.classList.remove(Or),P.trigger(this._element,Mr,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Dr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Nr),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Ar,Nr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new cr).reset(),P.trigger(this._element,Fr)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Qn({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():P.trigger(this._element,Lr)}:null})}_initializeFocusTrap(){return new or({trapElement:this._element})}_addEventListeners(){P.on(this._element,zr,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Lr))}))}static jQueryInterface(e){return this.each((function(){const t=Wr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}P.on(document,Ur,'[data-bs-toggle="offcanvas"]',(function(e){const t=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),l(this))return;P.one(t,Fr,(()=>{s(this)&&this.focus()}));const n=V.findOne(Rr);n&&n!==t&&Wr.getInstance(n).hide(),Wr.getOrCreateInstance(t).toggle(this)})),P.on(window,jr,(()=>{for(const e of V.find(Rr))Wr.getOrCreateInstance(e).show()})),P.on(window,Br,(()=>{for(const e of V.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Wr.getOrCreateInstance(e).hide()})),G(Wr),m(Wr);const Hr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Yr=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!qr.has(n)||Boolean(Xr.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},Kr={allowList:Hr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Zr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qr={entry:"(string|element|function|null)",selector:"(string|element)"};class Jr extends B{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Kr}static get DefaultType(){return Zr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},Qr)}_setContent(e,t,n){const r=V.findOne(n,e);r&&((t=this._resolvePossibleFunction(t))?i(t)?this._putElementInTemplate(a(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const i of o){const e=i.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){i.remove();continue}const n=[].concat(...i.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of n)Yr(t,r)||i.removeAttribute(t.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return g(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const $r=new Set(["sanitize","allowList","sanitizeFn"]),eo="fade",to="show",no=".modal",ro="hide.bs.modal",oo="hover",io="focus",ao={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},so={allowList:Hr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},lo={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class co extends U{constructor(e,t){if(void 0===xn)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return so}static get DefaultType(){return lo}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(no),ro,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=P.trigger(this._element,this.constructor.eventName("show")),t=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(to),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))P.on(o,"mouseover",u);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(to),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.off(e,"mouseover",u);this._activeTrigger.click=!1,this._activeTrigger[io]=!1,this._activeTrigger[oo]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(eo,to),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(eo),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Jr({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(eo)}_isShown(){return this.tip&&this.tip.classList.contains(to)}_createPopper(e){const t=g(this._config.placement,[this,e,this._element]),n=ao[t.toUpperCase()];return bn(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return g(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...g(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)P.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===oo?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===oo?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?io:oo]=!0,t._enter()})),P.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?io:oo]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(no),ro,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=F.getDataAttributes(this._element);for(const n of Object.keys(t))$r.has(n)&&delete t[n];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:a(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=co.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(co);const uo={...co.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ho={...co.DefaultType,content:"(null|string|element|function)"};class po extends co{static get Default(){return uo}static get DefaultType(){return ho}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=po.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(po);const fo=".bs.scrollspy",mo="activate".concat(fo),go="click".concat(fo),yo="load".concat(fo,".data-api"),vo="active",bo="[href]",xo=".nav-link",wo="".concat(xo,", .nav-item > ").concat(xo,", .list-group-item"),So={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},_o={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ko extends U{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return So}static get DefaultType(){return _o}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=a(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,go),P.on(this._config.target,go,bo,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(i));continue}const e=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&e){if(n(i),!r)return}else o||e||n(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=V.find(bo,this._config.target);for(const t of e){if(!t.hash||l(t))continue;const e=V.findOne(decodeURI(t.hash),this._element);s(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(vo),this._activateParents(e),P.trigger(this._element,mo,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(vo);else for(const t of V.parents(e,".nav, .list-group"))for(const e of V.prev(t,wo))e.classList.add(vo)}_clearActiveClass(e){e.classList.remove(vo);const t=V.find("".concat(bo,".").concat(vo),e);for(const n of t)n.classList.remove(vo)}static jQueryInterface(e){return this.each((function(){const t=ko.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}P.on(window,yo,(()=>{for(const e of V.find('[data-bs-spy="scroll"]'))ko.getOrCreateInstance(e)})),m(ko);const To=".bs.tab",Eo="hide".concat(To),Co="hidden".concat(To),Io="show".concat(To),jo="shown".concat(To),Ao="click".concat(To),Oo="keydown".concat(To),No="load".concat(To),Ro="ArrowLeft",Po="ArrowRight",Mo="ArrowUp",Do="ArrowDown",Lo="Home",Fo="End",Bo="active",Uo="fade",zo="show",Vo=".dropdown-toggle",Go=":not(".concat(Vo,")"),Wo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ho=".nav-link".concat(Go,", .list-group-item").concat(Go,', [role="tab"]').concat(Go,", ").concat(Wo),qo=".".concat(Bo,'[data-bs-toggle="tab"], .').concat(Bo,'[data-bs-toggle="pill"], .').concat(Bo,'[data-bs-toggle="list"]');class Xo extends U{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,Oo,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?P.trigger(t,Eo,{relatedTarget:e}):null;P.trigger(e,Io,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Bo),this._activate(V.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),P.trigger(e,jo,{relatedTarget:t})):e.classList.add(zo)}),e,e.classList.contains(Uo)))}_deactivate(e,t){e&&(e.classList.remove(Bo),e.blur(),this._deactivate(V.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),P.trigger(e,Co,{relatedTarget:t})):e.classList.remove(zo)}),e,e.classList.contains(Uo)))}_keydown(e){if(![Ro,Po,Mo,Do,Lo,Fo].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!l(e)));let n;if([Lo,Fo].includes(e.key))n=t[e.key===Lo?0:t.length-1];else{const r=[Po,Do].includes(e.key);n=v(t,e.target,r,!0)}n&&(n.focus({preventScroll:!0}),Xo.getOrCreateInstance(n).show())}_getChildren(){return V.find(Ho,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=V.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const r=(e,r)=>{const o=V.findOne(e,n);o&&o.classList.toggle(r,t)};r(Vo,Bo),r(".dropdown-menu",zo),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Bo)}_getInnerElement(e){return e.matches(Ho)?e:V.findOne(Ho,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=Xo.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}P.on(document,Ao,Wo,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),l(this)||Xo.getOrCreateInstance(this).show()})),P.on(window,No,(()=>{for(const e of V.find(qo))Xo.getOrCreateInstance(e)})),m(Xo);const Yo=".bs.toast",Ko="mouseover".concat(Yo),Zo="mouseout".concat(Yo),Qo="focusin".concat(Yo),Jo="focusout".concat(Yo),$o="hide".concat(Yo),ei="hidden".concat(Yo),ti="show".concat(Yo),ni="shown".concat(Yo),ri="hide",oi="show",ii="showing",ai={animation:"boolean",autohide:"boolean",delay:"number"},si={animation:!0,autohide:!0,delay:5e3};class li extends U{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return si}static get DefaultType(){return ai}static get NAME(){return"toast"}show(){P.trigger(this._element,ti).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ri),d(this._element),this._element.classList.add(oi,ii),this._queueCallback((()=>{this._element.classList.remove(ii),P.trigger(this._element,ni),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,$o).defaultPrevented||(this._element.classList.add(ii),this._queueCallback((()=>{this._element.classList.add(ri),this._element.classList.remove(ii,oi),P.trigger(this._element,ei)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(oi),super.dispose()}isShown(){return this._element.classList.contains(oi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,Ko,(e=>this._onInteraction(e,!0))),P.on(this._element,Zo,(e=>this._onInteraction(e,!1))),P.on(this._element,Qo,(e=>this._onInteraction(e,!0))),P.on(this._element,Jo,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=li.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}return G(li),m(li),{Alert:X,Button:K,Carousel:Ce,Collapse:ze,Dropdown:Hn,Modal:Er,Offcanvas:Wr,Popover:po,ScrollSpy:ko,Tab:Xo,Toast:li,Tooltip:co}}()},7316:(e,t,n)=>{var r;!function(){"use strict";var o=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},1882:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var a=i[o];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},1250:function(e,t,n){var r,o,i;o=[],void 0===(i="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):o(l.href)?r(e,t,n):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(o(e))r(e,n,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var i="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,h=d.createObjectURL(e);o?o.location=h:location.href=h,o=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,o):r)||(e.exports=i)},5068:e=>{function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,o){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof r&&(o=r,r={}),r=r||{},o=o||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async=!("async"in r)||!!r.async,a.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,r.attrs),r.text&&(a.text=""+r.text),("onload"in a?t:n)(a,o),a.onload||t(a,o),i.appendChild(a)}},5022:(e,t,n)=>{var r=NaN,o="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,m=Math.min,g=function(){return h.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return r;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=function(e,t,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function x(){var e=g();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-l);return d?m(n,i-(e-c)):n}(e))}function w(e){return s=void 0,h&&r?p(e):(r=o=void 0,a)}function S(){var e=g(),n=b(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(x,t),u?p(e):a}(l);if(d)return s=setTimeout(x,t),p(l)}return void 0===s&&(s=setTimeout(x,t)),a}return t=v(t)||0,y(n)&&(u=!!n.leading,i=(d="maxWait"in n)?f(v(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},S.flush=function(){return void 0===s?a:w(g())},S}},445:(e,t,n)=>{var r="Expected a function",o=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,p=d||h||Function("return this")(),f=Object.prototype.toString,m=Math.max,g=Math.min,y=function(){return p.Date.now()};function v(e,t,n){var o,i,a,s,l,c,u=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(r);function f(t){var n=o,r=i;return o=i=void 0,u=t,s=e.apply(r,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-u>=a}function w(){var e=y();if(v(e))return S(e);l=setTimeout(w,function(e){var n=t-(e-c);return h?g(n,a-(e-u)):n}(e))}function S(e){return l=void 0,p&&o?f(e):(o=i=void 0,s)}function _(){var e=y(),n=v(e);if(o=arguments,i=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(w,t),d?f(e):s}(c);if(h)return l=setTimeout(w,t),f(c)}return void 0===l&&(l=setTimeout(w,t)),s}return t=x(t)||0,b(n)&&(d=!!n.leading,a=(h="maxWait"in n)?m(x(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==l&&clearTimeout(l),u=0,o=c=i=l=void 0},_.flush=function(){return void 0===l?s:S(y())},_}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return o;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?o:+e}e.exports=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),v(e,t,{leading:o,maxWait:t,trailing:i})}},4293:(e,t,n)=>{var r=n(4289)(n(6008),"DataView");e.exports=r},5140:(e,t,n)=>{var r=n(4367),o=n(2923),i=n(3914),a=n(5950),s=n(3606);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},5240:(e,t,n)=>{var r=n(5355),o=n(4143),i=n(7534),a=n(2250),s=n(1506);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},7188:(e,t,n)=>{var r=n(4289)(n(6008),"Map");e.exports=r},5968:(e,t,n)=>{var r=n(1763),o=n(6551),i=n(4134),a=n(2258),s=n(9402);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},4603:(e,t,n)=>{var r=n(4289)(n(6008),"Promise");e.exports=r},8630:(e,t,n)=>{var r=n(4289)(n(6008),"Set");e.exports=r},1142:(e,t,n)=>{var r=n(5968),o=n(2803),i=n(8576);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},4930:(e,t,n)=>{var r=n(5240),o=n(1777),i=n(6905),a=n(9008),s=n(1028),l=n(276);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},7908:(e,t,n)=>{var r=n(6008).Symbol;e.exports=r},3601:(e,t,n)=>{var r=n(6008).Uint8Array;e.exports=r},5080:(e,t,n)=>{var r=n(4289)(n(6008),"WeakMap");e.exports=r},3190:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},2169:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},6020:(e,t,n)=>{var r=n(8351),o=n(4521),i=n(4228),a=n(3855),s=n(1034),l=n(1364),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),u=!n&&o(e),d=!n&&!u&&a(e),h=!n&&!u&&!d&&l(e),p=n||u||d||h,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},6933:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},5455:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},2043:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},2004:(e,t,n)=>{var r=n(7612),o=n(4939),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},1708:(e,t,n)=>{var r=n(4939);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},5840:(e,t,n)=>{var r=n(1782),o=n(7137);e.exports=function(e,t){return e&&r(t,o(t),e)}},5679:(e,t,n)=>{var r=n(1782),o=n(6074);e.exports=function(e,t){return e&&r(t,o(t),e)}},7612:(e,t,n)=>{var r=n(1974);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},4444:(e,t,n)=>{var r=n(4930),o=n(3190),i=n(2004),a=n(5840),s=n(5679),l=n(5681),c=n(1308),u=n(9231),d=n(4547),h=n(6963),p=n(6464),f=n(5212),m=n(9036),g=n(2822),y=n(8710),v=n(4228),b=n(3855),x=n(1695),w=n(2254),S=n(6369),_=n(7137),k=n(6074),T="[object Arguments]",E="[object Function]",C="[object Object]",I={};I[T]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[C]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[E]=I["[object WeakMap]"]=!1,e.exports=function e(t,n,j,A,O,N){var R,P=1&n,M=2&n,D=4&n;if(j&&(R=O?j(t,A,O,N):j(t)),void 0!==R)return R;if(!w(t))return t;var L=v(t);if(L){if(R=m(t),!P)return c(t,R)}else{var F=f(t),B=F==E||"[object GeneratorFunction]"==F;if(b(t))return l(t,P);if(F==C||F==T||B&&!O){if(R=M||B?{}:y(t),!P)return M?d(t,s(R,t)):u(t,a(R,t))}else{if(!I[F])return O?t:{};R=g(t,F,P)}}N||(N=new r);var U=N.get(t);if(U)return U;N.set(t,R),S(t)?t.forEach((function(r){R.add(e(r,n,j,r,t,N))})):x(t)&&t.forEach((function(r,o){R.set(o,e(r,n,j,o,t,N))}));var z=L?void 0:(D?M?p:h:M?k:_)(t);return o(z||t,(function(r,o){z&&(r=t[o=r]),i(R,o,e(r,n,j,o,t,N))})),R}},8601:(e,t,n)=>{var r=n(2254),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},3396:(e,t,n)=>{var r=n(696),o=n(7972)(r);e.exports=o},9010:(e,t,n)=>{var r=n(2674)();e.exports=r},696:(e,t,n)=>{var r=n(9010),o=n(7137);e.exports=function(e,t){return e&&r(e,t,o)}},1129:(e,t,n)=>{var r=n(6908),o=n(6498);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},2374:(e,t,n)=>{var r=n(5455),o=n(4228);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},6737:(e,t,n)=>{var r=n(7908),o=n(1896),i=n(5231),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},9094:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7913:(e,t,n)=>{var r=n(6737),o=n(8153);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},6557:(e,t,n)=>{var r=n(8687),o=n(8153);e.exports=function e(t,n,i,a,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!==t&&n!==n:r(t,n,i,a,e,s))}},8687:(e,t,n)=>{var r=n(4930),o=n(3652),i=n(307),a=n(8632),s=n(5212),l=n(4228),c=n(3855),u=n(1364),d="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),x=v?h:s(e),w=b?h:s(t),S=(x=x==d?p:x)==p,_=(w=w==d?p:w)==p,k=x==w;if(k&&c(e)){if(!c(t))return!1;v=!0,S=!1}if(k&&!S)return y||(y=new r),v||u(e)?o(e,t,n,m,g,y):i(e,t,x,n,m,g,y);if(!(1&n)){var T=S&&f.call(e,"__wrapped__"),E=_&&f.call(t,"__wrapped__");if(T||E){var C=T?e.value():e,I=E?t.value():t;return y||(y=new r),g(C,I,n,m,y)}}return!!k&&(y||(y=new r),a(e,t,n,m,g,y))}},7631:(e,t,n)=>{var r=n(5212),o=n(8153);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},3044:(e,t,n)=>{var r=n(4930),o=n(6557);e.exports=function(e,t,n,i){var a=n.length,s=a,l=!i;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new r;if(i)var f=i(d,h,u,e,t,p);if(!(void 0===f?o(h,d,3,i,p):f))return!1}}return!0}},9354:(e,t,n)=>{var r=n(1981),o=n(7505),i=n(2254),a=n(932),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?h:s).test(a(e))}},353:(e,t,n)=>{var r=n(5212),o=n(8153);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},4948:(e,t,n)=>{var r=n(6737),o=n(5085),i=n(8153),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},1304:(e,t,n)=>{var r=n(1512),o=n(165),i=n(3183),a=n(4228),s=n(1612);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},689:(e,t,n)=>{var r=n(9660),o=n(1143),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9098:(e,t,n)=>{var r=n(2254),o=n(9660),i=n(2700),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},6131:(e,t,n)=>{var r=n(3396),o=n(1867);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},1512:(e,t,n)=>{var r=n(3044),o=n(6613),i=n(3454);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},165:(e,t,n)=>{var r=n(6557),o=n(3977),i=n(5254),a=n(1717),s=n(2281),l=n(3454),c=n(6498);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,3)}}},3132:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9090:(e,t,n)=>{var r=n(1129);e.exports=function(e){return function(t){return r(t,e)}}},8351:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},5405:(e,t,n)=>{var r=n(7908),o=n(6933),i=n(4228),a=n(4641),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},5862:e=>{e.exports=function(e){return function(t){return e(t)}}},5810:e=>{e.exports=function(e,t){return e.has(t)}},8055:(e,t,n)=>{var r=n(3183);e.exports=function(e){return"function"==typeof e?e:r}},6908:(e,t,n)=>{var r=n(4228),o=n(1717),i=n(9519),a=n(5853);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},3196:(e,t,n)=>{var r=n(3601);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},5681:(e,t,n)=>{e=n.nmd(e);var r=n(6008),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},5142:(e,t,n)=>{var r=n(3196);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},2802:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},1055:(e,t,n)=>{var r=n(7908),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},8566:(e,t,n)=>{var r=n(3196);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},1308:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},1782:(e,t,n)=>{var r=n(2004),o=n(7612);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=i?i(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?o(n,c,u):r(n,c,u)}return n}},9231:(e,t,n)=>{var r=n(1782),o=n(9285);e.exports=function(e,t){return r(e,o(e),t)}},4547:(e,t,n)=>{var r=n(1782),o=n(6134);e.exports=function(e,t){return r(e,o(e),t)}},2864:(e,t,n)=>{var r=n(6008)["__core-js_shared__"];e.exports=r},7972:(e,t,n)=>{var r=n(1867);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},2674:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}},1974:(t,n,r)=>{var o=r(4289),i=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},3652:(e,t,n)=>{var r=n(1142),o=n(2043),i=n(5810);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var y=e[f],v=t[f];if(a)var b=c?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!o(t,(function(e,t){if(!i(g,t)&&(y===e||s(y,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},307:(e,t,n)=>{var r=n(7908),o=n(3601),i=n(4939),a=n(3652),s=n(2448),l=n(4794),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=a(p(e),p(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},8632:(e,t,n)=>{var r=n(6963),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:o.call(t,h)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<u;){var y=e[h=c[d]],v=t[h];if(i)var b=l?i(v,y,h,t,e,s):i(y,v,h,e,t,s);if(!(void 0===b?y===v||a(y,v,n,i,s):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},5521:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},6963:(e,t,n)=>{var r=n(2374),o=n(9285),i=n(7137);e.exports=function(e){return r(e,i,o)}},6464:(e,t,n)=>{var r=n(2374),o=n(6134),i=n(6074);e.exports=function(e){return r(e,i,o)}},4286:(e,t,n)=>{var r=n(945);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},6613:(e,t,n)=>{var r=n(2281),o=n(7137);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},4289:(e,t,n)=>{var r=n(9354),o=n(9473);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},1366:(e,t,n)=>{var r=n(7956)(Object.getPrototypeOf,Object);e.exports=r},1896:(t,n,r)=>{var o=r(7908),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,l=o?o.toStringTag:void 0;t.exports=function(t){var n=a.call(t,l),r=t[l];try{t[l]=void 0;var o=!0}catch(e){}var i=s.call(t);return o&&(n?t[l]=r:delete t[l]),i}},9285:(e,t,n)=>{var r=n(2169),o=n(6868),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},6134:(e,t,n)=>{var r=n(5455),o=n(1366),i=n(9285),a=n(6868),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=s},5212:(e,t,n)=>{var r=n(4293),o=n(7188),i=n(4603),a=n(8630),s=n(5080),l=n(6737),c=n(932),u="[object Map]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",m=c(r),g=c(o),y=c(i),v=c(a),b=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=f||o&&x(new o)!=u||i&&x(i.resolve())!=d||a&&x(new a)!=h||s&&x(new s)!=p)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return f;case g:return u;case y:return d;case v:return h;case b:return p}return t}),e.exports=x},9473:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6385:(e,t,n)=>{var r=n(6908),o=n(4521),i=n(4228),a=n(1034),s=n(5085),l=n(6498);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&a(h,u)&&(i(e)||o(e))}},4367:(e,t,n)=>{var r=n(5943);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2923:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},3914:(e,t,n)=>{var r=n(5943),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},5950:(e,t,n)=>{var r=n(5943),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},3606:(e,t,n)=>{var r=n(5943);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},9036:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},2822:(e,t,n)=>{var r=n(3196),o=n(5142),i=n(2802),a=n(1055),s=n(8566);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Symbol]":return a(e)}}},8710:(e,t,n)=>{var r=n(8601),o=n(1366),i=n(9660);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},1034:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1717:(e,t,n)=>{var r=n(4228),o=n(4641),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(a.test(e)||!i.test(e)||null!=t&&e in Object(t))}},945:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7505:(e,t,n)=>{var r=n(2864),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},9660:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2281:(e,t,n)=>{var r=n(2254);e.exports=function(e){return e===e&&!r(e)}},5355:e=>{e.exports=function(){this.__data__=[],this.size=0}},4143:(e,t,n)=>{var r=n(1708),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},7534:(e,t,n)=>{var r=n(1708);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},2250:(e,t,n)=>{var r=n(1708);e.exports=function(e){return r(this.__data__,e)>-1}},1506:(e,t,n)=>{var r=n(1708);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},1763:(e,t,n)=>{var r=n(5140),o=n(5240),i=n(7188);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},6551:(e,t,n)=>{var r=n(4286);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},4134:(e,t,n)=>{var r=n(4286);e.exports=function(e){return r(this,e).get(e)}},2258:(e,t,n)=>{var r=n(4286);e.exports=function(e){return r(this,e).has(e)}},9402:(e,t,n)=>{var r=n(4286);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},2448:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},3454:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8147:(e,t,n)=>{var r=n(8773);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5943:(e,t,n)=>{var r=n(4289)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(7956)(Object.keys,Object);e.exports=r},2700:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},1216:(t,n,r)=>{t=r.nmd(t);var o=r(5521),i=n&&!n.nodeType&&n,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i&&o.process,l=function(){try{var t=a&&a.require&&a.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l},5231:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7956:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},6008:(e,t,n)=>{var r=n(5521),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},2803:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},8576:e=>{e.exports=function(e){return this.__data__.has(e)}},4794:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},1777:(e,t,n)=>{var r=n(5240);e.exports=function(){this.__data__=new r,this.size=0}},6905:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},9008:e=>{e.exports=function(e){return this.__data__.get(e)}},1028:e=>{e.exports=function(e){return this.__data__.has(e)}},276:(e,t,n)=>{var r=n(5240),o=n(7188),i=n(5968);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},9519:(e,t,n)=>{var r=n(8147),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},6498:(e,t,n)=>{var r=n(4641);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},932:t=>{var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},7538:(e,t,n)=>{var r=n(4444);e.exports=function(e){return r(e,5)}},4939:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},5752:(e,t,n)=>{var r=n(696),o=n(8055);e.exports=function(e,t){return e&&r(e,o(t))}},3977:(e,t,n)=>{var r=n(1129);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},5254:(e,t,n)=>{var r=n(9094),o=n(6385);e.exports=function(e,t){return null!=e&&o(e,t,r)}},3183:e=>{e.exports=function(e){return e}},4521:(e,t,n)=>{var r=n(7913),o=n(8153),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},4228:e=>{var t=Array.isArray;e.exports=t},1867:(e,t,n)=>{var r=n(1981),o=n(5085);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},3855:(e,t,n)=>{e=n.nmd(e);var r=n(6008),o=n(2974),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;e.exports=l},1981:(e,t,n)=>{var r=n(6737),o=n(2254);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5085:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1695:(e,t,n)=>{var r=n(7631),o=n(5862),i=n(1216),a=i&&i.isMap,s=a?o(a):r;e.exports=s},2254:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},8153:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1986:(e,t,n)=>{var r=n(6737),o=n(1366),i=n(8153),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},6369:(e,t,n)=>{var r=n(353),o=n(5862),i=n(1216),a=i&&i.isSet,s=a?o(a):r;e.exports=s},3724:(e,t,n)=>{var r=n(6737),o=n(4228),i=n(8153);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},4641:(e,t,n)=>{var r=n(6737),o=n(8153);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},1364:(e,t,n)=>{var r=n(4948),o=n(5862),i=n(1216),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},7137:(e,t,n)=>{var r=n(6020),o=n(689),i=n(1867);e.exports=function(e){return i(e)?r(e):o(e)}},6074:(e,t,n)=>{var r=n(6020),o=n(9098),i=n(1867);e.exports=function(e){return i(e)?r(e,!0):o(e)}},2051:(e,t,n)=>{var r=n(6933),o=n(1304),i=n(6131),a=n(4228);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},8773:(e,t,n)=>{var r=n(5968);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},1612:(e,t,n)=>{var r=n(3132),o=n(9090),i=n(1717),a=n(6498);e.exports=function(e){return i(e)?r(a(e)):o(e)}},6868:e=>{e.exports=function(){return[]}},2974:e=>{e.exports=function(){return!1}},5853:(e,t,n)=>{var r=n(5405);e.exports=function(e){return null==e?"":r(e)}},1213:()=>{!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t,n){var r;r=function(){"use strict";function e(e,t){this.isUndef(e)||1===e?this.input=this.context.createGain():1<e&&(this.input=new Array(e)),this.isUndef(t)||1===t?this.output=this.context.createGain():1<t&&(this.output=new Array(e))}var t;return e.prototype.set=function(t,n,r){if(this.isObject(t))r=n;else if(this.isString(t)){var o={};o[t]=n,t=o}e:for(var i in t){n=t[i];var a=this;if(-1!==i.indexOf(".")){for(var s=i.split("."),l=0;l<s.length-1;l++)if((a=a[s[l]])instanceof e){s.splice(0,l+1);var c=s.join(".");a.set(c,n);continue e}i=s[s.length-1]}var u=a[i];this.isUndef(u)||(e.Signal&&u instanceof e.Signal||e.Param&&u instanceof e.Param?u.value!==n&&(this.isUndef(r)?u.value=n:u.rampTo(n,r)):u instanceof AudioParam?u.value!==n&&(u.value=n):u instanceof e?u.set(n):u!==n&&(a[i]=n))}return this},e.prototype.get=function(t){this.isUndef(t)?t=this._collectDefaults(this.constructor):this.isString(t)&&(t=[t]);for(var n={},r=0;r<t.length;r++){var o=t[r],i=this,a=n;if(-1!==o.indexOf(".")){for(var s=o.split("."),l=0;l<s.length-1;l++){var c=s[l];a[c]=a[c]||{},a=a[c],i=i[c]}o=s[s.length-1]}var u=i[o];this.isObject(t[o])?a[o]=u.get():e.Signal&&u instanceof e.Signal||e.Param&&u instanceof e.Param||u instanceof AudioParam?a[o]=u.value:u instanceof e?a[o]=u.get():this.isFunction(u)||this.isUndef(u)||(a[o]=u)}return n},e.prototype._collectDefaults=function(e){var t=[];if(this.isUndef(e.defaults)||(t=Object.keys(e.defaults)),!this.isUndef(e._super))for(var n=this._collectDefaults(e._super),r=0;r<n.length;r++)-1===t.indexOf(n[r])&&t.push(n[r]);return t},e.prototype.toString=function(){for(var t in e){var n=t[0].match(/^[A-Z]$/),r=e[t]===this.constructor;if(this.isFunction(e[t])&&n&&r)return t}return"Tone"},Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return this.input?this.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return this.output?this.isArray(this.output)?this.output.length:1:0}}),e.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},e.prototype.connect=function(e,t,n){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].connect(e,0,n)):this.output.connect(e,t,n),this},e.prototype.disconnect=function(e,t,n){this.isArray(this.output)?this.isNumber(e)?this.output[e].disconnect():(t=this.defaultArg(t,0),this.output[t].disconnect(e,0,n)):this.output.disconnect.apply(this.output,arguments)},e.prototype.connectSeries=function(){if(1<arguments.length)for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];e.connect(n),e=n}return this},e.prototype.chain=function(){if(0<arguments.length)for(var e=this,t=0;t<arguments.length;t++){var n=arguments[t];e.connect(n),e=n}return this},e.prototype.fan=function(){if(0<arguments.length)for(var e=0;e<arguments.length;e++)this.connect(arguments[e]);return this},AudioNode.prototype.chain=e.prototype.chain,AudioNode.prototype.fan=e.prototype.fan,e.prototype.defaultArg=function(e,t){if(this.isObject(e)&&this.isObject(t)){var n={};for(var r in e)n[r]=this.defaultArg(t[r],e[r]);for(var o in t)n[o]=this.defaultArg(e[o],t[o]);return n}return this.isUndef(e)?t:e},e.prototype.optionsObject=function(e,t,n){var r={};if(1===e.length&&this.isObject(e[0]))r=e[0];else for(var o=0;o<t.length;o++)r[t[o]]=e[o];return this.isUndef(n)?r:this.defaultArg(r,n)},e.prototype.isUndef=function(e){return void 0===e},e.prototype.isFunction=function(e){return"function"==typeof e},e.prototype.isNumber=function(e){return"number"==typeof e},e.prototype.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object},e.prototype.isBoolean=function(e){return"boolean"==typeof e},e.prototype.isArray=function(e){return Array.isArray(e)},e.prototype.isString=function(e){return"string"==typeof e},e.noOp=function(){},e.prototype._readOnly=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._readOnly(e[t]);else Object.defineProperty(this,e,{writable:!1,enumerable:!0})},e.prototype._writable=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._writable(e[t]);else Object.defineProperty(this,e,{writable:!0})},e.State={Started:"started",Stopped:"stopped",Paused:"paused"},e.prototype.equalPowerScale=function(e){var t=.5*Math.PI;return Math.sin(e*t)},e.prototype.dbToGain=function(e){return Math.pow(2,e/6)},e.prototype.gainToDb=function(e){return Math.log(e)/Math.LN10*20},e.prototype.intervalToFrequencyRatio=function(e){return Math.pow(2,e/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.extend=function(t,n){function r(){}e.prototype.isUndef(n)&&(n=e),r.prototype=n.prototype,t.prototype=new r,(t.prototype.constructor=t)._super=n},Object.defineProperty(e,"context",{get:function(){return t},set:function(n){t=e.Context&&n instanceof e.Context?n:new e.Context(n),e.Context&&e.Context.emit("init",t)}}),Object.defineProperty(e.prototype,"context",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,"supported",{get:function(){var e=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),t=window.hasOwnProperty("Promise"),n=window.hasOwnProperty("Worker");return e&&t&&n}}),e.version="r10",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+e.version+" * ","background: #000; color: #fff"),e}.call(t,n,t,e),void 0===r||(e.exports=r)},function(e,t,n){var r,o;r=[n(0),n(2),n(10)],void 0===(o=function(e){"use strict";return e.Multiply=function(t){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new e.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(t,0)},e.extend(e.Multiply,e.Signal),e.Multiply.prototype.dispose=function(){return e.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},e.Multiply}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6),n(9),n(18),n(10)],o=function(e){"use strict";return e.Signal=function(){var t=this.optionsObject(arguments,["value","units"],e.Signal.defaults);this.output=this._gain=this.context.createGain(),t.param=this._gain.gain,e.Param.call(this,t),this.input=this._param=this._gain.gain,this.context.getConstant(1).chain(this._gain)},e.extend(e.Signal,e.Param),e.Signal.defaults={value:0,units:e.Type.Default,convert:!0},e.Signal.prototype.connect=e.SignalBase.prototype.connect,e.Signal.prototype.dispose=function(){return e.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},e.Signal}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(22),o=n.n(r),i=n(0),a=n.n(i),s=n(12);n.n(s);e.TONE_SILENCE_VERSION_LOGGING=!0;var l=new window.AudioContext;function c(){return l}function u(e,t){var n=e;return e instanceof p5.Element?n=e.elt:e instanceof Array&&e[0]instanceof p5.Element&&(n=e.map((function(e){return e.elt}))),o()(l,n,t)}a.a.setContext(l),t.a=l}).call(this,n(26))},function(e,t,n){var r,o;r=[n(0),n(2),n(10)],void 0===(o=function(e){"use strict";return e.Add=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new e.Gain,this._param=this.input[1]=new e.Signal(t),this._param.connect(this._sum)},e.extend(e.Add,e.Signal),e.Add.prototype.dispose=function(){return e.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},e.Add}.apply(t,r))||(e.exports=o)},function(e,t){e.exports={recorderProcessor:"recorder-processor",soundFileProcessor:"sound-file-processor",amplitudeProcessor:"amplitude-processor"}},function(e,t,n){var r,o;r=[n(0),n(15)],void 0===(o=function(e){"use strict";return e.WaveShaper=function(e,t){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||this.isUndef(e)?this._curve=new Float32Array(this.defaultArg(e,1024)):this.isFunction(e)&&(this._curve=new Float32Array(this.defaultArg(t,1024)),this.setMap(e))},e.extend(e.WaveShaper,e.SignalBase),e.WaveShaper.prototype.setMap=function(e){for(var t=0,n=this._curve.length;t<n;t++){var r=t/(n-1)*2-1;this._curve[t]=e(r,t)}return this._shaper.curve=this._curve,this},Object.defineProperty(e.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(e){this._curve=new Float32Array(e),this._shaper.curve=this._curve}}),Object.defineProperty(e.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(e){if(-1===["none","2x","4x"].indexOf(e))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=e}}),e.WaveShaper.prototype.dispose=function(){return e.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},e.WaveShaper}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(2),n(19)],o=function(e){"use strict";return e.TimelineSignal=function(){var t=this.optionsObject(arguments,["value","units"],e.Signal.defaults);this._events=new e.Timeline(10),e.Signal.apply(this,t),t.param=this._param,e.Param.call(this,t),this._initial=this._fromUnits(this._param.value)},e.extend(e.TimelineSignal,e.Param),e.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(e.TimelineSignal.prototype,"value",{get:function(){var e=this.now(),t=this.getValueAtTime(e);return this._toUnits(t)},set:function(e){var t=this._fromUnits(e);this._initial=t,this.cancelScheduledValues(),this._param.value=t}}),e.TimelineSignal.prototype.setValueAtTime=function(t,n){return t=this._fromUnits(t),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Set,value:t,time:n}),this._param.setValueAtTime(t,n),this},e.TimelineSignal.prototype.linearRampToValueAtTime=function(t,n){return t=this._fromUnits(t),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Linear,value:t,time:n}),this._param.linearRampToValueAtTime(t,n),this},e.TimelineSignal.prototype.exponentialRampToValueAtTime=function(t,n){n=this.toSeconds(n);var r=this._searchBefore(n);r&&0===r.value&&this.setValueAtTime(this._minOutput,r.time),t=this._fromUnits(t);var o=Math.max(t,this._minOutput);return this._events.add({type:e.TimelineSignal.Type.Exponential,value:o,time:n}),t<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(t,n),this},e.TimelineSignal.prototype.setTargetAtTime=function(t,n,r){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),r=Math.max(this._minOutput,r),n=this.toSeconds(n),this._events.add({type:e.TimelineSignal.Type.Target,value:t,time:n,constant:r}),this._param.setTargetAtTime(t,n,r),this},e.TimelineSignal.prototype.setValueCurveAtTime=function(t,n,r,o){o=this.defaultArg(o,1);for(var i=new Array(t.length),a=0;a<i.length;a++)i[a]=this._fromUnits(t[a])*o;n=this.toSeconds(n),r=this.toSeconds(r),this._events.add({type:e.TimelineSignal.Type.Curve,value:i,time:n,duration:r}),this._param.setValueAtTime(i[0],n);for(var s=1;s<i.length;s++){var l=n+s/(i.length-1)*r;this._param.linearRampToValueAtTime(i[s],l)}return this},e.TimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toSeconds(e),this._events.cancel(e),this._param.cancelScheduledValues(e),this},e.TimelineSignal.prototype.setRampPoint=function(t){t=this.toSeconds(t);var n=this._toUnits(this.getValueAtTime(t)),r=this._searchBefore(t);if(r&&r.time===t)this.cancelScheduledValues(t+this.sampleTime);else if(r&&r.type===e.TimelineSignal.Type.Curve&&r.time+r.duration>t)this.cancelScheduledValues(t),this.linearRampToValueAtTime(n,t);else{var o=this._searchAfter(t);o&&(this.cancelScheduledValues(t),o.type===e.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(n,t):o.type===e.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(n,t)),this.setValueAtTime(n,t)}return this},e.TimelineSignal.prototype.linearRampToValueBetween=function(e,t,n){return this.setRampPoint(t),this.linearRampToValueAtTime(e,n),this},e.TimelineSignal.prototype.exponentialRampToValueBetween=function(e,t,n){return this.setRampPoint(t),this.exponentialRampToValueAtTime(e,n),this},e.TimelineSignal.prototype._searchBefore=function(e){return this._events.get(e)},e.TimelineSignal.prototype._searchAfter=function(e){return this._events.getAfter(e)},e.TimelineSignal.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var n=this._searchAfter(t),r=this._searchBefore(t),o=this._initial;if(null===r)o=this._initial;else if(r.type===e.TimelineSignal.Type.Target){var i,a=this._events.getBefore(r.time);i=null===a?this._initial:a.value,o=this._exponentialApproach(r.time,i,r.value,r.constant,t)}else o=r.type===e.TimelineSignal.Type.Curve?this._curveInterpolate(r.time,r.value,r.duration,t):null===n?r.value:n.type===e.TimelineSignal.Type.Linear?this._linearInterpolate(r.time,r.value,n.time,n.value,t):n.type===e.TimelineSignal.Type.Exponential?this._exponentialInterpolate(r.time,r.value,n.time,n.value,t):r.value;return o},e.TimelineSignal.prototype.connect=e.SignalBase.prototype.connect,e.TimelineSignal.prototype._exponentialApproach=function(e,t,n,r,o){return n+(t-n)*Math.exp(-(o-e)/r)},e.TimelineSignal.prototype._linearInterpolate=function(e,t,n,r,o){return t+(o-e)/(n-e)*(r-t)},e.TimelineSignal.prototype._exponentialInterpolate=function(e,t,n,r,o){return(t=Math.max(this._minOutput,t))*Math.pow(r/t,(o-e)/(n-e))},e.TimelineSignal.prototype._curveInterpolate=function(e,t,n,r){var o=t.length;if(e+n<=r)return t[o-1];if(r<=e)return t[0];var i=(r-e)/n,a=Math.floor((o-1)*i),s=Math.ceil((o-1)*i),l=t[a],c=t[s];return s===a?l:this._linearInterpolate(a,l,s,c,i*(o-1))},e.TimelineSignal.prototype.dispose=function(){e.Signal.prototype.dispose.call(this),e.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},e.TimelineSignal}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(4),n(1),n(2)],void 0===(o=function(e){"use strict";return e.Scale=function(t,n){this._outputMin=this.defaultArg(t,0),this._outputMax=this.defaultArg(n,1),this._scale=this.input=new e.Multiply(1),this._add=this.output=new e.Add(0),this._scale.connect(this._add),this._setRange()},e.extend(e.Scale,e.SignalBase),Object.defineProperty(e.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(e){this._outputMin=e,this._setRange()}}),Object.defineProperty(e.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(e){this._outputMax=e,this._setRange()}}),e.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},e.Scale.prototype.dispose=function(){return e.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},e.Scale}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(16),n(30),n(31),n(12)],void 0===(o=function(e){return e.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},e.prototype.toSeconds=function(t){return this.isNumber(t)?t:this.isUndef(t)?this.now():this.isString(t)?new e.Time(t).toSeconds():t instanceof e.TimeBase?t.toSeconds():void 0},e.prototype.toFrequency=function(t){return this.isNumber(t)?t:this.isString(t)||this.isUndef(t)?new e.Frequency(t).valueOf():t instanceof e.TimeBase?t.toFrequency():void 0},e.prototype.toTicks=function(t){return this.isNumber(t)||this.isString(t)?new e.TransportTime(t).toTicks():this.isUndef(t)?e.Transport.ticks:t instanceof e.TimeBase?t.toTicks():void 0},e}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(18),n(9)],o=function(e){"use strict";return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e.Gain=function(){var t=this.optionsObject(arguments,["gain","units"],e.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new e.Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},e.extend(e.Gain),e.Gain.defaults={gain:1,convert:!0},e.Gain.prototype.dispose=function(){e.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},e.prototype.createInsOuts=function(t,n){1===t?this.input=new e.Gain:1<t&&(this.input=new Array(t)),1===n?this.output=new e.Gain:1<n&&(this.output=new Array(t))},e.Gain}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(7),n(39),n(14),n(12)],o=function(e){"use strict";return e.Clock=function(){e.Emitter.call(this);var t=this.optionsObject(arguments,["callback","frequency"],e.Clock.defaults);this.callback=t.callback,this._nextTick=0,this._lastState=e.State.Stopped,this.frequency=new e.TimelineSignal(t.frequency,e.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new e.TimelineState(e.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},e.extend(e.Clock,e.Emitter),e.Clock.defaults={callback:e.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(e.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),e.Clock.prototype.start=function(t,n){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==e.State.Started&&this._state.add({state:e.State.Started,time:t,offset:n}),this},e.Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(e.State.Stopped,t),this},e.Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===e.State.Started&&this._state.setStateAtTime(e.State.Paused,t),this},e.Clock.prototype._loop=function(){for(var t=this.now()+this.context.lookAhead+this.context.updateInterval+2*this.context.lag;t>this._nextTick&&this._state;){var n=this._state.getValueAtTime(this._nextTick);if(n!==this._lastState){this._lastState=n;var r=this._state.get(this._nextTick);n===e.State.Started?(this._nextTick=r.time,this.isUndef(r.offset)||(this.ticks=r.offset),this.emit("start",r.time,this.ticks)):n===e.State.Stopped?(this.ticks=0,this.emit("stop",r.time)):n===e.State.Paused&&this.emit("pause",r.time)}var o=this._nextTick;this.frequency&&(this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),n===e.State.Started&&(this.callback(o),this.ticks++))}},e.Clock.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)},e.Clock.prototype.dispose=function(){e.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},e.Clock}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(14)],o=function(e){function t(t,r,o){if(t.input)Array.isArray(t.input)?(e.prototype.isUndef(o)&&(o=0),this.connect(t.input[o])):this.connect(t.input,r,o);else try{t instanceof AudioNode?n.call(this,t,r,o):n.call(this,t,r)}catch(r){throw new Error("error connecting to node: "+t+"\n"+r)}}var n,r;return!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),e.Context=function(t){for(var n in e.Emitter.call(this),t=t||new window.AudioContext,this._context=t,this._context)this._defineProperty(this._context,n);this._latencyHint="interactive",this._lookAhead=.1,this._updateInterval=this._lookAhead/3,this._computedUpdateInterval=0,this._worker=this._createWorker(),this._constants={}},e.extend(e.Context,e.Emitter),e.Emitter.mixin(e.Context),e.Context.prototype._defineProperty=function(e,t){this.isUndef(this[t])&&Object.defineProperty(this,t,{get:function(){return"function"==typeof e[t]?e[t].bind(e):e[t]},set:function(n){e[t]=n}})},e.Context.prototype.now=function(){return this._context.currentTime},e.Context.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var e=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),t=URL.createObjectURL(e),n=new Worker(t);return n.addEventListener("message",function(){this.emit("tick")}.bind(this)),n.addEventListener("message",function(){var e=this.now();if(this.isNumber(this._lastUpdate)){var t=e-this._lastUpdate;this._computedUpdateInterval=Math.max(t,.97*this._computedUpdateInterval)}this._lastUpdate=e}.bind(this)),n},e.Context.prototype.getConstant=function(e){if(this._constants[e])return this._constants[e];for(var t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0),r=0;r<n.length;r++)n[r]=e;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=t,o.loop=!0,o.start(0),this._constants[e]=o},Object.defineProperty(e.Context.prototype,"lag",{get:function(){var e=this._computedUpdateInterval-this._updateInterval;return Math.max(e,0)}}),Object.defineProperty(e.Context.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(e){this._lookAhead=e}}),Object.defineProperty(e.Context.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,e.prototype.blockTime),this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var t=e;if(this._latencyHint=e,this.isString(e))switch(e){case"interactive":t=.1,this._context.latencyHint=e;break;case"playback":t=.8,this._context.latencyHint=e;break;case"balanced":t=.25,this._context.latencyHint=e;break;case"fastest":t=.01}this.lookAhead=t,this.updateInterval=t/3}}),e.supported?(n=AudioNode.prototype.connect,r=AudioNode.prototype.disconnect,AudioNode.prototype.connect!==t&&(AudioNode.prototype.connect=t,AudioNode.prototype.disconnect=function(t,n,o){if(t&&t.input&&Array.isArray(t.input))e.prototype.isUndef(o)&&(o=0),this.disconnect(t.input[o],n,o);else if(t&&t.input)this.disconnect(t.input,n,o);else try{r.apply(this,arguments)}catch(n){throw new Error("error disconnecting node: "+t+"\n"+n)}}),e.context=new e.Context):console.warn("This browser does not support Tone.js"),e.Context}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(4),n(20),n(2),n(10)],void 0===(o=function(e){"use strict";return e.Subtract=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new e.Gain,this._neg=new e.Negate,this._param=this.input[1]=new e.Signal(t),this._param.chain(this._neg,this._sum)},e.extend(e.Subtract,e.Signal),e.Subtract.prototype.dispose=function(){return e.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},e.Subtract}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],o=function(e){"use strict";return e.Emitter=function(){this._events={}},e.extend(e.Emitter),e.Emitter.prototype.on=function(e,t){for(var n=e.split(/\W+/),r=0;r<n.length;r++){var o=n[r];this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(t)}return this},e.Emitter.prototype.off=function(t,n){for(var r=t.split(/\W+/),o=0;o<r.length;o++)if(t=r[o],this._events.hasOwnProperty(t))if(e.prototype.isUndef(n))this._events[t]=[];else for(var i=this._events[t],a=0;a<i.length;a++)i[a]===n&&i.splice(a,1);return this},e.Emitter.prototype.emit=function(e){if(this._events){var t=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(e))for(var n=this._events[e],r=0,o=n.length;r<o;r++)n[r].apply(this,t)}return this},e.Emitter.mixin=function(t){var n=["on","off","emit"];t._events={};for(var r=0;r<n.length;r++){var o=n[r],i=e.Emitter.prototype[o];t[o]=i}},e.Emitter.prototype.dispose=function(){return e.prototype.dispose.call(this),this._events=null,this},e.Emitter}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){"use strict";return e.SignalBase=function(){},e.extend(e.SignalBase),e.SignalBase.prototype.connect=function(t,n,r){return e.Signal&&e.Signal===t.constructor||e.Param&&e.Param===t.constructor||e.TimelineSignal&&e.TimelineSignal===t.constructor?(t._param.cancelScheduledValues(0),t._param.value=0,t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.value=0),e.prototype.connect.call(this,t,n,r),this},e.SignalBase}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(17)],void 0===(o=function(e){return e.Time=function(t,n){if(!(this instanceof e.Time))return new e.Time(t,n);this._plusNow=!1,e.TimeBase.call(this,t,n)},e.extend(e.Time,e.TimeBase),e.Time.prototype._unaryExpressions=Object.create(e.TimeBase.prototype._unaryExpressions),e.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){return e.Transport.nextSubdivision(t())}},e.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(e){return this._plusNow=!0,e()}},e.Time.prototype.quantize=function(e,t){return t=this.defaultArg(t,1),this._expr=function(e,t,n){return e=e(),t=t.toSeconds(),e+(Math.round(e/t)*t-e)*n}.bind(this,this._expr,new this.constructor(e),t),this},e.Time.prototype.addNow=function(){return this._plusNow=!0,this},e.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},e.Time.prototype.copy=function(t){return e.TimeBase.prototype.copy.call(this,t),this._plusNow=t._plusNow,this},e.Time.prototype.toNotation=function(){var e=this.toSeconds(),t=this._toNotationHelper(e,["1m","2n","4n","8n","16n","32n","64n","128n"]),n=this._toNotationHelper(e,["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"]);return n.split("+").length<t.split("+").length?n:t},e.Time.prototype._toNotationHelper=function(e,t){for(var n=this._notationToUnits(t[t.length-1]),r="",o=0;o<t.length;o++){var i=this._notationToUnits(t[o]),a=e/i;if(1-a%1<1e-6&&(a+=1e-6),0<(a=Math.floor(a))){if(r+=1===a?t[o]:a.toString()+"*"+t[o],(e-=a*i)<n)break;r+=" + "}}return""===r&&(r="0"),r},e.Time.prototype._notationToUnits=function(e){for(var t=this._primaryExpressions,n=[t.n,t.t,t.m],r=0;r<n.length;r++){var o=n[r],i=e.match(o.regexp);if(i)return o.method.call(this,i[1])}},e.Time.prototype.toBarsBeatsSixteenths=function(){var e=this._beatsToUnits(1),t=this.toSeconds()/e,n=Math.floor(t/this._timeSignature()),r=t%1*4;return t=Math.floor(t)%this._timeSignature(),3<(r=r.toString()).length&&(r=parseFloat(r).toFixed(3)),[n,t,r].join(":")},e.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*e.Transport.PPQ)},e.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},e.Time.prototype.toSeconds=function(){return this.valueOf()},e.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},e.Time}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.TimeBase=function(t,n){if(!(this instanceof e.TimeBase))return new e.TimeBase(t,n);if(this._expr=this._noOp,t instanceof e.TimeBase)this.copy(t);else if(!this.isUndef(n)||this.isNumber(t)){n=this.defaultArg(n,this._defaultUnits);var r=this._primaryExpressions[n].method;this._expr=r.bind(this,t)}else this.isString(t)?this.set(t):this.isUndef(t)&&(this._expr=this._defaultExpr())},e.extend(e.TimeBase),e.TimeBase.prototype.set=function(e){return this._expr=this._parseExprString(e),this},e.TimeBase.prototype.clone=function(){var e=new this.constructor;return e.copy(this),e},e.TimeBase.prototype.copy=function(e){var t=e._expr();return this.set(t)},e.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(e){return 1===(e=parseInt(e))?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/e)}},t:{regexp:/^(\d+)t/i,method:function(e){return e=parseInt(e),this._beatsToUnits(8/(3*parseInt(e)))}},m:{regexp:/^(\d+)m/i,method:function(e){return this._beatsToUnits(parseInt(e)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(e){return this._ticksToUnits(parseInt(e))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(e){return this._frequencyToUnits(parseFloat(e))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(e,t,n){var r=0;return e&&"0"!==e&&(r+=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&"0"!==t&&(r+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(e){return this._secondsToUnits(parseFloat(e))}},samples:{regexp:/^(\d+)samples/,method:function(e){return parseInt(e)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(e){return this._primaryExpressions[this._defaultUnits].method.call(this,e)}}},e.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(e,t){return e()+t()}},"-":{regexp:/^\-/,precedence:2,method:function(e,t){return e()-t()}},"*":{regexp:/^\*/,precedence:1,method:function(e,t){return e()*t()}},"/":{regexp:/^\//,precedence:1,method:function(e,t){return e()/t()}}},e.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(e){return-e()}}},e.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},e.TimeBase.prototype._tokenize=function(e){for(var t=-1,n=[];0<e.length;){var r=o(e=e.trim(),this);n.push(r),e=e.substr(r.value.length)}function o(e,t){for(var n=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],r=0;r<n.length;r++){var o=t[n[r]];for(var i in o){var a=o[i],s=a.regexp,l=e.match(s);if(null!==l)return{method:a.method,precedence:a.precedence,regexp:a.regexp,value:l[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+e)}return{next:function(){return n[++t]},peek:function(){return n[t+1]}}},e.TimeBase.prototype._matchGroup=function(e,t,n){if(!this.isUndef(e))for(var r in t){var o=t[r];if(o.regexp.test(e.value)){if(this.isUndef(n))return o;if(o.precedence===n)return o}}return!1},e.TimeBase.prototype._parseBinary=function(e,t){var n;this.isUndef(t)&&(t=2),n=t<0?this._parseUnary(e):this._parseBinary(e,t-1);for(var r=e.peek();r&&this._matchGroup(r,this._binaryExpressions,t);)n=(r=e.next()).method.bind(this,n,this._parseBinary(e,t-1)),r=e.peek();return n},e.TimeBase.prototype._parseUnary=function(e){var t,n;t=e.peek();var r=this._matchGroup(t,this._unaryExpressions);return r?(t=e.next(),n=this._parseUnary(e),r.method.bind(this,n)):this._parsePrimary(e)},e.TimeBase.prototype._parsePrimary=function(e){var t,n;if(t=e.peek(),this.isUndef(t))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(t,this._primaryExpressions)){var r=(t=e.next()).value.match(t.regexp);return t.method.bind(this,r[1],r[2],r[3])}if(t&&"("===t.value){if(e.next(),n=this._parseBinary(e),!(t=e.next())||")"!==t.value)throw new SyntaxError("Expected )");return n}throw new SyntaxError("Tone.TimeBase: Cannot process token "+t.value)},e.TimeBase.prototype._parseExprString=function(e){this.isString(e)||(e=e.toString());var t=this._tokenize(e);return this._parseBinary(t)},e.TimeBase.prototype._noOp=function(){return 0},e.TimeBase.prototype._defaultExpr=function(){return this._noOp},e.TimeBase.prototype._defaultUnits="s",e.TimeBase.prototype._frequencyToUnits=function(e){return 1/e},e.TimeBase.prototype._beatsToUnits=function(t){return 60/e.Transport.bpm.value*t},e.TimeBase.prototype._secondsToUnits=function(e){return e},e.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/e.Transport.PPQ)},e.TimeBase.prototype._timeSignature=function(){return e.Transport.timeSignature},e.TimeBase.prototype._pushExpr=function(t,n,r){return t instanceof e.TimeBase||(t=new this.constructor(t,r)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,t._expr),this},e.TimeBase.prototype.add=function(e,t){return this._pushExpr(e,"+",t)},e.TimeBase.prototype.sub=function(e,t){return this._pushExpr(e,"-",t)},e.TimeBase.prototype.mult=function(e,t){return this._pushExpr(e,"*",t)},e.TimeBase.prototype.div=function(e,t){return this._pushExpr(e,"/",t)},e.TimeBase.prototype.valueOf=function(){return this._expr()},e.TimeBase.prototype.dispose=function(){this._expr=null},e.TimeBase}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(9)],o=function(e){"use strict";return e.Param=function(){var t=this.optionsObject(arguments,["param","units","convert"],e.Param.defaults);this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._lfo=null,this.isObject(t.lfo)?this.value=t.lfo:this.isUndef(t.value)||(this.value=t.value)},e.extend(e.Param),e.Param.defaults={units:e.Type.Default,convert:!0,param:void 0},Object.defineProperty(e.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){if(this.isObject(t)){if(this.isUndef(e.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new e.LFO(t).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(t);this._param.cancelScheduledValues(0),this._param.value=n}}}),e.Param.prototype._fromUnits=function(t){if(!this.convert&&!this.isUndef(this.convert))return t;switch(this.units){case e.Type.Time:return this.toSeconds(t);case e.Type.Frequency:return this.toFrequency(t);case e.Type.Decibels:return this.dbToGain(t);case e.Type.NormalRange:return Math.min(Math.max(t,0),1);case e.Type.AudioRange:return Math.min(Math.max(t,-1),1);case e.Type.Positive:return Math.max(t,0);default:return t}},e.Param.prototype._toUnits=function(t){return(this.convert||this.isUndef(this.convert))&&this.units===e.Type.Decibels?this.gainToDb(t):t},e.Param.prototype._minOutput=1e-5,e.Param.prototype.setValueAtTime=function(e,t){return e=this._fromUnits(e),(t=this.toSeconds(t))<=this.now()+this.blockTime?this._param.value=e:this._param.setValueAtTime(e,t),this},e.Param.prototype.setRampPoint=function(e){e=this.defaultArg(e,this.now());var t=this._param.value;return 0===t&&(t=this._minOutput),this._param.setValueAtTime(t,e),this},e.Param.prototype.linearRampToValueAtTime=function(e,t){return e=this._fromUnits(e),this._param.linearRampToValueAtTime(e,this.toSeconds(t)),this},e.Param.prototype.exponentialRampToValueAtTime=function(e,t){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),this._param.exponentialRampToValueAtTime(e,this.toSeconds(t)),this},e.Param.prototype.exponentialRampToValue=function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this},e.Param.prototype.linearRampToValue=function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this},e.Param.prototype.setTargetAtTime=function(e,t,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(e,this.toSeconds(t),n),this},e.Param.prototype.setValueCurveAtTime=function(e,t,n){for(var r=0;r<e.length;r++)e[r]=this._fromUnits(e[r]);return this._param.setValueCurveAtTime(e,this.toSeconds(t),this.toSeconds(n)),this},e.Param.prototype.cancelScheduledValues=function(e){return this._param.cancelScheduledValues(this.toSeconds(e)),this},e.Param.prototype.rampTo=function(t,n,r){return n=this.defaultArg(n,0),this.units===e.Type.Frequency||this.units===e.Type.BPM||this.units===e.Type.Decibels?this.exponentialRampToValue(t,n,r):this.linearRampToValue(t,n,r),this},Object.defineProperty(e.Param.prototype,"lfo",{get:function(){return this._lfo}}),e.Param.prototype.dispose=function(){return e.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},e.Param}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(9)],o=function(e){"use strict";return e.Timeline=function(){var t=this.optionsObject(arguments,["memory"],e.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=t.memory},e.extend(e.Timeline),e.Timeline.defaults={memory:1/0},Object.defineProperty(e.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),e.Timeline.prototype.add=function(e){if(this.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var t=this._search(e.time);this._timeline.splice(t+1,0,e)}else this._timeline.push(e);if(this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},e.Timeline.prototype.remove=function(e){if(this._iterating)this._toRemove.push(e);else{var t=this._timeline.indexOf(e);-1!==t&&this._timeline.splice(t,1)}return this},e.Timeline.prototype.get=function(e){var t=this._search(e);return-1!==t?this._timeline[t]:null},e.Timeline.prototype.peek=function(){return this._timeline[0]},e.Timeline.prototype.shift=function(){return this._timeline.shift()},e.Timeline.prototype.getAfter=function(e){var t=this._search(e);return t+1<this._timeline.length?this._timeline[t+1]:null},e.Timeline.prototype.getBefore=function(e){var t=this._timeline.length;if(0<t&&this._timeline[t-1].time<e)return this._timeline[t-1];var n=this._search(e);return 0<=n-1?this._timeline[n-1]:null},e.Timeline.prototype.cancel=function(e){if(1<this._timeline.length){var t=this._search(e);if(0<=t)if(this._timeline[t].time===e){for(var n=t;0<=n&&this._timeline[n].time===e;n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=e&&(this._timeline=[]);return this},e.Timeline.prototype.cancelBefore=function(e){if(this._timeline.length){var t=this._search(e);0<=t&&(this._timeline=this._timeline.slice(t+1))}return this},e.Timeline.prototype._search=function(e){var t=0,n=this._timeline.length,r=n;if(0<n&&this._timeline[n-1].time<=e)return n-1;for(;t<r;){var o=Math.floor(t+(r-t)/2),i=this._timeline[o],a=this._timeline[o+1];if(i.time===e){for(var s=o;s<this._timeline.length;s++)this._timeline[s].time===e&&(o=s);return o}if(i.time<e&&a.time>e)return o;i.time>e?r=o:i.time<e&&(t=o+1)}return-1},e.Timeline.prototype._iterate=function(e,t,n){this._iterating=!0,t=this.defaultArg(t,0),n=this.defaultArg(n,this._timeline.length-1);for(var r=t;r<=n;r++)e(this._timeline[r]);if(this._iterating=!1,0<this._toRemove.length){for(var o=0;o<this._toRemove.length;o++){var i=this._timeline.indexOf(this._toRemove[o]);-1!==i&&this._timeline.splice(i,1)}this._toRemove=[]}},e.Timeline.prototype.forEach=function(e){return this._iterate(e),this},e.Timeline.prototype.forEachBefore=function(e,t){var n=this._search(e);return-1!==n&&this._iterate(t,0,n),this},e.Timeline.prototype.forEachAfter=function(e,t){var n=this._search(e);return this._iterate(t,n+1),this},e.Timeline.prototype.forEachFrom=function(e,t){for(var n=this._search(e);0<=n&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this},e.Timeline.prototype.forEachAtTime=function(e,t){var n=this._search(e);return-1!==n&&this._iterate((function(n){n.time===e&&t(n)}),0,n),this},e.Timeline.prototype.dispose=function(){e.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},e.Timeline}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(1),n(2)],void 0===(o=function(e){"use strict";return e.Negate=function(){this._multiply=this.input=this.output=new e.Multiply(-1)},e.extend(e.Negate,e.SignalBase),e.Negate.prototype.dispose=function(){return e.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},e.Negate}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(2),n(1),n(6)],void 0===(o=function(e){"use strict";return e.GreaterThanZero=function(){this._thresh=this.output=new e.WaveShaper((function(e){return e<=0?0:1}),127),this._scale=this.input=new e.Multiply(1e4),this._scale.connect(this._thresh)},e.extend(e.GreaterThanZero,e.SignalBase),e.GreaterThanZero.prototype.dispose=function(){return e.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},e.GreaterThanZero}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o,i;o=[],void 0===(i="function"===typeof(r=function(){var e=function(e,t){this._dragged=!1,this._element=e,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,t),e.addEventListener("touchstart",this._bindedEnd),e.addEventListener("touchmove",this._bindedMove),e.addEventListener("touchend",this._bindedEnd),e.addEventListener("mouseup",this._bindedEnd)};function t(e){return"running"===e.state}return e.prototype._moved=function(e){this._dragged=!0},e.prototype._ended=function(e){this._dragged||function(e){var t=e.createBuffer(1,1,e.sampleRate),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(0),e.resume&&e.resume()}(e),this._dragged=!1},e.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},function(n,r,o){var i=new Promise((function(e){!function(e,n){t(e)?n():function r(){t(e)?n():(requestAnimationFrame(r),e.resume&&e.resume())}()}(n,e)})),a=[];return function t(n,r,o){if(Array.isArray(n)||NodeList&&n instanceof NodeList)for(var i=0;i<n.length;i++)t(n[i],r,o);else if("string"==typeof n)t(document.querySelectorAll(n),r,o);else if(n.jquery&&"function"==typeof n.toArray)t(n.toArray(),r,o);else if(Element&&n instanceof Element){var a=new e(n,o);r.push(a)}}(r=r||document.body,a,n),i.then((function(){for(var e=0;e<a.length;e++)a[e].dispose();a=null,o&&o()})),i}})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){var r,o;r=[n(0),n(2),n(32),n(38),n(10)],void 0===(o=function(e){"use strict";return e.CrossFade=function(t){this.createInsOuts(2,1),this.a=this.input[0]=new e.Gain,this.b=this.input[1]=new e.Gain,this.fade=new e.Signal(this.defaultArg(t,.5),e.Type.NormalRange),this._equalPowerA=new e.EqualPowerGain,this._equalPowerB=new e.EqualPowerGain,this._invert=new e.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},e.extend(e.CrossFade),e.CrossFade.prototype.dispose=function(){return e.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},e.CrossFade}.apply(t,r))||(e.exports=o)},function(e,t){!function(){var e,t=[];function n(e){var n=this,o={},i=-1;this.parameters.forEach((function(e,r){var a=t[++i]||(t[i]=new Float32Array(n.bufferSize));a.fill(e.value),o[r]=a})),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime);var a=r(e.inputBuffer),s=r(e.outputBuffer);this.instance.process([a],[s],o)}function r(e){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t}function o(e){return e.$$processors||(e.$$processors={})}function i(e){this.$$context=e}"function"!=typeof AudioWorkletNode&&(self.AudioWorkletNode=function(t,r,i){var a=o(t)[r],s=t.createScriptProcessor(void 0,2,i&&i.outputChannelCount?i.outputChannelCount[0]:2);if(s.parameters=new Map,a.properties)for(var l=0;l<a.properties.length;l++){var c=a.properties[l],u=t.createGain().gain;u.value=c.defaultValue,s.parameters.set(c.name,u)}var d=new MessageChannel;e=d.port2;var h=new a.Processor(i||{});return e=null,s.port=d.port1,s.processor=a,s.instance=h,s.onaudioprocess=n,s},Object.defineProperty((self.AudioContext||self.webkitAudioContext).prototype,"audioWorklet",{get:function(){return this.$$audioWorklet||(this.$$audioWorklet=new self.AudioWorklet(this))}}),self.AudioWorklet=(i.prototype.addModule=function(t,n){var r=this;return fetch(t).then((function(e){if(!e.ok)throw Error(e.status);return e.text()})).then((function(t){var i={sampleRate:0,currentTime:0,AudioWorkletProcessor:function(){this.port=e},registerProcessor:function(e,t){o(r.$$context)[e]={realm:a,context:i,Processor:t,properties:t.parameterDescriptors||[]}}},a=new function(e,t){var n=document.createElement("iframe");n.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",t.appendChild(n);var r=n.contentWindow,o=r.document,i="var window,$hook";for(var a in r)a in e||"eval"===a||(i+=",",i+=a);for(var s in e)i+=",",i+=s,i+="=self.",i+=s;var l=o.createElement("script");l.appendChild(o.createTextNode('function $hook(self,console) {"use strict";\n        '+i+";return function() {return eval(arguments[0])}}")),o.body.appendChild(l),this.exec=r.$hook(e,console)}(i.self=i,document.documentElement);return a.exec((n&&n.transpile||String)(t)),null}))},i))}()},function(e,t){!function(){function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=window.webkitAudioContext,"function"!==typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),"function"!==typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),"function"!==typeof AudioContext.prototype.createScriptProcessor&&(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),"function"!==typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var n=t?this.internal_createDelay(t):this.internal_createDelay();return e(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,n,r){"undefined"!==typeof r?t.internal_start(e||0,n,r):t.internal_start(e||0,n||0)}):t.start=function(e,t,n){t||n?this.noteGrainOn(e||0,t,n):this.noteOn(e||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(e){this.noteOff(e||0)},e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},"function"!==typeof AudioContext.prototype.createOscillator&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0)}):t.start=function(e){this.noteOn(e||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(e){this.noteOff(e||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),e(t.frequency),e(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext)}(window),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var n=document.createElement("audio");p5.prototype.isSupported=function(){return!!n.canPlayType};p5.prototype.isFileSupported=function(e){switch(e.toLowerCase()){case"mp3":return!!n.canPlayType&&n.canPlayType("audio/mpeg;");case"wav":return!!n.canPlayType&&n.canPlayType('audio/wav; codecs="1"');case"ogg":return!!n.canPlayType&&n.canPlayType('audio/ogg; codecs="vorbis"');case"aac":case"m4a":case"mp4":return!!n.canPlayType&&(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/aac;"));case"aif":case"aiff":return!!n.canPlayType&&n.canPlayType("audio/x-aiff;");default:return!1}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),t.default='function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// import dependencies via preval.require so that they\'re available as values at compile time\nvar processorNames = {\n  "recorderProcessor": "recorder-processor",\n  "soundFileProcessor": "sound-file-processor",\n  "amplitudeProcessor": "amplitude-processor"\n};\nvar RingBuffer = {\n  "default":\n  /*#__PURE__*/\n  function () {\n    /**\n     * @constructor\n     * @param  {number} length Buffer length in frames.\n     * @param  {number} channelCount Buffer channel count.\n     */\n    function RingBuffer(length, channelCount) {\n      _classCallCheck(this, RingBuffer);\n\n      this._readIndex = 0;\n      this._writeIndex = 0;\n      this._framesAvailable = 0;\n      this._channelCount = channelCount;\n      this._length = length;\n      this._channelData = [];\n\n      for (var i = 0; i < this._channelCount; ++i) {\n        this._channelData[i] = new Float32Array(length);\n      }\n    }\n    /**\n     * Getter for Available frames in buffer.\n     *\n     * @return {number} Available frames in buffer.\n     */\n\n\n    _createClass(RingBuffer, [{\n      key: "push",\n\n      /**\n       * Push a sequence of Float32Arrays to buffer.\n       *\n       * @param  {array} arraySequence A sequence of Float32Arrays.\n       */\n      value: function push(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // Transfer data from the |arraySequence| storage to the internal buffer.\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\n\n        for (var i = 0; i < sourceLength; ++i) {\n          var writeIndex = (this._writeIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\n          }\n        }\n\n        this._writeIndex += sourceLength;\n\n        if (this._writeIndex >= this._length) {\n          this._writeIndex = 0;\n        } // For excessive frames, the buffer will be overwritten.\n\n\n        this._framesAvailable += sourceLength;\n\n        if (this._framesAvailable > this._length) {\n          this._framesAvailable = this._length;\n        }\n      }\n      /**\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\n       *\n       * @param  {array} arraySequence An array of Float32Arrays.\n       */\n\n    }, {\n      key: "pull",\n      value: function pull(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // If the FIFO is completely empty, do nothing.\n        if (this._framesAvailable === 0) {\n          return;\n        }\n\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\n\n        for (var i = 0; i < destinationLength; ++i) {\n          var readIndex = (this._readIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\n          }\n        }\n\n        this._readIndex += destinationLength;\n\n        if (this._readIndex >= this._length) {\n          this._readIndex = 0;\n        }\n\n        this._framesAvailable -= destinationLength;\n\n        if (this._framesAvailable < 0) {\n          this._framesAvailable = 0;\n        }\n      }\n    }, {\n      key: "framesAvailable",\n      get: function get() {\n        return this._framesAvailable;\n      }\n    }]);\n\n    return RingBuffer;\n  }()\n}["default"];\n\nvar RecorderProcessor =\n/*#__PURE__*/\nfunction (_AudioWorkletProcesso) {\n  _inherits(RecorderProcessor, _AudioWorkletProcesso);\n\n  function RecorderProcessor(options) {\n    var _this;\n\n    _classCallCheck(this, RecorderProcessor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecorderProcessor).call(this));\n    var processorOptions = options.processorOptions || {};\n    _this.numOutputChannels = options.outputChannelCount || 2;\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\n    _this.bufferSize = processorOptions.bufferSize || 1024;\n    _this.recording = false;\n\n    _this.clear();\n\n    _this.port.onmessage = function (event) {\n      var data = event.data;\n\n      if (data.name === \'start\') {\n        _this.record(data.duration);\n      } else if (data.name === \'stop\') {\n        _this.stop();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(RecorderProcessor, [{\n    key: "process",\n    value: function process(inputs) {\n      if (!this.recording) {\n        return true;\n      } else if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {\n        this.stop();\n        return true;\n      }\n\n      var input = inputs[0];\n      this.inputRingBuffer.push(input);\n\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\n\n        for (var channel = 0; channel < this.numOutputChannels; ++channel) {\n          var inputChannelCopy = this.inputRingBufferArraySequence[channel].slice();\n\n          if (channel === 0) {\n            this.leftBuffers.push(inputChannelCopy);\n\n            if (this.numInputChannels === 1) {\n              this.rightBuffers.push(inputChannelCopy);\n            }\n          } else if (channel === 1 && this.numInputChannels > 1) {\n            this.rightBuffers.push(inputChannelCopy);\n          }\n        }\n\n        this.recordedSamples += this.bufferSize;\n      }\n\n      return true;\n    }\n  }, {\n    key: "record",\n    value: function record(duration) {\n      if (duration) {\n        this.sampleLimit = Math.round(duration * sampleRate);\n      }\n\n      this.recording = true;\n    }\n  }, {\n    key: "stop",\n    value: function stop() {\n      this.recording = false;\n      var buffers = this.getBuffers();\n      var leftBuffer = buffers[0].buffer;\n      var rightBuffer = buffers[1].buffer;\n      this.port.postMessage({\n        name: \'buffers\',\n        leftBuffer: leftBuffer,\n        rightBuffer: rightBuffer\n      }, [leftBuffer, rightBuffer]);\n      this.clear();\n    }\n  }, {\n    key: "getBuffers",\n    value: function getBuffers() {\n      var buffers = [];\n      buffers.push(this.mergeBuffers(this.leftBuffers));\n      buffers.push(this.mergeBuffers(this.rightBuffers));\n      return buffers;\n    }\n  }, {\n    key: "mergeBuffers",\n    value: function mergeBuffers(channelBuffer) {\n      var result = new Float32Array(this.recordedSamples);\n      var offset = 0;\n      var lng = channelBuffer.length;\n\n      for (var i = 0; i < lng; i++) {\n        var buffer = channelBuffer[i];\n        result.set(buffer, offset);\n        offset += buffer.length;\n      }\n\n      return result;\n    }\n  }, {\n    key: "clear",\n    value: function clear() {\n      var _this2 = this;\n\n      this.leftBuffers = [];\n      this.rightBuffers = [];\n      this.inputRingBuffer = new RingBuffer(this.bufferSize, this.numInputChannels);\n      this.inputRingBufferArraySequence = new Array(this.numInputChannels).fill(null).map(function () {\n        return new Float32Array(_this2.bufferSize);\n      });\n      this.recordedSamples = 0;\n      this.sampleLimit = null;\n    }\n  }]);\n\n  return RecorderProcessor;\n}(_wrapNativeSuper(AudioWorkletProcessor));\n\nregisterProcessor(processorNames.recorderProcessor, RecorderProcessor);'},function(e,t,n){"use strict";n.r(t),t.default='function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// import dependencies via preval.require so that they\'re available as values at compile time\nvar processorNames = {\n  "recorderProcessor": "recorder-processor",\n  "soundFileProcessor": "sound-file-processor",\n  "amplitudeProcessor": "amplitude-processor"\n};\nvar RingBuffer = {\n  "default":\n  /*#__PURE__*/\n  function () {\n    /**\n     * @constructor\n     * @param  {number} length Buffer length in frames.\n     * @param  {number} channelCount Buffer channel count.\n     */\n    function RingBuffer(length, channelCount) {\n      _classCallCheck(this, RingBuffer);\n\n      this._readIndex = 0;\n      this._writeIndex = 0;\n      this._framesAvailable = 0;\n      this._channelCount = channelCount;\n      this._length = length;\n      this._channelData = [];\n\n      for (var i = 0; i < this._channelCount; ++i) {\n        this._channelData[i] = new Float32Array(length);\n      }\n    }\n    /**\n     * Getter for Available frames in buffer.\n     *\n     * @return {number} Available frames in buffer.\n     */\n\n\n    _createClass(RingBuffer, [{\n      key: "push",\n\n      /**\n       * Push a sequence of Float32Arrays to buffer.\n       *\n       * @param  {array} arraySequence A sequence of Float32Arrays.\n       */\n      value: function push(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // Transfer data from the |arraySequence| storage to the internal buffer.\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\n\n        for (var i = 0; i < sourceLength; ++i) {\n          var writeIndex = (this._writeIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\n          }\n        }\n\n        this._writeIndex += sourceLength;\n\n        if (this._writeIndex >= this._length) {\n          this._writeIndex = 0;\n        } // For excessive frames, the buffer will be overwritten.\n\n\n        this._framesAvailable += sourceLength;\n\n        if (this._framesAvailable > this._length) {\n          this._framesAvailable = this._length;\n        }\n      }\n      /**\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\n       *\n       * @param  {array} arraySequence An array of Float32Arrays.\n       */\n\n    }, {\n      key: "pull",\n      value: function pull(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // If the FIFO is completely empty, do nothing.\n        if (this._framesAvailable === 0) {\n          return;\n        }\n\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\n\n        for (var i = 0; i < destinationLength; ++i) {\n          var readIndex = (this._readIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\n          }\n        }\n\n        this._readIndex += destinationLength;\n\n        if (this._readIndex >= this._length) {\n          this._readIndex = 0;\n        }\n\n        this._framesAvailable -= destinationLength;\n\n        if (this._framesAvailable < 0) {\n          this._framesAvailable = 0;\n        }\n      }\n    }, {\n      key: "framesAvailable",\n      get: function get() {\n        return this._framesAvailable;\n      }\n    }]);\n\n    return RingBuffer;\n  }()\n}["default"];\n\nvar SoundFileProcessor =\n/*#__PURE__*/\nfunction (_AudioWorkletProcesso) {\n  _inherits(SoundFileProcessor, _AudioWorkletProcesso);\n\n  function SoundFileProcessor(options) {\n    var _this;\n\n    _classCallCheck(this, SoundFileProcessor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SoundFileProcessor).call(this));\n    var processorOptions = options.processorOptions || {};\n    _this.bufferSize = processorOptions.bufferSize || 256;\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, 1);\n    _this.inputRingBufferArraySequence = [new Float32Array(_this.bufferSize)];\n    return _this;\n  }\n\n  _createClass(SoundFileProcessor, [{\n    key: "process",\n    value: function process(inputs) {\n      var input = inputs[0]; // we only care about the first input channel, because that contains the position data\n\n      this.inputRingBuffer.push([input[0]]);\n\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\n        var inputChannel = this.inputRingBufferArraySequence[0];\n        var position = inputChannel[inputChannel.length - 1] || 0;\n        this.port.postMessage({\n          name: \'position\',\n          position: position\n        });\n      }\n\n      return true;\n    }\n  }]);\n\n  return SoundFileProcessor;\n}(_wrapNativeSuper(AudioWorkletProcessor));\n\nregisterProcessor(processorNames.soundFileProcessor, SoundFileProcessor);'},function(e,t,n){"use strict";n.r(t),t.default='function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// import dependencies via preval.require so that they\'re available as values at compile time\nvar processorNames = {\n  "recorderProcessor": "recorder-processor",\n  "soundFileProcessor": "sound-file-processor",\n  "amplitudeProcessor": "amplitude-processor"\n};\nvar RingBuffer = {\n  "default":\n  /*#__PURE__*/\n  function () {\n    /**\n     * @constructor\n     * @param  {number} length Buffer length in frames.\n     * @param  {number} channelCount Buffer channel count.\n     */\n    function RingBuffer(length, channelCount) {\n      _classCallCheck(this, RingBuffer);\n\n      this._readIndex = 0;\n      this._writeIndex = 0;\n      this._framesAvailable = 0;\n      this._channelCount = channelCount;\n      this._length = length;\n      this._channelData = [];\n\n      for (var i = 0; i < this._channelCount; ++i) {\n        this._channelData[i] = new Float32Array(length);\n      }\n    }\n    /**\n     * Getter for Available frames in buffer.\n     *\n     * @return {number} Available frames in buffer.\n     */\n\n\n    _createClass(RingBuffer, [{\n      key: "push",\n\n      /**\n       * Push a sequence of Float32Arrays to buffer.\n       *\n       * @param  {array} arraySequence A sequence of Float32Arrays.\n       */\n      value: function push(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // Transfer data from the |arraySequence| storage to the internal buffer.\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\n\n        for (var i = 0; i < sourceLength; ++i) {\n          var writeIndex = (this._writeIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\n          }\n        }\n\n        this._writeIndex += sourceLength;\n\n        if (this._writeIndex >= this._length) {\n          this._writeIndex = 0;\n        } // For excessive frames, the buffer will be overwritten.\n\n\n        this._framesAvailable += sourceLength;\n\n        if (this._framesAvailable > this._length) {\n          this._framesAvailable = this._length;\n        }\n      }\n      /**\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\n       *\n       * @param  {array} arraySequence An array of Float32Arrays.\n       */\n\n    }, {\n      key: "pull",\n      value: function pull(arraySequence) {\n        // The channel count of arraySequence and the length of each channel must\n        // match with this buffer obejct.\n        // If the FIFO is completely empty, do nothing.\n        if (this._framesAvailable === 0) {\n          return;\n        }\n\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\n\n        for (var i = 0; i < destinationLength; ++i) {\n          var readIndex = (this._readIndex + i) % this._length;\n\n          for (var channel = 0; channel < this._channelCount; ++channel) {\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\n          }\n        }\n\n        this._readIndex += destinationLength;\n\n        if (this._readIndex >= this._length) {\n          this._readIndex = 0;\n        }\n\n        this._framesAvailable -= destinationLength;\n\n        if (this._framesAvailable < 0) {\n          this._framesAvailable = 0;\n        }\n      }\n    }, {\n      key: "framesAvailable",\n      get: function get() {\n        return this._framesAvailable;\n      }\n    }]);\n\n    return RingBuffer;\n  }()\n}["default"];\n\nvar AmplitudeProcessor =\n/*#__PURE__*/\nfunction (_AudioWorkletProcesso) {\n  _inherits(AmplitudeProcessor, _AudioWorkletProcesso);\n\n  function AmplitudeProcessor(options) {\n    var _this;\n\n    _classCallCheck(this, AmplitudeProcessor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AmplitudeProcessor).call(this));\n    var processorOptions = options.processorOptions || {};\n    _this.numOutputChannels = options.outputChannelCount || 1;\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\n    _this.normalize = processorOptions.normalize || false;\n    _this.smoothing = processorOptions.smoothing || 0;\n    _this.bufferSize = processorOptions.bufferSize || 2048;\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, _this.numInputChannels);\n    _this.outputRingBuffer = new RingBuffer(_this.bufferSize, _this.numOutputChannels);\n    _this.inputRingBufferArraySequence = new Array(_this.numInputChannels).fill(null).map(function () {\n      return new Float32Array(_this.bufferSize);\n    });\n    _this.stereoVol = [0, 0];\n    _this.stereoVolNorm = [0, 0];\n    _this.volMax = 0.001;\n\n    _this.port.onmessage = function (event) {\n      var data = event.data;\n\n      if (data.name === \'toggleNormalize\') {\n        _this.normalize = data.normalize;\n      } else if (data.name === \'smoothing\') {\n        _this.smoothing = Math.max(0, Math.min(1, data.smoothing));\n      }\n    };\n\n    return _this;\n  } // TO DO make this stereo / dependent on # of audio channels\n\n\n  _createClass(AmplitudeProcessor, [{\n    key: "process",\n    value: function process(inputs, outputs) {\n      var input = inputs[0];\n      var output = outputs[0];\n      var smoothing = this.smoothing;\n      this.inputRingBuffer.push(input);\n\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\n\n        for (var channel = 0; channel < this.numInputChannels; ++channel) {\n          var inputBuffer = this.inputRingBufferArraySequence[channel];\n          var bufLength = inputBuffer.length;\n          var sum = 0;\n\n          for (var i = 0; i < bufLength; i++) {\n            var x = inputBuffer[i];\n\n            if (this.normalize) {\n              sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);\n            } else {\n              sum += x * x;\n            }\n          } // ... then take the square root of the sum.\n\n\n          var rms = Math.sqrt(sum / bufLength);\n          this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * smoothing);\n          this.volMax = Math.max(this.stereoVol[channel], this.volMax);\n        } // calculate stero normalized volume and add volume from all channels together\n\n\n        var volSum = 0;\n\n        for (var index = 0; index < this.stereoVol.length; index++) {\n          this.stereoVolNorm[index] = Math.max(Math.min(this.stereoVol[index] / this.volMax, 1), 0);\n          volSum += this.stereoVol[index];\n        } // volume is average of channels\n\n\n        var volume = volSum / this.stereoVol.length; // normalized value\n\n        var volNorm = Math.max(Math.min(volume / this.volMax, 1), 0);\n        this.port.postMessage({\n          name: \'amplitude\',\n          volume: volume,\n          volNorm: volNorm,\n          stereoVol: this.stereoVol,\n          stereoVolNorm: this.stereoVolNorm\n        }); // pass input through to output\n\n        this.outputRingBuffer.push(this.inputRingBufferArraySequence);\n      } // pull 128 frames out of the ring buffer\n      // if the ring buffer does not have enough frames, the output will be silent\n\n\n      this.outputRingBuffer.pull(output);\n      return true;\n    }\n  }]);\n\n  return AmplitudeProcessor;\n}(_wrapNativeSuper(AudioWorkletProcessor));\n\nregisterProcessor(processorNames.amplitudeProcessor, AmplitudeProcessor);'},function(e,t,n){var r,o;r=[n(0),n(17)],void 0===(o=function(e){e.Frequency=function(t,n){if(!(this instanceof e.Frequency))return new e.Frequency(t,n);e.TimeBase.call(this,t,n)},e.extend(e.Frequency,e.TimeBase),e.Frequency.prototype._primaryExpressions=Object.create(e.TimeBase.prototype._primaryExpressions),e.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(e){return this.midiToFrequency(e)}},e.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(e,n){var r=t[e.toLowerCase()]+12*(parseInt(n)+1);return this.midiToFrequency(r)}},e.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(e,t,n){var r=1;return e&&"0"!==e&&(r*=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&"0"!==t&&(r*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}},e.Frequency.prototype.transpose=function(e){return this._expr=function(e,t){return e()*this.intervalToFrequencyRatio(t)}.bind(this,this._expr,e),this},e.Frequency.prototype.harmonize=function(e){return this._expr=function(e,t){for(var n=e(),r=[],o=0;o<t.length;o++)r[o]=n*this.intervalToFrequencyRatio(t[o]);return r}.bind(this,this._expr,e),this},e.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},e.Frequency.prototype.toNote=function(){var t=this.valueOf(),r=Math.log(t/e.Frequency.A4)/Math.LN2,o=Math.round(12*r)+57,i=Math.floor(o/12);return i<0&&(o+=-12*i),n[o%12]+i.toString()},e.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},e.Frequency.prototype.toFrequency=function(){return this.valueOf()},e.Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*e.Transport.PPQ)},e.Frequency.prototype._frequencyToUnits=function(e){return e},e.Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(e.Transport.bpm.value*e.Transport.PPQ))},e.Frequency.prototype._beatsToUnits=function(t){return 1/e.TimeBase.prototype._beatsToUnits.call(this,t)},e.Frequency.prototype._secondsToUnits=function(e){return 1/e},e.Frequency.prototype._defaultUnits="hz";var t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.Frequency.A4=440,e.Frequency.prototype.midiToFrequency=function(t){return e.Frequency.A4*Math.pow(2,(t-69)/12)},e.Frequency.prototype.frequencyToMidi=function(t){return 69+12*Math.log(t/e.Frequency.A4)/Math.LN2},e.Frequency}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(16)],void 0===(o=function(e){return e.TransportTime=function(t,n){if(!(this instanceof e.TransportTime))return new e.TransportTime(t,n);e.Time.call(this,t,n)},e.extend(e.TransportTime,e.Time),e.TransportTime.prototype._unaryExpressions=Object.create(e.Time.prototype._unaryExpressions),e.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){var n=this._secondsToTicks(t()),r=Math.ceil(e.Transport.ticks/n);return this._ticksToUnits(r*n)}},e.TransportTime.prototype._secondsToTicks=function(t){var n=t/this._beatsToUnits(1);return Math.round(n*e.Transport.PPQ)},e.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?e.Transport.ticks:0)},e.TransportTime.prototype.toTicks=function(){return this.valueOf()},e.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?e.Transport.seconds:0)},e.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},e.TransportTime}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(4),n(13),n(1),n(33),n(21),n(34),n(20),n(35),n(36),n(37)],o=function(e){"use strict";function t(e,t,n){var r=new e;return n._eval(t[0]).connect(r,0,0),n._eval(t[1]).connect(r,0,1),r}function n(e,t,n){var r=new e;return n._eval(t[0]).connect(r,0,0),r}function r(e){return e?parseFloat(e):void 0}function o(e){return e&&e.args?parseFloat(e.args):void 0}return e.Expr=function(){var e=this._replacements(Array.prototype.slice.call(arguments)),t=this._parseInputs(e);this._nodes=[],this.input=new Array(t);for(var n=0;n<t;n++)this.input[n]=this.context.createGain();var r,o=this._parseTree(e);try{r=this._eval(o)}catch(t){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+e)}this.output=r},e.extend(e.Expr,e.SignalBase),e.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(t){return new e.Signal(r(t))}},input:{regexp:/^\$\d/,method:function(e,t){return t.input[r(e.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,e.Abs)},mod:{regexp:/^mod/,method:function(t,n){var r=o(t[1]),i=new e.Modulo(r);return n._eval(t[0]).connect(i),i}},pow:{regexp:/^pow/,method:function(t,n){var r=o(t[1]),i=new e.Pow(r);return n._eval(t[0]).connect(i),i}},a2g:{regexp:/^a2g/,method:function(t,n){var r=new e.AudioToGain;return n._eval(t[0]).connect(r),r}}},binary:{"+":{regexp:/^\+/,precedence:1,method:t.bind(this,e.Add)},"-":{regexp:/^\-/,precedence:1,method:function(r,o){return 1===r.length?n(e.Negate,r,o):t(e.Subtract,r,o)}},"*":{regexp:/^\*/,precedence:0,method:t.bind(this,e.Multiply)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,e.Negate)},"!":{regexp:/^\!/,method:n.bind(this,e.NOT)}}},e.Expr.prototype._parseInputs=function(e){var t=e.match(/\$\d/g),n=0;if(null!==t)for(var r=0;r<t.length;r++){var o=parseInt(t[r].substr(1))+1;n=Math.max(n,o)}return n},e.Expr.prototype._replacements=function(e){for(var t=e.shift(),n=0;n<e.length;n++)t=t.replace(/\%/i,e[n]);return t},e.Expr.prototype._tokenize=function(t){for(var n=-1,r=[];0<t.length;){var o=i(t=t.trim());r.push(o),t=t.substr(o.value.length)}function i(t){for(var n in e.Expr._Expressions){var r=e.Expr._Expressions[n];for(var o in r){var i=r[o],a=i.regexp,s=t.match(a);if(null!==s)return{type:n,value:s[0],method:i.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+t)}return{next:function(){return r[++n]},peek:function(){return r[n+1]}}},e.Expr.prototype._parseTree=function(t){var n=this._tokenize(t),r=this.isUndef.bind(this);function o(e,t){return!r(e)&&"glue"===e.type&&e.value===t}function i(t,n,o){var i=e.Expr._Expressions[n];if(!r(t))for(var a in i){var s=i[a];if(s.regexp.test(t.value)){if(r(o))return!0;if(s.precedence===o)return!0}}return!1}function a(e){var t;r(e)&&(e=5),t=e<0?function e(){var t,r;return i(t=n.peek(),"unary")?(t=n.next(),r=e(),{operator:t.value,method:t.method,args:[r]}):s()}():a(e-1);for(var o=n.peek();i(o,"binary",e);)t={operator:(o=n.next()).value,method:o.method,args:[t,a(e-1)]},o=n.peek();return t}function s(){var e,t;if(e=n.peek(),r(e))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===e.type)return function(e){var t=[];if(!o(n.next(),"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+e.value+'"');if(o(n.peek(),")")||(t=function(){for(var e,t=[];e=a(),!r(e)&&(t.push(e),o(n.peek(),","));)n.next();return t}()),o(n.next(),")"))return{method:e.method,args:t,name:name};throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+e.value+'"')}(e=n.next());if("value"===e.type)return{method:(e=n.next()).method,args:e.value};if(o(e,"(")){if(n.next(),t=a(),!o(e=n.next(),")"))throw new SyntaxError("Expected )");return t}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+e.value)}return a()},e.Expr.prototype._eval=function(e){if(!this.isUndef(e)){var t=e.method(e.args,this);return this._nodes.push(t),t}},e.Expr.prototype._disposeNodes=function(){for(var e=0;e<this._nodes.length;e++){var t=this._nodes[e];this.isFunction(t.dispose)?t.dispose():this.isFunction(t.disconnect)&&t.disconnect(),t=null,this._nodes[e]=null}this._nodes=null},e.Expr.prototype.dispose=function(){e.prototype.dispose.call(this),this._disposeNodes()},e.Expr}.apply(t,r),void 0===o||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(21),n(13),n(2)],void 0===(o=function(e){"use strict";return e.GreaterThan=function(t){this.createInsOuts(2,0),this._param=this.input[0]=new e.Subtract(t),this.input[1]=this._param.input[1],this._gtz=this.output=new e.GreaterThanZero,this._param.connect(this._gtz)},e.extend(e.GreaterThan,e.Signal),e.GreaterThan.prototype.dispose=function(){return e.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},e.GreaterThan}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6),n(15)],void 0===(o=function(e){"use strict";return e.Abs=function(){this._abs=this.input=this.output=new e.WaveShaper((function(e){return 0===e?0:Math.abs(e)}),127)},e.extend(e.Abs,e.SignalBase),e.Abs.prototype.dispose=function(){return e.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},e.Abs}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6),n(1),n(13)],void 0===(o=function(e){"use strict";return e.Modulo=function(t){this.createInsOuts(1,0),this._shaper=new e.WaveShaper(Math.pow(2,16)),this._multiply=new e.Multiply,this._subtract=this.output=new e.Subtract,this._modSignal=new e.Signal(t),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(t)},e.extend(e.Modulo,e.SignalBase),e.Modulo.prototype._setWaveShaper=function(e){this._shaper.setMap((function(t){return Math.floor((t+1e-4)/e)}))},Object.defineProperty(e.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(e){this._modSignal.value=e,this._setWaveShaper(e)}}),e.Modulo.prototype.dispose=function(){return e.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},e.Modulo}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6)],void 0===(o=function(e){"use strict";return e.Pow=function(t){this._exp=this.defaultArg(t,1),this._expScaler=this.input=this.output=new e.WaveShaper(this._expFunc(this._exp),8192)},e.extend(e.Pow,e.SignalBase),Object.defineProperty(e.Pow.prototype,"value",{get:function(){return this._exp},set:function(e){this._exp=e,this._expScaler.setMap(this._expFunc(this._exp))}}),e.Pow.prototype._expFunc=function(e){return function(t){return Math.pow(Math.abs(t),e)}},e.Pow.prototype.dispose=function(){return e.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},e.Pow}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6),n(2)],void 0===(o=function(e){"use strict";return e.AudioToGain=function(){this._norm=this.input=this.output=new e.WaveShaper((function(e){return(e+1)/2}))},e.extend(e.AudioToGain,e.SignalBase),e.AudioToGain.prototype.dispose=function(){return e.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},e.AudioToGain}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(6)],void 0===(o=function(e){"use strict";return e.EqualPowerGain=function(){this._eqPower=this.input=this.output=new e.WaveShaper(function(e){return Math.abs(e)<.001?0:this.equalPowerScale(e)}.bind(this),4096)},e.extend(e.EqualPowerGain,e.SignalBase),e.EqualPowerGain.prototype.dispose=function(){return e.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},e.EqualPowerGain}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(19),n(9)],void 0===(o=function(e){"use strict";return e.TimelineState=function(t){e.Timeline.call(this),this._initial=t},e.extend(e.TimelineState,e.Timeline),e.TimelineState.prototype.getValueAtTime=function(e){var t=this.get(e);return null!==t?t.state:this._initial},e.TimelineState.prototype.setStateAtTime=function(e,t){this.add({state:e,time:t})},e.TimelineState}.apply(t,r))||(e.exports=o)},function(t,n,r){"use strict";r.r(n);r(24),r(25);var o=r(3);var i=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=o.a.createGain(),this.output=o.a.createGain(),this.limiter=o.a.createDynamicsCompressor(),this.limiter.threshold.value=-3,this.limiter.ratio.value=20,this.limiter.knee.value=1,this.audiocontext=o.a,this.output.disconnect(),this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=o.a.createGain(),this.fftMeter=o.a.createGain(),this.output.connect(this.meter),this.output.connect(this.fftMeter),this.output.connect(this.audiocontext.destination),this.soundArray=[],this.parts=[],this.extensions=[]};p5.prototype.getOutputVolume=function(){return i.output.gain.value},p5.prototype.outputVolume=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("number"===typeof e){var r=i.audiocontext.currentTime,o=i.output.gain.value;i.output.gain.cancelScheduledValues(r+n),i.output.gain.linearRampToValueAtTime(o,r+n),i.output.gain.linearRampToValueAtTime(e,r+n+t)}else{if(!e)return i.output.gain;e.connect(i.output.gain)}},p5.prototype.soundOut=p5.soundOut=i,p5.soundOut._silentNode=i.audiocontext.createGain(),p5.soundOut._silentNode.gain.value=0,p5.soundOut._silentNode.connect(i.audiocontext.destination);var a=i,s=r(5),l=r.n(s);function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e){var t=Math.log(e/440)/Math.log(2);return Math.round(12*t)+69}function d(e){return 440*Math.pow(2,(e-69)/12)}function h(e){if("string"!==typeof e)return e;var t={A:21,B:23,C:24,D:26,E:28,F:29,G:31}[e[0].toUpperCase()];switch(t+=12*(~~e.slice(-1)-1),e[1]){case"#":t+=1;break;case"b":t-=1}return d(t)}function p(e){var t,n=f(t=e.getChannelData(0),e.numberOfChannels>1?e.getChannelData(1):t),r=new window.ArrayBuffer(44+2*n.length),o=new window.DataView(r);m(o,0,"RIFF"),o.setUint32(4,36+2*n.length,!0),m(o,8,"WAVE"),m(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,2,!0),o.setUint32(24,a.audiocontext.sampleRate,!0),o.setUint32(28,4*a.audiocontext.sampleRate,!0),o.setUint16(32,4,!0),o.setUint16(34,16,!0),m(o,36,"data"),o.setUint32(40,2*n.length,!0);for(var i=n.length,s=44,l=0;l<i;l++)o.setInt16(s,32767*n[l],!0),s+=2;return o}function f(e,t){for(var n=e.length+t.length,r=new Float32Array(n),o=0,i=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}function m(e,t,n){for(var r=n.length,o=0;o<r;o++)e.setUint8(t+o,n.charCodeAt(o))}function g(e){var t=e,n=new AudioWorkletNode(a.audiocontext,l.a.soundFileProcessor);return n instanceof ScriptProcessorNode&&(t=n.bufferSize),n.disconnect(),n=null,t}var y=function(e,t,n){var r,o,i=new Error;return i.name=e,i.originalStack=i.stack+t,r=i.stack+t,i.failedPath=n,o=r.split("\n").filter((function(e){return!e.match(/(p5.|native code|globalInit)/g)})),i.stack=o.join("\n"),i},v=[r(27).default,r(28).default,r(29).default],b=a.audiocontext,x=!1;function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}p5.prototype.registerMethod("init",(function(){if(!x){this.preload||window.preload||(this.preload=function(){}),this._incrementPreload();var e=function(){x=!0,this._decrementPreload()}.bind(this);Promise.all(v.map((function(e){var t=new Blob([e],{type:"application/javascript"}),n=URL.createObjectURL(t);return b.audioWorklet.addModule(n)}))).then(e)}}));var k,T=a.audiocontext;"undefined"!==typeof T.createStereoPanner?k=function(){function e(t,n){w(this,e),this.stereoPanner=this.input=T.createStereoPanner(),t.connect(this.stereoPanner),this.stereoPanner.connect(n)}return _(e,[{key:"pan",value:function(e,t){var n=t||0,r=T.currentTime+n;this.stereoPanner.pan.linearRampToValueAtTime(e,r)}},{key:"inputChannels",value:function(){}},{key:"connect",value:function(e){this.stereoPanner.connect(e)}},{key:"disconnect",value:function(){this.stereoPanner&&this.stereoPanner.disconnect()}}]),e}():k=function(){function e(t,n,r){w(this,e),this.input=T.createGain(),t.connect(this.input),this.left=T.createGain(),this.right=T.createGain(),this.left.channelInterpretation="discrete",this.right.channelInterpretation="discrete",r>1?(this.splitter=T.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right)),this.output=T.createChannelMerger(2),this.left.connect(this.output,0,1),this.right.connect(this.output,0,0),this.output.connect(n)}return _(e,[{key:"pan",value:function(e,t){var n=t||0,r=T.currentTime+n,o=(e+1)/2,i=Math.cos(o*Math.PI/2),a=Math.sin(o*Math.PI/2);this.left.gain.linearRampToValueAtTime(a,r),this.right.gain.linearRampToValueAtTime(i,r)}},{key:"inputChannels",value:function(e){1===e?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===e&&("undefined"===typeof this.splitter&&(this.splitter=T.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))}},{key:"connect",value:function(e){this.output.connect(e)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}}]),e}();var E=k;function C(e){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var A=a.audiocontext,O=function e(t,n,r,o){j(this,e),this.callback=t,this.time=n,this.id=r,this.val=o};function N(e){var t=e.target,n=this;t._playing=!1,t.removeEventListener("ended",n._clearOnEnd),n._onended(n),n.bufferSourceNodes.map((function(e,t){return t})).reverse().forEach((function(e){!1===n.bufferSourceNodes[e]._playing&&n.bufferSourceNodes.splice(e,1)})),0===n.bufferSourceNodes.length&&(n._playing=!1)}var R=function(){function t(e,n,r,o){if(j(this,t),"undefined"!==typeof e){if("string"===typeof e||"string"===typeof e[0]){var i=p5.prototype._checkFileFormats(e);this.url=i}else if("object"===C(e)&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";e.file&&(e=e.file),this.file=e}this._onended=function(){},this._looping=!1,this._playing=!1,this._paused=!1,this._pauseTime=0,this._cues=[],this._cueIDCounter=0,this._lastPos=0,this._counterNode=null,this._workletNode=null,this.bufferSourceNodes=[],this.bufferSourceNode=null,this.buffer=null,this.playbackRate=1,this.input=a.audiocontext.createGain(),this.output=a.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.pauseTime=0,this.mode="sustain",this.startMillis=null,this.panPosition=0,this.panner=new E(this.output,a.input,2),(this.url||this.file)&&this.load(n,r),a.soundArray.push(this),this._whileLoading="function"===typeof o?o:function(){},this._clearOnEnd=N.bind(this),this.amp=this.setVolume,this.fade=this.setVolume}var n,r,o;return n=t,(r=[{key:"load",value:function(e,t){var n=this,r=(new Error).stack;if(void 0!==this.url&&""!==this.url){var o=new XMLHttpRequest;o.addEventListener("progress",(function(e){n._updateProgress(e)}),!1),o.open("GET",this.url,!0),o.responseType="arraybuffer",o.onload=function(){if(200===o.status){if(!n.panner)return;A.decodeAudioData(o.response,(function(t){n.panner&&(n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n))}),(function(){if(n.panner){var e=new y("decodeAudioData",r,n.url),o="AudioContext error at decodeAudioData for "+n.url;t?(e.msg=o,t(e)):console.error(o+"\n The error stack trace includes: \n"+e.stack)}}))}else{if(!n.panner)return;var i=new y("loadSound",r,n.url),a="Unable to load "+n.url+". The request status was: "+o.status+" ("+o.statusText+")";t?(i.message=a,t(i)):console.error(a+"\n The error stack trace includes: \n"+i.stack)}},o.onerror=function(){var e=new y("loadSound",r,n.url),o="There was no response from the server at "+n.url+". Check the url and internet connectivity.";t?(e.message=o,t(e)):console.error(o+"\n The error stack trace includes: \n"+e.stack)},o.send()}else if(void 0!==this.file){var i=new FileReader;i.onload=function(){n.panner&&A.decodeAudioData(i.result,(function(t){n.panner&&(n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n))}))},i.onerror=function(e){n.panner&&onerror&&onerror(e)},i.readAsArrayBuffer(this.file)}}},{key:"_updateProgress",value:function(e){if(e.lengthComputable){var t=e.loaded/e.total*.99;this._whileLoading(t,e)}else this._whileLoading("size unknown")}},{key:"isLoaded",value:function(){return!!this.buffer}},{key:"play",value:function(e,t,n,r,o){if(this.output){var i,s,l=e||0;if(l<0&&(l=0),l+=a.audiocontext.currentTime,"undefined"!==typeof t&&this.rate(t),"undefined"!==typeof n&&this.setVolume(n),!this.buffer)throw"not ready to play file, buffer has yet to load. Try preload()";if(this._pauseTime=0,"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(this.bufferSourceNode.stop(l),this._counterNode.stop(l)),"untildone"!==this.mode||!this.isPlaying()){if(this.bufferSourceNode=this._initSourceNode(),delete this._counterNode,this._counterNode=this._initCounterNode(),r){if(!(r>=0&&r<this.buffer.duration))throw"start time out of range";i=r}else i=0;o&&(o=o<=this.buffer.duration-i?o:this.buffer.duration),this._paused?(this.bufferSourceNode.start(l,this.pauseTime,o),this._counterNode.start(l,this.pauseTime,o)):(this.bufferSourceNode.start(l,i,o),this._counterNode.start(l,i,o)),this._playing=!0,this._paused=!1,this.bufferSourceNodes.push(this.bufferSourceNode),this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1,this.bufferSourceNode.addEventListener("ended",this._clearOnEnd),this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping,!0===this._looping&&(s=o||i-1e-15,this.bufferSourceNode.loopStart=i,this.bufferSourceNode.loopEnd=s,this._counterNode.loopStart=i,this._counterNode.loopEnd=s)}}else console.warn("SoundFile.play() called after dispose")}},{key:"playMode",value:function(e){var t=e.toLowerCase();if("restart"===t&&this.buffer&&this.bufferSourceNode)for(var n=0;n<this.bufferSourceNodes.length-1;n++){var r=a.audiocontext.currentTime;this.bufferSourceNodes[n].stop(r)}if("restart"!==t&&"sustain"!==t&&"untildone"!==t)throw'Invalid play mode. Must be either "restart" or "sustain"';this.mode=t}},{key:"pause",value:function(e){var t=(e||0)+a.audiocontext.currentTime;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this._paused=!0,this._playing=!1,this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(t),this._counterNode.stop(t),this._pauseTime=this.currentTime()):this._pauseTime=0}},{key:"loop",value:function(e,t,n,r,o){this._looping=!0,this.play(e,t,n,r,o)}},{key:"setLoop",value:function(e){if(!0===e)this._looping=!0;else{if(!1!==e)throw"Error: setLoop accepts either true or false";this._looping=!1}this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)}},{key:"isLooping",value:function(){return!!this.bufferSourceNode&&!0===this._looping&&!0===this.isPlaying()}},{key:"isPlaying",value:function(){return this._playing}},{key:"isPaused",value:function(){return this._paused}},{key:"stop",value:function(e){var t=e||0;if("sustain"===this.mode||"untildone"===this.mode)this.stopAll(t),this._playing=!1,this.pauseTime=0,this._paused=!1;else if(this.buffer&&this.bufferSourceNode){var n=a.audiocontext.currentTime,r=t||0;this.pauseTime=0,this.bufferSourceNode.stop(n+r),this._counterNode.stop(n+r),this._playing=!1,this._paused=!1}}},{key:"stopAll",value:function(t){var n=a.audiocontext.currentTime,r=t||0;if(this.buffer&&this.bufferSourceNode){for(var o in this.bufferSourceNodes){var i=this.bufferSourceNodes[o];if(i)try{i.stop(n+r)}catch(e){}}this._counterNode.stop(n+r)}}},{key:"getVolume",value:function(){return this.output.gain.value}},{key:"pan",value:function(e,t){this.panPosition=e,this.panner.pan(e,t)}},{key:"getPan",value:function(){return this.panPosition}},{key:"rate",value:function(e){var t=!1;if("undefined"===typeof e)return this.playbackRate;if(this.playbackRate=e,0===e?e=1e-13:e<0&&!this.reversed?(e=Math.abs(e),t=!0):e>0&&this.reversed&&(t=!0),this.bufferSourceNode){var n=a.audiocontext.currentTime;this.bufferSourceNode.playbackRate.cancelScheduledValues(n),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(e),n),this._counterNode.playbackRate.cancelScheduledValues(n),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(e),n)}return t&&this.reverseBuffer(),this.playbackRate}},{key:"setPitch",value:function(e){var t=d(e)/d(60);this.rate(t)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setVolume",value:function(e,t,n){if("number"===typeof e){var r=t||0,o=n||0,i=a.audiocontext.currentTime,s=this.output.gain.value;this.output.gain.cancelScheduledValues(i+o),this.output.gain.linearRampToValueAtTime(s,i+o),this.output.gain.linearRampToValueAtTime(e,i+o+r)}else{if(!e)return this.output.gain;e.connect(this.output.gain)}}},{key:"duration",value:function(){return this.buffer?this.buffer.duration:0}},{key:"currentTime",value:function(){return this.reversed?Math.abs(this._lastPos-this.buffer.length)/A.sampleRate:this._lastPos/A.sampleRate}},{key:"jump",value:function(e,t){if(e<0||e>this.buffer.duration)throw"jump time out of range";if(t>this.buffer.duration-e)throw"end time out of range";var n=e||0,r=t||void 0;this.isPlaying()&&(this.stop(0),this.play(0,this.playbackRate,this.output.gain.value,n,r))}},{key:"channels",value:function(){return this.buffer.numberOfChannels}},{key:"sampleRate",value:function(){return this.buffer.sampleRate}},{key:"frames",value:function(){return this.buffer.length}},{key:"getPeaks",value:function(e){if(!this.buffer)throw"Cannot load peaks yet, buffer is not loaded";if(e||(e=5*window.width),this.buffer){for(var t=this.buffer,n=t.length/e,r=~~(n/10)||1,o=t.numberOfChannels,i=new Float32Array(Math.round(e)),a=0;a<o;a++)for(var s=t.getChannelData(a),l=0;l<e;l++){for(var c=~~(l*n),u=~~(c+n),d=0,h=c;h<u;h+=r){var p=s[h];(p>d||-p>d)&&(d=p)}(0===a||Math.abs(d)>i[l])&&(i[l]=d)}return i}}},{key:"reverseBuffer",value:function(){if(!this.buffer)throw"SoundFile is not done loading";var e=this._lastPos/A.sampleRate,t=this.getVolume();this.setVolume(0,.001);for(var n=this.buffer.numberOfChannels,r=0;r<n;r++)this.buffer.getChannelData(r).reverse();this.reversed=!this.reversed,this.isPlaying()&&e&&this.jump(this.duration()-e),this.setVolume(t,.001)}},{key:"onended",value:function(e){return this._onended=e,this}},{key:"add",value:function(){}},{key:"dispose",value:function(){var t=a.audiocontext.currentTime,n=a.soundArray.indexOf(this);if(a.soundArray.splice(n,1),this.stop(t),this.buffer&&this.bufferSourceNode){for(var r=0;r<this.bufferSourceNodes.length-1;r++)if(null!==this.bufferSourceNodes[r]){this.bufferSourceNodes[r].disconnect();try{this.bufferSourceNodes[r].stop(t)}catch(e){console.warn("no buffer source node to dispose")}this.bufferSourceNodes[r]=null}if(this.isPlaying()){try{this._counterNode.stop(t)}catch(e){console.log(e)}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null),this.panner&&(this.panner.disconnect(),this.panner=null)}},{key:"connect",value:function(e){e?e.hasOwnProperty("input")?this.panner.connect(e.input):this.panner.connect(e):this.panner.connect(a.input)}},{key:"disconnect",value:function(){this.panner&&this.panner.disconnect()}},{key:"getLevel",value:function(){console.warn("p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead")}},{key:"setPath",value:function(e,t){var n=p5.prototype._checkFileFormats(e);this.url=n,this.load(t)}},{key:"setBuffer",value:function(e){var t=e.length,n=e[0].length,r=A.createBuffer(t,n,A.sampleRate);e[0]instanceof Float32Array||(e[0]=new Float32Array(e[0]));for(var o=0;o<t;o++)r.getChannelData(o).set(e[o]);this.buffer=r,this.panner.inputChannels(t)}},{key:"_initCounterNode",value:function(){var e=this,t=this,n=A.currentTime,r=A.createBufferSource(),o=g(256);return t._workletNode&&(t._workletNode.disconnect(),delete t._workletNode),t._workletNode=new AudioWorkletNode(A,l.a.soundFileProcessor,{processorOptions:{bufferSize:o}}),t._workletNode.port.onmessage=function(n){if("position"===n.data.name){if(0===n.data.position)return;e._lastPos=n.data.position,e._onTimeUpdate(t._lastPos)}},r.buffer=function(e){for(var t=e.length,n=A.createBuffer(1,e.length,A.sampleRate),r=n.getChannelData(0),o=0;o<t;o++)r[o]=o;return n}(t.buffer),r.playbackRate.setValueAtTime(t.playbackRate,n),r.connect(t._workletNode),t._workletNode.connect(p5.soundOut._silentNode),r}},{key:"_initSourceNode",value:function(){var e=A.createBufferSource();return e.buffer=this.buffer,e.playbackRate.value=this.playbackRate,e.connect(this.output),e}},{key:"processPeaks",value:function(e,t,n,r){console.warn("processPeaks is deprecated")}},{key:"addCue",value:function(e,t,n){var r=this._cueIDCounter++,o=new O(t,e,r,n);return this._cues.push(o),r}},{key:"removeCue",value:function(e){for(var t=this._cues.length,n=0;n<t;n++)if(this._cues[n].id===e){this._cues.splice(n,1);break}this._cues.length}},{key:"clearCues",value:function(){this._cues=[]}},{key:"_onTimeUpdate",value:function(e){for(var t=e/this.buffer.sampleRate,n=this._cues.length,r=0;r<n;r++){var o=this._cues[r],i=o.time,a=o.val;(this._prevUpdateTime||0)<=i&&i<=t&&o.callback(a)}this._prevUpdateTime=t}},{key:"save",value:function(e){p5.prototype.saveSound(this,e,"wav")}},{key:"getBlob",value:function(){var e=p(this.buffer);return new Blob([e],{type:"audio/wav"})}}])&&I(n.prototype,r),o&&I(n,o),t}();var P=R;function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bufferSize=g(2048),this.audiocontext=a.audiocontext,this._workletNode=new AudioWorkletNode(this.audiocontext,l.a.amplitudeProcessor,{outputChannelCount:[1],parameterData:{smoothing:t||0},processorOptions:{normalize:!1,smoothing:t||0,numInputChannels:2,bufferSize:this.bufferSize}}),this._workletNode.port.onmessage=function(e){"amplitude"===e.data.name&&(this.volume=e.data.volume,this.volNorm=e.data.volNorm,this.stereoVol=e.data.stereoVol,this.stereoVolNorm=e.data.stereoVolNorm)}.bind(this),this.input=this._workletNode,this.output=this.audiocontext.createGain(),this.volume=0,this.volNorm=0,this.stereoVol=[0,0],this.stereoVolNorm=[0,0],this.normalize=!1,this._workletNode.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),a.meter.connect(this._workletNode),a.soundArray.push(this)}var t,n,r;return t=e,(n=[{key:"setInput",value:function(e,t){a.meter.disconnect(),t&&(this._workletNode.parameters.get("smoothing").value=t),null==e?(console.log("Amplitude input source is not ready! Connecting to main output instead"),a.meter.connect(this._workletNode)):e?(e.connect(this._workletNode),this._workletNode.disconnect(),this._workletNode.connect(this.output)):a.meter.connect(this._workletNode)}},{key:"connect",value:function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):this.output.connect(e):this.output.connect(this.panner.connect(a.input))}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}},{key:"getLevel",value:function(e){return"undefined"!==typeof e?this.normalize?this.stereoVolNorm[e]:this.stereoVol[e]:this.normalize?this.volNorm:this.volume}},{key:"toggleNormalize",value:function(e){this.normalize="boolean"===typeof e?e:!this.normalize,this._workletNode.port.postMessage({name:"toggleNormalize",normalize:this.normalize})}},{key:"smooth",value:function(e){e>=0&&e<1?this._workletNode.port.postMessage({name:"smoothing",smoothing:e}):console.log("Error: smoothing must be between 0 and 1")}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),this._workletNode.disconnect(),delete this._workletNode}}])&&M(t.prototype,n),r&&M(t,r),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=this.analyser=a.audiocontext.createAnalyser(),Object.defineProperties(this,{bins:{get:function(){return this.analyser.fftSize/2},set:function(e){this.analyser.fftSize=2*e},configurable:!0,enumerable:!0},smoothing:{get:function(){return this.analyser.smoothingTimeConstant},set:function(e){this.analyser.smoothingTimeConstant=e},configurable:!0,enumerable:!0}}),this.smooth(t),this.bins=n||1024,a.fftMeter.connect(this.analyser),this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount),this.bass=[20,140],this.lowMid=[140,400],this.mid=[400,2600],this.highMid=[2600,5200],this.treble=[5200,14e3],a.soundArray.push(this)}var t,n,r;return t=e,n=[{key:"setInput",value:function(e){e?(e.output?e.output.connect(this.analyser):e.connect&&e.connect(this.analyser),a.fftMeter.disconnect()):a.fftMeter.connect(this.analyser)}},{key:"waveform",value:function(){for(var e,t,n=new Array,r=0;r<arguments.length;r++)"number"===typeof arguments[r]&&(e=arguments[r],this.analyser.fftSize=2*e),"string"===typeof arguments[r]&&(t=arguments[r]);if(t&&!p5.prototype._isSafari())return function(e){e.timeDomain instanceof Float32Array===!1&&(e.timeDomain=new Float32Array(e.analyser.frequencyBinCount))}(this,this.timeDomain),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;!function(e){e.timeDomain instanceof Uint8Array===!1&&(e.timeDomain=new Uint8Array(e.analyser.frequencyBinCount))}(this,this.timeDomain),this.analyser.getByteTimeDomainData(this.timeDomain);for(var o=0;o<this.timeDomain.length;o++){var i=p5.prototype.map(this.timeDomain[o],0,255,-1,1);n.push(i)}return n}},{key:"analyze",value:function(){for(var e,t=0;t<arguments.length;t++)"number"===typeof arguments[t]&&(this.bins=arguments[t],this.analyser.fftSize=2*this.bins),"string"===typeof arguments[t]&&(e=arguments[t]);return e&&"db"===e.toLowerCase()?(function(e){e.freqDomain instanceof Float32Array===!1&&(e.freqDomain=new Float32Array(e.analyser.frequencyBinCount))}(this),this.analyser.getFloatFrequencyData(this.freqDomain),this.freqDomain):(function(e){e.freqDomain instanceof Uint8Array===!1&&(e.freqDomain=new Uint8Array(e.analyser.frequencyBinCount))}(this,this.freqDomain),this.analyser.getByteFrequencyData(this.freqDomain),Array.apply([],this.freqDomain))}},{key:"getEnergy",value:function(e,t){var n=a.audiocontext.sampleRate/2;if("bass"===e?(e=this.bass[0],t=this.bass[1]):"lowMid"===e?(e=this.lowMid[0],t=this.lowMid[1]):"mid"===e?(e=this.mid[0],t=this.mid[1]):"highMid"===e?(e=this.highMid[0],t=this.highMid[1]):"treble"===e&&(e=this.treble[0],t=this.treble[1]),"number"!==typeof e)throw"invalid input for getEnergy()";if(t){if(e&&t){if(e>t){var r=t;t=e,e=r}for(var o=Math.round(e/n*this.freqDomain.length),i=Math.round(t/n*this.freqDomain.length),s=0,l=0,c=o;c<=i;c++)s+=this.freqDomain[c],l+=1;return s/l}throw"invalid input for getEnergy()"}var u=Math.round(e/n*this.freqDomain.length);return this.freqDomain[u]}},{key:"getFreq",value:function(e,t){return console.log("getFreq() is deprecated. Please use getEnergy() instead."),this.getEnergy(e,t)}},{key:"getCentroid",value:function(){for(var e=a.audiocontext.sampleRate/2,t=0,n=0,r=0;r<this.freqDomain.length;r++)t+=r*this.freqDomain[r],n+=this.freqDomain[r];var o=0;return 0!==n&&(o=t/n),o*(e/this.freqDomain.length)}},{key:"smooth",value:function(e){return"undefined"!==typeof e&&(this.smoothing=e),this.smoothing}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.analyser&&(this.analyser.disconnect(),delete this.analyser)}},{key:"linAverages",value:function(e){for(var t=e||16,n=this.freqDomain,r=n.length,o=Math.floor(r/t),i=new Array(t),a=0,s=0;s<r;s++)i[a]=void 0!==i[a]?(i[a]+n[s])/2:n[s],s%o===o-1&&a++;return i}},{key:"logAverages",value:function(e){for(var t=a.audiocontext.sampleRate/2,n=this.freqDomain,r=n.length,o=new Array(e.length),i=0,s=0;s<r;s++)Math.round(s*t/this.freqDomain.length)>e[i].hi&&i++,o[i]=void 0!==o[i]?(o[i]+n[s])/2:n[s];return o}},{key:"getOctaveBands",value:function(e,t){var n=e||3,r=t||15.625,o=[],i={lo:r/Math.pow(2,1/(2*n)),ctr:r,hi:r*Math.pow(2,1/(2*n))};o.push(i);for(var s=a.audiocontext.sampleRate/2;i.hi<s;){var l={};l.lo=i.hi,l.ctr=i.ctr*Math.pow(2,1/n),l.hi=l.ctr*Math.pow(2,1/(2*n)),o.push(l),i=l}return o}}],n&&L(t.prototype,n),r&&L(t,r),e}();var B=F,U=r(4),z=r.n(U),V=r(1),G=r.n(V),W=r(8),H=r.n(W);function q(e){return q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function X(e,t){return!t||"object"!==q(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function K(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n,r,o){var i=e.oscillator;for(var a in e.mathOps)e.mathOps[a]instanceof o&&(i.disconnect(),e.mathOps[a].dispose(),(n=a)<e.mathOps.length-2&&(r=e.mathOps[a+1]));return n===e.mathOps.length-1&&e.mathOps.push(r),a>0&&(i=e.mathOps[a-1]),i.disconnect(),i.connect(t),t.connect(r),e.mathOps[n]=t,e}var ee=function(){function e(t,n){if(Q(this,e),"string"===typeof t){var r=n;n=t,t=r}if("number"===typeof n){var o=n;n=t,t=o}this.started=!1,this.phaseAmount=void 0,this.oscillator=a.audiocontext.createOscillator(),this.f=t||440,this.oscillator.type=n||"sine",this.oscillator.frequency.setValueAtTime(this.f,a.audiocontext.currentTime),this.output=a.audiocontext.createGain(),this._freqMods=[],this.output.gain.value=.5,this.output.gain.setValueAtTime(.5,a.audiocontext.currentTime),this.oscillator.connect(this.output),this.panPosition=0,this.connection=a.input,this.panner=new E(this.output,this.connection,1),this.mathOps=[this.output],a.soundArray.push(this),this.fade=this.amp}var t,n,r;return t=e,n=[{key:"start",value:function(e,t){if(this.started){var n=a.audiocontext.currentTime;this.stop(n)}if(!this.started){var r=t||this.f,o=this.oscillator.type;for(var i in this.oscillator&&(this.oscillator.disconnect(),delete this.oscillator),this.oscillator=a.audiocontext.createOscillator(),this.oscillator.frequency.value=Math.abs(r),this.oscillator.type=o,this.oscillator.connect(this.output),e=e||0,this.oscillator.start(e+a.audiocontext.currentTime),this.freqNode=this.oscillator.frequency,this._freqMods)"undefined"!==typeof this._freqMods[i].connect&&this._freqMods[i].connect(this.oscillator.frequency);this.started=!0}}},{key:"stop",value:function(e){if(this.started){var t=e||0,n=a.audiocontext.currentTime;this.oscillator.stop(t+n),this.started=!1}}},{key:"amp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("number"===typeof e){var r=a.audiocontext.currentTime;this.output.gain.linearRampToValueAtTime(e,r+n+t)}else{if(!e)return this.output.gain;e.connect(this.output.gain)}}},{key:"getAmp",value:function(){return this.output.gain.value}},{key:"freq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("number"!==typeof e||isNaN(e)){if(!e)return this.oscillator.frequency;e.output&&(e=e.output),e.connect(this.oscillator.frequency),this._freqMods.push(e)}else{this.f=e;var r=a.audiocontext.currentTime;0===t?this.oscillator.frequency.setValueAtTime(e,n+r):e>0?this.oscillator.frequency.exponentialRampToValueAtTime(e,n+t+r):this.oscillator.frequency.linearRampToValueAtTime(e,n+t+r),this.phaseAmount&&this.phase(this.phaseAmount)}}},{key:"getFreq",value:function(){return this.oscillator.frequency.value}},{key:"setType",value:function(e){this.oscillator.type=e}},{key:"getType",value:function(){return this.oscillator.type}},{key:"connect",value:function(e){e?e.hasOwnProperty("input")?(this.panner.connect(e.input),this.connection=e.input):(this.panner.connect(e),this.connection=e):this.panner.connect(a.input)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect(),this.panner&&(this.panner.disconnect(),this.output&&this.output.connect(this.panner)),this.oscMods=[]}},{key:"pan",value:function(e,t){this.panPosition=e,this.panner.pan(e,t)}},{key:"getPan",value:function(){return this.panPosition}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);if(a.soundArray.splice(e,1),this.oscillator){var t=a.audiocontext.currentTime;this.stop(t),this.disconnect(),this.panner=null,this.oscillator=null}this.osc2&&this.osc2.dispose()}},{key:"phase",value:function(e){var t=p5.prototype.map(e,0,1,0,1/this.f),n=a.audiocontext.currentTime;this.phaseAmount=e,this.dNode||(this.dNode=a.audiocontext.createDelay(),this.oscillator.disconnect(),this.oscillator.connect(this.dNode),this.dNode.connect(this.output)),this.dNode.delayTime.setValueAtTime(t,n)}},{key:"add",value:function(e){var t=new z.a(e);return $(this,t,this.mathOps.length-1,this.output,z.a)}},{key:"mult",value:function(e){var t=new G.a(e);return $(this,t,this.mathOps.length-1,this.output,G.a)}},{key:"scale",value:function(e,t,n,r){var o,i;4===arguments.length?(o=p5.prototype.map(n,e,t,0,1)-.5,i=p5.prototype.map(r,e,t,0,1)-.5):(o=arguments[0],i=arguments[1]);var a=new H.a(o,i);return $(this,a,this.mathOps.length-1,this.output,H.a)}}],n&&J(t.prototype,n),r&&J(t,r),e}(),te=function(e){function t(e){return Q(this,t),X(this,Y(t).call(this,e,"sine"))}return K(t,e),t}(ee),ne=function(e){function t(e){return Q(this,t),X(this,Y(t).call(this,e,"triangle"))}return K(t,e),t}(ee),re=function(e){function t(e){return Q(this,t),X(this,Y(t).call(this,e,"sawtooth"))}return K(t,e),t}(ee),oe=function(e){function t(e){return Q(this,t),X(this,Y(t).call(this,e,"square"))}return K(t,e),t}(ee),ie=ee,ae=r(7),se=r.n(ae);p5.Envelope=function(e,t,n,r,o,i){this.aTime=e||.1,this.aLevel=t||1,this.dTime=n||.5,this.dLevel=r||0,this.rTime=o||0,this.rLevel=i||0,this._rampHighPercentage=.98,this._rampLowPercentage=.02,this.output=a.audiocontext.createGain(),this.control=new se.a,this._init(),this.control.connect(this.output),this.connection=null,this.mathOps=[this.control],this.isExponential=!1,this.sourceToClear=null,this.wasTriggered=!1,a.soundArray.push(this)},p5.Envelope.prototype._init=function(){var e=a.audiocontext.currentTime;this.control.setTargetAtTime(1e-5,e,.001),this._setRampAD(this.aTime,this.dTime)},p5.Envelope.prototype.set=function(e,t,n,r,o,i){this.aTime=e,this.aLevel=t,this.dTime=n||0,this.dLevel=r||0,this.rTime=o||0,this.rLevel=i||0,this._setRampAD(e,n)},p5.Envelope.prototype.setADSR=function(e,t,n,r){this.aTime=e,this.dTime=t||0,this.sPercent=n||0,this.dLevel="undefined"!==typeof n?n*(this.aLevel-this.rLevel)+this.rLevel:0,this.rTime=r||0,this._setRampAD(e,t)},p5.Envelope.prototype.setRange=function(e,t){this.aLevel=e||1,this.rLevel=t||0},p5.Envelope.prototype._setRampAD=function(e,t){this._rampAttackTime=this.checkExpInput(e),this._rampDecayTime=this.checkExpInput(t);var n=1;n=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=e/this.checkExpInput(n),n=Math.log(1/this._rampLowPercentage),this._rampDecayTC=t/this.checkExpInput(n)},p5.Envelope.prototype.setRampPercentages=function(e,t){this._rampHighPercentage=this.checkExpInput(e),this._rampLowPercentage=this.checkExpInput(t);var n=1;n=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=this._rampAttackTime/this.checkExpInput(n),n=Math.log(1/this._rampLowPercentage),this._rampDecayTC=this._rampDecayTime/this.checkExpInput(n)},p5.Envelope.prototype.setInput=function(){for(var e=0;e<arguments.length;e++)this.connect(arguments[e])},p5.Envelope.prototype.setExp=function(e){this.isExponential=e},p5.Envelope.prototype.checkExpInput=function(e){return e<=0&&(e=1e-8),e},p5.Envelope.prototype.play=function(e,t,n){var r=t||0;e&&this.connection!==e&&this.connect(e),this.triggerAttack(e,r),this.triggerRelease(e,r+this.aTime+this.dTime+~~n)},p5.Envelope.prototype.triggerAttack=function(e,t){var n=a.audiocontext.currentTime+(t||0);this.lastAttack=n,this.wasTriggered=!0,e&&this.connection!==e&&this.connect(e);var r=this.control.getValueAtTime(n);!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(r),n):this.control.linearRampToValueAtTime(r,n),n+=this.aTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel),n),r=this.checkExpInput(this.control.getValueAtTime(n)),this.control.cancelScheduledValues(n),this.control.exponentialRampToValueAtTime(r,n)):(this.control.linearRampToValueAtTime(this.aLevel,n),r=this.control.getValueAtTime(n),this.control.cancelScheduledValues(n),this.control.linearRampToValueAtTime(r,n)),n+=this.dTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel),n),r=this.checkExpInput(this.control.getValueAtTime(n)),this.control.cancelScheduledValues(n),this.control.exponentialRampToValueAtTime(r,n)):(this.control.linearRampToValueAtTime(this.dLevel,n),r=this.control.getValueAtTime(n),this.control.cancelScheduledValues(n),this.control.linearRampToValueAtTime(r,n))},p5.Envelope.prototype.triggerRelease=function(e,t){if(this.wasTriggered){var n=a.audiocontext.currentTime+(t||0);e&&this.connection!==e&&this.connect(e);var r=this.control.getValueAtTime(n);!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(r),n):this.control.linearRampToValueAtTime(r,n),n+=this.rTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel),n),r=this.checkExpInput(this.control.getValueAtTime(n)),this.control.cancelScheduledValues(n),this.control.exponentialRampToValueAtTime(r,n)):(this.control.linearRampToValueAtTime(this.rLevel,n),r=this.control.getValueAtTime(n),this.control.cancelScheduledValues(n),this.control.linearRampToValueAtTime(r,n)),this.wasTriggered=!1}},p5.Envelope.prototype.ramp=function(e,t,n,r){var o=a.audiocontext.currentTime+(t||0),i=this.checkExpInput(n),s="undefined"!==typeof r?this.checkExpInput(r):void 0;e&&this.connection!==e&&this.connect(e);var l=this.checkExpInput(this.control.getValueAtTime(o));i>l?(this.control.setTargetAtTime(i,o,this._rampAttackTC),o+=this._rampAttackTime):i<l&&(this.control.setTargetAtTime(i,o,this._rampDecayTC),o+=this._rampDecayTime),void 0!==s&&(s>i?this.control.setTargetAtTime(s,o,this._rampAttackTC):s<i&&this.control.setTargetAtTime(s,o,this._rampDecayTC))},p5.Envelope.prototype.connect=function(e){this.connection=e,(e instanceof p5.Oscillator||e instanceof p5.SoundFile||e instanceof p5.AudioIn||e instanceof p5.Reverb||e instanceof p5.Noise||e instanceof p5.Filter||e instanceof p5.Delay)&&(e=e.output.gain),e instanceof AudioParam&&e.setValueAtTime(0,a.audiocontext.currentTime),this.output.connect(e)},p5.Envelope.prototype.disconnect=function(){this.output&&this.output.disconnect()},p5.Envelope.prototype.add=function(e){var t=new z.a(e),n=this.mathOps.length,r=this.output;return p5.prototype._mathChain(this,t,n,r,z.a)},p5.Envelope.prototype.mult=function(e){var t=new G.a(e),n=this.mathOps.length,r=this.output;return p5.prototype._mathChain(this,t,n,r,G.a)},p5.Envelope.prototype.scale=function(e,t,n,r){var o=new H.a(e,t,n,r),i=this.mathOps.length,a=this.output;return p5.prototype._mathChain(this,o,i,a,H.a)},p5.Envelope.prototype.dispose=function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.disconnect(),this.control&&(this.control.dispose(),this.control=null);for(var t=1;t<this.mathOps.length;t++)this.mathOps[t].dispose()},p5.Env=function(e,t,n,r,o,i){console.warn("WARNING: p5.Env is now deprecated and may be removed in future versions. Please use the new p5.Envelope instead."),p5.Envelope.call(this,e,t,n,r,o,i)},p5.Env.prototype=Object.create(p5.Envelope.prototype);var le=p5.Envelope;function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function pe(e,t){return pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pe(e,t)}var fe=function(){for(var e=2*a.audiocontext.sampleRate,t=a.audiocontext.createBuffer(1,e,a.audiocontext.sampleRate),n=t.getChannelData(0),r=0;r<e;r++)n[r]=2*Math.random()-1;return t.type="white",t}(),me=function(){var e,t,n,r,o,i,s,l=2*a.audiocontext.sampleRate,c=a.audiocontext.createBuffer(1,l,a.audiocontext.sampleRate),u=c.getChannelData(0);e=t=n=r=o=i=s=0;for(var d=0;d<l;d++){var h=2*Math.random()-1;e=.99886*e+.0555179*h,t=.99332*t+.0750759*h,n=.969*n+.153852*h,r=.8665*r+.3104856*h,o=.55*o+.5329522*h,i=-.7616*i-.016898*h,u[d]=e+t+n+r+o+i+s+.5362*h,u[d]*=.11,s=.115926*h}return c.type="pink",c}(),ge=function(){for(var e=2*a.audiocontext.sampleRate,t=a.audiocontext.createBuffer(1,e,a.audiocontext.sampleRate),n=t.getChannelData(0),r=0,o=0;o<e;o++){var i=2*Math.random()-1;n[o]=(r+.02*i)/1.02,r=n[o],n[o]*=3.5}return t.type="brown",t}(),ye=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),delete(n=de(this,he(t).call(this))).f,delete n.freq,delete n.oscillator,r="brown"===e?ge:"pink"===e?me:fe,n.buffer=r,n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"setType",value:function(e){switch(e){case"white":default:this.buffer=fe;break;case"pink":this.buffer=me;break;case"brown":this.buffer=ge}if(this.started){var t=a.audiocontext.currentTime;this.stop(t),this.start(t+.01)}}},{key:"getType",value:function(){return this.buffer.type}},{key:"start",value:function(){this.started&&this.stop(),this.noise=a.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output);var e=a.audiocontext.currentTime;this.noise.start(e),this.started=!0}},{key:"stop",value:function(){var e=a.audiocontext.currentTime;this.noise&&(this.noise.stop(e),this.started=!1)}},{key:"dispose",value:function(){var e=a.audiocontext.currentTime,t=a.soundArray.indexOf(this);a.soundArray.splice(t,1),this.noise&&(this.noise.disconnect(),this.stop(e)),this.output&&this.output.disconnect(),this.panner&&this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise=null}}])&&ue(n.prototype,r),o&&ue(n,o),t}(ie),ve=r(2),be=r.n(ve);function xe(e){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function ke(e,t){return ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ke(e,t)}var Te=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Se(this,_e(t).call(this,e,"sawtooth"))).w=n||0,r.osc2=new re(e),r.dNode=a.audiocontext.createDelay(),r.dcOffset=Ee(),r.dcGain=a.audiocontext.createGain(),r.dcOffset.connect(r.dcGain),r.dcGain.connect(r.output),r.f=e||440;var o=r.w/r.oscillator.frequency.value;return r.dNode.delayTime.value=o,r.dcGain.gain.value=1.7*(.5-r.w),r.osc2.disconnect(),r.osc2.panner.disconnect(),r.osc2.amp(-1),r.osc2.output.connect(r.dNode),r.dNode.connect(r.output),r.output.gain.value=1,r.output.connect(r.panner),r}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),n=t,r=[{key:"width",value:function(e){if("number"===typeof e){if(e<=1&&e>=0){this.w=e;var t=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=t}this.dcGain.gain.value=1.7*(.5-this.w)}else{e.connect(this.dNode.delayTime);var n=new be.a(-.5);e.connect(n);var r=new G.a(-1),o=new G.a(1.7);(n=n.connect(r).connect(o)).connect(this.dcGain.gain)}}},{key:"start",value:function(e,t){var n=a.audiocontext.currentTime,r=t||0;if(!this.started){var o=e||this.f,i=this.oscillator.type;this.oscillator=a.audiocontext.createOscillator(),this.oscillator.frequency.setValueAtTime(o,n),this.oscillator.type=i,this.oscillator.connect(this.output),this.oscillator.start(r+n),this.osc2.oscillator=a.audiocontext.createOscillator(),this.osc2.oscillator.frequency.setValueAtTime(o,r+n),this.osc2.oscillator.type=i,this.osc2.oscillator.connect(this.osc2.output),this.osc2.start(r+n),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],this.dcOffset=Ee(),this.dcOffset.connect(this.dcGain),this.dcOffset.start(r+n),void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1])),this.started=!0,this.osc2.started=!0}}},{key:"stop",value:function(e){if(this.started){var t=e||0,n=a.audiocontext.currentTime;this.oscillator.stop(t+n),this.osc2.oscillator&&this.osc2.oscillator.stop(t+n),this.dcOffset.stop(t+n),this.started=!1,this.osc2.started=!1}}},{key:"freq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("number"===typeof e){this.f=e;var r=a.audiocontext.currentTime,o=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(r),this.oscillator.frequency.setValueAtTime(o,r+n),this.oscillator.frequency.exponentialRampToValueAtTime(e,n+t+r),this.osc2.oscillator.frequency.cancelScheduledValues(r),this.osc2.oscillator.frequency.setValueAtTime(o,r+n),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(e,n+t+r),this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else e.output&&(e.output.disconnect(),e.output.connect(this.oscillator.frequency),e.output.connect(this.osc2.oscillator.frequency),this.freqMod=e)}}],r&&we(n.prototype,r),o&&we(n,o),t}(ie);function Ee(){for(var e=a.audiocontext,t=e.createBuffer(1,2048,e.sampleRate),n=t.getChannelData(0),r=0;r<2048;r++)n[r]=1;var o=e.createBufferSource();return o.buffer=t,o.loop=!0,o}var Ce=Te;function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.inputSources=[];var je=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=a.audiocontext.createGain(),this.output=a.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=null,this.enabled=!1,this.amplitude=new D,this.output.connect(this.amplitude.input),window.MediaStreamTrack&&window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia||(t?t():window.alert("This browser does not support MediaStreamTrack and mediaDevices")),a.soundArray.push(this)}var t,n,r;return t=e,(n=[{key:"start",value:function(e,t){var n=this;this.stream&&this.stop();var r=a.inputSources[n.currentSource],o={audio:{sampleRate:a.audiocontext.sampleRate,echoCancellation:!1}};a.inputSources[this.currentSource]&&(o.audio.deviceId=r.deviceId),window.navigator.mediaDevices.getUserMedia(o).then((function(t){n.stream=t,n.enabled=!0,n.mediaStream=a.audiocontext.createMediaStreamSource(t),n.mediaStream.connect(n.output),n.amplitude.setInput(n.output),e&&e()})).catch((function(e){t?t(e):console.error(e)}))}},{key:"stop",value:function(){this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),this.mediaStream.disconnect(),delete this.mediaStream,delete this.stream)}},{key:"connect",value:function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):e.hasOwnProperty("analyser")?this.output.connect(e.analyser):this.output.connect(e):this.output.connect(a.input)}},{key:"disconnect",value:function(){this.output&&(this.output.disconnect(),this.output.connect(this.amplitude.input))}},{key:"getLevel",value:function(e){return e&&(this.amplitude.smoothing=e),this.amplitude.getLevel()}},{key:"amp",value:function(e,t){if(t){var n=t||0,r=this.output.gain.value;this.output.gain.cancelScheduledValues(a.audiocontext.currentTime),this.output.gain.setValueAtTime(r,a.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(e,n+a.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(a.audiocontext.currentTime),this.output.gain.setValueAtTime(e,a.audiocontext.currentTime)}},{key:"getSources",value:function(e,t){return new Promise((function(n,r){window.navigator.mediaDevices.enumerateDevices().then((function(t){a.inputSources=t.filter((function(e){return"audioinput"===e.kind})),n(a.inputSources),e&&e(a.inputSources)})).catch((function(e){r(e),t?t(e):console.error("This browser does not support MediaStreamTrack.getSources()")}))}))}},{key:"setSource",value:function(e){a.inputSources.length>0&&e<a.inputSources.length?(this.currentSource=e,console.log("set source to ",a.inputSources[this.currentSource])):console.log("unable to set input source"),this.stream&&this.stream.active&&this.start()}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.stop(),this.output&&this.output.disconnect(),this.amplitude&&this.amplitude.disconnect(),delete this.amplitude,delete this.output}}])&&Ie(t.prototype,n),r&&Ie(t,r),e}(),Ae=r(23),Oe=r.n(Ae);function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ac=a.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this._drywet=new Oe.a(1),this.wet=this.ac.createGain(),this.input.connect(this._drywet.a),this.wet.connect(this._drywet.b),this._drywet.connect(this.output),this.connect(),a.soundArray.push(this)}var t,n,r;return t=e,n=[{key:"amp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.audiocontext.currentTime,o=r+n,i=o+t+.001,s=this.output.gain.value;this.output.gain.cancelScheduledValues(r),this.output.gain.linearRampToValueAtTime(s,o+.001),this.output.gain.linearRampToValueAtTime(e,i)}},{key:"chain",value:function(){if(arguments.length>0){this.connect(arguments[0]);for(var e=1;e<arguments.length;e+=1)arguments[e-1].connect(arguments[e])}return this}},{key:"drywet",value:function(e){return"undefined"!==typeof e&&(this._drywet.fade.value=e),this._drywet.fade.value}},{key:"connect",value:function(e){var t=e||p5.soundOut.input;this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),this._drywet&&(this._drywet.disconnect(),delete this._drywet),this.wet&&(this.wet.disconnect(),delete this.wet),this.ac=void 0}}],n&&Ne(t.prototype,n),r&&Ne(t,r),e}(),Pe=Re;function Me(e){return Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e,t,n){return Be="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},Be(e,t,n||e)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function ze(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}var Ge=function(e){function t(e){var n;return De(this,t),(n=Fe(this,Ue(t).call(this))).biquad=n.ac.createBiquadFilter(),n.input.connect(n.biquad),n.biquad.connect(n.wet),e&&n.setType(e),n._on=!0,n._untoggledType=n.biquad.type,n}var n,r,o;return ze(t,e),n=t,(r=[{key:"process",value:function(e,t,n,r){e.connect(this.input),this.set(t,n,r)}},{key:"set",value:function(e,t,n){e&&this.freq(e,n),t&&this.res(t,n)}},{key:"freq",value:function(e,t){var n=t||0;return e<=0&&(e=1),"number"===typeof e?(this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.frequency.exponentialRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.frequency),this.biquad.frequency.value}},{key:"res",value:function(e,t){var n=t||0;return"number"===typeof e?(this.biquad.Q.value=e,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.Q.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.Q),this.biquad.Q.value}},{key:"gain",value:function(e,t){var n=t||0;return"number"===typeof e?(this.biquad.gain.value=e,this.biquad.gain.cancelScheduledValues(this.ac.currentTime+.01+n),this.biquad.gain.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.biquad.gain),this.biquad.gain.value}},{key:"toggle",value:function(){return this._on=!this._on,!0===this._on?this.biquad.type=this._untoggledType:!1===this._on&&(this.biquad.type="allpass"),this._on}},{key:"setType",value:function(e){this.biquad.type=e,this._untoggledType=this.biquad.type}},{key:"dispose",value:function(){Be(Ue(t.prototype),"dispose",this).call(this),this.biquad&&(this.biquad.disconnect(),delete this.biquad)}}])&&Le(n.prototype,r),o&&Le(n,o),t}(Pe),We=function(e){function t(){return De(this,t),Fe(this,Ue(t).call(this,"lowpass"))}return ze(t,e),t}(Ge),He=function(e){function t(){return De(this,t),Fe(this,Ue(t).call(this,"highpass"))}return ze(t,e),t}(Ge),qe=function(e){function t(){return De(this,t),Fe(this,Ue(t).call(this,"bandpass"))}return ze(t,e),t}(Ge),Xe=Ge;function Ye(e){return Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t){return!t||"object"!==Ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}var $e=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ze(this,Qe(t).call(this,"peaking"))).disconnect(),r.set(e,n),r.biquad.gain.value=0,delete r.input,delete r.output,delete r._drywet,delete r.wet,r}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,e),n=t,(r=[{key:"amp",value:function(){console.warn("`amp()` is not available for p5.EQ bands. Use `.gain()`")}},{key:"drywet",value:function(){console.warn("`drywet()` is not available for p5.EQ bands.")}},{key:"connect",value:function(e){var t=e||p5.soundOut.input;this.biquad?this.biquad.connect(t.input?t.input:t):this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.biquad&&this.biquad.disconnect()}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.disconnect(),delete this.biquad}}])&&Ke(n.prototype,r),o&&Ke(n,o),t}(Xe);function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e,t,n){return rt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ot(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},rt(e,t,n||e)}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t){return it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},it(e,t)}var at=function(e){function t(e){var n,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=nt(this,ot(t).call(this)),r=3===(e=3===e||8===e?e:3)?Math.pow(2,3):2,n.bands=[];for(var a=0;a<e;a++)a===e-1?(o=21e3,i=.01):0===a?(o=100,i=.1):1===a?(o=3===e?360*r:360,i=1):(o=n.bands[a-1].freq()*r,i=1),n.bands[a]=n._newBand(o,i),a>0?n.bands[a-1].connect(n.bands[a].biquad):n.input.connect(n.bands[a].biquad);return n.bands[e-1].connect(n.output),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,r=[{key:"process",value:function(e){e.connect(this.input)}},{key:"set",value:function(){if(arguments.length===2*this.bands.length)for(var e=0;e<arguments.length;e+=2)this.bands[e/2].freq(arguments[e]),this.bands[e/2].gain(arguments[e+1]);else console.error("Argument mismatch. .set() should be called with "+2*this.bands.length+" arguments. (one frequency and gain value pair for each band of the eq)")}},{key:"_newBand",value:function(e,t){return new $e(e,t)}},{key:"dispose",value:function(){if(rt(ot(t.prototype),"dispose",this).call(this),this.bands){for(;this.bands.length>0;)this.bands.pop().dispose();delete this.bands}}}],r&&tt(n.prototype,r),o&&tt(n,o),t}(Pe),st=at;function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ac=a.audiocontext,this.listener=this.ac.listener}var t,n,r;return t=e,n=[{key:"process",value:function(e){e.connect(this.input)}},{key:"position",value:function(e,t,n,r){return this.positionX(e,r),this.positionY(t,r),this.positionZ(n,r),[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}},{key:"positionX",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.positionX.value=e,this.listener.positionX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionX),this.listener.positionX.value}},{key:"positionY",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.positionY.value=e,this.listener.positionY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionY),this.listener.positionY.value}},{key:"positionZ",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.positionZ.value=e,this.listener.positionZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.positionZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.positionZ),this.listener.positionZ.value}},{key:"orient",value:function(e,t,n,r,o,i,a){return 3===arguments.length||4===arguments.length?(a=arguments[3],this.orientForward(e,t,n,a)):6!==arguments.length&&7!==arguments||(this.orientForward(e,t,n),this.orientUp(r,o,i,a)),[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value,this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}},{key:"orientForward",value:function(e,t,n,r){return this.forwardX(e,r),this.forwardY(t,r),this.forwardZ(n,r),[this.listener.forwardX,this.listener.forwardY,this.listener.forwardZ]}},{key:"orientUp",value:function(e,t,n,r){return this.upX(e,r),this.upY(t,r),this.upZ(n,r),[this.listener.upX,this.listener.upY,this.listener.upZ]}},{key:"forwardX",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.forwardX.value=e,this.listener.forwardX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardX),this.listener.forwardX.value}},{key:"forwardY",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.forwardY.value=e,this.listener.forwardY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardY),this.listener.forwardY.value}},{key:"forwardZ",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.forwardZ.value=e,this.listener.forwardZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.forwardZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.forwardZ),this.listener.forwardZ.value}},{key:"upX",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.upX.value=e,this.listener.upX.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upX),this.listener.upX.value}},{key:"upY",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.upY.value=e,this.listener.upY.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upY),this.listener.upY.value}},{key:"upZ",value:function(e,t){var n=t||0;return"number"===typeof e?(this.listener.upZ.value=e,this.listener.upZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.listener.upZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.listener.upZ),this.listener.upZ.value}}],n&&lt(t.prototype,n),r&&lt(t,r),e}(),ut=ct;function dt(e){return dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==dt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e,t,n){return ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},ft(e,t,n||e)}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}function gt(e,t){return gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gt(e,t)}var yt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=pt(this,mt(t).call(this))).panner=e.ac.createPanner(),e.panner.panningModel="HRTF",e.panner.distanceModel="linear",e.panner.connect(e.output),e.input.connect(e.panner),e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,e),n=t,(r=[{key:"process",value:function(e){e.connect(this.input)}},{key:"set",value:function(e,t,n,r){return this.positionX(e,r),this.positionY(t,r),this.positionZ(n,r),[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}},{key:"positionX",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.positionX.value=e,this.panner.positionX.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionX),this.panner.positionX.value}},{key:"positionY",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.positionY.value=e,this.panner.positionY.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionY),this.panner.positionY.value}},{key:"positionZ",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.positionZ.value=e,this.panner.positionZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.positionZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.positionZ),this.panner.positionZ.value}},{key:"orient",value:function(e,t,n,r){return this.orientX(e,r),this.orientY(t,r),this.orientZ(n,r),[this.panner.orientationX.value,this.panner.orientationY.value,this.panner.orientationZ.value]}},{key:"orientX",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.orientationX.value=e,this.panner.orientationX.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationX.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationX),this.panner.orientationX.value}},{key:"orientY",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.orientationY.value=e,this.panner.orientationY.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationY.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationY),this.panner.orientationY.value}},{key:"orientZ",value:function(e,t){var n=t||0;return"number"===typeof e?(this.panner.orientationZ.value=e,this.panner.orientationZ.cancelScheduledValues(this.ac.currentTime+.01+n),this.panner.orientationZ.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):e&&e.connect(this.panner.orientationZ),this.panner.orientationZ.value}},{key:"setFalloff",value:function(e,t){this.maxDist(e),this.rolloff(t)}},{key:"maxDist",value:function(e){return"number"===typeof e&&(this.panner.maxDistance=e),this.panner.maxDistance}},{key:"rolloff",value:function(e){return"number"===typeof e&&(this.panner.rolloffFactor=e),this.panner.rolloffFactor}},{key:"dispose",value:function(){ft(mt(t.prototype),"dispose",this).call(this),this.panner&&(this.panner.disconnect(),delete this.panner)}}])&&ht(n.prototype,r),o&&ht(n,o),t}(Pe);function vt(e){return vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return!t||"object"!==vt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wt(e,t,n){return wt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=St(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},wt(e,t,n||e)}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function _t(e,t){return _t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_t(e,t)}var kt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=xt(this,St(t).call(this)))._split=e.ac.createChannelSplitter(2),e._merge=e.ac.createChannelMerger(2),e._leftGain=e.ac.createGain(),e._rightGain=e.ac.createGain(),e.leftDelay=e.ac.createDelay(),e.rightDelay=e.ac.createDelay(),e._leftFilter=new Xe,e._rightFilter=new Xe,e._leftFilter.disconnect(),e._rightFilter.disconnect(),e._leftFilter.biquad.frequency.setValueAtTime(1200,e.ac.currentTime),e._rightFilter.biquad.frequency.setValueAtTime(1200,e.ac.currentTime),e._leftFilter.biquad.Q.setValueAtTime(.3,e.ac.currentTime),e._rightFilter.biquad.Q.setValueAtTime(.3,e.ac.currentTime),e.input.connect(e._split),e.leftDelay.connect(e._leftGain),e.rightDelay.connect(e._rightGain),e._leftGain.connect(e._leftFilter.input),e._rightGain.connect(e._rightFilter.input),e._merge.connect(e.wet),e._leftFilter.biquad.gain.setValueAtTime(1,e.ac.currentTime),e._rightFilter.biquad.gain.setValueAtTime(1,e.ac.currentTime),e.setType(0),e._maxDelay=e.leftDelay.delayTime.maxValue,e.feedback(.5),e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,e),n=t,(r=[{key:"process",value:function(e,t,n,r){var o=n||0,i=t||0;if(o>=1)throw new Error("Feedback value will force a positive feedback loop.");if(i>=this._maxDelay)throw new Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");e.connect(this.input),this.leftDelay.delayTime.setValueAtTime(i,this.ac.currentTime),this.rightDelay.delayTime.setValueAtTime(i,this.ac.currentTime),this._leftGain.gain.value=o,this._rightGain.gain.value=o,r&&(this._leftFilter.freq(r),this._rightFilter.freq(r))}},{key:"delayTime",value:function(e){"number"!==typeof e?(e.connect(this.leftDelay.delayTime),e.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(e,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(e,this.ac.currentTime))}},{key:"feedback",value:function(e){if(e&&"number"!==typeof e)e.connect(this._leftGain.gain),e.connect(this._rightGain.gain);else{if(e>=1)throw new Error("Feedback value will force a positive feedback loop.");"number"===typeof e&&(this._leftGain.gain.value=e,this._rightGain.gain.value=e)}return this._leftGain.gain.value}},{key:"filter",value:function(e,t){this._leftFilter.set(e,t),this._rightFilter.set(e,t)}},{key:"setType",value:function(e){1===e&&(e="pingPong"),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._split.connect(this.leftDelay,0),this._split.connect(this.rightDelay,1),"pingPong"===e?(this._rightFilter.setType(this._leftFilter.biquad.type),this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.rightDelay),this._rightFilter.output.connect(this.leftDelay)):(this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._rightFilter.output.connect(this.rightDelay))}},{key:"dispose",value:function(){wt(St(t.prototype),"dispose",this).call(this),this._split.disconnect(),this._leftFilter.dispose(),this._rightFilter.dispose(),this._merge.disconnect(),this._leftGain.disconnect(),this._rightGain.disconnect(),this.leftDelay.disconnect(),this.rightDelay.disconnect(),this._split=void 0,this._leftFilter=void 0,this._rightFilter=void 0,this._merge=void 0,this._leftGain=void 0,this._rightGain=void 0,this.leftDelay=void 0,this.rightDelay=void 0}}])&&bt(n.prototype,r),o&&bt(n,o),t}(Pe);function Tt(e){return Tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),e}function jt(e,t){return!t||"object"!==Tt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e,t,n){return At="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ot(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},At(e,t,n||e)}function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ot(e)}function Nt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}var Pt=function(e){function t(){var e;return Et(this,t),(e=jt(this,Ot(t).call(this)))._initConvolverNode(),e.input.gain.value=.5,e._seconds=3,e._decay=2,e._reverse=!1,e._buildImpulse(),e}return Nt(t,e),It(t,[{key:"_initConvolverNode",value:function(){this.convolverNode=this.ac.createConvolver(),this.input.connect(this.convolverNode),this.convolverNode.connect(this.wet)}},{key:"_teardownConvolverNode",value:function(){this.convolverNode&&(this.convolverNode.disconnect(),delete this.convolverNode)}},{key:"_setBuffer",value:function(e){this._teardownConvolverNode(),this._initConvolverNode(),this.convolverNode.buffer=e}},{key:"process",value:function(e,t,n,r){e.connect(this.input);var o=!1;t&&(this._seconds=t,o=!0),n&&(this._decay=n),r&&(this._reverse=r),o&&this._buildImpulse()}},{key:"set",value:function(e,t,n){var r=!1;e&&(this._seconds=e,r=!0),t&&(this._decay=t),n&&(this._reverse=n),r&&this._buildImpulse()}},{key:"_buildImpulse",value:function(){var e,t,n=this.ac.sampleRate,r=n*this._seconds,o=this._decay,i=this.ac.createBuffer(2,r,n),a=i.getChannelData(0),s=i.getChannelData(1);for(t=0;t<r;t++)e=this._reverse?r-t:t,a[t]=(2*Math.random()-1)*Math.pow(1-e/r,o),s[t]=(2*Math.random()-1)*Math.pow(1-e/r,o);this._setBuffer(i)}},{key:"dispose",value:function(){At(Ot(t.prototype),"dispose",this).call(this),this._teardownConvolverNode()}}]),t}(Pe),Mt=function(e){function t(e,n,r){var o;return Et(this,t),(o=jt(this,Ot(t).call(this)))._initConvolverNode(),o.input.gain.value=.5,e?(o.impulses=[],o._loadBuffer(e,n,r)):(o._seconds=3,o._decay=2,o._reverse=!1,o._buildImpulse()),o.impulses=[],o.set=null,o}return Nt(t,e),It(t,[{key:"_loadBuffer",value:function(e,t,n){var r=p5.prototype._checkFileFormats(e),i=this,a=(new Error).stack,s=Object(o.b)(),l=new XMLHttpRequest;l.open("GET",r,!0),l.responseType="arraybuffer",l.onload=function(){if(200===l.status)s.decodeAudioData(l.response,(function(e){var n={},o=r.split("/");n.name=o[o.length-1],n.audioBuffer=e,i.impulses.push(n),i._setBuffer(n.audioBuffer),t&&t(n)}),(function(){var e=new y("decodeAudioData",a,i.url),t="AudioContext error at decodeAudioData for "+i.url;n?(e.msg=t,n(e)):console.error(t+"\n The error stack trace includes: \n"+e.stack)}));else{var e=new y("loadConvolver",a,i.url),o="Unable to load "+i.url+". The request status was: "+l.status+" ("+l.statusText+")";n?(e.message=o,n(e)):console.error(o+"\n The error stack trace includes: \n"+e.stack)}},l.onerror=function(){var e=new y("loadConvolver",a,i.url),t="There was no response from the server at "+i.url+". Check the url and internet connectivity.";n?(e.message=t,n(e)):console.error(t+"\n The error stack trace includes: \n"+e.stack)},l.send()}},{key:"process",value:function(e){e.connect(this.input)}},{key:"addImpulse",value:function(e,t,n){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this._loadBuffer(e,t,n)}},{key:"resetImpulse",value:function(e,t,n){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this.impulses=[],this._loadBuffer(e,t,n)}},{key:"toggleImpulse",value:function(e){if("number"===typeof e&&e<this.impulses.length&&this._setBuffer(this.impulses[e].audioBuffer),"string"===typeof e)for(var t=0;t<this.impulses.length;t++)if(this.impulses[t].name===e){this._setBuffer(this.impulses[t].audioBuffer);break}}},{key:"dispose",value:function(){for(var e in At(Ot(t.prototype),"dispose",this).call(this),this.impulses)this.impulses[e]&&(this.impulses[e]=null)}}]),t}(Pt);var Dt=r(11),Lt=r.n(Dt);function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clock=new Lt.a({callback:this.ontick.bind(this)}),this.syncedParts=[],this.bpm=120,this._init(),this.prevTick=0,this.tatumTime=0,this.tickCallback=function(){}}var t,n,r;return t=e,n=[{key:"ontick",value:function(e){var t=e-this.prevTick,n=e-a.audiocontext.currentTime;if(!(t-this.tatumTime<=-.02)){this.prevTick=e;var r=this;this.syncedParts.forEach((function(e){e.isPlaying&&(e.incrementStep(n),e.phrases.forEach((function(e){var t=e.sequence,o=r.metroTicks%t.length;0!==t[o]&&(r.metroTicks<t.length||!e.looping)&&e.callback(n,t[o])})))})),this.metroTicks+=1,this.tickCallback(n)}}},{key:"setBPM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=60/(e*this.tatums),r=a.audiocontext.currentTime;this.tatumTime=n,this.clock.frequency.setValueAtTime(this.clock.frequency.value,r),this.clock.frequency.linearRampToValueAtTime(e,r+t),this.bpm=e}},{key:"getBPM",value:function(){return this.clock.getRate()/this.tatums*60}},{key:"_init",value:function(){this.metroTicks=0}},{key:"resetSync",value:function(e){this.syncedParts=[e]}},{key:"pushSync",value:function(e){this.syncedParts.push(e)}},{key:"start",value:function(e){var t=e||0,n=a.audiocontext.currentTime;this.clock.start(n+t),this.setBPM(this.bpm)}},{key:"stop",value:function(e){var t=e||0,n=a.audiocontext.currentTime;this.clock.stop(n+t)}},{key:"beatLength",value:function(e){this.tatums=1/e/4}}],n&&Ft(t.prototype,n),r&&Ft(t,r),e}(),Ut=Bt;function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Wt=120;p5.prototype.setBPM=function(e,t){for(var n in Wt=e,a.parts)a.parts[n]&&a.parts[n].setBPM(e,t)};var Ht=function e(t,n,r){Gt(this,e),this.phraseStep=0,this.name=t,this.callback=n,this.sequence=r},qt=function(){function e(t,n){Gt(this,e),this.length=t||0,this.partStep=0,this.phrases=[],this.isPlaying=!1,this.noLoop(),this.tatums=n||.0625,this.metro=new Ut,this.metro._init(),this.metro.beatLength(this.tatums),this.metro.setBPM(Wt),a.parts.push(this),this.callback=function(){}}return Vt(e,[{key:"setBPM",value:function(e,t){this.metro.setBPM(e,t)}},{key:"getBPM",value:function(){return this.metro.getBPM()}},{key:"start",value:function(e){if(!this.isPlaying){this.isPlaying=!0,this.metro.resetSync(this);var t=e||0;this.metro.start(t)}}},{key:"loop",value:function(e){this.looping=!0,this.onended=function(){this.partStep=0};var t=e||0;this.start(t)}},{key:"noLoop",value:function(){this.looping=!1,this.onended=function(){this.stop()}}},{key:"stop",value:function(e){this.partStep=0,this.pause(e)}},{key:"pause",value:function(e){this.isPlaying=!1;var t=e||0;this.metro.stop(t)}},{key:"addPhrase",value:function(e,t,n){var r;if(3===arguments.length)r=new Ht(e,t,n);else{if(!(arguments[0]instanceof Ht))throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";r=arguments[0]}this.phrases.push(r),r.sequence.length>this.length&&(this.length=r.sequence.length)}},{key:"removePhrase",value:function(e){for(var t in this.phrases)this.phrases[t].name===e&&this.phrases.splice(t,1)}},{key:"getPhrase",value:function(e){for(var t in this.phrases)if(this.phrases[t].name===e)return this.phrases[t]}},{key:"replaceSequence",value:function(e,t){for(var n in this.phrases)this.phrases[n].name===e&&(this.phrases[n].sequence=t)}},{key:"incrementStep",value:function(e){this.partStep<this.length-1?(this.callback(e),this.partStep+=1):this.looping||this.partStep!==this.length-1||this.onended()}},{key:"onStep",value:function(e){this.callback=e}}]),e}(),Xt=function(){function e(){Gt(this,e),this.parts=[],this.currentPart=new Array(arguments.length);var t=this;for(var n in arguments)this.parts[n]=arguments[n],this.parts[n].nextPart=this.parts[n+1],this.parts[n].onended=function(){t.resetPart(n),Yt(t)};this.looping=!1}return Vt(e,[{key:"onended",value:function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop(),this.resetParts()},this.currentPart=0}},{key:"start",value:function(){this.parts[this.currentPart].start(),this.scoreStep=0}},{key:"stop",value:function(){this.parts[this.currentPart].stop(),this.currentPart=0,this.scoreStep=0}},{key:"pause",value:function(){this.parts[this.currentPart].stop()}},{key:"loop",value:function(){this.looping=!0,this.start()}},{key:"noLoop",value:function(){this.looping=!1}},{key:"resetParts",value:function(){var e=this;this.parts.forEach((function(t){e.resetParts[t]}))}},{key:"resetPart",value:function(e){for(var t in this.parts[e].stop(),this.parts[e].partStep=0,this.parts[e].phrases)this.parts[e]&&(this.parts[e].phrases[t].phraseStep=0)}},{key:"setBPM",value:function(e,t){for(var n in this.parts)this.parts[n]&&this.parts[n].setBPM(e,t)}}]),e}();function Yt(e){e.currentPart++,e.currentPart>=e.parts.length?(e.scoreStep=0,e.onended()):(e.scoreStep=0,e.parts[e.currentPart-1].stop(),e.parts[e.currentPart].start())}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"bpm",{get:function(){return this._bpm},set:function(e){this.musicalTimeMode||console.warn('Changing the BPM in "seconds" mode has no effect. BPM is only relevant in musicalTimeMode when the interval is specified as a string ("2n", "4n", "1m"...etc)'),this._bpm=e,this._update()}}),Object.defineProperty(this,"timeSignature",{get:function(){return this._timeSignature},set:function(e){this.musicalTimeMode||console.warn('Changing the timeSignature in "seconds" mode has no effect. BPM is only relevant in musicalTimeMode when the interval is specified as a string ("2n", "4n", "1m"...etc)'),this._timeSignature=e,this._update()}}),Object.defineProperty(this,"interval",{get:function(){return this._interval},set:function(e){this.musicalTimeMode="number"!==typeof e,this._interval=e,this._update()}}),Object.defineProperty(this,"iterations",{get:function(){return this.clock.ticks}}),this.callback=t,this.musicalTimeMode="number"!==typeof this._interval,this._interval=n||1,this._timeSignature=4,this._bpm=60,this.isPlaying=!1,this.maxIterations=1/0;var r=this;this.clock=new Lt.a({callback:function(e){var t=e-a.audiocontext.currentTime;t>0&&r.iterations<=r.maxIterations&&r.callback(t)},frequency:this._calcFreq()})}var t,n,r;return t=e,(n=[{key:"start",value:function(e){var t=e||0,n=a.audiocontext.currentTime;this.isPlaying||(this.clock.start(n+t),this.isPlaying=!0)}},{key:"stop",value:function(e){var t=e||0,n=a.audiocontext.currentTime;this.isPlaying&&(this.clock.stop(n+t),this.isPlaying=!1)}},{key:"pause",value:function(e){var t=e||0,n=a.audiocontext.currentTime;this.isPlaying&&(this.clock.pause(n+t),this.isPlaying=!1)}},{key:"syncedStart",value:function(e,t){var n=t||0,r=a.audiocontext.currentTime;if(e.isPlaying){if(e.isPlaying){var o=e.clock._nextTick-a.audiocontext.currentTime;this.clock.start(r+o),this.isPlaying=!0}}else e.clock.start(r+n),e.isPlaying=!0,this.clock.start(r+n),this.isPlaying=!0}},{key:"_update",value:function(){this.clock.frequency.value=this._calcFreq()}},{key:"_calcFreq",value:function(){return"number"===typeof this._interval?(this.musicalTimeMode=!1,1/this._interval):"string"===typeof this._interval?(this.musicalTimeMode=!0,this._bpm/60/this._convertNotation(this._interval)*(this._timeSignature/4)):void 0}},{key:"_convertNotation",value:function(e){var t=e.slice(-1);switch(e=Number(e.slice(0,-1)),t){case"m":return this._measure(e);case"n":return this._note(e);default:console.warn("Specified interval is not formatted correctly. See Tone.js timing reference for more info: https://github.com/Tonejs/Tone.js/wiki/Time")}}},{key:"_measure",value:function(e){return e*this._timeSignature}},{key:"_note",value:function(e){return this._timeSignature/e}}])&&Kt(t.prototype,n),r&&Kt(t,r),e}();function Qt(e){return Qt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return!t||"object"!==Qt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function en(e,t,n){return en="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},en(e,t,n||e)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}var rn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=$t(this,tn(t).call(this))).compressor=e.ac.createDynamicsCompressor(),e.input.connect(e.compressor),e.compressor.connect(e.wet),e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,e),n=t,(r=[{key:"process",value:function(e,t,n,r,o,i){e.connect(this.input),this.set(t,n,r,o,i)}},{key:"set",value:function(e,t,n,r,o){"undefined"!==typeof e&&this.attack(e),"undefined"!==typeof t&&this.knee(t),"undefined"!==typeof n&&this.ratio(n),"undefined"!==typeof r&&this.threshold(r),"undefined"!==typeof o&&this.release(o)}},{key:"attack",value:function(e,t){var n=t||0;return"number"===typeof e?(this.compressor.attack.value=e,this.compressor.attack.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.attack.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!==typeof e&&e.connect(this.compressor.attack),this.compressor.attack.value}},{key:"knee",value:function(e,t){var n=t||0;return"number"===typeof e?(this.compressor.knee.value=e,this.compressor.knee.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.knee.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!==typeof e&&e.connect(this.compressor.knee),this.compressor.knee.value}},{key:"ratio",value:function(e,t){var n=t||0;return"number"===typeof e?(this.compressor.ratio.value=e,this.compressor.ratio.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.ratio.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!==typeof e&&e.connect(this.compressor.ratio),this.compressor.ratio.value}},{key:"threshold",value:function(e,t){var n=t||0;return"number"===typeof e?(this.compressor.threshold.value=e,this.compressor.threshold.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.threshold.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!==typeof e&&e.connect(this.compressor.threshold),this.compressor.threshold.value}},{key:"release",value:function(e,t){var n=t||0;return"number"===typeof e?(this.compressor.release.value=e,this.compressor.release.cancelScheduledValues(this.ac.currentTime+.01+n),this.compressor.release.linearRampToValueAtTime(e,this.ac.currentTime+.02+n)):"undefined"!==typeof number&&e.connect(this.compressor.release),this.compressor.release.value}},{key:"reduction",value:function(){return this.compressor.reduction.value}},{key:"dispose",value:function(){en(tn(t.prototype),"dispose",this).call(this),this.compressor&&(this.compressor.disconnect(),delete this.compressor)}}])&&Jt(n.prototype,r),o&&Jt(n,o),t}(Pe);function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var an=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.framesPerPeak=o||20,this.framesSinceLastPeak=0,this.decayRate=.95,this.threshold=r||.35,this.cutoff=0,this.cutoffMult=1.5,this.energy=0,this.penergy=0,this.currentValue=0,this.isDetected=!1,this.f1=t||40,this.f2=n||2e4,this._onPeak=function(){}}var t,n,r;return t=e,(n=[{key:"update",value:function(e){var t=this.energy=e.getEnergy(this.f1,this.f2)/255;t>this.cutoff&&t>this.threshold&&t-this.penergy>0?(this._onPeak(),this.isDetected=!0,this.cutoff=t*this.cutoffMult,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold))),this.currentValue=t,this.penergy=t}},{key:"onPeak",value:function(e,t){var n=this;n._onPeak=function(){e(n.energy,t)}}}])&&on(t.prototype,n),r&&on(t,r),e}();function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ln=a.audiocontext,cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=ln.createGain(),this.output=ln.createGain(),this._inputChannels=2,this._outputChannels=2;var t=g(1024);this._workletNode=new AudioWorkletNode(ln,l.a.recorderProcessor,{outputChannelCount:[this._outputChannels],processorOptions:{numInputChannels:this._inputChannels,bufferSize:t}}),this._workletNode.port.onmessage=function(e){if("buffers"===e.data.name){var t=[new Float32Array(e.data.leftBuffer),new Float32Array(e.data.rightBuffer)];this._callback(t)}}.bind(this),this._callback=function(){},this._workletNode.connect(p5.soundOut._silentNode),this.setInput(),a.soundArray.push(this)}var t,n,r;return t=e,(n=[{key:"setInput",value:function(e){this.input.disconnect(),this.input=null,this.input=ln.createGain(),this.input.connect(this._workletNode),this.input.connect(this.output),e?e.connect(this.input):p5.soundOut.output.connect(this.input)}},{key:"record",value:function(e,t,n){this._workletNode.port.postMessage({name:"start",duration:t}),e&&n?this._callback=function(t){e.setBuffer(t),n()}:e&&(this._callback=function(t){e.setBuffer(t)})}},{key:"stop",value:function(){this._workletNode.port.postMessage({name:"stop"})}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this._callback=function(){},this.input&&this.input.disconnect(),this.input=null,this._workletNode=null}}])&&sn(t.prototype,n),r&&sn(t,r),e}();function un(e){return un="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t){return!t||"object"!==un(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e,t,n){return pn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},pn(e,t,n||e)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}function mn(e,t){return mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mn(e,t)}function gn(e){for(var t,n="number"===typeof e?e:50,r=44100,o=new Float32Array(r),i=Math.PI/180,a=0;a<r;++a)t=2*a/r-1,o[a]=(3+n)*t*20*i/(Math.PI+n*Math.abs(t));return o}var yn=function(e){function t(e,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=hn(this,fn(t).call(this)),"undefined"===typeof e&&(e=.25),"number"!==typeof e)throw new Error("amount must be a number");if("undefined"===typeof n&&(n="2x"),"string"!==typeof n)throw new Error("oversample must be a String");var o=p5.prototype.map(e,0,1,0,2e3);return r.waveShaperNode=r.ac.createWaveShaper(),r.amount=o,r.waveShaperNode.curve=gn(o),r.waveShaperNode.oversample=n,r.input.connect(r.waveShaperNode),r.waveShaperNode.connect(r.wet),r}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"process",value:function(e,t,n){e.connect(this.input),this.set(t,n)}},{key:"set",value:function(e,t){if(e){var n=p5.prototype.map(e,0,1,0,2e3);this.amount=n,this.waveShaperNode.curve=gn(n)}t&&(this.waveShaperNode.oversample=t)}},{key:"getAmount",value:function(){return this.amount}},{key:"getOversample",value:function(){return this.waveShaperNode.oversample}},{key:"dispose",value:function(){pn(fn(t.prototype),"dispose",this).call(this),this.waveShaperNode&&(this.waveShaperNode.disconnect(),this.waveShaperNode=null)}}])&&dn(n.prototype,r),o&&dn(n,o),t}(Pe);function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ac=a.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.output),a.soundArray.push(this)}var t,n,r;return t=e,n=[{key:"setInput",value:function(e){e.connect(this.input)}},{key:"connect",value:function(e){var t=e||p5.soundOut.input;this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}},{key:"amp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.audiocontext.currentTime,o=this.output.gain.value;this.output.gain.cancelScheduledValues(r),this.output.gain.linearRampToValueAtTime(o,r+n),this.output.gain.linearRampToValueAtTime(e,r+n+t)}},{key:"dispose",value:function(){var e=a.soundArray.indexOf(this);a.soundArray.splice(e,1),this.output&&(this.output.disconnect(),delete this.output),this.input&&(this.input.disconnect(),delete this.input)}}],n&&vn(t.prototype,n),r&&vn(t,r),e}(),xn=bn;function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ac=a.audiocontext,this.output=this.ac.createGain(),this.connect(),a.soundArray.push(this)}var t,n,r;return t=e,(n=[{key:"play",value:function(e,t,n,r){}},{key:"triggerAttack",value:function(e,t,n){}},{key:"triggerRelease",value:function(e){}},{key:"amp",value:function(e,t){}},{key:"connect",value:function(e){var t=e||a.input;this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.output.disconnect()}},{key:"dispose",value:function(){this.output&&(this.output.disconnect(),delete this.output)}}])&&wn(t.prototype,n),r&&wn(t,r),e}();function _n(e){return _n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t,n){return En="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},En(e,t,n||e)}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}function In(e,t){return In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},In(e,t)}var jn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==_n(t)&&"function"!==typeof t?Tn(e):t}(this,Cn(t).call(this))).oscillator=new ie,e.env=new le,e.env.setRange(1,0),e.env.setExp(!0),e.setADSR(.02,.25,.05,.35),e.oscillator.disconnect(),e.oscillator.connect(e.output),e.env.disconnect(),e.env.setInput(e.output.gain),e.oscillator.output.gain.value=1,e.oscillator.start(),e.connect(),a.soundArray.push(Tn(e)),Object.defineProperties(Tn(e),{attack:{get:function(){return this.env.aTime},set:function(e){this.env.setADSR(e,this.env.dTime,this.env.sPercent,this.env.rTime)}},decay:{get:function(){return this.env.dTime},set:function(e){this.env.setADSR(this.env.aTime,e,this.env.sPercent,this.env.rTime)}},sustain:{get:function(){return this.env.sPercent},set:function(e){this.env.setADSR(this.env.aTime,this.env.dTime,e,this.env.rTime)}},release:{get:function(){return this.env.rTime},set:function(e){this.env.setADSR(this.env.aTime,this.env.dTime,this.env.sPercent,e)}}}),e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(t,e),n=t,r=[{key:"play",value:function(e,t,n,r){this.triggerAttack(e,t,~~n),this.triggerRelease(~~n+(r||.15))}},{key:"triggerAttack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=h(e),o=t||.1;this.oscillator.freq(r,0,n),this.env.ramp(this.output.gain,n,o)}},{key:"triggerRelease",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.env.ramp(this.output.gain,e,0)}},{key:"setADSR",value:function(e,t,n,r){this.env.setADSR(e,t,n,r)}},{key:"amp",value:function(e,t){var n=t||0;return"undefined"!==typeof e&&this.oscillator.amp(e,n),this.oscillator.amp().value}},{key:"connect",value:function(e){var t=e||a.input;this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}},{key:"dispose",value:function(){En(Cn(t.prototype),"dispose",this).call(this),this.env&&this.env.dispose(),this.oscillator&&this.oscillator.dispose()}}],r&&kn(n.prototype,r),o&&kn(n,o),t}(Sn),An=jn;function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nn=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDetected=!1,this.freqLow=t,this.freqHigh=n,this.treshold=r,this.energy=0,this.penergy=0,this.sensitivity=500,this.callback=o}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){if(this.energy=e.getEnergy(this.freqLow,this.freqHigh)/255,!1===this.isDetected&&this.energy-this.penergy>this.treshold){this.isDetected=!0,this.callback?this.callback(this.energy):t&&t(this.energy);var n=this;setTimeout((function(){n.isDetected=!1}),this.sensitivity)}this.penergy=this.energy}}])&&On(t.prototype,n),r&&On(t,r),e}();function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audiovoices=[],this.notes={},this._newest=0,this._oldest=0,this.maxVoices=n||8,this.AudioVoice=void 0===t?p5.MonoSynth:t,this._voicesInUse=new se.a(0),this.output=a.audiocontext.createGain(),this.connect(),this._allocateVoices(),a.soundArray.push(this)}var t,n,r;return t=e,n=[{key:"_allocateVoices",value:function(){for(var e=0;e<this.maxVoices;e++)this.audiovoices.push(new this.AudioVoice),this.audiovoices[e].disconnect(),this.audiovoices[e].connect(this.output)}},{key:"play",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.noteAttack(e,t,n),this.noteRelease(e,n+r)}},{key:"noteADSR",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=a.audiocontext.currentTime+i;this.audiovoices[this.notes[e].getValueAtTime(s)].setADSR(t,n,r,o)}},{key:"setADSR",value:function(e,t,n,r){this.audiovoices.forEach((function(o){o.setADSR(e,t,n,r)}))}},{key:"noteAttack",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=a.audiocontext.currentTime+r,i=h(e),s=t||.1;this.notes[i]&&null!==this.notes[i].getValueAtTime(o)&&this.noteRelease(i,0),this._voicesInUse.getValueAtTime(o)<this.maxVoices?n=Math.max(~~this._voicesInUse.getValueAtTime(o),0):(n=this._oldest,oldestNote=u(this.audiovoices[this._oldest].oscillator.freq().value),this.noteRelease(oldestNote),this._oldest=(this._oldest+1)%(this.maxVoices-1)),this.notes[i]=new se.a,this.notes[i].setValueAtTime(n,o);var l=null===this._voicesInUse._searchBefore(o)?0:this._voicesInUse._searchBefore(o).value;if(this._voicesInUse.setValueAtTime(l+1,o),this._updateAfter(o,1),this._newest=n,"number"===typeof s){var c=1/this._voicesInUse.getValueAtTime(o)*2;s=s>c?c:s}this.audiovoices[n].triggerAttack(i,s,r)}},{key:"_updateAfter",value:function(e,t){if(null!==this._voicesInUse._searchAfter(e)){this._voicesInUse._searchAfter(e).value+=t;var n=this._voicesInUse._searchAfter(e).time;this._updateAfter(n,t)}}},{key:"noteRelease",value:function(e,t){var n=a.audiocontext.currentTime,r=t||0,o=n+r;if(e){var i=h(e);if(this.notes[i]&&null!==this.notes[i].getValueAtTime(o)){var s=Math.max(~~this._voicesInUse.getValueAtTime(o).value,1);this._voicesInUse.setValueAtTime(s-1,o),s>0&&this._updateAfter(o,-1),this.audiovoices[this.notes[i].getValueAtTime(o)].triggerRelease(r),this.notes[i].dispose(),delete this.notes[i],this._newest=0===this._newest?0:(this._newest-1)%(this.maxVoices-1)}else console.warn("Cannot release a note that is not already playing")}else for(var l in this.audiovoices.forEach((function(e){e.triggerRelease(r)})),this._voicesInUse.setValueAtTime(0,o),this.notes)this.notes[l].dispose(),delete this.notes[l]}},{key:"connect",value:function(e){var t=e||a.input;this.output.connect(t.input?t.input:t)}},{key:"disconnect",value:function(){this.output&&this.output.disconnect()}},{key:"dispose",value:function(){this.audiovoices.forEach((function(e){e.dispose()})),this.output&&(this.output.disconnect(),delete this.output)}}],n&&Rn(t.prototype,n),r&&Rn(t,r),e}(),Mn=Pn;var Dn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.warn("p5.Signal is deprecated , Use Tone.js Signal instead ")};p5.prototype.getAudioContext=o.b,p5.prototype.userStartAudio=o.c,p5.prototype.sampleRate=function(){return a.audiocontext.sampleRate},p5.prototype.freqToMidi=u,p5.prototype.midiToFreq=d,p5.prototype.noteToFreq=h,p5.prototype.soundFormats=function(){a.extensions=[];for(var e=0;e<arguments.length;e++){if(arguments[e]=arguments[e].toLowerCase(),!(["mp3","wav","ogg","m4a","aac"].indexOf(arguments[e])>-1))throw arguments[e]+" is not a valid sound format!";a.extensions.push(arguments[e])}},p5.prototype.disposeSound=function(){for(var e=0;e<a.soundArray.length;e++)a.soundArray[e].dispose()},p5.prototype._checkFileFormats=function(e){var t;if("string"===typeof e){var n=(t=e).split(".").pop();if(["mp3","wav","ogg","m4a","aac"].indexOf(n)>-1){if(!p5.prototype.isFileSupported(n))for(var r=t.split("."),o=r[r.length-1],i=0;i<a.extensions.length;i++){var s=a.extensions[i];if(p5.prototype.isFileSupported(s)){o="",2===r.length&&(o+=r[0]);for(var l=1;l<=r.length-2;l++){o+="."+r[l]}t=o+=".",t=t+=s;break}}}else for(var u=0;u<a.extensions.length;u++){var d=a.extensions[u];if(p5.prototype.isFileSupported(d)){t=t+"."+d;break}}}else if("object"===c(e))for(var h=0;h<e.length;h++){var p=e[h].split(".").pop();if(p5.prototype.isFileSupported(p)){t=e[h];break}}return t},p5.prototype._mathChain=function(e,t,n,r,o){for(var i in e.mathOps)e.mathOps[i]instanceof o&&(e.mathOps[i].dispose(),(n=i)<e.mathOps.length-1&&(r=e.mathOps[i+1]));return e.mathOps[n-1].disconnect(),e.mathOps[n-1].connect(t),t.connect(r),e.mathOps[n]=t,e},p5.prototype.convertToWav=p,p5.prototype.interleave=f,p5.prototype.writeUTFBytes=m,p5.prototype.safeBufferSize=g,p5.prototype.saveSound=function(e,t){var n=p(e.buffer);p5.prototype.writeFile([n],t,"wav")},p5.prototype.registerMethod("remove",p5.prototype.disposeSound),p5.Panner=E,p5.SoundFile=P,p5.prototype.loadSound=function(e,t,n,r){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&window.alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var o=this,i=new R(e,(function(){"function"===typeof t&&t.apply(o,arguments),"function"===typeof o._decrementPreload&&o._decrementPreload()}),n,r);return i},p5.prototype.registerPreloadMethod("loadSound",p5.prototype),p5.Amplitude=D,p5.FFT=B,p5.Oscillator=ie,p5.SinOsc=te,p5.TriOsc=ne,p5.SawOsc=re,p5.SqrOsc=oe,p5.Noise=ye,p5.Pulse=Ce,p5.AudioIn=je,p5.Effect=Pe,p5.Filter=Xe,p5.LowPass=We,p5.HighPass=He,p5.BandPass=qe,p5.EQ=st,p5.listener3D=ut,p5.Panner3D=yt,p5.Delay=kt,p5.Reverb=Pt,p5.Convolver=Mt,p5.prototype.createConvolver=function(e,t,n){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var r=this,o=new Mt(e,(function(e){"function"===typeof t&&t(e),"function"===typeof r._decrementPreload&&r._decrementPreload()}),n);return o.impulses=[],o},p5.prototype.registerPreloadMethod("createConvolver",p5.prototype),p5.Metro=Ut,p5.Phrase=Ht,p5.Part=qt,p5.Score=Xt,p5.SoundLoop=Zt,p5.Compressor=rn,p5.peakDetect=an,p5.SoundRecorder=cn,p5.Distortion=yn,p5.Gain=xn,p5.AudioVoice=Sn,p5.MonoSynth=An,p5.OnsetDetect=Nn,p5.PolySynth=Mn,p5.PeakDetect=an,p5.Signal=Dn}])},9993:(e,t,n)=>{"use strict";var r=n(5730);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},6405:(e,t,n)=>{e.exports=n(9993)()},5730:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5914:(t,n,r)=>{"use strict";var o=r(2483),i=r(3557);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var o=y.hasOwnProperty(t)?y[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!h.call(m,e)||!h.call(f,e)&&(p.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var L,F=Object.assign;function B(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function V(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ne(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Te=null;function Ee(e){if(e=wo(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=_o(t),_e(e.stateNode,e.type,t))}}function Ce(e){ke?Te?Te.push(e):Te=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Te;if(Te=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function je(e,t){return e(t)}function Ae(){}var Oe=!1;function Ne(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return je(e,t,n)}finally{Oe=!1,(null!==ke||null!==Te)&&(Ae(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_o(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Pe=!1}function De(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Be=!1,Ue=null,ze={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,o,i,a,s,l){Le=!1,Fe=null,De.apply(ze,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return He(o),e;if(i===r)return He(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,et=i.unstable_ImmediatePriority,tt=i.unstable_UserBlockingPriority,nt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,ot=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var ut=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=ht(s):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~o)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-st(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,_t,kt,Tt,Et,Ct=!1,It=[],jt=null,At=null,Ot=null,Nt=new Map,Rt=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ft(e){var t=xo(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function zt(){Ct=!1,null!==jt&&Bt(jt)&&(jt=null),null!==At&&Bt(At)&&(At=null),null!==Ot&&Bt(Ot)&&(Ot=null),Nt.forEach(Ut),Rt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Gt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Vt(jt,e),null!==At&&Vt(At,e),null!==Ot&&Vt(Ot,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Wt=w.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var o=xt,i=Wt.transition;Wt.transition=null;try{xt=1,Yt(e,t,n,r)}finally{xt=o,Wt.transition=i}}function Xt(e,t,n,r){var o=xt,i=Wt.transition;Wt.transition=null;try{xt=4,Yt(e,t,n,r)}finally{xt=o,Wt.transition=i}}function Yt(e,t,n,r){if(Ht){var o=Zt(e,t,n,r);if(null===o)Hr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return jt=Lt(jt,e,t,n,r,o),!0;case"dragenter":return At=Lt(At,e,t,n,r,o),!0;case"mouseover":return Ot=Lt(Ot,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Nt.set(i,Lt(Nt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Rt.set(i,Lt(Rt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&St(i),null===(i=Zt(e,t,n,r))&&Hr(e,t,r,Kt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Zt(e,t,n,r){if(Kt=null,null!==(e=xo(e=Se(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return en=o.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function an(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rn:on,this.isPropagationStopped=on,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=F({},un,{view:0,detail:0}),pn=an(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(fn),gn=an(F({},fn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),vn=an(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(bn),wn=an(F({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Tn}var Cn=F({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Cn),jn=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),On=an(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Nn),Pn=[9,13,27,32],Mn=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Dn,Fn=d&&(!Mn||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ce(r),0<(t=Xr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Kn(e){Br(e,0)}function Zn(e){if(Y(So(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(d){var $n;if(d){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){Xn&&(Xn.detachEvent("onpropertychange",rr),Yn=Xn=null)}function rr(e){if("value"===e.propertyName&&Zn(Yn)){var t=[];qn(t,Yn,e,Se(e)),Ne(Kn,t)}}function or(e,t,n){"focusin"===e?(nr(),Yn=n,(Xn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Yn)}function ar(e,t){if("click"===e)return Zn(t)}function sr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!h.call(t,o)||!lr(e[o],t[o]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=dr(n,i);var a=dr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,br=null,xr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==yr||yr!==K(r)||("selectionStart"in(r=yr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Xr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},kr={},Tr={};function Er(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return kr[e]=n[t];return e}d&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Er("animationend"),Ir=Er("animationiteration"),jr=Er("animationstart"),Ar=Er("transitionend"),Or=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Or.set(e,t),c(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Mr=Nr[Pr];Rr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(jr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Fe;Le=!1,Fe=null,Be||(Be=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Fr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Fr(o,s,c),i=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ur(e,t){var n=t[yo];void 0===n&&(n=t[yo]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var o=qt;break;case 4:o=Xt;break;default:o=Yt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=xo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,o=Se(n),a=[];e:{var s=Or.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Ir:case jr:l=vn;break;case Ar:l=On;break;case"scroll":l=pn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(qr(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!xo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xo(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:So(l),p=null==c?s:So(c),(s=new u(m,f+"leave",l,n,o)).target=d,s.relatedTarget=p,m=null,xo(o)===r&&((u=new u(h,f+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Yr(p))f++;for(p=0,m=h;m;m=Yr(m))p++;for(;0<f-p;)u=Yr(u),f--;for(;0<p-f;)h=Yr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Kr(a,s,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(s=r?So(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Hn(s))if(Jn)g=sr;else{g=ir;var y=or}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?qn(a,g,n,o):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&te(s,"number",s.value)),y=r?So(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,br=null);break;case"focusout":br=vr=yr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,wr(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,o)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(v=tn()):($t="value"in(Jt=o)?Jt.value:Jt.textContent,Gn=!0)),0<(y=Xr(r,b)).length&&(b=new wn(b,e,null,n,o),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Mn&&zn(e,t)?(e=tn(),en=$t=Jt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=v))}Br(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Re(e,n))&&r.unshift(qr(e,i,o)),null!=(i=Re(e,t))&&r.push(qr(e,i,o))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Re(n,i))&&a.unshift(qr(n,l,s)):o||null!=(l=Re(n,i))&&a.push(qr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function eo(){}var to=null,no=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oo="function"===typeof setTimeout?setTimeout:void 0,io="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,so="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(lo)}:oo;function lo(e){setTimeout((function(){throw e}))}function co(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Gt(t)}function uo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ho(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var po=Math.random().toString(36).slice(2),fo="__reactFiber$"+po,mo="__reactProps$"+po,go="__reactContainer$"+po,yo="__reactEvents$"+po,vo="__reactListeners$"+po,bo="__reactHandles$"+po;function xo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ho(e);null!==e;){if(n=e[fo])return n;e=ho(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function So(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _o(e){return e[mo]||null}var ko=[],To=-1;function Eo(e){return{current:e}}function Co(e){0>To||(e.current=ko[To],ko[To]=null,To--)}function Io(e,t){To++,ko[To]=e.current,e.current=t}var jo={},Ao=Eo(jo),Oo=Eo(!1),No=jo;function Ro(e,t){var n=e.type.contextTypes;if(!n)return jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Po(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){Co(Oo),Co(Ao)}function Do(e,t,n){if(Ao.current!==jo)throw Error(a(168));Io(Ao,t),Io(Oo,n)}function Lo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,W(e)||"Unknown",o));return F({},n,r)}function Fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jo,No=Ao.current,Io(Ao,e),Io(Oo,Oo.current),!0}function Bo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Lo(e,t,No),r.__reactInternalMemoizedMergedChildContext=e,Co(Oo),Co(Ao),Io(Ao,e)):Co(Oo),Io(Oo,n)}var Uo=null,zo=!1,Vo=!1;function Go(e){null===Uo?Uo=[e]:Uo.push(e)}function Wo(){if(!Vo&&null!==Uo){Vo=!0;var t=0,n=xt;try{var r=Uo;for(xt=1;t<r.length;t++){var o=r[t];do{o=o(!0)}while(null!==o)}Uo=null,zo=!1}catch(e){throw null!==Uo&&(Uo=Uo.slice(t+1)),Ye(et,Wo),e}finally{xt=n,Vo=!1}}return null}var Ho=[],qo=0,Xo=null,Yo=0,Ko=[],Zo=0,Qo=null,Jo=1,$o="";function ei(e,t){Ho[qo++]=Yo,Ho[qo++]=Xo,Xo=e,Yo=t}function ti(e,t,n){Ko[Zo++]=Jo,Ko[Zo++]=$o,Ko[Zo++]=Qo,Qo=e;var r=Jo;e=$o;var o=32-st(r)-1;r&=~(1<<o),n+=1;var i=32-st(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Jo=1<<32-st(t)+o|n<<o|r,$o=i+e}else Jo=1<<i|n<<o|r,$o=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Xo;)Xo=Ho[--qo],Ho[qo]=null,Yo=Ho[--qo],Ho[qo]=null;for(;e===Qo;)Qo=Ko[--Zo],Ko[Zo]=null,$o=Ko[--Zo],Ko[Zo]=null,Jo=Ko[--Zo],Ko[Zo]=null}var oi=null,ii=null,ai=!1,si=null;function li(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oi=e,ii=uo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oi=e,ii=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:Jo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oi=e,ii=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function di(e){if(ai){var t=ii;if(t){var n=t;if(!ci(e,t)){if(ui(e))throw Error(a(418));t=uo(n.nextSibling);var r=oi;t&&ci(e,t)?li(r,n):(e.flags=-4097&e.flags|2,ai=!1,oi=e)}}else{if(ui(e))throw Error(a(418));e.flags=-4097&e.flags|2,ai=!1,oi=e}}}function hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oi=e}function pi(e){if(e!==oi)return!1;if(!ai)return hi(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=ii)){if(ui(e))throw fi(),Error(a(418));for(;t;)li(e,t),t=uo(t.nextSibling)}if(hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ii=uo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ii=null}}else ii=oi?uo(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=ii;e;)e=uo(e.nextSibling)}function mi(){ii=oi=null,ai=!1}function gi(e){null===si?si=[e]:si.push(e)}var yi=w.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bi=Eo(null),xi=null,wi=null,Si=null;function _i(){Si=wi=xi=null}function ki(e){var t=bi.current;Co(bi),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){xi=e,Si=wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===wi){if(null===xi)throw Error(a(308));wi=e,xi.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var Ii=null;function ji(e){null===Ii?Ii=[e]:Ii.push(e)}function Ai(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,ji(t)):(n.next=o.next,o.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Oi(e,n)}return null===(o=r.interleaved)?(t.next=t,ji(r)):(t.next=o.next,o.next=t),r.interleaved=t,Oi(e,n)}function Li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var o=e.updateQueue;Ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=F({},d,h);break e;case 2:Ni=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function Ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var zi=(new o.Component).refs;function Vi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Gi={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),o=rc(e),i=Mi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,o))&&(oc(t,e,o,r),Li(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),o=rc(e),i=Mi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,o))&&(oc(t,e,o,r),Li(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),o=Mi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Di(e,o,r))&&(oc(t,e,r,n),Li(t,e,r))}};function Wi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(o,i))}function Hi(e,t,n){var r=!1,o=jo,i=t.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(o=Po(t)?No:Ao.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):jo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Gi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function qi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Gi.enqueueReplaceState(t,t.state,null)}function Xi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=zi,Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ci(i):(i=Po(t)?No:Ao.current,o.context=Ro(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Vi(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Gi.enqueueReplaceState(o,o.state,null),Bi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===zi&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ki(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zi(e){return(0,e._init)(e._payload)}function Qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Zi(i)===t.type)?((r=o(t,n.props)).ref=Yi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Yi(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||D(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ki(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?c(e,t,n,r):null;case _:return n.key===o?u(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(ne(n)||D(n))return null!==o?null:d(e,t,n,r,null);Ki(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return f(e,t,n,(0,r._init)(r._payload),o)}if(ne(r)||D(r))return d(t,e=e.get(n)||null,r,o,null);Ki(t,r)}return null}function m(o,a,s,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(o,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),a=i(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(o,d),ai&&ei(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return ai&&ei(o,m),c}for(d=r(o,d);m<s.length;m++)null!==(g=f(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ai&&ei(o,m),c}function g(o,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(o,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),s=i(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(o,m),ai&&ei(o,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(o,v.value,c))&&(s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return ai&&ei(o,g),u}for(m=r(o,m);!v.done;g++,v=l.next())null!==(v=f(m,o,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(o,e)})),ai&&ei(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Zi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=Yi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=Yi(r,i,a),l.return=r,r=l)}return s(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return s(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(ne(a))return m(r,i,a,l);if(D(a))return g(r,i,a,l);Ki(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Bc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Ji=Qi(!0),$i=Qi(!1),ea={},ta=Eo(ea),na=Eo(ea),ra=Eo(ea);function oa(e){if(e===ea)throw Error(a(174));return e}function ia(e,t){switch(Io(ra,t),Io(na,e),Io(ta,ea),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(ta),Io(ta,t)}function aa(){Co(ta),Co(na),Co(ra)}function sa(e){oa(ra.current);var t=oa(ta.current),n=ce(t,e.type);t!==n&&(Io(na,e),Io(ta,n))}function la(e){na.current===e&&(Co(ta),Co(na))}var ca=Eo(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=[];function ha(){for(var e=0;e<da.length;e++)da[e]._workInProgressVersionPrimary=null;da.length=0}var pa=w.ReactCurrentDispatcher,fa=w.ReactCurrentBatchConfig,ma=0,ga=null,ya=null,va=null,ba=!1,xa=!1,wa=0,Sa=0;function _a(){throw Error(a(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function Ta(e,t,n,r,o,i){if(ma=i,ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pa.current=null===e||null===e.memoizedState?ls:cs,e=n(r,o),xa){i=0;do{if(xa=!1,wa=0,25<=i)throw Error(a(301));i+=1,va=ya=null,t.updateQueue=null,pa.current=us,e=n(r,o)}while(xa)}if(pa.current=ss,t=null!==ya&&null!==ya.next,ma=0,va=ya=ga=null,ba=!1,t)throw Error(a(300));return e}function Ea(){var e=0!==wa;return wa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ga.memoizedState=va=e:va=va.next=e,va}function Ia(){if(null===ya){var e=ga.alternate;e=null!==e?e.memoizedState:null}else e=ya.next;var t=null===va?ga.memoizedState:va.next;if(null!==t)va=t,ya=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ya=e).memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},null===va?ga.memoizedState=va=e:va=va.next=e}return va}function ja(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Ia(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ya,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ma&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,ga.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,lr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,ga.lanes|=i,Fl|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oa(e){var t=Ia(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);lr(i,t.memoizedState)||(ws=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Na(){}function Ra(e,t){var n=ga,r=Ia(),o=t(),i=!lr(r.memoizedState,o);if(i&&(r.memoizedState=o,ws=!0),r=r.queue,Ha(Da.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Ua(9,Ma.bind(null,n,r,o,t),void 0,null),null===Ol)throw Error(a(349));0!==(30&ma)||Pa(n,t,o)}return o}function Pa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Fa(e)}function Da(e,t,n){return n((function(){La(t)&&Fa(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Fa(e){var t=Oi(e,1);null!==t&&oc(t,e,1,-1)}function Ba(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,ga,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function za(){return Ia().memoizedState}function Va(e,t,n,r){var o=Ca();ga.flags|=e,o.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function Ga(e,t,n,r){var o=Ia();r=void 0===r?null:r;var i=void 0;if(null!==ya){var a=ya.memoizedState;if(i=a.destroy,null!==r&&ka(r,a.deps))return void(o.memoizedState=Ua(t,n,i,r))}ga.flags|=e,o.memoizedState=Ua(1|t,n,i,r)}function Wa(e,t){return Va(8390656,8,e,t)}function Ha(e,t){return Ga(2048,8,e,t)}function qa(e,t){return Ga(4,2,e,t)}function Xa(e,t){return Ga(4,4,e,t)}function Ya(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ka(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ga(4,4,Ya.bind(null,t,e),n)}function Za(){}function Qa(e,t){var n=Ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&ma)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(lr(n,t)||(n=gt(),ga.lanes|=n,Fl|=n,e.baseState=!0),t)}function es(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{xt=n,fa.transition=r}}function ts(){return Ia().memoizedState}function ns(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},os(e))is(t,n);else if(null!==(n=Ai(e,t,n,r))){oc(n,e,r,nc()),as(n,t,r)}}function rs(e,t,n){var r=rc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(os(e))is(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,lr(s,a)){var l=t.interleaved;return null===l?(o.next=o,ji(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ai(e,t,o,r))&&(oc(n,e,r,o=nc()),as(n,t,r))}}function os(e){var t=e.alternate;return e===ga||null!==t&&t===ga}function is(e,t){xa=ba=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ss={readContext:Ci,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ls={readContext:Ci,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:Wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4194308,4,Ya.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ns.bind(null,ga,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:Ba,useDebugValue:Za,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=es.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ga,o=Ca();if(ai){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ol)throw Error(a(349));0!==(30&ma)||Pa(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Wa(Da.bind(null,r,i,e),[e]),r.flags|=2048,Ua(9,Ma.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Ol.identifierPrefix;if(ai){var n=$o;t=":"+t+"R"+(n=(Jo&~(1<<32-st(Jo)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Sa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:Ci,useCallback:Qa,useContext:Ci,useEffect:Ha,useImperativeHandle:Ka,useInsertionEffect:qa,useLayoutEffect:Xa,useMemo:Ja,useReducer:Aa,useRef:za,useState:function(){return Aa(ja)},useDebugValue:Za,useDeferredValue:function(e){return $a(Ia(),ya.memoizedState,e)},useTransition:function(){return[Aa(ja)[0],Ia().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1},us={readContext:Ci,useCallback:Qa,useContext:Ci,useEffect:Ha,useImperativeHandle:Ka,useInsertionEffect:qa,useLayoutEffect:Xa,useMemo:Ja,useReducer:Oa,useRef:za,useState:function(){return Oa(ja)},useDebugValue:Za,useDeferredValue:function(e){var t=Ia();return null===ya?t.memoizedState=e:$a(t,ya.memoizedState,e)},useTransition:function(){return[Oa(ja)[0],Ia().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1};function ds(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ms(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Xl=r),ps(0,t)},n}function gs(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ps(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ps(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var xs=w.ReactCurrentOwner,ws=!1;function Ss(e,t,n,r){t.child=null===e?$i(t,null,n,r):Ji(t,e.child,n,r)}function _s(e,t,n,r,o){n=n.render;var i=t.ref;return Ei(t,o),r=Ta(e,t,n,r,i,o),n=Ea(),null===e||ws?(ai&&n&&ni(t),t.flags|=1,Ss(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ts(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return qs(e,t,o)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,qs(e,t,o);0!==(131072&e.flags)&&(ws=!0)}}return Is(e,t,n,r,o)}function Es(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Ml,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Ml,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Io(Ml,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Io(Ml,Pl),Pl|=r;return Ss(e,t,o,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,o){var i=Po(n)?No:Ao.current;return i=Ro(t,i),Ei(t,o),n=Ta(e,t,n,r,i,o),r=Ea(),null===e||ws?(ai&&r&&ni(t),t.flags|=1,Ss(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function js(e,t,n,r,o){if(Po(n)){var i=!0;Fo(t)}else i=!1;if(Ei(t,o),null===t.stateNode)Hs(e,t),Hi(t,n,r),Xi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ci(c):c=Ro(t,c=Po(n)?No:Ao.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&qi(t,a,r,c),Ni=!1;var h=t.memoizedState;a.state=h,Bi(t,r,a,o),l=t.memoizedState,s!==r||h!==l||Oo.current||Ni?("function"===typeof u&&(Vi(t,n,u,r),l=t.memoizedState),(s=Ni||Wi(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Pi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vi(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ci(l):l=Ro(t,l=Po(n)?No:Ao.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&qi(t,a,r,l),Ni=!1,h=t.memoizedState,a.state=h,Bi(t,r,a,o);var f=t.memoizedState;s!==d||h!==f||Oo.current||Ni?("function"===typeof p&&(Vi(t,n,p,r),f=t.memoizedState),(c=Ni||Wi(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,o)}function As(e,t,n,r,o,i){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Bo(t,n,!1),qs(e,t,i);r=t.stateNode,xs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ji(t,e.child,null,i),t.child=Ji(t,null,s,i)):Ss(e,t,s,i),t.memoizedState=r.state,o&&Bo(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Do(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Do(0,t.context,!1),ia(e,t.containerInfo)}function Ns(e,t,n,r,o){return mi(),gi(o),t.flags|=256,Ss(e,t,n,r),t.child}var Rs,Ps,Ms,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,o=t.pendingProps,i=ca.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Io(ca,1&i),null===e)return di(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fc(l,o,0,null),e=Lc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ls,e):Us(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Fc({mode:"visible",children:r.children},o,0,null),(i=Lc(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Ji(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ls,i);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=hs(i=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(r=Ol)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Oi(e,o),oc(r,e,o,-1))}return yc(),zs(e,t,s,r=hs(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,ii=uo(o.nextSibling),oi=t,ai=!0,si=null,null!==e&&(Ko[Zo++]=Jo,Ko[Zo++]=$o,Ko[Zo++]=Qo,Jo=e.id,$o=e.overflow,Qo=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Mc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Mc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&gi(r),Ji(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Gs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Ws(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ss(e,t,r.children,n),0!==(2&(r=ca.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Io(ca,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ua(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ua(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gs(t,!0,n,null,i);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Po(t.type)&&Mo(),Ys(t),null;case 3:return r=t.stateNode,aa(),Co(Oo),Co(Ao),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(pi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==si&&(lc(si),si=null))),Ps(e,t),Ys(t),null;case 5:la(t);var o=oa(ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=oa(ta.current),pi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fo]=t,r[mo]=i,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(o=0;o<Dr.length;o++)Ur(Dr[o],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,i),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ur("invalid",r);break;case"textarea":ie(r,i),Ur("invalid",r)}for(var s in be(n,i),o=null,i)if(i.hasOwnProperty(s)){var c=i[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":X(r),ee(r,i,!0);break;case"textarea":X(r),se(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=eo)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fo]=t,e[mo]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(s=xe(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),o=r;break;case"iframe":case"object":case"embed":Ur("load",e),o=r;break;case"video":case"audio":for(o=0;o<Dr.length;o++)Ur(Dr[o],e);o=r;break;case"source":Ur("error",e),o=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),o=r;break;case"details":Ur("toggle",e),o=r;break;case"input":Q(e,r),o=Z(e,r),Ur("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),o=oe(e,r),Ur("invalid",e)}for(i in be(n,o),c=o)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ye(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Ur("scroll",e):null!=u&&x(e,i,u,s))}switch(n){case"input":X(e),ee(e,r,!1);break;case"textarea":X(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?re(e,!!r.multiple,i,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=eo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=oa(ra.current),oa(ta.current),pi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(i=r.nodeValue!==n)&&null!==(e=oi))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Ys(t),null;case 13:if(Co(ca),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ii&&0!==(1&t.mode)&&0===(128&t.flags))fi(),mi(),t.flags|=98560,i=!1;else if(i=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[fo]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),i=!1}else null!==si&&(lc(si),si=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ca.current)?0===Dl&&(Dl=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return aa(),Ps(e,t),null===e&&Gr(t.stateNode.containerInfo),Ys(t),null;case 10:return ki(t.type._context),Ys(t),null;case 19:if(Co(ca),null===(i=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Xs(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ua(e))){for(t.flags|=128,Xs(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Io(ca,1&ca.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Wl&&(t.flags|=128,r=!0,Xs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ua(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!ai)return Ys(t),null}else 2*Je()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Xs(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ca.current,Io(ca,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Zs(e,t){switch(ri(t),t.tag){case 1:return Po(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return aa(),Co(Oo),Co(Ao),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return la(t),null;case 13:if(Co(ca),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(ca),null;case 4:return aa(),null;case 10:return ki(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Ms=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,oa(ta.current);var i,a=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),a=[];break;case"select":o=F({},o,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":o=oe(e,o),r=oe(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=eo)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var s=o[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(s=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||s===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var rl=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&nl(t,n,i)}o=o.next}while(o!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[mo],delete t[yo],delete t[vo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=eo));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,pl=!1;function fl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||tl(n,t);case 6:var r=hl,o=pl;hl=null,fl(e,t,n),pl=o,null!==(hl=r)&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),Gt(e)):co(hl,n.stateNode));break;case 4:r=hl,o=pl,hl=n.stateNode.containerInfo,pl=!0,fl(e,t,n),hl=r,pl=o;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&nl(n,t,a),o=o.next}while(o!==r)}fl(e,t,n);break;case 1:if(!Js&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,fl(e,t,n),Js=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===hl)throw Error(a(160));ml(i,s,o),hl=null,pl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Ec(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{ol(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var o=e.stateNode;try{pe(o,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(o,i),xe(l,s);var u=xe(l,i);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ye(o,h):"dangerouslySetInnerHTML"===d?he(o,h):"children"===d?pe(o,h):x(o,d,h,u)}switch(l){case"input":$(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?re(o,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?re(o,!!i.multiple,i.defaultValue,!0):re(o,!!i.multiple,i.multiple?[]:"",!1))}o[mo]=i}catch(g){Ec(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(g){Ec(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Gl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||d,yl(t,e),Js=u):yl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(f=(p=el).child,p.tag){case 0:case 11:case 14:case 15:ol(4,p,p.return);break;case 1:tl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,el=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(pe(o,""),r.flags&=-33),dl(e,cl(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ul(e,cl(e),i);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){el=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var o=el,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Qs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=a,(Js=l)&&!c)for(el=o;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?kl(o):null!==l?(l.return=a,el=l):kl(o);for(;null!==i;)el=i,wl(i,t,n),i=i.sibling;el=o,Qs=s,Js=c}Sl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,el=i):Sl(e)}}function Sl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ui(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ui(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(a(163))}Js||512&t.flags&&al(t)}catch(p){Ec(t,t.return,p)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function _l(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function kl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Ec(t,o,l)}}var i=t.return;try{al(t)}catch(l){Ec(t,i,l)}break;case 5:var a=t.return;try{al(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){el=null;break}var s=t.sibling;if(null!==s){s.return=t.return,el=s;break}el=t.return}}var Tl,El=Math.ceil,Cl=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,jl=w.ReactCurrentBatchConfig,Al=0,Ol=null,Nl=null,Rl=0,Pl=0,Ml=Eo(0),Dl=0,Ll=null,Fl=0,Bl=0,Ul=0,zl=null,Vl=null,Gl=0,Wl=1/0,Hl=null,ql=!1,Xl=null,Yl=null,Kl=!1,Zl=null,Ql=0,Jl=0,$l=null,ec=-1,tc=0;function nc(){return 0!==(6&Al)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==yi.transition?(0===tc&&(tc=gt()),tc):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function oc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(a(185));vt(e,n,r),0!==(2&Al)&&e===Ol||(e===Ol&&(0===(2&Al)&&(Bl|=n),4===Dl&&cc(e,Rl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Wl=Je()+500,zo&&Wo()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-st(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=pt(e,e===Ol?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zo=!0,Go(e)}(uc.bind(null,e)):Go(uc.bind(null,e)),so((function(){0===(6&Al)&&Wo()})),n=null;else{switch(wt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=ot}n=Oc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(ec=-1,tc=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=pt(e,e===Ol?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var o=Al;Al|=2;var i=gc();for(Ol===e&&Rl===t||(Hl=null,Wl=Je()+500,fc(e,t));;)try{xc();break}catch(l){mc(e,l)}_i(),Cl.current=i,Al=o,null!==Nl?t=0:(Ol=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(o=mt(e))&&(r=o,t=sc(e,o))),1===t)throw n=Ll,fc(e,0),cc(e,r),ic(e,Je()),n;if(6===t)cc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!lr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vc(e,r))&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Ll,fc(e,0),cc(e,r),ic(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Vl,Hl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Gl+500-Je())){if(0!==pt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=oo(_c.bind(null,e,Vl,Hl),t);break}_c(e,Vl,Hl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-st(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=oo(_c.bind(null,e,Vl,Hl),r);break}_c(e,Vl,Hl);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&lc(t)),e}function lc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function cc(e,t){for(t&=~Ul,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Al))throw Error(a(327));kc();var t=pt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,fc(e,0),cc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vl,Hl),ic(e,Je()),null}function dc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Wl=Je()+500,zo&&Wo())}}function hc(e){null!==Zl&&0===Zl.tag&&0===(6&Al)&&kc();var t=Al;Al|=1;var n=jl.transition,r=xt;try{if(jl.transition=null,xt=1,e)return e()}finally{xt=r,jl.transition=n,0===(6&(Al=t))&&Wo()}}function pc(){Pl=Ml.current,Co(Ml)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,io(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ri(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:aa(),Co(Oo),Co(Ao),ha();break;case 5:la(r);break;case 4:aa();break;case 13:case 19:Co(ca);break;case 10:ki(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Ol=e,Nl=e=Mc(e.current,null),Rl=Pl=t,Dl=0,Ll=null,Ul=Bl=Fl=0,Vl=zl=null,null!==Ii){for(t=0;t<Ii.length;t++)if(null!==(r=(n=Ii[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ii=null}return e}function mc(e,t){for(;;){var n=Nl;try{if(_i(),pa.current=ss,ba){for(var r=ga.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ba=!1}if(ma=0,va=ya=ga=null,xa=!1,wa=0,Il.current=null,null===n||null===n.return){Dl=1,Ll=t,Nl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=vs(s);if(null!==f){f.flags&=-257,bs(f,s,l,0,t),1&f.mode&&ys(i,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ys(i,u,t),yc();break e}c=Error(a(426))}else if(ai&&1&l.mode){var y=vs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bs(y,s,l,0,t),gi(ds(c,l));break e}}i=c=ds(c,l),4!==Dl&&(Dl=2),null===zl?zl=[i]:zl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Fi(i,ms(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Fi(i,gs(i,l,t));break e}}i=i.return}while(null!==i)}Sc(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=ss,null===e?ss:e}function yc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ol||0===(268435455&Fl)&&0===(268435455&Bl)||cc(Ol,Rl)}function vc(t,n){var r=Al;Al|=2;var o=gc();for(Ol===t&&Rl===n||(Hl=null,fc(t,n));;)try{bc();break}catch(e){mc(t,e)}if(_i(),Al=r,Cl.current=o,null!==Nl)throw Error(a(261));return Ol=null,Rl=0,Dl}function bc(){for(;null!==Nl;)wc(Nl)}function xc(){for(;null!==Nl&&!Ze();)wc(Nl)}function wc(e){var t=Tl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?Sc(e):Nl=t,Il.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Pl)))return void(Nl=n)}else{if(null!==(n=Zs(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,n){var r=xt,o=jl.transition;try{jl.transition=null,xt=1,function(e,t,n,r){do{kc()}while(null!==Zl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-st(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,i),e===Ol&&(Nl=Ol=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Oc(nt,(function(){return kc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=jl.transition,jl.transition=null;var s=xt;xt=1;var l=Al;Al|=4,Il.current=null,function(e,t){if(to=Ht,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==i||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(l=s),p===i&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(no={focusedElem:e,selectionRange:n},Ht=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:vi(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),vl(n,e),mr(no),Ht=!!to,no=to=null,e.current=n,xl(n,e,o),Qe(),Al=l,xt=s,jl.transition=i}else e.current=n;if(Kl&&(Kl=!1,Zl=e,Ql=o),i=e.pendingLanes,0===i&&(Yl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Xl,Xl=null,e;0!==(1&Ql)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Wo()}(e,t,n,r)}finally{jl.transition=o,xt=r}return null}function kc(){if(null!==Zl){var e=wt(Ql),t=jl.transition,n=xt;try{if(jl.transition=null,xt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,Ql=0,0!==(6&Al))throw Error(a(331));var o=Al;for(Al|=4,el=e.current;null!==el;){var i=el,s=i.child;if(0!==(16&el.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:ol(8,d,i)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var p=(d=el).sibling,f=d.return;if(sl(d),d===u){el=null;break}if(null!==p){p.return=f,el=p;break}el=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,el=s;else e:for(;null!==el;){if(0!==(2048&(i=el).flags))switch(i.tag){case 0:case 11:case 15:ol(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,el=v;break e}el=i.return}}var b=e.current;for(el=b;null!==el;){var x=(s=el).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,el=x;else e:for(s=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ec(l,l.return,S)}if(l===s){el=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,el=w;break e}el=l.return}}if(Al=o,Wo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{xt=n,jl.transition=t}}return!1}function Tc(e,t,n){e=Di(e,t=ms(0,t=ds(n,t),1),1),t=nc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Di(t,e=gs(t,e=ds(n,e),1),1),e=nc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Je()-Gl?fc(e,0):Ul|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=nc();null!==(e=Oi(e,t))&&(vt(e,t,n),ic(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Oc(e,t){return Ye(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lc(n.children,o,i,t);case T:s=8,o|=8;break;case E:return(e=Rc(12,n,t,2|o)).elementType=E,e.lanes=i,e;case A:return(e=Rc(13,n,t,o)).elementType=A,e.lanes=i,e;case O:return(e=Rc(19,n,t,o)).elementType=O,e.lanes=i,e;case P:return Fc(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case j:s=11;break e;case N:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,o,i,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function Gc(e){if(!e)return jo;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Po(n))return Lo(e,n,t)}return t}function Wc(e,t,n,r,o,i,a,s,l){return(e=Vc(n,r,!0,e,0,i,0,s,l)).context=Gc(null),n=e.current,(i=Mi(r=nc(),o=rc(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,o),e.current.lanes=o,vt(e,o,r),ic(e,r),e}function Hc(e,t,n,r){var o=t.current,i=nc(),a=rc(o);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(o,t,a))&&(oc(e,o,a,i),Li(e,o,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oo.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Os(t),mi();break;case 5:sa(t);break;case 1:Po(t.type)&&Fo(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Io(bi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Io(ca,1&ca.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Io(ca,1&ca.current),null!==(e=qs(e,t,n))?e.sibling:null);Io(ca,1&ca.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(ca,ca.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return qs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ai&&0!==(1048576&t.flags)&&ti(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var o=Ro(t,Ao.current);Ei(t,n),o=Ta(null,t,r,e,o,n);var i=Ea();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(i=!0,Fo(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ri(t),o.updater=Gi,t.stateNode=o,o._reactInternals=t,Xi(t,r,e,n),t=As(null,t,r,!0,i,n)):(t.tag=0,ai&&i&&ni(t),Ss(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===j)return 11;if(e===N)return 14}return 2}(r),e=vi(r,e),o){case 0:t=Is(null,t,r,e,n);break e;case 1:t=js(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=ks(null,t,r,vi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 1:return r=t.type,o=t.pendingProps,js(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,Pi(e,t),Bi(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ns(e,t,r,n,o=ds(Error(a(423)),t));break e}if(r!==o){t=Ns(e,t,r,n,o=ds(Error(a(424)),t));break e}for(ii=uo(t.stateNode.containerInfo.firstChild),oi=t,ai=!0,si=null,n=$i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===o){t=qs(e,t,n);break e}Ss(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&di(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,ro(r,o)?s=null:null!==i&&ro(r,i)&&(t.flags|=32),Cs(e,t),Ss(e,t,s,n),t.child;case 6:return null===e&&di(t),null;case 13:return Bs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ji(t,null,r,n):Ss(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 7:return Ss(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ss(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Io(bi,r._currentValue),r._currentValue=s,null!==i)if(lr(i.value,s)){if(i.children===o.children&&!Oo.current){t=qs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Mi(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ti(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ti(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}Ss(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ei(t,n),r=r(o=Ci(o)),t.flags|=1,Ss(e,t,r,n),t.child;case 14:return o=vi(r=t.type,t.pendingProps),ks(e,t,r,o=vi(r.type,o),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:vi(r,o),Hs(e,t),t.tag=1,Po(r)?(e=!0,Fo(t)):e=!1,Ei(t,n),Hi(t,r,o),Xi(t,r,o,n),As(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=qc(a);s.call(e)}}Hc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=qc(a);i.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=a,e[go]=a.current,Gr(8===e.nodeType?e.parentNode:e),hc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=qc(l);s.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[go]=l.current,Gr(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,r)})),l}(n,t,e,o,r);return qc(a)}Qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[go]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),ic(t,Je()),0===(6&Al)&&(Wl=Je()+500,Wo()))}break;case 13:hc((function(){var t=Oi(e,1);if(null!==t){var n=nc();oc(t,e,1,n)}})),Yc(e,1)}},_t=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)oc(t,e,134217728,nc());Yc(e,134217728)}},kt=function(e){if(13===e.tag){var t=rc(e),n=Oi(e,t);if(null!==n)oc(n,e,t,nc());Yc(e,t)}},Tt=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=_o(r);if(!o)throw Error(a(90));Y(r),$(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},je=dc,Ae=hc;var nu={usingClientEntryPoint:!1,Events:[wo,So,_o,Ce,Ie,dc]},ru={findFiberByHostInstance:xo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ou={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ou),at=iu}catch(de){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",o=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Zc(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},n.flushSync=function(e){return hc(e)},n.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return tu(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,o,0,i,s),e[go]=t.current,Gr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qc(t)},n.render=function(e,t,n){if(!$c(t))throw Error(a(200));return tu(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){tu(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},n.unstable_batchedUpdates=dc,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return tu(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},9998:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(5914)},2370:function(t,n,r){var o,i=r(4756);o=function(t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n,r){(function(n){!function(e){t.exports=e()}((function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l=!1;if(!s&&l)return(void 0)(a,!0);if(i)return i(a,!0);throw(s=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}l=n[a]={exports:{}},t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";n.byteLength=function(e){return 3*((e=l(e))[0]+(e=e[1]))/4-e},n.toByteArray=function(e){var t,n,r=(a=l(e))[0],a=a[1],s=new i(function(e,t){return 3*(e+t)/4-t}(r,a)),c=0,u=0<a?r-4:r;for(n=0;n<u;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[c++]=255&t),1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(function(e,t,n){for(var o,i=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(o));return i.join("")}(e,a,s<a+16383?s:a+16383));return 1==o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),o=e("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,a=(n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50,2147483647);function s(e){if(a<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');return e=new Uint8Array(e),Object.setPrototypeOf(e,t.prototype),e}function t(e,t,n){if("number"!=typeof e)return l(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}function l(e,n,r){if("string"==typeof e){var o=e,i=n;if(t.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return(o=(l=s(a=0|p(o,i))).write(o,i))!==a?l.slice(0,o):l;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return d(e);if(null!=e){if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer)){var a=e,l=r;if((o=n)<0||a.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<o+(l||0))throw new RangeError('"length" is outside of buffer bounds');return a=void 0===o&&void 0===l?new Uint8Array(a):void 0===l?new Uint8Array(a,o):new Uint8Array(a,o,l),Object.setPrototypeOf(a,t.prototype),a}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(i=e.valueOf&&e.valueOf())&&i!==e)return t.from(i,n,r);var c=function(e){var n,r;return t.isBuffer(e)?(0!==(r=s(n=0|h(e.length))).length&&e.copy(r,0,0,n),r):void 0!==e.length?"number"!=typeof e.length||N(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),s(e<0?0:0|h(e))}function d(e){for(var t=e.length<0?0:0|h(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(a<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return o?-1:I(e).length;n=(""+n).toLowerCase(),i=!0}}function f(e,t,n){var o,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=t,s=n,l=this.length;(!s||s<0||l<s)&&(s=l);for(var c="",u=a=!a||a<0?0:a;u<s;++u)c+=R[this[u]];return c;case"utf8":case"utf-8":return x(this,t,n);case"ascii":l=t;var d=n,h="";d=Math.min(this.length,d);for(var p=l;p<d;++p)h+=String.fromCharCode(127&this[p]);return h;case"latin1":case"binary":a=t;var f=n,m="";f=Math.min(this.length,f);for(var g=a;g<f;++g)m+=String.fromCharCode(this[g]);return m;case"base64":return y=this,o=n,0===(v=t)&&o===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(v,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,v=n,b=this.slice(y,v),w="",S=0;S<b.length;S+=2)w+=String.fromCharCode(b[S]+256*b[S+1]);return w;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,n,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=N(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:y(e,n,r,o,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,n,r):y(e,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,o){var i=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=i=2,s/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,u=n;u<a;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*i}else-1!==c&&(u-=u-c),c=-1;else for(u=n=a<n+s?a-s:n;0<=u;u--){for(var d=!0,h=0;h<s;h++)if(l(e,u+h)!==l(t,h)){d=!1;break}if(d)return u}return-1}function v(e,t,n,r){return A(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return A(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,r%=256,o.push(r),o.push(n);return o}(t,e.length-n),e,n,r)}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,l,c=e[o],u=null,d=239<c?4:223<c?3:191<c?2:1;if(o+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[o+1]))&&127<(l=(31&c)<<6|63&i)&&(u=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&i)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}var h=r,p=h.length;if(p<=w)return String.fromCharCode.apply(String,h);for(var f="",m=0;m<p;)f+=String.fromCharCode.apply(String,h.slice(m,m+=w));return f}n.kMaxLength=a,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=l,Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return c(e),e<=0||void 0===t?s(e):"string"==typeof n?s(e).fill(t,n):s(e).fill(t)},t.allocUnsafe=u,t.allocUnsafeSlow=u,t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),O(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,o=n.length,i=0,a=Math.min(r,o);i<a;++i)if(e[i]!==n[i]){r=e[i],o=n[i];break}return r<o?-1:o<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);if(void 0===n)for(i=n=0;i<e.length;++i)n+=e[i].length;for(var r=t.allocUnsafe(n),o=0,i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},t.byteLength=p,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):f.apply(this,arguments)},t.prototype.equals=function(e){if(t.isBuffer(e))return this===e||0===t.compare(this,e);throw new TypeError("Argument must be a Buffer")},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i&&(t.prototype[i]=t.prototype.inspect),t.prototype.compare=function(e,n,r,o,i){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),(n=void 0===n?0:n)<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(i<=o&&r<=n)return 0;if(i<=o)return-1;if(r<=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(o>>>=0),s=(r>>>=0)-(n>>>=0),l=Math.min(a,s),c=this.slice(o,i),u=e.slice(n,r),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],s=u[d];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,a,s,l=!1;;)switch(r){case"hex":var c=e,u=t,d=n,h=(u=Number(u)||0,this.length-u);(!d||h<(d=Number(d)))&&(d=h),(h=c.length)/2<d&&(d=h/2);for(var p=0;p<d;++p){var f=parseInt(c.substr(2*p,2),16);if(N(f))return p;this[u+p]=f}return p;case"utf8":case"utf-8":return h=t,s=n,A(I(e,(a=this).length-h),a,h,s);case"ascii":case"latin1":case"binary":return v(this,e,t,n);case"base64":return a=this,s=t,i=n,A(j(e),a,s,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,n,r,o,i,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<n||n<a)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function k(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,i){return t=+t,n>>>=0,i||k(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t=+t,n>>>=0,i||k(e,0,n,8),o.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;return(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e),r=this.subarray(e,n),Object.setPrototypeOf(r,t.prototype),r},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},t.prototype.readInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),o.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),o.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),o.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),o.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,a=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,a=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,o){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,o||0===o||(o=this.length),n>=e.length&&(n=e.length),(o=0<o&&o<r?r:o)===r)return 0;if(0===e.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length);var i=(o=e.length-n<o-r?e.length-n+r:o)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,o);else if(this===e&&r<n&&n<o)for(var a=i-1;0<=a;--a)e[a+n]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,o),n);return i},t.prototype.fill=function(e,n,r,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===o&&i<128||"latin1"===o)&&(e=i))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");var a;if(!(r<=n))if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=n;a<r;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,o),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=s[a%l]}return this};var C=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function j(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}var R=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:244}],5:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],6:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e)||null===e)return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},{"../internals/is-object":74}],7:[function(e,t,n){var r=e("../internals/well-known-symbol"),o=e("../internals/object-create"),i=(e=e("../internals/object-define-property"),r("unscopables")),a=Array.prototype;null==a[i]&&e.f(a,i,{configurable:!0,value:o(null)}),t.exports=function(e){a[i][e]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,t,n){t.exports=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},{}],10:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e))return e;throw TypeError(String(e)+" is not an object")}},{"../internals/is-object":74}],11:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(e,t,n){"use strict";function r(e){return l(e)&&c(E,u(e))}var o,i=e("../internals/array-buffer-native"),a=e("../internals/descriptors"),s=e("../internals/global"),l=e("../internals/is-object"),c=e("../internals/has"),u=e("../internals/classof"),d=e("../internals/create-non-enumerable-property"),h=e("../internals/redefine"),p=e("../internals/object-define-property").f,f=e("../internals/object-get-prototype-of"),m=e("../internals/object-set-prototype-of"),g=e("../internals/well-known-symbol"),y=(e=e("../internals/uid"),s.Int8Array),v=y&&y.prototype,b=(b=s.Uint8ClampedArray)&&b.prototype,x=y&&f(y),w=v&&f(v),S=Object.prototype,_=S.isPrototypeOf,k=(g=g("toStringTag"),e("TYPED_ARRAY_TAG")),T=i&&!!m&&"Opera"!==u(s.opera),E=(e=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(o in E)s[o]||(T=!1);if((!T||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},T))for(o in E)s[o]&&m(s[o],x);if((!T||!w||w===S)&&(w=x.prototype,T))for(o in E)s[o]&&m(s[o].prototype,w);if(T&&f(b)!==w&&m(b,w),a&&!c(w,g))for(o in e=!0,p(w,g,{get:function(){return l(this)?this[k]:void 0}}),E)s[o]&&d(s[o],k,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:e&&k,aTypedArray:function(e){if(r(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(m){if(_.call(x,e))return e}else for(var t in E)if(c(E,o)&&(t=s[t])&&(e===t||_.call(t,e)))return e;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in E)(r=s[r])&&c(r.prototype,e)&&delete r.prototype[e];w[e]&&!n||h(w,e,!n&&T&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(a){if(m){if(n)for(r in E)(o=s[r])&&c(o,e)&&delete o[e];if(x[e]&&!n)return;try{return h(x,e,!n&&T&&y[e]||t)}catch(e){}}for(r in E)!(o=s[r])||o[e]&&!n||h(o,e,t)}},isView:function(e){return"DataView"===(e=u(e))||c(E,e)},isTypedArray:r,TypedArray:x,TypedArrayPrototype:w}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function o(e){return[255&e,e>>8&255]}function i(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return U(e,23,4)}function l(e){return U(e,52,8)}function c(e,t){E(e[R],t,{get:function(){return j(this)[t]}})}function u(e,t,n,r){if((n=w(n))+t>(e=j(e)).byteLength)throw B(P);var o=j(e.buffer).bytes;return n+=e.byteOffset,e=o.slice(n,n+t),r?e:e.reverse()}function d(e,t,n,r,o,i){if((n=w(n))+t>(e=j(e)).byteLength)throw B(P);for(var a=j(e.buffer).bytes,s=n+e.byteOffset,l=r(+o),c=0;c<t;c++)a[s+c]=l[i?c:t-c-1]}var h=e("../internals/global"),p=e("../internals/descriptors"),f=e("../internals/array-buffer-native"),m=e("../internals/create-non-enumerable-property"),g=e("../internals/redefine-all"),y=e("../internals/fails"),v=e("../internals/an-instance"),b=e("../internals/to-integer"),x=e("../internals/to-length"),w=e("../internals/to-index"),S=e("../internals/ieee754"),_=e("../internals/object-get-prototype-of"),k=e("../internals/object-set-prototype-of"),T=e("../internals/object-get-own-property-names").f,E=e("../internals/object-define-property").f,C=e("../internals/array-fill"),I=e("../internals/set-to-string-tag"),j=(e=e("../internals/internal-state")).get,A=e.set,O="ArrayBuffer",N="DataView",R="prototype",P="Wrong index",M=h[O],D=M,L=h[N],F=(e=L&&L[R],Object.prototype),B=h.RangeError,U=S.pack,z=S.unpack;if(f){if(!y((function(){M(1)}))||!y((function(){new M(-1)}))||y((function(){return new M,new M(1.5),new M(NaN),M.name!=O}))){h=(D=function(e){return v(this,D),new M(w(e))})[R]=M[R];for(var V,G=T(M),W=0;G.length>W;)(V=G[W++])in D||m(D,V,M[V]);h.constructor=D}k&&_(e)!==F&&k(e,F),S=new L(new D(2));var H=e.setInt8;S.setInt8(0,2147483648),S.setInt8(1,2147483649),!S.getInt8(0)&&S.getInt8(1)||g(e,{setInt8:function(e,t){H.call(this,e,t<<24>>24)},setUint8:function(e,t){H.call(this,e,t<<24>>24)}},{unsafe:!0})}else D=function(e){v(this,D,O),e=w(e),A(this,{bytes:C.call(new Array(e),0),byteLength:e}),p||(this.byteLength=e)},L=function(e,t,n){v(this,L,N),v(e,D,N);var r=j(e).byteLength;if((t=b(t))<0||r<t)throw B("Wrong offset");if(r<t+(n=void 0===n?r-t:x(n)))throw B("Wrong length");A(this,{buffer:e,byteLength:n,byteOffset:t}),p||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},p&&(c(D,"byteLength"),c(L,"buffer"),c(L,"byteLength"),c(L,"byteOffset")),g(L[R],{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){return((e=u(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0])<<16>>16},getUint16:function(e){return(e=u(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0]},getInt32:function(e){return a(u(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return a(u(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return z(u(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return z(u(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){d(this,1,e,r,t)},setUint8:function(e,t){d(this,1,e,r,t)},setInt16:function(e,t){d(this,2,e,o,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){d(this,2,e,o,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){d(this,4,e,i,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){d(this,4,e,i,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){d(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){d(this,8,e,l,t,2<arguments.length?arguments[2]:void 0)}});I(D,O),I(L,N),t.exports={ArrayBuffer:D,DataView:L}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(e,t,n){"use strict";var r=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length"),a=Math.min;t.exports=[].copyWithin||function(e,t){var n=r(this),s=i(n.length),l=o(e,s),c=o(t,s),u=a((void 0===(e=2<arguments.length?arguments[2]:void 0)?s:o(e,s))-c,s-l),d=1;for(c<l&&l<c+u&&(d=-1,c+=u-1,l+=u-1);0<u--;)c in n?n[l]=n[c]:delete n[l],l+=d,c+=d;return n}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(e,t,n){"use strict";var r=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length");t.exports=function(e){for(var t,n=r(this),a=i(n.length),s=o(1<(t=arguments.length)?arguments[1]:void 0,a),l=void 0===(t=2<t?arguments[2]:void 0)?a:o(t,a);s<l;)n[s++]=e;return n}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,o=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),o=o("forEach"),e=e("forEach"),t.exports=o&&e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),o=e("../internals/to-object"),i=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),l=e("../internals/create-property"),c=e("../internals/get-iterator-method");t.exports=function(e){var t,n,u,d,h,p,f=o(e),m=(e="function"==typeof this?this:Array,arguments.length),g=1<m?arguments[1]:void 0,y=void 0!==g,v=c(f),b=0;if(y&&(g=r(g,2<m?arguments[2]:void 0,2)),null==v||e==Array&&a(v))for(n=new e(t=s(f.length));b<t;b++)p=y?g(f[b],b):f[b],l(n,b,p);else for(h=(d=v.call(f)).next,n=new e;!(u=h.call(d)).done;b++)p=y?i(d,g,[u.value,b],!0):u.value,l(n,b,p);return n.length=b,n}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(e,t,n){function r(e){return function(t,n,r){var s,l=o(t),c=i(l.length),u=a(r,c);if(e&&n!=n){for(;u<c;)if((s=l[u++])!=s)return!0}else for(;u<c;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}var o=e("../internals/to-indexed-object"),i=e("../internals/to-length"),a=e("../internals/to-absolute-index");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(e,t,n){function r(e){var t=1==e,n=2==e,r=3==e,u=4==e,d=6==e,h=5==e||d;return function(p,f,m,g){for(var y,v,b=a(p),x=i(b),w=o(f,m,3),S=s(x.length),_=0,k=(f=g||l,t?f(p,S):n?f(p,0):void 0);_<S;_++)if((h||_ in x)&&(v=w(y=x[_],_,b),e))if(t)k[_]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return _;case 2:c.call(k,y)}else if(u)return!1;return d?-1:r||u?u:k}}var o=e("../internals/function-bind-context"),i=e("../internals/indexed-object"),a=e("../internals/to-object"),s=e("../internals/to-length"),l=e("../internals/array-species-create"),c=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),o=e("../internals/to-integer"),i=e("../internals/to-length"),a=e("../internals/array-method-is-strict"),s=(e=e("../internals/array-method-uses-to-length"),Math.min),l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0;a=a("lastIndexOf"),e=e("indexOf",{ACCESSORS:!0,1:0}),t.exports=!c&&a&&e?l:function(e){if(c)return l.apply(this,arguments)||0;var t=r(this),n=i(t.length),a=n-1;for((a=1<arguments.length?s(a,o(arguments[1])):a)<0&&(a=n+a);0<=a;a--)if(a in t&&t[a]===e)return a||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/engine-v8-version"),a=o("species");t.exports=function(e){return 51<=i||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":51}],23:[function(e,t,n){function r(e){throw e}var o=e("../internals/descriptors"),i=e("../internals/fails"),a=e("../internals/has"),s=Object.defineProperty,l={};t.exports=function(e,t){var n,c,u,d;return a(l,e)?l[e]:(n=[][e],c=!!a(t=t||{},"ACCESSORS")&&t.ACCESSORS,u=a(t,0)?t[0]:r,d=a(t,1)?t[1]:void 0,l[e]=!!n&&!i((function(){if(c&&!o)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:r}):e[1]=1,n.call(e,u,d)})))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,t,n){function r(e){return function(t,n,r,l){o(n);var c=i(t),u=a(c),d=s(c.length),h=e?d-1:0,p=e?-1:1;if(r<2)for(;;){if(h in u){l=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=h:h<d;h+=p)h in u&&(l=n(l,u[h],h,c));return l}}var o=e("../internals/a-function"),i=e("../internals/to-object"),a=e("../internals/indexed-object"),s=e("../internals/to-length");t.exports={left:r(!1),right:r(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/is-array"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return new(void 0===(n=o(e)&&("function"==typeof(n=e.constructor)&&(n===Array||o(n.prototype))||r(n)&&null===(n=n[i]))?void 0:n)?Array:n)(0===t?0:t)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){throw void 0!==(o=e.return)&&r(o.call(e)),t}}},{"../internals/an-object":10}],27:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},{"../internals/well-known-symbol":148}],28:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],29:[function(e,t,n){var r=e("../internals/to-string-tag-support"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),i))?t:a?o(e):"Object"==(t=o(e))&&"function"==typeof e.callee?"Arguments":t}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,o=e("../internals/object-create"),i=e("../internals/redefine-all"),a=e("../internals/function-bind-context"),s=e("../internals/an-instance"),l=e("../internals/iterate"),c=e("../internals/define-iterator"),u=e("../internals/set-species"),d=e("../internals/descriptors"),h=e("../internals/internal-metadata").fastKey,p=(e=e("../internals/internal-state")).set,f=e.getterFor;t.exports={getConstructor:function(e,t,n,c){function u(e,t,n){var r,o=y(e),i=m(e,t);return i?i.value=n:(o.last=i={index:r=h(t,!0),key:t,value:n,previous:t=o.last,next:void 0,removed:!1},o.first||(o.first=i),t&&(t.next=i),d?o.size++:e.size++,"F"!==r&&(o.index[r]=i)),e}function m(e,t){e=y(e);var n,r=h(t);if("F"!==r)return e.index[r];for(n=e.first;n;n=n.next)if(n.key==t)return n}var g=e((function(e,r){s(e,g,t),p(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=r&&l(r,e[c],e,n)})),y=f(t);return i(g.prototype,{clear:function(){for(var e=y(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t,n,r=y(this);return(e=m(this,e))&&(t=e.next,n=e.previous,delete r.index[e.index],e.removed=!0,n&&(n.next=t),t&&(t.previous=n),r.first==e&&(r.first=t),r.last==e&&(r.last=n),d?r.size--:this.size--),!!e},forEach:function(e){for(var t,n=y(this),r=a(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!m(this,e)}}),i(g.prototype,n?{get:function(e){return(e=m(this,e))&&e.value},set:function(e,t){return u(this,0===e?0:e,t)}}:{add:function(e){return u(this,e=0===e?0:e,e)}}),d&&r(g.prototype,"size",{get:function(){return y(this).size}}),g},setStrong:function(e,t,n){var r=t+" Iterator",o=f(t),i=f(r);c(e,t,(function(e,t){p(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),u(t)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(e,t,n){"use strict";function r(e){return e.frozen||(e.frozen=new o)}function o(){this.entries=[]}function i(e,t){return g(e.entries,(function(e){return e[0]===t}))}var a=e("../internals/redefine-all"),s=e("../internals/internal-metadata").getWeakData,l=e("../internals/an-object"),c=e("../internals/is-object"),u=e("../internals/an-instance"),d=e("../internals/iterate"),h=e("../internals/array-iteration"),p=e("../internals/has"),f=(e=e("../internals/internal-state")).set,m=e.getterFor,g=h.find,y=h.findIndex,v=0;o.prototype={get:function(e){if(e=i(this,e))return e[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,n,o){function i(e,t,n){var o=g(e),i=s(l(t),!0);return!0===i?r(o).set(t,n):i[o.id]=n,e}var h=e((function(e,r){u(e,h,t),f(e,{type:t,id:v++,frozen:void 0}),null!=r&&d(r,e[o],e,n)})),g=m(t);return a(h.prototype,{delete:function(e){var t,n=g(this);return!!c(e)&&(!0===(t=s(e))?r(n).delete(e):t&&p(t,n.id)&&delete t[n.id])},has:function(e){var t,n=g(this);return!!c(e)&&(!0===(t=s(e))?r(n).has(e):t&&p(t,n.id))}}),a(h.prototype,n?{get:function(e){var t,n=g(this);if(c(e))return!0===(t=s(e))?r(n).get(e):t?t[n.id]:void 0},set:function(e,t){return i(this,e,t)}}:{add:function(e){return i(this,e,!0)}}),h}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/is-forced"),a=e("../internals/redefine"),s=e("../internals/internal-metadata"),l=e("../internals/iterate"),c=e("../internals/an-instance"),u=e("../internals/is-object"),d=e("../internals/fails"),h=e("../internals/check-correctness-of-iteration"),p=e("../internals/set-to-string-tag"),f=e("../internals/inherit-if-required");t.exports=function(e,t,n){function m(e){var t=T[e];a(T,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(S&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return S&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(S&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var g,y,v,b,x,w=-1!==e.indexOf("Map"),S=-1!==e.indexOf("Weak"),_=w?"set":"add",k=o[e],T=k&&k.prototype,E=k,C={};return i(e,"function"!=typeof k||!(S||T.forEach&&!d((function(){(new k).entries().next()}))))?(E=n.getConstructor(t,e,w,_),s.REQUIRED=!0):i(e,!0)&&(y=(g=new E)[_](S?{}:-0,1)!=g,v=d((function(){g.has(1)})),b=h((function(e){new k(e)})),x=!S&&d((function(){for(var e=new k,t=5;t--;)e[_](t,t);return!e.has(-0)})),b||(((E=t((function(t,n){return c(t,E,e),t=f(new k,t,E),null!=n&&l(n,t[_],t,w),t}))).prototype=T).constructor=E),(v||x)&&(m("delete"),m("has"),w&&m("get")),(x||y)&&m(_),S&&T.clear&&delete T.clear),C[e]=E,r({global:!0,forced:E!=k},C),p(E,e),S||n.setStrong(E,e,w),E}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(e,t){for(var n=o(t),s=a.f,l=i.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||s(e,u,l(t,u))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":148}],35:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":51}],36:[function(e,t,n){var r=e("../internals/require-object-coercible"),o=/"/g;t.exports=function(e,t,n,i){e=String(r(e));var a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+e+"</"+t+">"}},{"../internals/require-object-coercible":113}],37:[function(e,t,n){"use strict";function r(){return this}var o=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),a=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),l=e("../internals/iterators");t.exports=function(e,t,n){return t+=" Iterator",e.prototype=i(o,{next:a(1,n)}),s(e,t,!1,!0),l[t]=r,e}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],40:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,n){(t=r(t))in e?o.f(e,t,i(0,n)):e[t]=n}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(e,t,n){"use strict";function r(){return this}var o=e("../internals/export"),i=e("../internals/create-iterator-constructor"),a=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),l=e("../internals/set-to-string-tag"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/redefine"),d=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),p=e("../internals/iterators"),f=(e=e("../internals/iterators-core")).IteratorPrototype,m=e.BUGGY_SAFARI_ITERATORS,g=d("iterator"),y="values",v="entries";t.exports=function(e,t,n,d,b,x,w){function S(e){if(e===b&&I)return I;if(!m&&e in E)return E[e];switch(e){case"keys":case y:case v:return function(){return new n(this,e)}}return function(){return new n(this)}}i(n,t,d),d=t+" Iterator";var _,k,T=!1,E=e.prototype,C=E[g]||E["@@iterator"]||b&&E[b],I=!m&&C||S(b),j="Array"==t&&E.entries||C;if(j&&(j=a(j.call(new e)),f!==Object.prototype&&j.next&&(h||a(j)===f||(s?s(j,f):"function"!=typeof j[g]&&c(j,g,r)),l(j,d,!0,!0),h&&(p[d]=r))),b==y&&C&&C.name!==y&&(T=!0,I=function(){return C.call(this)}),h&&!w||E[g]===I||c(E,g,I),p[t]=I,b)if(_={values:S(y),keys:x?I:S("keys"),entries:S(v)},w)for(k in _)!m&&!T&&k in E||u(E,k,_[k]);else o({target:t,proto:!0,forced:m||T},_);return _}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(e,t,n){var r=e("../internals/path"),o=e("../internals/has"),i=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":51}],44:[function(e,t,n){var r=e("../internals/global"),o=(e=e("../internals/is-object"),r.document),i=e(o)&&e(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,t,n){e=e("../internals/engine-user-agent"),t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(e,t,n){var r,o,i=e("../internals/global");e=e("../internals/engine-user-agent"),(i=(i=(i=i.process)&&i.versions)&&i.v8)?o=(r=i.split("."))[0]+r[1]:e&&(!(r=e.match(/Edge\/(\d+)/))||74<=r[1])&&(r=e.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),s=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,u,d,h=e.target,p=e.global,f=e.stat,m=p?r:f?r[h]||s(h,{}):(r[h]||{}).prototype;if(m)for(n in t){if(u=t[n],d=e.noTargetGet?(d=o(m,n))&&d.value:m[n],!c(p?n:h+(f?".":"#")+n,e.forced)&&void 0!==d){if(typeof u==typeof d)continue;l(u,d)}(e.sham||d&&d.sham)&&i(u,"sham",!0),a(m,n,u,e)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],52:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),o=e("../internals/fails"),i=e("../internals/well-known-symbol"),a=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),l=i("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=!!/./[e=i("replace")]&&""===/./[e]("a","$0"),h=!o((function(){var e,t=(e=/(?:)/).exec;return 2!==(e.exec=function(){return t.apply(this,arguments)},e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]}));t.exports=function(e,t,n,p){var f,m,g=i(e),y=!o((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),v=y&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[l]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));y&&v&&("replace"!==e||c&&u&&!d)&&("split"!==e||h)||(f=/./[g],n=(v=n(g,""[e],(function(e,t,n,r,o){return t.exec===a?y&&!o?{done:!0,value:f.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}))[0],m=v[1],r(String.prototype,e,n),r(RegExp.prototype,g,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})),p&&s(RegExp.prototype[g],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":185}],53:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return Object.isExtensible(Object.preventExtensions({}))}))},{"../internals/fails":51}],54:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":5}],55:[function(e,t,n){"use strict";var r=e("../internals/a-function"),o=e("../internals/is-object"),i=[].slice,a={};t.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),s=function(){var r=n.concat(i.call(arguments));if(this instanceof s){var o=t,l=r.length,c=r;if(!(l in a)){for(var u=[],d=0;d<l;d++)u[d]="a["+d+"]";a[l]=Function("C,a","return new C("+u.join(",")+")")}return a[l](o,c)}return t.apply(e,r)};return o(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,t,n){function r(e){return"function"==typeof e?e:void 0}var o=e("../internals/path"),i=e("../internals/global");t.exports=function(e,t){return arguments.length<2?r(o[e])||r(i[e]):o[e]&&o[e][t]||i[e]&&i[e][t]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,t,n){var r=e("../internals/classof"),o=e("../internals/iterators"),i=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/get-iterator-method");t.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,t,r){(function(e){function n(e){return e&&e.Math==Math&&e}t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],61:[function(e,t,n){t.exports={}},{}],62:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":59}],63:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,t,n){var r=Math.abs,o=Math.pow,i=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:function(e,t,n){var l,c,u,d=new Array(n),h=8*n-t-1,p=(n=(1<<h)-1)>>1,f=23===t?o(2,-24)-o(2,-77):0,m=e<0||0===e&&1/e<0?1:0,g=0;for((e=r(e))!=e||e===1/0?(c=e!=e?1:0,l=n):(l=i(a(e)/s),e*(u=o(2,-l))<1&&(l--,u*=2),2<=(e+=1<=l+p?f/u:f*o(2,1-p))*u&&(l++,u/=2),n<=l+p?(c=0,l=n):1<=l+p?(c=(e*u-1)*o(2,t),l+=p):(c=e*o(2,p-1)*o(2,t),l=0));8<=t;d[g++]=255&c,c/=256,t-=8);for(l=l<<t|c,h+=t;0<h;d[g++]=255&l,l/=256,h-=8);return d[--g]|=128*m,d},unpack:function(e,t){var n,r,i=e.length,a=(1<<(r=8*i-t-1))-1,s=a>>1,l=r-7,c=i-1,u=127&(r=e[c--]);for(r>>=7;0<l;u=256*u+e[c],c--,l-=8);for(n=u&(1<<-l)-1,u>>=-l,l+=t;0<l;n=256*n+e[c],c--,l-=8);if(0===u)u=1-s;else{if(u===a)return n?NaN:r?-1/0:1/0;n+=o(2,t),u-=s}return(r?-1:1)*n*o(2,u-t)}}},{}],66:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/classof-raw"),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){return o&&"function"==typeof(t=t.constructor)&&t!==n&&r(t=t.prototype)&&t!==n.prototype&&o(e,t),e}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(e,t,n){e=e("../internals/shared-store");var r=Function.toString;"function"!=typeof e.inspectSource&&(e.inspectSource=function(e){return r.call(e)}),t.exports=e.inspectSource},{"../internals/shared-store":119}],69:[function(e,t,n){function r(e){s(e,u,{value:{objectID:"O"+ ++d,weakData:{}}})}var o=e("../internals/hidden-keys"),i=e("../internals/is-object"),a=e("../internals/has"),s=e("../internals/object-define-property").f,l=e("../internals/uid"),c=e("../internals/freezing"),u=l("meta"),d=0,h=Object.isExtensible||function(){return!0},p=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,u)){if(!h(e))return"F";if(!t)return"E";r(e)}return e[u].objectID},getWeakData:function(e,t){if(!a(e,u)){if(!h(e))return!0;if(!t)return!1;r(e)}return e[u].weakData},onFreeze:function(e){return c&&p.REQUIRED&&h(e)&&!a(e,u)&&r(e),e}};o[u]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(e,t,n){var r,o,i,a,s,l,c,u,d=e("../internals/native-weak-map"),h=e("../internals/global"),p=e("../internals/is-object"),f=e("../internals/create-non-enumerable-property"),m=e("../internals/has"),g=e("../internals/shared-key");e=e("../internals/hidden-keys"),h=h.WeakMap,c=d?(r=new h,o=r.get,i=r.has,a=r.set,s=function(e,t){return a.call(r,e,t),t},l=function(e){return o.call(r,e)||{}},function(e){return i.call(r,e)}):(e[u=g("state")]=!0,s=function(e,t){return f(e,u,t),t},l=function(e){return m(e,u)?e[u]:{}},function(e){return m(e,u)}),t.exports={set:s,get:l,has:c,enforce:function(e){return c(e)?l(e):s(e,{})},getterFor:function(e){return function(t){if(p(t)&&(t=l(t)).type===e)return t;throw TypeError("Incompatible receiver, "+e+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,t,n){var r=e("../internals/well-known-symbol"),o=e("../internals/iterators"),i=r("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":28}],73:[function(e,t,n){function r(e,t){return(e=s[a(e)])==c||e!=l&&("function"==typeof t?o(t):!!t)}var o=e("../internals/fails"),i=/#|\.prototype\./,a=r.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},{"../internals/fails":51}],74:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],75:[function(e,t,n){t.exports=!1},{}],76:[function(e,t,n){var r=e("../internals/is-object"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(e,t,n){function r(e,t){this.stopped=e,this.result=t}var o=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),s=e("../internals/function-bind-context"),l=e("../internals/get-iterator-method"),c=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,n,u,d){var h,p,f,m,g,y,v=s(t,n,u?2:1);if(d)h=e;else{if("function"!=typeof(t=l(e)))throw TypeError("Target is not iterable");if(i(t)){for(p=0,f=a(e.length);p<f;p++)if((m=u?v(o(y=e[p])[0],y[1]):v(e[p]))&&m instanceof r)return m;return new r(!1)}h=t.call(e)}for(g=h.next;!(y=g.call(h)).done;)if("object"==typeof(m=c(h,v,y.value,u))&&m&&m instanceof r)return m;return new r(!1)}).stop=function(e){return new r(!0,e)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(e,t,n){"use strict";var r,o,i=e("../internals/object-get-prototype-of"),a=e("../internals/create-non-enumerable-property"),s=e("../internals/has"),l=e("../internals/well-known-symbol"),c=(e=e("../internals/is-pure"),l=l("iterator"),!1);[].keys&&("next"in(o=[].keys())?(i=i(i(o)))!==Object.prototype&&(r=i):c=!0),null==r&&(r={}),e||s(r,l)||a(r,l,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:c}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(e,t,n){t.exports={}},{}],80:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],81:[function(e,t,n){var r,o,i,a,s,l,c,u,d=e("../internals/global"),h=e("../internals/object-get-own-property-descriptor").f,p=e("../internals/classof-raw"),f=e("../internals/task").set,m=(e=e("../internals/engine-is-ios"),d.MutationObserver||d.WebKitMutationObserver),g=d.process,y=d.Promise,v="process"==p(g);p=h(d,"queueMicrotask"),(h=p&&p.value)||(r=function(){var e,t;for(v&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},a=v?function(){g.nextTick(r)}:m&&!e?(s=!0,l=document.createTextNode(""),new m(r).observe(l,{characterData:!0}),function(){l.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),u=c.then,function(){u.call(c,r)}):function(){f.call(d,r)}),t.exports=h||function(e){e={fn:e,next:void 0},i&&(i.next=e),o||(o=e,a()),i=e}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(e,t,n){e=e("../internals/global"),t.exports=e.Promise},{"../internals/global":59}],83:[function(e,t,n){e=e("../internals/fails"),t.exports=!!Object.getOwnPropertySymbols&&!e((function(){return!String(Symbol())}))},{"../internals/fails":51}],84:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/is-pure"),a=o("iterator");t.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(e,t,n){var r=e("../internals/global");e=e("../internals/inspect-source"),r=r.WeakMap,t.exports="function"==typeof r&&/native code/.test(e(r))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=o(t),this.reject=o(n)}var o=e("../internals/a-function");t.exports.f=function(e){return new r(e)}},{"../internals/a-function":5}],87:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":76}],88:[function(e,t,n){var r=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},{"../internals/global":59}],89:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),c=e("../internals/indexed-object"),u=Object.assign,d=Object.defineProperty;t.exports=!u||o((function(){var e,t,n,o;return!(!r||1===u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},o="abcdefghijklmnopqrst",(e={})[n=Symbol()]=7,o.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||i(u({},t)).join("")!=o)}))?function(e,t){for(var n=l(e),o=arguments.length,u=1,d=a.f,h=s.f;u<o;)for(var p,f=c(arguments[u++]),m=d?i(f).concat(d(f)):i(f),g=m.length,y=0;y<g;)p=m[y++],r&&!h.call(f,p)||(n[p]=f[p]);return n}:u},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(e,t,n){function r(){}var o,i=e("../internals/an-object"),a=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),l=e("../internals/hidden-keys"),c=e("../internals/html"),u=e("../internals/document-create-element"),d=(e=e("../internals/shared-key"),"prototype"),h=e("IE_PROTO"),p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(e){}f=o?((e=o).write(p("")),e.close(),t=e.parentWindow.Object,e=null,t):(t="javascript:",(e=u("iframe")).style.display="none",c.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var e,t,n=s.length;n--;)delete f[d][s[n]];return f()};l[h]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(r[d]=i(e),n=new r,r[d]=null,n[h]=e):n=f(),void 0===t?n:a(n,t)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/an-object"),a=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,l=0;l<s;)o.f(e,n=r[l++],t[n]);return e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/ie8-dom-define"),i=e("../internals/an-object"),a=e("../internals/to-primitive"),s=Object.defineProperty;n.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/object-property-is-enumerable"),i=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),l=e("../internals/has"),c=e("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return i(!o.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(e,t,n){var r=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){if(!a||"[object Window]"!=i.call(e))return o(r(e));try{return o(e)}catch(e){return a.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(e,t,n){var r=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],97:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/to-object"),i=e("../internals/shared-key"),a=(e=e("../internals/correct-prototype-getter"),i("IE_PROTO")),s=Object.prototype;t.exports=e?Object.getPrototypeOf:function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(e,t,n){var r=e("../internals/has"),o=e("../internals/to-indexed-object"),i=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");t.exports=function(e,t){var n,s=o(e),l=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>l;)!r(s,n=t[l++])||~i(c,n)||c.push(n);return c}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(e,t,n){var r=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);n.f=i?function(e){return!!(e=o(this,e))&&e.enumerable}:r},{}],101:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),o=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(e,t,n){var r=e("../internals/get-built-in"),o=e("../internals/object-get-own-property-names"),i=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,t,n){e=e("../internals/global"),t.exports=e},{"../internals/global":59}],105:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],106:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){return r(e),o(t)&&t.constructor===e?t:((0,(e=i.f(e)).resolve)(t),e.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},{"../internals/redefine":108}],108:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/create-non-enumerable-property"),i=e("../internals/has"),a=e("../internals/set-global"),s=e("../internals/inspect-source"),l=(e=e("../internals/internal-state")).get,c=e.enforce,u=String(String).split("String");(t.exports=function(e,t,n,s){var l=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable;s=!!s&&!!s.noTargetGet,"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),c(n).source=u.join("string"==typeof t?t:"")),e===r?d?e[t]=n:a(t,n):(l?!s&&e[t]&&(d=!0):delete e[t],d?e[t]=n:o(e,t,n))})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,t,n){var r=e("./classof-raw"),o=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(e,t,n){"use strict";var r,o,i=e("./regexp-flags"),a=(e=e("./regexp-sticky-helpers"),RegExp.prototype.exec),s=String.prototype.replace,l=a,c=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),u=e.UNSUPPORTED_Y||e.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];t.exports=l=c||d||u?function(e){var t,n,r,o,l=this,h=u&&l.sticky,p=i.call(l),f=l.source,m=0,g=e;return h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(e).slice(l.lastIndex),0<l.lastIndex&&(!l.multiline||l.multiline&&"\n"!==e[l.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),n=new RegExp("^(?:"+f+")",p)),d&&(n=new RegExp("^"+f+"$(?!\\s)",p)),c&&(t=l.lastIndex),r=a.call(h?n:l,g),h?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=l.lastIndex,l.lastIndex+=r[0].length):l.lastIndex=0:c&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),d&&r&&1<r.length&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}:l},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":10}],112:[function(e,t,n){"use strict";function r(e,t){return RegExp(e,t)}e=e("./fails"),n.UNSUPPORTED_Y=e((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=e((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":51}],113:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],114:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],115:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),o=e("../internals/object-define-property"),i=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),s=i("species");t.exports=function(e){e=r(e);var t=o.f;a&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(e,t,n){var r=e("../internals/object-define-property").f,o=e("../internals/has"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(e,t,n){var r=e("../internals/shared"),o=e("../internals/uid"),i=r("keys");t.exports=function(e){return i[e]||(i[e]=o(e))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(e,t,n){var r=e("../internals/global"),o=(e=e("../internals/set-global"),"__core-js_shared__");r=r[o]||e(o,{}),t.exports=r},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,t,n){var r=e("../internals/is-pure"),o=e("../internals/shared-store");(t.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,t,n){var r=e("../internals/an-object"),o=e("../internals/a-function"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){return void 0===(e=r(e).constructor)||null==(e=r(e)[i])?t:o(e)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(e,t,n){var r=e("../internals/fails");t.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}))}},{"../internals/fails":51}],123:[function(e,t,n){function r(e){return function(t,n){t=String(i(t)),n=o(n);var r,a=t.length;return n<0||a<=n?e?"":void 0:(r=t.charCodeAt(n))<55296||56319<r||n+1===a||(a=t.charCodeAt(n+1))<56320||57343<a?e?t.charAt(n):r:e?t.slice(n,n+2):a-56320+(r-55296<<10)+65536}}var o=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports={codeAt:r(!1),charAt:r(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(e,t,n){e=e("../internals/engine-user-agent"),t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(e)},{"../internals/engine-user-agent":47}],125:[function(e,t,n){function r(e){return function(t,n,r){var l=(t=String(a(t))).length;return r=void 0===r?" ":String(r),(n=o(n))<=l||""==r?t:((l=i.call(r,s((n-=l)/r.length))).length>n&&(l=l.slice(0,n)),e?t+l:l+t)}}var o=e("../internals/to-length"),i=e("../internals/string-repeat"),a=e("../internals/require-object-coercible"),s=Math.ceil;t.exports={start:r(!1),end:r(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(e,t,n){"use strict";function r(e){return e+22+75*(e<26)}function o(e){var t,n=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o,i=e.charCodeAt(n++);55296<=i&&i<=56319&&n<r?56320==(64512&(o=e.charCodeAt(n++)))?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--):t.push(i)}return t}(e)).length,u=128,d=0,g=72;for(x=0;x<e.length;x++)(t=e[x])<128&&n.push(m(t));var y=n.length,v=y;for(y&&n.push("-");v<o;){for(var b=i,x=0;x<e.length;x++)u<=(t=e[x])&&t<b&&(b=t);var w=v+1;if(b-u>f((i-d)/w))throw RangeError(h);for(d+=(b-u)*w,u=b,x=0;x<e.length;x++){if((t=e[x])<u&&++d>i)throw RangeError(h);if(t==u){for(var S=d,_=a;;_+=a){var k=_<=g?1:g+s<=_?s:_-g;if(S<k)break;var T=S-k,E=a-k;n.push(m(r(k+T%E))),S=f(T/E)}n.push(m(r(S))),g=function(e,t,n){var r=0;for(e=n?f(e/c):e>>1,e+=f(e/t);p*s>>1<e;r+=a)e=f(e/p);return f(r+(p+1)*e/(e+l))}(d,w,v==y),d=0,++v}}++d,++u}return n.join("")}var i=2147483647,a=36,s=26,l=38,c=700,u=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,h="Overflow: input needs wider integers to process",p=a-1,f=Math.floor,m=String.fromCharCode;t.exports=function(e){for(var t,n=[],r=e.toLowerCase().replace(d,".").split("."),i=0;i<r.length;i++)t=r[i],n.push(u.test(t)?"xn--"+o(t):t);return n.join(".")}},{}],127:[function(e,t,n){"use strict";var r=e("../internals/to-integer"),o=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(e,t,n){var r=e("../internals/fails"),o=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!o[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||o[e].name!==e}))}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(e,t,n){function r(e){return function(t){return t=String(o(t)),1&e&&(t=t.replace(i,"")),2&e?t.replace(a,""):t}}var o=e("../internals/require-object-coercible"),i=(e="["+e("../internals/whitespaces")+"]",RegExp("^"+e+e+"*")),a=RegExp(e+e+"*$");t.exports={start:r(1),end:r(2),trim:r(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(e,t,n){function r(e){return function(){S(e)}}function o(e){S(e.data)}function i(e){s.postMessage(e+"",p.protocol+"//"+p.host)}var a,s=e("../internals/global"),l=e("../internals/fails"),c=e("../internals/classof-raw"),u=e("../internals/function-bind-context"),d=e("../internals/html"),h=e("../internals/document-create-element"),p=(e=e("../internals/engine-is-ios"),s.location),f=s.setImmediate,m=s.clearImmediate,g=s.process,y=s.MessageChannel,v=s.Dispatch,b=0,x={},w="onreadystatechange",S=function(e){var t;x.hasOwnProperty(e)&&(t=x[e],delete x[e],t())};f&&m||(f=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return x[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},a(b),b},m=function(e){delete x[e]},"process"==c(g)?a=function(e){g.nextTick(r(e))}:v&&v.now?a=function(e){v.now(r(e))}:y&&!e?(e=(c=new y).port2,c.port1.onmessage=o,a=u(e.postMessage,e,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||l(i)||"file:"===p.protocol?a=w in h("script")?function(e){d.appendChild(h("script"))[w]=function(){d.removeChild(this),S(e)}}:function(e){setTimeout(r(e),0)}:(a=i,s.addEventListener("message",o,!1))),t.exports={set:f,clear:m}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":28}],132:[function(e,t,n){var r=e("../internals/to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},{"../internals/to-integer":135}],133:[function(e,t,n){var r=e("../internals/to-integer"),o=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;e=r(e);var t=o(e);if(e!==t)throw RangeError("Wrong length or index");return t}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(e,t,n){var r=e("../internals/indexed-object"),o=e("../internals/require-object-coercible");t.exports=function(e){return r(o(e))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?o:r)(e)}},{}],136:[function(e,t,n){var r=e("../internals/to-integer"),o=Math.min;t.exports=function(e){return 0<e?o(r(e),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":113}],138:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){if((e=r(e))%t)throw RangeError("Wrong offset");return e}},{"../internals/to-positive-integer":139}],139:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){if((e=r(e))<0)throw RangeError("The argument can't be less than 0");return e}},{"../internals/to-integer":135}],140:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e))||"function"==typeof(n=e.valueOf)&&!r(o=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":148}],142:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,o=new(X(e))(r);n<r;)o[n]=t[n++];return o}function o(e,t){L(e,t,{get:function(){return M(this)[t]}})}function i(e){return e instanceof z||"ArrayBuffer"==(e=_(e))||"SharedArrayBuffer"==e}function a(e,t){return Y(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function s(e,t){return a(e,t=w(t,!0))?g(2,e[t]):F(e,t)}function l(e,t,n){return!(a(e,t=w(t,!0))&&k(n)&&S(n,"value"))||S(n,"get")||S(n,"set")||n.configurable||S(n,"writable")&&!n.writable||S(n,"enumerable")&&!n.enumerable?L(e,t,n):(e[t]=n.value,e)}var c=e("../internals/export"),u=e("../internals/global"),d=e("../internals/descriptors"),h=e("../internals/typed-array-constructors-require-wrappers"),p=e("../internals/array-buffer-view-core"),f=e("../internals/array-buffer"),m=e("../internals/an-instance"),g=e("../internals/create-property-descriptor"),y=e("../internals/create-non-enumerable-property"),v=e("../internals/to-length"),b=e("../internals/to-index"),x=e("../internals/to-offset"),w=e("../internals/to-primitive"),S=e("../internals/has"),_=e("../internals/classof"),k=e("../internals/is-object"),T=e("../internals/object-create"),E=e("../internals/object-set-prototype-of"),C=e("../internals/object-get-own-property-names").f,I=e("../internals/typed-array-from"),j=e("../internals/array-iteration").forEach,A=e("../internals/set-species"),O=e("../internals/object-define-property"),N=e("../internals/object-get-own-property-descriptor"),R=e("../internals/internal-state"),P=e("../internals/inherit-if-required"),M=R.get,D=R.set,L=O.f,F=N.f,B=Math.round,U=u.RangeError,z=f.ArrayBuffer,V=f.DataView,G=p.NATIVE_ARRAY_BUFFER_VIEWS,W=p.TYPED_ARRAY_TAG,H=p.TypedArray,q=p.TypedArrayPrototype,X=p.aTypedArrayConstructor,Y=p.isTypedArray,K="BYTES_PER_ELEMENT",Z="Wrong length";d?(G||(N.f=s,O.f=l,o(q,"buffer"),o(q,"byteOffset"),o(q,"byteLength"),o(q,"length")),c({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:s,defineProperty:l}),t.exports=function(e,t,n){function o(e,t){L(e,t,{get:function(){var e=this,n=t;return(e=M(e)).view[l](n*a+e.byteOffset,!0)},set:function(e){var r=this,o=t;r=M(r),n&&(e=(e=B(e))<0?0:255<e?255:255&e),r.view[d](o*a+r.byteOffset,e,!0)},enumerable:!0})}var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",l="get"+e,d="set"+e,p=u[s],f=p,g=(e=f&&f.prototype,{});G?h&&(f=t((function(e,t,n,o){return m(e,f,s),P(k(t)?i(t)?void 0!==o?new p(t,x(n,a),o):void 0!==n?new p(t,x(n,a)):new p(t):Y(t)?r(f,t):I.call(f,t):new p(b(t)),e,f)})),E&&E(f,H),j(C(p),(function(e){e in f||y(f,e,p[e])})),f.prototype=e):(f=t((function(e,t,n,l){m(e,f,s);var c,u,d=0,h=0;if(k(t)){if(!i(t))return Y(t)?r(f,t):I.call(f,t);var p=t;if(h=x(n,a),n=t.byteLength,void 0===l){if(n%a)throw U(Z);if((c=n-h)<0)throw U(Z)}else if(n<(c=v(l)*a)+h)throw U(Z);u=c/a}else u=b(t),p=new z(c=u*a);for(D(e,{buffer:p,byteOffset:h,byteLength:c,length:u,view:new V(p)});d<u;)o(e,d++)})),E&&E(f,H),e=f.prototype=T(q)),e.constructor!==f&&y(e,"constructor",f),W&&y(e,W,s),g[s]=f,c({global:!0,forced:f!=p,sham:!G},g),K in f||y(f,K,a),K in e||y(e,K,a),A(s)}):t.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/fails"),i=e("../internals/check-correctness-of-iteration"),a=(e=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,r.ArrayBuffer),s=r.Int8Array;t.exports=!e||!o((function(){s(1)}))||!o((function(){new s(-1)}))||!i((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||o((function(){return 1!==new s(new a(2),1,void 0).length}))},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(e,t,n){var r=e("../internals/to-object"),o=e("../internals/to-length"),i=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,n,c,u,d,h,p=r(e),f=arguments.length,m=1<f?arguments[1]:void 0,g=void 0!==m,y=i(p);if(null!=y&&!a(y))for(h=(d=y.call(p)).next,p=[];!(u=h.call(d)).done;)p.push(u.value);for(g&&2<f&&(m=s(m,arguments[2],2)),n=o(p.length),c=new(l(this))(n),t=0;t<n;t++)c[t]=g?m(p[t],t):p[t];return c}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+o).toString(36)}},{}],146:[function(e,t,n){e=e("../internals/native-symbol"),t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":83}],147:[function(e,t,n){e=e("../internals/well-known-symbol"),n.f=e},{"../internals/well-known-symbol":148}],148:[function(e,t,n){var r=e("../internals/global"),o=e("../internals/shared"),i=e("../internals/has"),a=e("../internals/uid"),s=e("../internals/native-symbol"),l=(e=e("../internals/use-symbol-as-uid"),o("wks")),c=r.Symbol,u=e?c:c&&c.withoutSetter||a;t.exports=function(e){return i(l,e)||(s&&i(c,e)?l[e]=c[e]:l[e]=u("Symbol."+e)),l[e]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(e,t,n){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],150:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/global"),i=e("../internals/array-buffer"),a=(e=e("../internals/set-species"),"ArrayBuffer");i=i[a],r({global:!0,forced:o[a]!==i},{ArrayBuffer:i}),e(a)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/is-array"),a=e("../internals/is-object"),s=e("../internals/to-object"),l=e("../internals/to-length"),c=e("../internals/create-property"),u=e("../internals/array-species-create"),d=e("../internals/array-method-has-species-support"),h=e("../internals/well-known-symbol"),p=(e=e("../internals/engine-v8-version"),h("isConcatSpreadable")),f=9007199254740991,m="Maximum allowed index exceeded";h=51<=e||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),e=d("concat"),r({target:"Array",proto:!0,forced:!h||!e},{concat:function(e){for(var t,n,r,o,d,h=s(this),g=u(h,0),y=0,v=-1,b=arguments.length;v<b;v++)if(d=void 0,a(o=r=-1===v?h:arguments[v])&&(void 0!==(d=o[p])?d:i(o))){if(n=l(r.length),f<y+n)throw TypeError(m);for(t=0;t<n;t++,y++)t in r&&c(g,y,r[t])}else{if(f<=y)throw TypeError(m);c(g,y++,r)}return g.length=y,g}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-copy-within");e=e("../internals/add-to-unscopables"),r({target:"Array",proto:!0},{copyWithin:o}),e("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").every,i=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),i=i("every"),e=e("every"),r({target:"Array",proto:!0,forced:!i||!e},{every:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-fill");e=e("../internals/add-to-unscopables"),r({target:"Array",proto:!0},{fill:o}),e("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").filter,i=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),i=i("filter"),e=e("filter"),r({target:"Array",proto:!0,forced:!i||!e},{filter:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/array-for-each"),r({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})},{"../internals/array-for-each":16,"../internals/export":50}],157:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:o})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],158:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-includes").includes,i=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-includes").indexOf,i=e("../internals/array-method-is-strict"),a=(e=e("../internals/array-method-uses-to-length"),[].indexOf),s=!!a&&1/[1].indexOf(1,-0)<0;i=i("indexOf"),e=e("indexOf",{ACCESSORS:!0,1:0}),r({target:"Array",proto:!0,forced:s||!i||!e},{indexOf:function(e){return s?a.apply(this,arguments)||0:o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),o=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),a=e("../internals/internal-state"),s=(e=e("../internals/define-iterator"),"Array Iterator"),l=a.set,c=a.getterFor(s);t.exports=e(Array,"Array",(function(e,t){l(this,{type:s,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],161:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/indexed-object"),i=e("../internals/to-indexed-object"),a=(e=e("../internals/array-method-is-strict"),[].join);o=o!=Object,e=e("join",","),r({target:"Array",proto:!0,forced:o||!e},{join:function(e){return a.call(i(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],162:[function(e,t,n){e("../internals/export")({target:"Array",proto:!0,forced:(e=e("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:e})},{"../internals/array-last-index-of":20,"../internals/export":50}],163:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").map,i=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),i=i("map"),e=e("map"),r({target:"Array",proto:!0,forced:!i||!e},{map:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/is-object"),i=e("../internals/is-array"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length"),l=e("../internals/to-indexed-object"),c=e("../internals/create-property"),u=e("../internals/well-known-symbol"),d=e("../internals/array-method-has-species-support"),h=(e=e("../internals/array-method-uses-to-length"),d=d("slice"),e=e("slice",{ACCESSORS:!0,0:0,1:2}),u("species")),p=[].slice,f=Math.max;r({target:"Array",proto:!0,forced:!d||!e},{slice:function(e,t){var n,r,u,d=l(this),m=s(d.length),g=a(e,m),y=a(void 0===t?m:t,m);if(i(d)&&((n="function"==typeof(n=d.constructor)&&(n===Array||i(n.prototype))||o(n)&&null===(n=n[h])?void 0:n)===Array||void 0===n))return p.call(d,g,y);for(r=new(void 0===n?Array:n)(f(y-g,0)),u=0;g<y;g++,u++)g in d&&c(r,u,d[g]);return r.length=u,r}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],165:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/array-iteration").some,i=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),i=i("some"),e=e("some"),r({target:"Array",proto:!0,forced:!i||!e},{some:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],166:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/to-absolute-index"),i=e("../internals/to-integer"),a=e("../internals/to-length"),s=e("../internals/to-object"),l=e("../internals/array-species-create"),c=e("../internals/create-property"),u=e("../internals/array-method-has-species-support"),d=(e=e("../internals/array-method-uses-to-length"),u=u("splice"),e=e("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),h=Math.min;r({target:"Array",proto:!0,forced:!u||!e},{splice:function(e,t){var n,r,u,p,f,m,g=s(this),y=a(g.length),v=o(e,y);if(0===(e=arguments.length)?n=r=0:r=1===e?(n=0,y-v):(n=e-2,h(d(i(t),0),y-v)),9007199254740991<y+n-r)throw TypeError("Maximum allowed length exceeded");for(u=l(g,r),p=0;p<r;p++)(f=v+p)in g&&c(u,p,g[f]);if(n<(u.length=r)){for(p=v;p<y-r;p++)m=p+n,(f=p+r)in g?g[m]=g[f]:delete g[m];for(p=y;y-r+n<p;p--)delete g[p-1]}else if(r<n)for(p=y-r;v<p;p--)m=p+n-1,(f=p+r-1)in g?g[m]=g[f]:delete g[m];for(p=0;p<n;p++)g[p+v]=arguments[p+2];return g.length=y-r+n,u}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],167:[function(e,t,n){var r=e("../internals/descriptors"),o=(e=e("../internals/object-define-property").f,Function.prototype),i=o.toString,a=/^\s*function ([^ (]*)/;!r||"name"in o||e(o,"name",{configurable:!0,get:function(){try{return i.call(this).match(a)[1]}catch(e){return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],168:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong"),t.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],169:[function(e,t,n){e=e("../internals/export");var r=Math.hypot,o=Math.abs,i=Math.sqrt;e({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,s=0,l=arguments.length,c=0;s<l;)c<(n=o(arguments[s++]))?(a=a*(r=c/n)*r+1,c=n):a+=0<n?(r=n/c)*r:n;return c===1/0?1/0:c*i(a)}})},{"../internals/export":50}],170:[function(e,t,n){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],171:[function(e,t,n){"use strict";function r(e){var t,n,r,o,i,a,s,l=d(e,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=y(l)).charCodeAt(0))||45===e){if(88===(t=l.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(i=(o=l.slice(2)).length,a=0;a<i;a++)if((s=o.charCodeAt(a))<48||r<s)return NaN;return parseInt(o,n)}return+l}var o=e("../internals/descriptors"),i=e("../internals/global"),a=e("../internals/is-forced"),s=e("../internals/redefine"),l=e("../internals/has"),c=e("../internals/classof-raw"),u=e("../internals/inherit-if-required"),d=e("../internals/to-primitive"),h=e("../internals/fails"),p=e("../internals/object-create"),f=e("../internals/object-get-own-property-names").f,m=e("../internals/object-get-own-property-descriptor").f,g=e("../internals/object-define-property").f,y=e("../internals/string-trim").trim,v="Number",b=i[v],x=b.prototype,w=c(p(x))==v;if(a(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,_=function(e){e=arguments.length<1?0:e;var t=this;return t instanceof _&&(w?h((function(){x.valueOf.call(t)})):c(t)!=v)?u(new b(r(e)),t,_):r(e)},k=o?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;k.length>T;T++)l(b,S=k[T])&&!l(_,S)&&g(_,S,m(b,S));(_.prototype=x).constructor=_,s(i,v,_)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],172:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],173:[function(e,t,n){"use strict";function r(e,t,n){return 0===t?n:t%2==1?r(e,t-1,n*e):r(e*e,t/2,n)}var o=e("../internals/export"),i=e("../internals/to-integer"),a=e("../internals/this-number-value"),s=e("../internals/string-repeat"),l=(e=e("../internals/fails"),1..toFixed),c=Math.floor;o({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e((function(){l.call({})}))},{toFixed:function(e){function t(e,t){for(var n=-1,r=t;++n<6;)r+=e*h[n],h[n]=r%1e7,r=c(r/1e7)}function n(e){for(var t=6,n=0;0<=--t;)n+=h[t],h[t]=c(n/e),n=n%e*1e7}function o(){for(var e,t=6,n="";0<=--t;)""===n&&0!==t&&0===h[t]||(e=String(h[t]),n=""===n?e:n+s.call("0",7-e.length)+e);return n}var l,u,d=a(this),h=(e=i(e),[0,0,0,0,0,0]),p="",f="0";if(e<0||20<e)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||1e21<=d)return String(d);if(d<0&&(p="-",d=-d),1e-21<d)if(d=(l=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(d*r(2,69,1))-69)<0?d*r(2,-l,1):d/r(2,l,1),d*=4503599627370496,0<(l=52-l)){for(t(0,d),u=e;7<=u;)t(1e7,0),u-=7;for(t(r(10,u,1),0),u=l-1;23<=u;)n(1<<23),u-=23;n(1<<u),t(1,1),n(2),f=o()}else t(0,d),t(1<<-l,0),f=o()+s.call("0",e);return 0<e?p+((d=f.length)<=e?"0."+s.call("0",e-d)+f:f.slice(0,d-e)+"."+f.slice(d-e)):p+f}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],174:[function(e,t,n){var r=e("../internals/export");e=e("../internals/object-assign"),r({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e})},{"../internals/export":50,"../internals/object-assign":89}],175:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/iterate"),i=e("../internals/create-property");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),void 0,!0),t}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],176:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-descriptor").f;e=e("../internals/descriptors"),o=o((function(){a(1)})),r({target:"Object",stat:!0,forced:!e||o,sham:!e},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],177:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails");e=e("../internals/object-get-own-property-names-external").f,r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:e})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],178:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-object"),a=e("../internals/object-get-prototype-of");e=e("../internals/correct-prototype-getter"),r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!e},{getPrototypeOf:function(e){return a(i(e))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],179:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/to-object"),i=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){i(1)}))},{keys:function(e){return i(o(e))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],180:[function(e,t,n){var r=e("../internals/to-string-tag-support"),o=e("../internals/redefine");e=e("../internals/object-to-string"),r||o(Object.prototype,"toString",e,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],181:[function(e,t,n){"use strict";var r,o,i,a,s=e("../internals/export"),l=e("../internals/is-pure"),c=e("../internals/global"),u=e("../internals/get-built-in"),d=e("../internals/native-promise-constructor"),h=e("../internals/redefine"),p=e("../internals/redefine-all"),f=e("../internals/set-to-string-tag"),m=e("../internals/set-species"),g=e("../internals/is-object"),y=e("../internals/a-function"),v=e("../internals/an-instance"),b=e("../internals/classof-raw"),x=e("../internals/inspect-source"),w=e("../internals/iterate"),S=e("../internals/check-correctness-of-iteration"),_=e("../internals/species-constructor"),k=e("../internals/task").set,T=e("../internals/microtask"),E=e("../internals/promise-resolve"),C=e("../internals/host-report-errors"),I=e("../internals/new-promise-capability"),j=e("../internals/perform"),A=e("../internals/internal-state"),O=e("../internals/is-forced"),N=e("../internals/well-known-symbol"),R=e("../internals/engine-v8-version"),P=N("species"),M="Promise",D=A.get,L=A.set,F=A.getterFor(M),B=d,U=c.TypeError,z=c.document,V=c.process,G=u("fetch"),W=I.f,H=W,q="process"==b(V),X=!!(z&&z.createEvent&&c.dispatchEvent),Y="unhandledrejection",K=(N=(e=O(M,(function(){var e,t;if(x(B)===String(B)){if(66===R)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}return!((!l||B.prototype.finally)&&(51<=R&&/native code/.test(B)||(t=function(e){e((function(){}),(function(){}))},((e=B.resolve(1)).constructor={})[P]=t,e.then((function(){}))instanceof t)))})))||!S((function(e){B.all(e).catch((function(){}))})),function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t}),Z=function(e,t,n){var r;t.notified||(t.notified=!0,r=t.reactions,T((function(){for(var o,i,a=t.value,s=1==t.state,l=0;r.length>l;){var u,d,h,p=r[l++],f=s?p.ok:p.fail,m=p.resolve,g=p.reject,y=p.domain;try{f?(s||(2===t.rejection&&function(e,t){k.call(c,(function(){q?V.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))}(e,t),t.rejection=1),!0===f?u=a:(y&&y.enter(),u=f(a),y&&(y.exit(),h=!0)),u===p.promise?g(U("Promise-chain cycle")):(d=K(u))?d.call(u,m,g):m(u)):g(a)}catch(a){y&&!h&&y.exit(),g(a)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&(o=e,i=t,k.call(c,(function(){var e=i.value,t=J(i);if(t&&(t=j((function(){q?V.emit("unhandledRejection",e,o):Q(Y,o,e)})),i.rejection=q||J(i)?2:1,t.error))throw t.value})))})))},Q=function(e,t,n){var r;X?((r=z.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},(t=c["on"+e])?t(r):e===Y&&C("Unhandled promise rejection",n)},J=function(e){return 1!==e.rejection&&!e.parent},$=function(e,t,n,r){return function(o){e(t,n,o,r)}},ee=function(e,t,n,r){t.done||(t.done=!0,(t=r||t).value=n,t.state=2,Z(e,t,!0))},te=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw U("Promise can't be resolved itself");var o=K(n);o?T((function(){var r={done:!1};try{o.call(n,$(te,e,r,t),$(ee,e,r,t))}catch(n){ee(e,r,n,t)}})):(t.value=n,t.state=1,Z(e,t,!1))}catch(n){ee(e,{done:!1},n,t)}}};e&&(B=function(e){v(this,B,M),y(e),r.call(this);var t=D(this);try{e($(te,this,t),$(ee,this,t))}catch(e){ee(this,t,e)}},(r=function(e){L(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(B.prototype,{then:function(e,t){var n=F(this),r=W(_(this,B));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=q?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=D(e);this.promise=e,this.resolve=$(te,e,t),this.reject=$(ee,e,t)},I.f=W=function(e){return e===B||e===i?new o:H(e)},l||"function"!=typeof d||(a=d.prototype.then,h(d.prototype,"then",(function(e,t){var n=this;return new B((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(B,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:e},{Promise:B}),f(B,M,!1,!0),m(M),i=u(M),s({target:M,stat:!0,forced:e},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:l||e},{resolve:function(e){return E(l&&this===i?B:this,e)}}),s({target:M,stat:!0,forced:N},{all:function(e){var t=this,n=W(t),r=n.resolve,o=n.reject,i=j((function(){var n=y(t.resolve),i=[],a=0,s=1;w(e,(function(e){var l=a++,c=!1;i.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,i[l]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=W(t),r=n.reject,o=j((function(){var o=y(t.resolve);w(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],182:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/get-built-in"),i=e("../internals/a-function"),a=e("../internals/an-object"),s=e("../internals/is-object"),l=e("../internals/object-create"),c=e("../internals/function-bind"),u=(e=e("../internals/fails"),o("Reflect","construct")),d=e((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),h=!e((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:o=d||h,sham:o},{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(h&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}return r=n.prototype,n=l(s(r)?r:Object.prototype),r=Function.apply.call(e,n,t),s(r)?r:n}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],183:[function(e,t,n){var r=e("../internals/export"),o=e("../internals/is-object"),i=e("../internals/an-object"),a=e("../internals/has"),s=e("../internals/object-get-own-property-descriptor"),l=e("../internals/object-get-prototype-of");r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c=arguments.length<3?t:arguments[2];return i(t)===c?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(c):o(r=l(t))?e(r,n,c):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],184:[function(e,t,n){var r=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),s=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,c=e("../internals/is-regexp"),u=e("../internals/regexp-flags"),d=e("../internals/regexp-sticky-helpers"),h=e("../internals/redefine"),p=e("../internals/fails"),f=e("../internals/internal-state").set,m=e("../internals/set-species"),g=e("../internals/well-known-symbol")("match"),y=o.RegExp,v=y.prototype,b=/a/g,x=/a/g,w=new y(b)!==b,S=d.UNSUPPORTED_Y;if(r&&i("RegExp",!w||S||p((function(){return x[g]=!1,y(b)!=b||y(x)==x||"/a/i"!=y(b,"i")})))){for(var _=function(e,t){var n,r=this instanceof _,o=c(e),i=void 0===t;return!r&&o&&e.constructor===_&&i?e:(w?o&&!i&&(e=e.source):e instanceof _&&(i&&(t=u.call(e)),e=e.source),S&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),o=a(w?new y(e,t):y(e,t),r?this:v,_),S&&n&&f(o,{sticky:n}),o)},k=l(y),T=0;k.length>T;)!function(e){e in _||s(_,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})}(k[T++]);(v.constructor=_).prototype=v,h(o,"RegExp",_)}m("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],185:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/regexp-exec"),r({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e})},{"../internals/export":50,"../internals/regexp-exec":110}],186:[function(e,t,n){"use strict";var r=e("../internals/redefine"),o=e("../internals/an-object"),i=e("../internals/fails"),a=e("../internals/regexp-flags"),s=(e="toString",RegExp.prototype),l=s[e],c=(i=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),l.name!=e);(i||c)&&r(RegExp.prototype,e,(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],187:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong"),t.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],188:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/to-length"),a=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),c=(e=e("../internals/is-pure"),"".endsWith),u=Math.min;l=l("endsWith"),r({target:"String",proto:!0,forced:!(!e&&!l&&(r=o(String.prototype,"endsWith"))&&!r.writable||l)},{endsWith:function(e){var t=String(s(this)),n=(a(e),1<arguments.length?arguments[1]:void 0),r=i(t.length);return n=void 0===n?r:u(i(n),r),r=String(e),c?c.call(t,r,n):t.slice(n-r.length,n)===r}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],189:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/not-a-regexp"),i=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],190:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,o=e("../internals/internal-state"),i=(e=e("../internals/define-iterator"),"String Iterator"),a=o.set,s=o.getterFor(i);e(String,"String",(function(e){a(this,{type:i,string:String(e),index:0})}),(function(){var e=s(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=r(t,n),e.index+=t.length,{value:t,done:!1})}))},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],191:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-length"),a=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=o(e),c=String(this);if(!a.global)return l(a,c);for(var u=a.unicode,d=[],h=a.lastIndex=0;null!==(p=l(a,c));){var p=String(p[0]);""===(d[h]=p)&&(a.lastIndex=s(c,i(a.lastIndex),u)),h++}return 0===h?null:d}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],192:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/string-pad").start;r({target:"String",proto:!0,forced:e("../internals/string-pad-webkit-bug")},{padStart:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],193:[function(e,t,n){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],194:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/to-integer"),l=e("../internals/require-object-coercible"),c=e("../internals/advance-string-index"),u=e("../internals/regexp-exec-abstract"),d=Math.max,h=Math.min,p=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,v=g?"$":"$0";return[function(n,r){var o=l(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!g&&y||"string"==typeof r&&-1===r.indexOf(v)){var l=n(t,e,this,r);if(l.done)return l.value}for(var b,x=o(e),w=String(this),S="function"==typeof r,_=(S||(r=String(r)),x.global),k=(_&&(b=x.unicode,x.lastIndex=0),[]);null!==(j=u(x,w))&&(k.push(j),_);)""===String(j[0])&&(x.lastIndex=c(w,a(x.lastIndex),b));for(var T,E="",C=0,I=0;I<k.length;I++){for(var j=k[I],A=String(j[0]),O=d(h(s(j.index),w.length),0),N=[],R=1;R<j.length;R++)N.push(void 0===(T=j[R])?T:String(T));var P=j.groups,M=S?(M=[A].concat(N,O,w),void 0!==P&&M.push(P),String(r.apply(void 0,M))):function(e,n,r,o,a,s){var l=r+e.length,c=o.length,u=m;return void 0!==a&&(a=i(a),u=f),t.call(s,u,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var u,d=+i;if(0==d)return t;if(c<d)return 0!==(u=p(d/10))&&u<=c?void 0===o[u-1]?i.charAt(1):o[u-1]+i.charAt(1):t;s=o[d-1]}return void 0===s?"":s}))}(A,w,O,N,P,r);C<=O&&(E+=w.slice(C,O)+M,C=O+A.length)}return E+w.slice(C)}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],195:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/require-object-coercible"),a=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r,i=n(t,e,this);return i.done?i.value:(i=o(e),e=String(this),r=i.lastIndex,a(r,0)||(i.lastIndex=0),e=s(i,e),a(i.lastIndex,r)||(i.lastIndex=r),null===e?-1:e.index)}]}))},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],196:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/is-regexp"),i=e("../internals/an-object"),a=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),c=e("../internals/to-length"),u=e("../internals/regexp-exec-abstract"),d=e("../internals/regexp-exec"),h=(e=e("../internals/fails"),[].push),p=Math.min,f=4294967295,m=!e((function(){return!RegExp(f,"y")}));r("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(a(this)),i=void 0===n?f:n>>>0;if(0==i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var s,l,c,u=[],p=(n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),0),m=new RegExp(e.source,n+"g");(s=d.call(m,r))&&!(p<(l=m.lastIndex)&&(u.push(r.slice(p,s.index)),1<s.length&&s.index<r.length&&h.apply(u,s.slice(1)),c=s[0].length,p=l,u.length>=i));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!c&&m.test("")||u.push(""):u.push(r.slice(p)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){if((a=n(r,e,this,o,r!==t)).done)return a.value;var a=i(e),d=String(this),h=(e=s(a,RegExp),a.unicode),g=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(m?"y":"g"),y=new e(m?a:"^(?:"+a.source+")",g),v=void 0===o?f:o>>>0;if(0==v)return[];if(0===d.length)return null===u(y,d)?[d]:[];for(var b=0,x=0,w=[];x<d.length;){y.lastIndex=m?x:0;var S,_=u(y,m?d:d.slice(x));if(null===_||(S=p(c(y.lastIndex+(m?0:x)),d.length))===b)x=l(d,x,h);else{if(w.push(d.slice(b,x)),w.length===v)return w;for(var k=1;k<=_.length-1;k++)if(w.push(_[k]),w.length===v)return w;x=b=S}}return w.push(d.slice(b)),w}]}),!m)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],197:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/to-length"),a=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),c=(e=e("../internals/is-pure"),"".startsWith),u=Math.min;l=l("startsWith"),r({target:"String",proto:!0,forced:!(!e&&!l&&(r=o(String.prototype,"startsWith"))&&!r.writable||l)},{startsWith:function(e){var t=String(s(this)),n=(a(e),i(u(1<arguments.length?arguments[1]:void 0,t.length)));return e=String(e),c?c.call(t,e,n):t.slice(n,n+e.length)===e}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],198:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return o(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],199:[function(e,t,n){"use strict";var r=e("../internals/export"),o=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return o(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],200:[function(e,t,n){"use strict";var r,o,i,a,s,l=e("../internals/export"),c=e("../internals/descriptors"),u=e("../internals/global"),d=e("../internals/has"),h=e("../internals/is-object"),p=e("../internals/object-define-property").f,f=(e=e("../internals/copy-constructor-properties"),u.Symbol);!c||"function"!=typeof f||"description"in f.prototype&&void 0===f().description||(r={},e(o=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof o?new f(e):void 0===e?f():f(e);return""===e&&(r[t]=!0),t},f),(u=o.prototype=f.prototype).constructor=o,i=u.toString,a="Symbol(test)"==String(f("test")),s=/^Symbol\((.*)\)[^)]+$/,p(u,"description",{configurable:!0,get:function(){var e=h(this)?this.valueOf():this,t=i.call(e);return d(r,e)?"":""===(e=a?t.slice(7,-1):t.replace(s,"$1"))?void 0:e}}),l({global:!0,forced:!0},{Symbol:o}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],201:[function(e,t,n){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],202:[function(e,t,n){"use strict";function r(e,t){var n=te[e]=_(K[H]);return q(n,{type:W,tag:e,description:t}),d||(n.description=t),n}function o(e,t){v(e);var n=x(t);return t=k(n).concat(ue(n)),V(t,(function(t){d&&!ce.call(n,t)||le(e,t,n[t])})),e}function i(e,t){var n;if(e=x(e),t=w(t,!0),e!==Y||!m(te,t)||m(ne,t))return!(n=Q(e,t))||!m(te,t)||m(e,G)&&e[G][t]||(n.enumerable=!0),n}function a(e){e=$(x(e));var t=[];return V(e,(function(e){m(te,e)||m(M,e)||t.push(e)})),t}var s=e("../internals/export"),l=e("../internals/global"),c=e("../internals/get-built-in"),u=e("../internals/is-pure"),d=e("../internals/descriptors"),h=e("../internals/native-symbol"),p=e("../internals/use-symbol-as-uid"),f=e("../internals/fails"),m=e("../internals/has"),g=e("../internals/is-array"),y=e("../internals/is-object"),v=e("../internals/an-object"),b=e("../internals/to-object"),x=e("../internals/to-indexed-object"),w=e("../internals/to-primitive"),S=e("../internals/create-property-descriptor"),_=e("../internals/object-create"),k=e("../internals/object-keys"),T=e("../internals/object-get-own-property-names"),E=e("../internals/object-get-own-property-names-external"),C=e("../internals/object-get-own-property-symbols"),I=e("../internals/object-get-own-property-descriptor"),j=e("../internals/object-define-property"),A=e("../internals/object-property-is-enumerable"),O=e("../internals/create-non-enumerable-property"),N=e("../internals/redefine"),R=e("../internals/shared"),P=e("../internals/shared-key"),M=e("../internals/hidden-keys"),D=e("../internals/uid"),L=e("../internals/well-known-symbol"),F=e("../internals/well-known-symbol-wrapped"),B=e("../internals/define-well-known-symbol"),U=e("../internals/set-to-string-tag"),z=e("../internals/internal-state"),V=e("../internals/array-iteration").forEach,G=P("hidden"),W="Symbol",H="prototype",q=(e=L("toPrimitive"),z.set),X=z.getterFor(W),Y=Object[H],K=l.Symbol,Z=c("JSON","stringify"),Q=I.f,J=j.f,$=E.f,ee=A.f,te=R("symbols"),ne=R("op-symbols"),re=R("string-to-symbol-registry"),oe=R("symbol-to-string-registry"),ie=(P=R("wks"),!(z=l.QObject)||!z[H]||!z[H].findChild),ae=d&&f((function(){return 7!=_(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Q(Y,t);r&&delete Y[t],J(e,t,n),r&&e!==Y&&J(Y,t,r)}:J,se=p?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof K},le=function(e,t,n){return e===Y&&le(ne,t,n),v(e),t=w(t,!0),v(n),(m(te,t)?(n.enumerable?(m(e,G)&&e[G][t]&&(e[G][t]=!1),n=_(n,{enumerable:S(0,!1)})):(m(e,G)||J(e,G,S(1,{})),e[G][t]=!0),ae):J)(e,t,n)},ce=function(e){e=w(e,!0);var t=ee.call(this,e);return!(this===Y&&m(te,e)&&!m(ne,e))&&(!(t||!m(this,e)||!m(te,e)||m(this,G)&&this[G][e])||t)},ue=function(e){var t=e===Y,n=(e=$(t?ne:x(e)),[]);return V(e,(function(e){!m(te,e)||t&&!m(Y,e)||n.push(te[e])})),n};h||(N((K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=D(e),n=function(e){this===Y&&n.call(ne,e),m(this,G)&&m(this[G],t)&&(this[G][t]=!1),ae(this,t,S(1,e))};return d&&ie&&ae(Y,t,{configurable:!0,set:n}),r(t,e)})[H],"toString",(function(){return X(this).tag})),N(K,"withoutSetter",(function(e){return r(D(e),e)})),A.f=ce,j.f=le,I.f=i,T.f=E.f=a,C.f=ue,F.f=function(e){return r(L(e),e)},d&&(J(K[H],"description",{configurable:!0,get:function(){return X(this).description}}),u||N(Y,"propertyIsEnumerable",ce,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:K}),V(k(P),(function(e){B(e)})),s({target:W,stat:!0,forced:!h},{for:function(e){var t;return e=String(e),m(re,e)?re[e]:(t=K(e),re[e]=t,oe[t]=e,t)},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(m(oe,e))return oe[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),s({target:"Object",stat:!0,forced:!h,sham:!d},{create:function(e,t){return void 0===t?_(e):o(_(e),t)},defineProperty:le,defineProperties:o,getOwnPropertyDescriptor:i}),s({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:a,getOwnPropertySymbols:ue}),s({target:"Object",stat:!0,forced:f((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(b(e))}}),Z&&s({target:"JSON",stat:!0,forced:!h||f((function(){var e=K();return"[null]"!=Z([e])||"{}"!=Z({a:e})||"{}"!=Z(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;i<arguments.length;)o.push(arguments[i++]);if((y(r=t)||void 0!==e)&&!se(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),o[1]=t,Z.apply(null,o)}}),K[H][e]||O(K[H],e,K[H].valueOf),U(K,W),M[G]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],203:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-copy-within"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return o.call(i(this),e,t,2<arguments.length?arguments[2]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],204:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],205:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-fill"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return o.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],206:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").filter,i=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=o(a(this),e,1<arguments.length?arguments[1]:void 0),n=(e=i(this,this.constructor),0),r=t.length,l=new(s(e))(r);n<r;)l[n]=t[n++];return l}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],207:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],208:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],209:[function(e,t,n){e("../internals/typed-array-constructor")("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],210:[function(e,t,n){e("../internals/typed-array-constructor")("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],211:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],213:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],214:[function(e,t,n){e("../internals/typed-array-constructor")("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],215:[function(e,t,n){e("../internals/typed-array-constructor")("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],216:[function(e,t,n){"use strict";function r(){return s.call(u(this))}var o=e("../internals/global"),i=e("../internals/array-buffer-view-core"),a=e("../modules/es.array.iterator"),s=(e=e("../internals/well-known-symbol")("iterator"),o=o.Uint8Array,a.values),l=a.keys,c=a.entries,u=i.aTypedArray;a=i.exportTypedArrayMethod,o=!!(i=o&&o.prototype[e])&&("values"==i.name||null==i.name),a("entries",(function(){return c.call(u(this))})),a("keys",(function(){return l.call(u(this))})),a("values",r,!o),a(e,r,!o)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],217:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,o=(e=e.exportTypedArrayMethod,[].join);e("join",(function(e){return o.apply(r(this),arguments)}))},{"../internals/array-buffer-view-core":12}],218:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-last-index-of"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return o.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],219:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").map,i=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return o(a(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(s(i(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],220:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return o(i(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],221:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return o(i(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],222:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,o=(e=e.exportTypedArrayMethod,Math.floor);e("reverse",(function(){for(var e,t=r(this).length,n=o(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this}))},{"../internals/array-buffer-view-core":12}],223:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-offset"),a=e("../internals/to-object"),s=(e=e("../internals/fails"),r.aTypedArray);(0,r.exportTypedArrayMethod)("set",(function(e){s(this);var t=i(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=a(e),l=o(r.length),c=0;if(n<l+t)throw RangeError("Wrong length");for(;c<l;)this[t+c]=r[c++]}),e((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],224:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/species-constructor"),i=(e=e("../internals/fails"),r.aTypedArray),a=r.aTypedArrayConstructor,s=(r=r.exportTypedArrayMethod,[].slice);r("slice",(function(e,t){for(var n=s.call(i(this),e,t),r=(e=o(this,this.constructor),0),l=n.length,c=new(a(e))(l);r<l;)c[r]=n[r++];return c}),e((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],225:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return o(i(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],226:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,o=(e=e.exportTypedArrayMethod,[].sort);e("sort",(function(e){return o.call(r(this),e)}))},{"../internals/array-buffer-view-core":12}],227:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length;return e=i(e,r),new(a(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,o((void 0===t?r:i(t,r))-e))}))},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],228:[function(e,t,n){"use strict";var r=e("../internals/global"),o=e("../internals/array-buffer-view-core"),i=(e=e("../internals/fails"),r.Int8Array),a=o.aTypedArray,s=(r=o.exportTypedArrayMethod,[].toLocaleString),l=[].slice,c=!!i&&e((function(){s.call(new i(1))}));r("toLocaleString",(function(){return s.apply(c?l.call(a(this)):a(this),arguments)}),e((function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()}))||!e((function(){i.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],229:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,o=e("../internals/fails"),i=(e=(e=e("../internals/global").Uint8Array)&&e.prototype||{},[].toString),a=[].join;o((function(){i.call({})}))&&(i=function(){return a.call(this)}),o=e.toString!=i,r("toString",i,o)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],230:[function(e,t,n){e("../internals/typed-array-constructor")("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],231:[function(e,t,n){e("../internals/typed-array-constructor")("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],232:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":142}],233:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{"../internals/typed-array-constructor":142}],234:[function(e,t,n){"use strict";function r(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}var o,i,a,s,l,c=e("../internals/global"),u=e("../internals/redefine-all"),d=e("../internals/internal-metadata"),h=e("../internals/collection"),p=e("../internals/collection-weak"),f=e("../internals/is-object"),m=e("../internals/internal-state").enforce,g=(e=e("../internals/native-weak-map"),c=!c.ActiveXObject&&"ActiveXObject"in c,Object.isExtensible);t=t.exports=h("WeakMap",r,p),e&&c&&(o=p.getConstructor(r,"WeakMap",!0),d.REQUIRED=!0,h=t.prototype,i=h.delete,a=h.has,s=h.get,l=h.set,u(h,{delete:function(e){var t;return f(e)&&!g(e)?((t=m(this)).frozen||(t.frozen=new o),i.call(this,e)||t.frozen.delete(e)):i.call(this,e)},has:function(e){var t;return f(e)&&!g(e)?((t=m(this)).frozen||(t.frozen=new o),a.call(this,e)||t.frozen.has(e)):a.call(this,e)},get:function(e){var t;return!f(e)||g(e)||((t=m(this)).frozen||(t.frozen=new o),a.call(this,e))?s.call(this,e):t.frozen.get(e)},set:function(e,t){var n;return!f(e)||g(e)||((n=m(this)).frozen||(n.frozen=new o),a.call(this,e))?l.call(this,e,t):n.frozen.set(e,t),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],235:[function(e,t,n){var r,o=e("../internals/global"),i=e("../internals/dom-iterables"),a=e("../internals/array-for-each"),s=e("../internals/create-non-enumerable-property");for(r in i){var l;if((l=(l=o[r])&&l.prototype)&&l.forEach!==a)try{s(l,"forEach",a)}catch(e){l.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],236:[function(e,t,n){var r,o=e("../internals/global"),i=e("../internals/dom-iterables"),a=e("../modules/es.array.iterator"),s=e("../internals/create-non-enumerable-property"),l=(e=e("../internals/well-known-symbol"))("iterator"),c=e("toStringTag"),u=a.values;for(r in i){var d=o[r],h=d&&d.prototype;if(h){if(h[l]!==u)try{s(h,l,u)}catch(e){h[l]=u}if(h[c]||s(h,c,r),i[r])for(var p in a)if(h[p]!==a[p])try{s(h,p,a[p])}catch(e){h[p]=a[p]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],237:[function(e,t,n){"use strict";function r(e){try{return decodeURIComponent(e)}catch(t){return e}}function o(e){return F[e]}function i(e){return encodeURIComponent(e).replace(L,o)}function a(e){this.entries.length=0,B(this.entries,e)}function s(e,t){if(e<t)throw TypeError("Not enough arguments")}function l(){y(this,l,j);var e,t,n,r,o,i,s,c,u=0<arguments.length?arguments[0]:void 0,d=[];if(O(this,{type:j,entries:d,updateURL:function(){},updateSearchParams:a}),void 0!==u)if(S(u))if("function"==typeof(e=E(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((i=(o=(r=T(w(r.value))).next).call(r)).done||(s=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");d.push({key:i.value+"",value:s.value+""})}else for(c in u)v(u,c)&&d.push({key:c,value:u[c]+""});else B(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")}e("../modules/es.array.iterator");var c=e("../internals/export"),u=e("../internals/get-built-in"),d=e("../internals/native-url"),h=e("../internals/redefine"),p=e("../internals/redefine-all"),f=e("../internals/set-to-string-tag"),m=e("../internals/create-iterator-constructor"),g=e("../internals/internal-state"),y=e("../internals/an-instance"),v=e("../internals/has"),b=e("../internals/function-bind-context"),x=e("../internals/classof"),w=e("../internals/an-object"),S=e("../internals/is-object"),_=e("../internals/object-create"),k=e("../internals/create-property-descriptor"),T=e("../internals/get-iterator"),E=e("../internals/get-iterator-method"),C=(e=e("../internals/well-known-symbol"),u("fetch")),I=u("Headers"),j=(u=e("iterator"),"URLSearchParams"),A=j+"Iterator",O=g.set,N=g.getterFor(j),R=g.getterFor(A),P=/\+/g,M=Array(4),D=function(e){var t,n=e.replace(P," "),o=4;try{return decodeURIComponent(n)}catch(e){for(;o;)n=n.replace((t=o--,M[t-1]||(M[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),r);return n}},L=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(e,t){if(t)for(var n,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(n=n.split("="),e.push({key:D(n.shift()),value:D(n.join("="))}))},U=m((function(e,t){O(this,{type:A,iterator:T(N(e).entries),kind:t})}),"Iterator",(function(){var e,t=(e=R(this)).kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e}));p(e=l.prototype,{append:function(e,t){s(arguments.length,2);var n=N(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){s(arguments.length,1);for(var t=N(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){s(arguments.length,1);for(var t=N(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){s(arguments.length,1);for(var t=N(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){s(arguments.length,1);for(var t=N(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){s(arguments.length,1);for(var n,r=N(this),o=r.entries,i=!1,a=e+"",l=t+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=l));i||o.push({key:a,value:l}),r.updateURL()},sort:function(){for(var e,t,n=N(this),r=n.entries,o=r.slice(),i=r.length=0;i<o.length;i++){for(e=o[i],t=0;t<i;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===i&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,n=N(this).entries,r=b(e,1<arguments.length?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),h(e,u,e.entries),h(e,"toString",(function(){for(var e,t=N(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(i(e.key)+"="+i(e.value));return n.join("&")}),{enumerable:!0}),f(l,j),c({global:!0,forced:!d},{URLSearchParams:l}),d||"function"!=typeof C||"function"!=typeof I||c({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r;return e=[e],1<arguments.length&&(S(t=arguments[1])&&(n=t.body,x(n)===j&&((r=t.headers?new I(t.headers):new I).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=_(t,{body:k(0,String(n)),headers:k(0,r)}))),e.push(t)),C.apply(this,e)}}),t.exports={URLSearchParams:l,getState:N}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],238:[function(e,t,n){"use strict";function r(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=A(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",r=Y(e),n=0;n<8;n++)o&&0===e[n]||(o=o&&!1,r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function o(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function i(e,t,n,r){var o,i,a,s=n||le,c=0,u="",d=!1,h=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(H,"")),t=t.replace(q,""),o=x(t);c<=o.length;){switch(i=o[c],s){case le:if(!i||!D.test(i)){if(n)return R;s=ue;continue}u+=i.toLowerCase(),s=ce;break;case ce:if(i&&(L.test(i)||"+"==i||"-"==i||"."==i))u+=i.toLowerCase();else{if(":"!=i){if(n)return R;u="",s=ue,c=0;continue}if(n&&(te(e)!=v(ee,u)||"file"==u&&(ne(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,n)return void(te(e)&&ee[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?s=we:te(e)&&r&&r.scheme==e.scheme?s=de:te(e)?s=me:"/"==o[c+1]?(s=he,c++):(e.cannotBeABaseURL=!0,e.path.push(""),s=Ee)}break;case ue:if(!r||r.cannotBeABaseURL&&"#"!=i)return R;if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,s=Ie;break}s="file"==r.scheme?we:pe;continue;case de:if("/"!=i||"/"!=o[c+1]){s=pe;continue}s=ge,c++;break;case he:if("/"==i){s=ye;break}s=Te;continue;case pe:if(e.scheme=r.scheme,i==l)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&te(e))s=fe;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",s=Ce;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),s=Te;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=Ie}break;case fe:if(!te(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,s=Te;continue}s=ye}else s=ge;break;case me:if(s=ge,"/"!=i||"/"!=u.charAt(c+1))continue;c++;break;case ge:if("/"==i||"\\"==i)break;s=ye;continue;case ye:if("@"==i){d&&(u="%40"+u),d=!0;for(var f=x(u),m=0;m<f.length;m++){var g=f[m];":"!=g||p?(g=$(g,J),p?e.password+=g:e.username+=g):p=!0}u=""}else if(i==l||"/"==i||"?"==i||"#"==i||"\\"==i&&te(e)){if(d&&""==u)return N;c-=x(u).length+1,u="",s=ve}else u+=i;break;case ve:case be:if(n&&"file"==e.scheme){s=_e;continue}if(":"!=i||h){if(i==l||"/"==i||"?"==i||"#"==i||"\\"==i&&te(e)){if(te(e)&&""==u)return P;if(n&&""==u&&(ne(e)||null!==e.port))return;if(a=X(e,u))return a;if(u="",s=ke,n)return;continue}"["==i?h=!0:"]"==i&&(h=!1),u+=i}else{if(""==u)return P;if(a=X(e,u))return a;if(u="",s=xe,n==be)return}break;case xe:if(!F.test(i)){if(i==l||"/"==i||"?"==i||"#"==i||"\\"==i&&te(e)||n){if(""!=u){var y=parseInt(u,10);if(65535<y)return M;e.port=te(e)&&y===ee[e.scheme]?null:y,u=""}if(n)return;s=ke;continue}return M}u+=i;break;case we:if(e.scheme="file","/"==i||"\\"==i)s=Se;else{if(!r||"file"!=r.scheme){s=Te;continue}if(i==l)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",s=Ce;else{if("#"!=i){oe(o.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),ie(e)),s=Te;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=Ie}}break;case Se:if("/"==i||"\\"==i){s=_e;break}r&&"file"==r.scheme&&!oe(o.slice(c).join(""))&&(re(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),s=Te;continue;case _e:if(i==l||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&re(u))s=Te;else{if(""==u){if(e.host="",n)return}else{if(a=X(e,u))return a;if("localhost"==e.host&&(e.host=""),n)return;u=""}s=ke}continue}u+=i;break;case ke:if(te(e)){if(s=Te,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(i!=l&&(s=Te,"/"!=i))continue}else e.fragment="",s=Ie;else e.query="",s=Ce;break;case Te:if(i==l||"/"==i||"\\"==i&&te(e)||!n&&("?"==i||"#"==i)){if(se(u)?(ie(e),"/"==i||"\\"==i&&te(e)||e.path.push("")):ae(u)?"/"==i||"\\"==i&&te(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&re(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(i==l||"?"==i||"#"==i))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",s=Ce):"#"==i&&(e.fragment="",s=Ie)}else u+=$(i,Q);break;case Ee:"?"==i?(e.query="",s=Ce):"#"==i?(e.fragment="",s=Ie):i!=l&&(e.path[0]+=$(i,K));break;case Ce:n||"#"!=i?i!=l&&("'"==i&&te(e)?e.query+="%27":e.query+="#"==i?"%23":$(i,K)):(e.fragment="",s=Ie);break;case Ie:i!=l&&(e.fragment+=$(i,Z))}c++}}function a(e){var t,n,r=y(this,a,"URL"),o=1<arguments.length?arguments[1]:void 0,s=(e=String(e),I(r,{type:"URL"}));if(void 0!==o)if(o instanceof a)t=j(o);else if(n=i(t={},String(o)))throw TypeError(n);if(n=i(s,e,null,t))throw TypeError(n);var l=s.searchParams=new E;(o=C(l)).updateSearchParams(s.query),o.updateURL=function(){s.query=String(l)||null},h||(r.href=je.call(r),r.origin=Ae.call(r),r.protocol=Oe.call(r),r.username=Ne.call(r),r.password=Re.call(r),r.host=Pe.call(r),r.hostname=Me.call(r),r.port=De.call(r),r.pathname=Le.call(r),r.search=Fe.call(r),r.searchParams=Be.call(r),r.hash=Ue.call(r))}function s(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}}e("../modules/es.string.iterator");var l,c,u,d=e("../internals/export"),h=e("../internals/descriptors"),p=e("../internals/native-url"),f=e("../internals/global"),m=e("../internals/object-define-properties"),g=e("../internals/redefine"),y=e("../internals/an-instance"),v=e("../internals/has"),b=e("../internals/object-assign"),x=e("../internals/array-from"),w=e("../internals/string-multibyte").codeAt,S=e("../internals/string-punycode-to-ascii"),_=e("../internals/set-to-string-tag"),k=e("../modules/web.url-search-params"),T=(e=e("../internals/internal-state"),f.URL),E=k.URLSearchParams,C=k.getState,I=e.set,j=e.getterFor("URL"),A=Math.floor,O=Math.pow,N="Invalid authority",R="Invalid scheme",P="Invalid host",M="Invalid port",D=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,F=/\d/,B=/^(0x|0X)/,U=/^[0-7]+$/,z=/^\d+$/,V=/^[\dA-Fa-f]+$/,G=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,W=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,H=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,q=/[\u0009\u000A\u000D]/g,X=function(e,t){var n,r,o;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(n=function(e){var t,n,r,o,i,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&V.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,c>6)return;for(r=0;h();){if(o=null,r>0){if(!("."==h()&&r<4))return;d++}if(!F.test(h()))return;for(;F.test(h());){if(i=parseInt(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}l[c]=256*l[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s;else if(8!=c)return;return l}(t.slice(1,-1)))?void(e.host=n):P;if(te(e))return t=S(t),G.test(t)||null===(n=function(e){var t,n,r,o,i,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=l[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=B.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?z:8==i?U:V).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=O(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*O(256,3-r);return s}(t))?P:void(e.host=n);if(W.test(t))return P;for(n="",r=x(t),o=0;o<r.length;o++)n+=$(r[o],K);e.host=n},Y=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(n<o&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return n<o&&(t=r,n=o),t},K={},Z=b({},K,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=b({},Z,{"#":1,"?":1,"{":1,"}":1}),J=b({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var n=w(e,0);return 32<n&&n<127&&!v(t,e)?e:encodeURIComponent(e)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},te=function(e){return v(ee,e.scheme)},ne=function(e){return""!=e.username||""!=e.password},re=function(e,t){return 2==e.length&&D.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)},oe=function(e){return 1<e.length&&re(e.slice(0,2))&&(2==e.length||"/"===(e=e.charAt(2))||"\\"===e||"?"===e||"#"===e)},ie=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&re(t[0],!0)||t.pop()},ae=function(e){return"."===e||"%2e"===e.toLowerCase()},se=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},le={},ce={},ue={},de={},he={},pe={},fe={},me={},ge={},ye={},ve={},be={},xe={},we={},Se={},_e={},ke={},Te={},Ee={},Ce={},Ie={},je=(f=a.prototype,function(){var e=j(this),t=e.scheme,n=e.username,o=e.password,i=e.host,a=e.port,s=e.path,l=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",ne(e)&&(u+=n+(o?":"+o:"")+"@"),u+=r(i),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==l&&(u+="?"+l),null!==c&&(u+="#"+c),u}),Ae=function(){var e=j(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&te(e)?t+"://"+r(e.host)+(null!==n?":"+n:""):"null"},Oe=function(){return j(this).scheme+":"},Ne=function(){return j(this).username},Re=function(){return j(this).password},Pe=function(){var e=(t=j(this)).host,t=t.port;return null===e?"":null===t?r(e):r(e)+":"+t},Me=function(){var e=j(this).host;return null===e?"":r(e)},De=function(){var e=j(this).port;return null===e?"":String(e)},Le=function(){var e=j(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Fe=function(){var e=j(this).query;return e?"?"+e:""},Be=function(){return j(this).searchParams},Ue=function(){var e=j(this).fragment;return e?"#"+e:""};h&&m(f,{href:s(je,(function(e){var t=j(this);if(e=i(t,e=String(e)))throw TypeError(e);C(t.searchParams).updateSearchParams(t.query)})),origin:s(Ae),protocol:s(Oe,(function(e){i(j(this),String(e)+":",le)})),username:s(Ne,(function(e){var t=j(this),n=x(String(e));if(!o(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=$(n[r],J)}})),password:s(Re,(function(e){var t=j(this),n=x(String(e));if(!o(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=$(n[r],J)}})),host:s(Pe,(function(e){var t=j(this);t.cannotBeABaseURL||i(t,String(e),ve)})),hostname:s(Me,(function(e){var t=j(this);t.cannotBeABaseURL||i(t,String(e),be)})),port:s(De,(function(e){var t=j(this);o(t)||(""==(e=String(e))?t.port=null:i(t,e,xe))})),pathname:s(Le,(function(e){var t=j(this);t.cannotBeABaseURL||(t.path=[],i(t,e+"",ke))})),search:s(Fe,(function(e){var t=j(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",i(t,e,Ce)),C(t.searchParams).updateSearchParams(t.query)})),searchParams:s(Be),hash:s(Ue,(function(e){var t=j(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",i(t,e,Ie))}))}),g(f,"toJSON",(function(){return je.call(this)}),{enumerable:!0}),g(f,"toString",(function(){return je.call(this)}),{enumerable:!0}),T&&(c=T.createObjectURL,u=T.revokeObjectURL,c&&g(a,"createObjectURL",(function(e){return c.apply(T,arguments)})),u&&g(a,"revokeObjectURL",(function(e){return u.apply(T,arguments)}))),_(a,"URL"),d({global:!0,forced:!p,sham:!h},{URL:a})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":190,"../modules/web.url-search-params":237}],239:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":240}],240:[function(e,t,r){(function(n,o){var i;i=function(){"use strict";function t(e){return"function"==typeof e}var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,a=void 0,s=void 0,l=function(e,t){f[i]=e,f[i+1]=t,2===(i+=2)&&(s?s(m):b())},c="undefined"!=typeof window?window:void 0,u=(u=c||{}).MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var f=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;i=0}var g,y,v,b=void 0;function x(e,t){var n,r=this,o=new this.constructor(_),i=(void 0===o[S]&&P(o),r._state);return i?(n=arguments[i-1],l((function(){return N(i,o,n,r._result)}))):A(r,o,e,t),o}function w(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(E(t=new this(_),e),t)}b=d?function(){return n.nextTick(m)}:u?(y=0,d=new u(m),v=document.createTextNode(""),d.observe(v,{characterData:!0}),function(){v.data=y=++y%2}):h?((g=new MessageChannel).port1.onmessage=m,function(){return g.port2.postMessage(0)}):(void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(m)}:p()}catch(e){return p()}}:p)();var S=Math.random().toString(36).substring(2);function _(){}var k=void 0;function T(e,n,r){var o,i;n.constructor===e.constructor&&r===x&&n.constructor.resolve===w?(o=e,1===(i=n)._state?I(o,i._result):2===i._state?j(o,i._result):A(i,void 0,(function(e){return E(o,e)}),(function(e){return j(o,e)}))):void 0!==r&&t(r)?function(e,t,n){l((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,(t!==n?E:I)(e,n))}),(function(t){r||(r=!0,j(e,t))}),e._label);!r&&o&&(r=!0,j(e,o))}),e)}(e,n,r):I(e,n)}function E(e,t){if(e===t)j(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)I(e,t);else{n=void 0;try{n=t.then}catch(t){return void j(e,t)}T(e,t,n)}var n}function C(e){e._onerror&&e._onerror(e._result),O(e)}function I(e,t){e._state===k&&(e._result=t,e._state=1,0!==e._subscribers.length&&l(O,e))}function j(e,t){e._state===k&&(e._state=2,e._result=t,l(C,e))}function A(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&l(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?N(n,r,o,i):o(i);e._subscribers.length=0}}function N(e,n,r,o){var i=t(r),a=void 0,s=void 0,l=!0;if(i){try{a=r(o)}catch(e){l=!1,s=e}if(n===a)return void j(n,new TypeError("A promises callback cannot return that same promise."))}else a=o;n._state===k&&(i&&l?E(n,a):!1===l?j(n,s):1===e?I(n,a):2===e&&j(n,a))}var R=0;function P(e){e[S]=R++,e._state=void 0,e._result=void 0,e._subscribers=[]}D.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},D.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var o,i=void 0,a=void 0,s=!1;try{i=e.then}catch(t){s=!0,a=t}i===x&&e._state!==k?this._settledAt(e._state,t,e._result):"function"!=typeof i?(this._remaining--,this._result[t]=e):n===L?(o=new n(_),s?j(o,a):T(o,e,i),this._willSettleAt(o,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},D.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===k&&(this._remaining--,2===e?j(r,n):this._result[t]=n),0===this._remaining&&I(r,this._result)},D.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))};var M=D;function D(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[S]||P(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||I(this.promise,this._result)):j(this.promise,new Error("Array Methods must be provided an Array"))}F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)};var L=F;function F(e){if(this[S]=R++,this._result=this._state=void 0,this._subscribers=[],_!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof F))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e((function(e){E(t,e)}),(function(e){j(t,e)}))}catch(e){j(t,e)}}}return L.prototype.then=x,L.all=function(e){return new M(this,e).promise},L.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},L.resolve=w,L.reject=function(e){var t=new this(_);return j(t,e),t},L._setScheduler=function(e){s=e},L._setAsap=function(e){l=e},L._asap=l,L.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=L},L.Promise=L},"object"==typeof r&&void 0!==t?t.exports=i():this.ES6Promise=i()}).call(this,e("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:249}],241:[function(e,t,n){var r;r=function(e,t){"use strict";function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function r(e){(e=document.getElementById(e))&&document.getElementsByTagName("head")[0].removeChild(e)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,i=t.timeout||5e3,a=t.jsonpCallback||"callback",s=void 0;return new Promise((function(l,c){var u=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),d=a+"_"+u,h=(window[u]=function(e){l({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),r(d),n(u)},o+=-1===o.indexOf("?")?"?":"&",document.createElement("script"));h.setAttribute("src",""+o+a+"="+u),t.charset&&h.setAttribute("charset",t.charset),h.id=d,document.getElementsByTagName("head")[0].appendChild(h),s=setTimeout((function(){c(new Error("JSONP request to "+e+" timed out")),n(u),r(d),window[u]=function(){n(u)}}),i),h.onerror=function(){c(new Error("JSONP request to "+e+" failed")),n(u),r(d),s&&clearTimeout(s)}}))}},void 0!==n&&void 0!==t?r(0,t):(r(r={exports:{}},r),this.fetchJsonp=r.exports)},{}],242:[function(e,t,n){var r=function(e){"use strict";var t,n,r,o,i,a,s,l,c,u;if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)))return u=e.document,t=function(){return e.URL||e.webkitURL||e},n=u.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,o=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},s=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=(c=function(c,u,d){d||(c=l(c));var h,p,f=this,m=(d="application/octet-stream"===c.type,function(){for(var e=f,t="writestart progress write writeend".split(" "),n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){a(e)}}});f.readyState=f.INIT,r?(h=t().createObjectURL(c),setTimeout((function(){var e,t;n.href=h,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),m(),s(h),f.readyState=f.DONE}))):(i||d&&o)&&e.FileReader?((p=new FileReader).onloadend=function(){var t=i?p.result:p.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,f.readyState=f.DONE,m()},p.readAsDataURL(c),f.readyState=f.INIT):(h=h||t().createObjectURL(c),!d&&e.open(h,"_blank")||(e.location.href=h),f.readyState=f.DONE,m(),s(h))}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],243:[function(e,t,n){var r,o=Object.defineProperty,i=(o(n,"__esModule",{value:!0}),n),a={GIFEncoder:()=>w,applyPalette:()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb565";if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<t.length)throw new Error("applyPalette() only works with 256 colors or less");const r=new Uint32Array(e.buffer),o=r.length,i="rgb444"===n?4096:65536,a=new Uint8Array(o),s=new Array(i);if("rgba4444"===n)for(let u=0;u<o;u++){var l,c=(l=r[u])>>24&255,p=l>>16&255,f=l>>8&255,m=(m=d(l&=255,f,p,c))in s?s[m]:s[m]=function(e,t,n,r,o){let i=0,a=1e100;for(let c=0;c<o.length;c++){var s=o[c],l=v(s[3]-r);l>a||(l+=v(s[0]-e))>a||(l+=v(s[1]-t))>a||(l+=v(s[2]-n))>a||(a=l,i=c)}return i}(l,f,p,c,t);a[u]=m}else{const e="rgb444"===n?h:u;for(let n=0;n<o;n++){var g,y=(g=r[n])>>16&255,b=g>>8&255,x=(x=e(g&=255,b,y))in s?s[x]:s[x]=function(e,t,n,r){let o=0,i=1e100;for(let l=0;l<r.length;l++){var a=r[l],s=v(a[0]-e);s>i||(s+=v(a[1]-t))>i||(s+=v(a[2]-n))>i||(i=s,o=l)}return o}(g,b,y,t);a[n]=x}}return a},default:()=>E,nearestColor:()=>function(e,t){return e[b(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:g)]},nearestColorIndex:()=>b,nearestColorIndexWithDistance:()=>x,prequantize:()=>function(e){let{roundRGB:t=5,roundAlpha:n=10,oneBitAlpha:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new Uint32Array(e.buffer);for(let l=0;l<o.length;l++){let e=(s=o[l])>>24&255;var i=s>>16&255,a=s>>8&255,s=255&s;e=y(e,n),r&&(e=e<=("number"==typeof r?r:127)?0:255),s=y(s,t),a=y(a,t),i=y(i,t),o[l]=e<<24|i<<16|a<<8|s<<0}},quantize:()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var{format:r="rgb565",clearAlpha:o=!0,clearAlphaColor:i=0,clearAlphaThreshold:a=0,oneBitAlpha:s=!1}=n;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");e=new Uint32Array(e.buffer);let l=!1!==n.useSqrt;const c="rgba4444"===r,g=function(e,t){const n=new Array("rgb444"===t?4096:65536),r=e.length;if("rgba4444"===t)for(let u=0;u<r;++u){var o,i=(o=e[u])>>24&255,a=o>>16&255,s=o>>8&255,l=d(o&=255,s,a,i);let t=l in n?n[l]:n[l]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};t.rc+=o,t.gc+=s,t.bc+=a,t.ac+=i,t.cnt++}else if("rgb444"===t)for(let u=0;u<r;++u){var c,p=(c=e[u])>>16&255,f=c>>8&255,m=h(c&=255,f,p);let t=m in n?n[m]:n[m]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};t.rc+=c,t.gc+=f,t.bc+=p,t.cnt++}else for(let d=0;d<r;++d){var g,y=(g=e[d])>>16&255,v=g>>8&255,b=u(g&=255,v,y);let t=b in n?n[b]:n[b]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};t.rc+=g,t.gc+=v,t.bc+=y,t.cnt++}return n}(e,r),y=g.length,v=y-1,b=new Uint32Array(y+1);for(var x=0,w=0;w<y;++w){const e=g[w];null!=e&&(N=1/e.cnt,c&&(e.ac*=N),e.rc*=N,e.gc*=N,e.bc*=N,g[x++]=e)}var S,_,k;for(f(t)/x<.022&&(l=!1),w=0;w<x-1;++w)g[w].fw=w+1,g[w+1].bk=w,l&&(g[w].cnt=Math.sqrt(g[w].cnt));for(l&&(g[w].cnt=Math.sqrt(g[w].cnt)),w=0;w<x;++w){m(g,w,!1);var T=g[w].err;for(_=++b[0];1<_&&!(g[S=b[k=_>>1]].err<=T);_=k)b[_]=S;b[_]=w}var E,C=x-t;for(w=0;w<C;){for(;;){var I=b[1];if((E=g[I]).tm>=E.mtm&&g[E.nn].mtm<=E.tm)break;for(E.mtm==v?I=b[1]=b[b[0]--]:(m(g,I,!1),E.tm=w),T=g[I].err,_=1;(k=_+_)<=b[0]&&(k<b[0]&&g[b[k]].err>g[b[k+1]].err&&k++,!(T<=g[S=b[k]].err));_=k)b[_]=S;b[_]=I}var j=g[E.nn],A=E.cnt,O=j.cnt,N=1/(A+O);c&&(E.ac=N*(A*E.ac+O*j.ac)),E.rc=N*(A*E.rc+O*j.rc),E.gc=N*(A*E.gc+O*j.gc),E.bc=N*(A*E.bc+O*j.bc),E.cnt+=j.cnt,E.mtm=++w,g[j.bk].fw=j.fw,g[j.fw].bk=j.bk,j.mtm=v}let R=[];for(w=0;;0){let e=p(Math.round(g[w].rc),0,255),t=p(Math.round(g[w].gc),0,255),n=p(Math.round(g[w].bc),0,255),r=255;c&&(r=p(Math.round(g[w].ac),0,255),s&&(r=r<=(P="number"==typeof s?s:127)?0:255),o&&r<=a&&(e=t=n=i,r=0));var P=c?[e,t,n,r]:[e,t,n];if(function(e,t){for(let o=0;o<e.length;o++){var n=(r=e[o])[0]===t[0]&&r[1]===t[1]&&r[2]===t[2],r=!(4<=r.length&&4<=t.length)||r[3]===t[3];if(n&&r)return!0}return!1}(R,P)||R.push(P),0==(w=g[w].fw))break}return R},snapColorsToPalette:()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(e.length&&t.length){var r=e.map((e=>e.slice(0,3))),o=n*n,i=e[0].length;for(let n=0;n<t.length;n++){let l=t[n];l=l.length<i?[l[0],l[1],l[2],255]:l.length>i?l.slice(0,3):l.slice();var a,s=(a=x(r,l.slice(0,3),g))[0];0<(a=a[1])&&a<=o&&(e[s]=l)}}}};for(r in a)o(i,r,{get:a[r],enumerable:!0});var s=59;function l(){let e=0,t=new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:256);return{get buffer(){return t.buffer},reset(){e=0},bytesView:()=>t.subarray(0,e),bytes:()=>t.slice(0,e),writeByte(r){n(e+1),t[e]=r,e++},writeBytes(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.length;n(e+i);for(let n=0;n<i;n++)t[e++]=r[n+o]},writeBytesView(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.byteLength;n(e+i),t.set(r.subarray(o,o+i),e),e+=i}};function n(n){var r=t.length;if(!(n<=r)){n=Math.max(n,r*(r<1048576?2:1.125)>>>0),0!=r&&(n=Math.max(n,256));const o=t;t=new Uint8Array(n),0<e&&t.set(o.subarray(0,e),0)}}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function u(e,t,n){return e<<8&63488|t<<2&992|n>>3}function d(e,t,n,r){return e>>4|240&t|(240&n)<<4|(240&r)<<8}function h(e,t,n){return e>>4<<8|240&t|n>>4}function p(e,t,n){return e<t?t:n<e?n:e}function f(e){return e*e}function m(e,t,n){var r=0,o=1e100;const i=e[t];for(var a=i.cnt,s=i.ac,l=i.rc,c=i.gc,u=i.bc,d=i.fw;0!=d;d=e[d].fw){var h,p,m=e[d];o<=(p=a*(p=m.cnt)/(a+p))||(h=0,n&&o<=(h+=p*f(m.ac-s))||o<=(h+=p*f(m.rc-l))||o<=(h+=p*f(m.gc-c))||o<=(h+=p*f(m.bc-u))||(o=h,r=d))}i.err=o,i.nn=r}function g(e,t){for(var n=0,r=0;r<e.length;r++){var o=e[r]-t[r];n+=o*o}return n}function y(e,t){return 1<t?Math.round(e/t)*t:e}function v(e){return e*e}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,r=1/0,o=-1;for(let a=0;a<e.length;a++){var i=n(t,e[a]);i<r&&(r=i,o=a)}return o}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,r=1/0,o=-1;for(let a=0;a<e.length;a++){var i=n(t,e[a]);i<r&&(r=i,o=a)}return[o,r]}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{initialCapacity:t=4096,auto:n=!0}=e,r=l(t),o=new Uint8Array(256),i=new Int32Array(5003),a=new Int32Array(5003);let u=!1;return{reset(){r.reset(),u=!1},finish(){r.writeByte(s)},bytes:()=>r.bytes(),bytesView:()=>r.bytesView(),get buffer(){return r.buffer},get stream(){return r},writeHeader:d,writeFrame(e,t,s){return function(h){var{transparent:p=!1,transparentIndex:f=0,delay:m=0,palette:g=null,repeat:y=0,colorDepth:v=8,dispose:b=-1}=h;let x=!1;if(n?u||(x=!0,d(),u=!0):x=Boolean(h.first),t=Math.max(0,Math.floor(t)),s=Math.max(0,Math.floor(s)),x){if(!g)throw new Error("First frame must include a { palette } option");var[h,w,E,C,I=8]=[r,t,s,g,v];I=128|I-1<<4|(C=T(C.length)-1),_(h,w),_(h,E),h.writeBytes([I,0,0]),S(r,g),0<=y&&(w=y,(C=r).writeByte(33),C.writeByte(255),C.writeByte(11),k(C,"NETSCAPE2.0"),C.writeByte(3),C.writeByte(1),_(C,w),C.writeByte(0))}var j,E,I=b,y=E=Math.round(m/10),w=p,C=f,m=((h=r).writeByte(33),h.writeByte(249),h.writeByte(4),C<0&&(C=0,w=!1),w=w?(j=1,2):j=0,0<=I&&(w=7&I),w<<=2,h.writeByte(0|w|j),_(h,y),h.writeByte(C||0),h.writeByte(0),Boolean(g)&&!x);p=t,f=s,j=m?g:null,(b=r).writeByte(44),_(b,0),_(b,0),_(b,p),_(b,f),j?(p=T(j.length)-1,b.writeByte(128|p)):b.writeByte(0),m&&S(r,g),[y,h,f,p,b=8,m,g,e]=[r,e,t,s,v,o,i,a],function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(512),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Uint8Array(256),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Int32Array(5003),s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Int32Array(5003);var u=a.length;r=Math.max(2,r),i.fill(0),s.fill(0),a.fill(-1);let d=0,h=0;var p=r+1;const f=p;let m=!1,g=f,y=(1<<g)-1;var v=1<<p-1;const b=1+v;let x=2+v,w=0,S=n[0],_=0;for(let l=u;l<65536;l*=2)++_;_=8-_,o.writeByte(r),I(v);var k=n.length;for(let l=1;l<k;l++)e:{var T=n[l],E=(T<<12)+S;let e=T<<_^S;if(a[e]===E)S=s[e];else{for(var C=0===e?1:u-e;0<=a[e];)if((e-=C)<0&&(e+=u),a[e]===E){S=s[e];break e}I(S),S=T,x<4096?(s[e]=x++,a[e]=E):(a.fill(-1),x=2+v,m=!0,I(v))}}return I(S),I(b),o.writeByte(0),o.bytesView();function I(e){for(d&=c[h],0<h?d|=e<<h:d=e,h+=g;8<=h;)i[w++]=255&d,254<=w&&(o.writeByte(w),o.writeBytesView(i,0,w),w=0),d>>=8,h-=8;if((x>y||m)&&(m?(g=f,y=(1<<g)-1,m=!1):(++g,y=12===g?1<<g:(1<<g)-1)),e==b){for(;0<h;)i[w++]=255&d,254<=w&&(o.writeByte(w),o.writeBytesView(i,0,w),w=0),d>>=8,h-=8;0<w&&(o.writeByte(w),o.writeBytesView(i,0,w),w=0)}}}(0,0,h,b,y,m,g,e)}(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}};function d(){k(r,"GIF89a")}}function S(e,t){var n=1<<T(t.length);for(let r=0;r<n;r++){let n=[0,0,0];r<t.length&&(n=t[r]),e.writeByte(n[0]),e.writeByte(n[1]),e.writeByte(n[2])}}function _(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function k(e,t){for(var n=0;n<t.length;n++)e.writeByte(t.charCodeAt(n))}function T(e){return Math.max(Math.ceil(Math.log2(e)),1)}var E=w},{}],244:[function(e,t,n){n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?o-1:0,h=n?-1:1;for(o=e[t+d],d+=h,i=o&(1<<-u)-1,o>>=-u,u+=s;0<u;i=256*i+e[t+d],d+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;0<u;a=256*a+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(o?-1:1);a+=Math.pow(2,r),i-=c}return(o?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l=8*i-o-1,c=(1<<l)-1,u=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1;for(i=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+u?d/r:d*Math.pow(2,1-u))*r&&(a++,r/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(t*r-1)*Math.pow(2,o),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,o),a=0));8<=o;e[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,l+=o;0<l;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*i}},{}],245:[function(e,t,n){"use strict";var r;function o(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function a(e,t,n){var r=t.b-e.b,o=n.b-t.b;return 0<r+o?r<o?t.a-e.a+r/(r+o)*(e.a-n.a):t.a-n.a+o/(r+o)*(n.a-e.a):0}function s(e,t,n){var r=t.b-e.b,o=n.b-t.b;return 0<r+o?(t.a-n.a)*r+(t.a-e.a)*o:0}function l(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function c(e,t,n){var r=t.a-e.a,o=n.a-t.a;return 0<r+o?r<o?t.b-e.b+r/(r+o)*(e.b-n.b):t.b-n.b+o/(r+o)*(n.b-e.b):0}function u(e,t,n){var r=t.a-e.a,o=n.a-t.a;return 0<r+o?(t.b-n.b)*r+(t.b-e.b)*o:0}function d(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function h(e){var t=y(e.b);return b(t,e.c),b(t.b,e.c),x(t,e.a),t}function p(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,S(t.a,e.a)),t.d!==e.d&&(n=!0,_(t.d,e.d)),v(t,e),r||(b(t,e.a),e.a.c=e),n||(x(t,e.d),e.d.a=e))}function f(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,_(e.d,e.b.d)),e.c===e?S(e.a,null):(e.b.d.a=e.b.e,e.a.c=e.c,v(e,e.b.e),n||x(e,e.d)),t.c===t?(S(t.a,null),_(t.d,null)):(e.d.a=t.b.e,t.a.c=t.c,v(t,t.b.e)),w(e)}function m(e){var t=y(e),n=t.b;return v(t,e.e),t.a=e.b.a,b(n,t.a),t.d=n.d=e.d,t=t.b,v(e.b,e.b.b.e),v(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function g(e,t){var n=!1,r=y(e),o=r.b;return t.d!==e.d&&(n=!0,_(t.d,e.d)),v(r,e.e),v(o,t),r.a=e.b.a,o.a=t.a,r.d=o.d=e.d,e.d.a=o,n||x(r,e.d),r}function y(e){var t=new K,n=new K,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function v(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function b(e,t){var n=t.f,r=new Q(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function x(e,t){var n=t.d,r=new Y(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function w(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function S(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function _(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function k(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])?2:t}function T(e,t){e.f+=t.f,e.b.f+=t.b.f}function E(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?i(t.a,n.a)?s(n.b.a,t.a,n.a)<=0:0<=s(t.b.a,n.a,t.a):s(n.b.a,e,n.a)<=0:n.b.a===e?0<=s(t.b.a,e,t.a):(t=a(t.b.a,e,t.a),(e=a(n.b.a,e,n.a))<=t)}function C(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function I(e,t){f(e.a),e.c=!1,(e.a=t).i=e}function j(e){for(var t=e.a.a;(e=ce(e)).a.a===t;);return e.c&&(I(e,t=g(le(e).a.b,e.a.e)),e=ce(e)),e}function A(e,t,n){var r=new se;return r.a=n,r.e=G(e.f,t.e,r),n.i=r}function O(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function N(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,C(e)}function R(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=le(e),o=r.a;if(o.a!==t.a){if(!r.c){N(e);break}I(r,o=g(t.c.b,o.b))}t.c!==o&&(p(o.b.e,o),p(t,o)),N(e),t=r.a,e=r}return t}function P(e,t,n,r,o,i){for(var a=!0;A(e,t,n.b),(n=n.c)!==r;);for(null===o&&(o=le(t).a.b.c);(n=(r=le(t)).a.b).a===o.a;)n.c!==o&&(p(n.b.e,n),p(o.b.e,n)),r.f=t.f-n.f,r.d=O(e,r.f),t.b=!0,!a&&F(e,t)&&(T(n,o),C(t),f(o)),a=!1,t=r,o=n;t.b=!0,i&&U(e,t)}function M(e,t,n,r,o){var i=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(i,n,r,e.c)||null,null===t.d&&(o?e.n||(X(e,100156),e.n=!0):t.d=n[0])}function D(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,M(e,t.a,r,[.5,.5,0,0],!1),p(t,n)}function L(e,t,n,r,o){var i=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),s=o+1;r[o]=.5*a/(i+a),r[s]=.5*i/(i+a),e.g[0]+=r[o]*t.g[0]+r[s]*n.g[0],e.g[1]+=r[o]*t.g[1]+r[s]*n.g[1],e.g[2]+=r[o]*t.g[2]+r[s]*n.g[2]}function F(e,t){var n=le(t),r=t.a,a=n.a;if(i(r.a,a.a)){if(0<s(a.b.a,r.a,a.a))return;if(o(r.a,a.a)){if(r.a!==a.a){n=e.e;var l=r.a.h;if(0<=l){var c=(n=n.b).d,u=n.e,d=n.c,h=d[l];c[h]=c[n.a],(d[c[h]]=h)<=--n.a&&(h<=1||i(u[c[h>>1]],u[c[h]])?ie:ae)(n,h),u[l]=null,d[l]=n.b,n.b=l}else for(n.c[-(l+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;D(e,a.b.e,r)}}else m(a.b),p(r,a.b.e),t.b=n.b=!0}else{if(s(r.b.a,a.a,r.a)<0)return;ce(t).b=t.b=!0,m(r.b),p(a.b.e,r)}return 1}function B(e,t){var n=le(t),r=t.a,h=n.a,f=r.a,g=h.a,y=r.b.a,v=h.b.a,b=new Q;if(s(y,e.a,f),s(v,e.a,g),!(f===g||Math.min(f.a,y.a)>Math.max(g.a,v.a))){if(i(f,g)){if(0<s(v,f,g))return}else if(s(y,g,f)<0)return;var x,w,S=y,_=f,k=v,T=g;if(i(S,_)||(x=S,S=_,_=x),i(k,T)||(x=k,k=T,T=x),i(S,k)||(x=S,S=k,k=x,x=_,_=T,T=x),i(k,_)?i(_,T)?((x=a(S,k,_))+(w=a(k,_,T))<0&&(x=-x,w=-w),b.b=d(x,k.b,w,_.b)):((x=s(S,k,_))+(w=-s(S,T,_))<0&&(x=-x,w=-w),b.b=d(x,k.b,w,T.b)):b.b=(k.b+_.b)/2,l(S,_)||(x=S,S=_,_=x),l(k,T)||(x=k,k=T,T=x),l(S,k)||(x=S,S=k,k=x,x=_,_=T,T=x),l(k,_)?l(_,T)?((x=c(S,k,_))+(w=c(k,_,T))<0&&(x=-x,w=-w),b.a=d(x,k.a,w,_.a)):((x=u(S,k,_))+(w=-u(S,T,_))<0&&(x=-x,w=-w),b.a=d(x,k.a,w,T.a)):b.a=(k.a+_.a)/2,i(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),S=i(f,g)?f:g,i(S,b)&&(b.b=S.b,b.a=S.a),o(b,f)||o(b,g))return F(e,t),0;if(!o(y,e.a)&&0<=s(y,e.a,b)||!o(v,e.a)&&s(v,e.a,b)<=0){if(v===e.a)m(r.b),p(h.b,r),r=le(t=j(t)).a,R(e,le(t),n),P(e,t,r.b.e,r,r,!0);else{if(y!==e.a)return 0<=s(y,e.a,b)&&(ce(t).b=t.b=!0,m(r.b),r.a.b=e.a.b,r.a.a=e.a.a),void(s(v,e.a,b)<=0&&(t.b=n.b=!0,m(h.b),h.a.b=e.a.b,h.a.a=e.a.a));for(m(h.b),p(r.e,h.b.e),g=(f=n=t).a.b.a;(f=ce(f)).a.b.a===g;);f=le(t=f).a.b.c,n.a=h.b.e,P(e,t,(h=R(e,n,null)).c,r.b.c,f,!0)}return 1}m(r.b),m(h.b),p(h.b.e,r),r.a.b=b.b,r.a.a=b.a,r.a.h=$(e.e,r.a),r=r.a,h=[0,0,0,0],b=[f.d,y.d,g.d,v.d],r.g[0]=r.g[1]=r.g[2]=0,L(r,f,y,h,0),L(r,g,v,h,2),M(e,r,b,h,!0),ce(t).b=t.b=n.b=!0}}function U(e,t){for(var n=le(t);;){for(;n.b;)n=le(t=n);if(!(t.b||null!==(t=ce(n=t))&&t.b))break;t.b=!1;var r=t.a,o=n.a;if(a=r.b.a!==o.b.a)e:{var a,l=le(a=t),c=a.a,u=l.a,d=void 0;if(i(c.b.a,u.b.a)){if(s(c.b.a,u.b.a,c.a)<0){a=!1;break e}ce(a).b=a.b=!0,d=m(c),p(u.b,d),d.d.c=a.d}else{if(0<s(u.b.a,c.b.a,u.a)){a=!1;break e}a.b=l.b=!0,d=m(u),p(c.e,u.b),d.b.d.c=a.d}a=!0}if(a&&(n.c?(C(n),f(o),o=(n=le(t)).a):t.c&&(C(t),f(r),r=(t=ce(n)).a)),r.a!==o.a)if(r.b.a===o.b.a||t.c||n.c||r.b.a!==e.a&&o.b.a!==e.a)F(e,t);else if(B(e,t))break;r.a===o.a&&r.b.a===o.b.a&&(T(o,r),C(t),f(r),t=ce(n))}}function z(e,t){var n=new se,r=h(e.b);r.a.b=4e150,r.a.a=t,r.b.a.b=-4e150,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=G(r=e.f,r.a,n),n.e=r}function V(e){this.a=new W,this.b=e,this.c=E}function G(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new W(n,t.a,t),t.a.c=e,t.a=e}function W(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function H(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function q(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:X(e,100151),e.u(null);break;case 1:X(e,100152),e.t()}else switch(e.d){case 2:X(e,100154),e.v();break;case 1:X(e,100153),e.w()}}function X(e,t){e.p&&e.p(t,e.c)}function Y(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function K(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Z(){this.c=new Q,this.a=new Y,this.b=new K,this.d=new K,this.b.b=this.d,this.d.b=this.b}function Q(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function J(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new te}function $(e,t){var n,r,o;return e.e?(2*(r=++(n=e.b).a)>n.f&&(n.f*=2,n.c=ne(n.c,n.f+1)),0===n.b?o=r:(o=n.b,n.b=n.c[n.b]),n.e[o]=t,n.c[o]=r,n.d[r]=o,n.h&&ae(n,r),o):(n=e.a++,e.c[n]=t,-(n+1))}function ee(e){if(0===e.a)return oe(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(re(e.b),t))return oe(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function te(){this.d=ne([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ne(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function re(e){return e.e[e.d[1]]}function oe(e){var t=e.d,n=e.e,r=e.c,o=t[1],i=n[o];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[o]=null,r[o]=e.b,e.b=o,0<--e.a&&ie(e,1)),i}function ie(e,t){for(var n=e.d,r=e.e,o=e.c,a=t,s=n[a];;){var l=a<<1,c=(l<e.a&&i(r[n[l+1]],r[n[l]])&&(l+=1),n[l]);if(l>e.a||i(r[s],r[c])){o[n[a]=s]=a;break}o[n[a]=c]=a,a=l}}function ae(e,t){for(var n=e.d,r=e.e,o=e.c,a=t,s=n[a];;){var l=a>>1,c=n[l];if(0==l||i(r[c],r[s])){o[n[a]=s]=a;break}o[n[a]=c]=a,a=l}}function se(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function le(e){return e.e.c.b}function ce(e){return e.e.a.b}(r=H.prototype).x=function(){q(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void X(this,100900)}X(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:X(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:X(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];q(this,2);for(var o=0;o<3;++o){var i=e[o];i<-1e150&&(i=-1e150,n=!0),1e150<i&&(i=1e150,n=!0),r[o]=i}n&&X(this,100155),null===(n=this.q)?p(n=h(this.b),n.b):(m(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){q(this,0),this.d=1,this.b=new Z,this.c=e},r.t=function(){q(this,1),this.d=2,this.q=null},r.v=function(){q(this,2),this.d=1},r.w=function(){q(this,1),this.d=0;var e,t,n=!1,r=[d=this.j[0],a=this.j[1],c=this.j[2]];if(0===d&&0===a&&0===c){for(var a=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],c=[],u=[],d=(n=this.b.c).e;d!==n;d=d.e)for(var h=0;h<3;++h){var y=d.g[h];y<l[h]&&(l[h]=y,u[h]=d),y>a[h]&&(a[h]=y,c[h]=d)}if(a[1]-l[1]>a[d=0]-l[0]&&(d=1),l[d=a[2]-l[2]>a[d]-l[d]?2:d]>=a[d])r[0]=0,r[1]=0,r[2]=1;else{for(l=u[d],c=c[d],u=[a=0,0,0],l=[l.g[0]-c.g[0],l.g[1]-c.g[1],l.g[2]-c.g[2]],h=[0,0,0],d=n.e;d!==n;d=d.e)h[0]=d.g[0]-c.g[0],h[1]=d.g[1]-c.g[1],h[2]=d.g[2]-c.g[2],u[0]=l[1]*h[2]-l[2]*h[1],u[1]=l[2]*h[0]-l[0]*h[2],u[2]=l[0]*h[1]-l[1]*h[0],a<(y=u[0]*u[0]+u[1]*u[1]+u[2]*u[2])&&(a=y,r[0]=u[0],r[1]=u[1],r[2]=u[2]);a<=0&&(r[0]=r[1]=r[2]=0,r[k(l)]=1)}n=!0}for(u=k(r),d=this.b.c,a=(u+1)%3,c=(u+2)%3,u=0<r[u]?1:-1,r=d.e;r!==d;r=r.e)r.b=r.g[a],r.a=u*r.g[c];if(n){for(r=0,d=(n=this.b.a).b;d!==n;d=d.b)if(!((a=d.a).f<=0))for(;r+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==d.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,d=(r=this.b.b).h;d!==r;d=n)n=d.h,a=d.e,o(d.a,d.b.a)&&d.e.e!==d&&(D(this,a,d),f(d),a=(d=a).e),a.e===d&&(a!==d&&(a!==n&&a!==n.b||(n=n.h),f(a)),d!==n&&d!==n.b||(n=n.h),f(d));for(this.e=r=new J,d=(n=this.b.c).e;d!==n;d=d.e)d.h=$(r,d);var b=r;b.d=[];for(var x=0;x<b.a;x++)b.d[x]=x;b.d.sort(function(e){return function(t,n){return i(e[t],e[n])?1:-1}}(b.c)),b.e=!0;for(var _=b.b,E=_.a;1<=E;--E)ie(_,E);for(_.h=!0,this.f=new V(this),z(this,-4e150),z(this,4e150);null!==(r=ee(this.e));){for(;;){e:if(0===(d=this.e).a)n=re(d.b);else if(n=d.c[d.d[d.a-1]],0!==d.b.a&&i(d=re(d.b),n)){n=d;break e}if(null===n||!o(n,r))break;n=ee(this.e),D(this,r.c,n.c)}!function e(t,n){for(var r,a=(t.a=n).c;null===a.i;)if((a=a.c)===n.c){a=t;var l=n;(y=new se).a=l.c.b;for(var c=(u=a.f).a;null!==(c=c.a).b&&!u.c(u.b,y,c.b););var u,d,h=le(u=c.b),y=u.a;return c=h.a,void(0===s(y.b.a,l,y.a)?o((y=u.a).a,l)||o(y.b.a,l)||(m(y.b),u.c&&(f(y.c),u.c=!1),p(l.c,y),e(a,l)):(d=i(c.b.a,y.b.a)?u:h,h=void 0,u.d||d.c?(h=d===u?g(l.c.b,y.e):g(c.b.c.b,l.c).b,d.c?I(d,h):((u=A(y=a,u,h)).f=ce(u).f+u.a.f,u.d=O(y,u.f)),e(a,l)):P(a,u,l.c,l.c,null,!0)))}u=(y=le(a=j(a.i))).a,(y=R(t,y,null)).c===u?(y=(u=y).c,c=le(a),h=a.a,d=c.a,r=!1,h.b.a!==d.b.a&&B(t,a),o(h.a,t.a)&&(p(y.b.e,h),y=le(a=j(a)).a,R(t,le(a),c),r=!0),o(d.a,t.a)&&(p(u,d.b.e),u=R(t,c,null),r=!0),r?P(t,a,u.c,y,y,!0):(l=i(d.a,h.a)?d.b.e:h,P(t,a,l=g(u.c.b,l),l.c,l.c,!1),l.b.i.c=!0,U(t,a))):P(t,a,y.c,u,u,!0)}(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,C(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,d=(r=this.b).a.b;d!==r.a;d=n)n=d.b,(d=d.a).e.e===d&&(T(d.c,d),f(d));if(!this.n){if(r=this.b,this.m)for(d=r.b.h;d!==r.b;d=n)n=d.h,d.b.d.c!==d.d.c?d.f=d.d.c?1:-1:f(d);else for(d=r.a.b;d!==r.a;d=n)if(n=d.b,d.c){for(d=d.a;i(d.b.a,d.a);d=d.c.b);for(;i(d.a,d.b.a);d=d.e);for(a=d.c.b,c=void 0;d.e!==a;)if(i(d.b.a,a.a)){for(;a.e!==d&&(i((t=a.e).b.a,t.a)||s(a.a,a.b.a,a.e.b.a)<=0);)a=(c=g(a.e,a)).b;a=a.c.b}else{for(;a.e!==d&&(i((e=d.c.b).a,e.b.a)||0<=s(d.b.a,d.a,d.c.b.a));)d=(c=g(d,d.c.b)).b;d=d.e}for(;a.e.e!==d;)a=(c=g(a.e,a)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),d=n.a;this.k&&this.k(d.a.d,this.c),(d=d.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,d=!1,a=-1,c=r.a.d;c!==r.a;c=c.d)if(c.c)for(d||(this.h&&this.h(4,this.c),d=!0),u=c.a;n&&a!==(l=u.b.d.c?0:1)&&(a=l,this.l&&this.l(!!a,this.c)),this.k&&this.k(u.a.d,this.c),(u=u.e)!==c.a;);d&&this.i&&this.i(this.c)}if(this.r){for(d=(r=this.b).a.b;d!==r.a;d=n)if(n=d.b,!d.c){for(c=(a=d.a).e,u=void 0;c=(u=c).e,(u.d=null)===u.b.d&&(u.c===u?S(u.a,null):(u.a.c=u.c,v(u,u.b.e)),(l=u.b).c===l?S(l.a,null):(l.a.c=l.c,v(l,l.b.e)),w(u)),u!==a;);a=d.d,((d=d.b).d=a).b=d}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:H,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},H.prototype.gluDeleteTess=H.prototype.x,H.prototype.gluTessProperty=H.prototype.B,H.prototype.gluGetTessProperty=H.prototype.y,H.prototype.gluTessNormal=H.prototype.A,H.prototype.gluTessCallback=H.prototype.z,H.prototype.gluTessVertex=H.prototype.C,H.prototype.gluTessBeginPolygon=H.prototype.u,H.prototype.gluTessBeginContour=H.prototype.t,H.prototype.gluTessEndContour=H.prototype.v,H.prototype.gluTessEndPolygon=H.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],246:[function(e,t,n){"use strict";function r(e,t,n,r){for(var o=e[t++],i=1<<o,a=1+i,s=1+a,l=o+1,c=(1<<l)-1,u=0,d=0,h=0,p=e[t++],f=new Int32Array(4096),m=null;;){for(;u<16&&0!==p;)d|=e[t++]<<u,u+=8,1===p?p=e[t++]:--p;if(u<l)break;var g=d&c;if(d>>=l,u-=l,g==i)s=1+a,c=(1<<(l=o+1))-1,m=null;else{if(g==a)break;for(var y=g<s?g:m,v=0,b=y;i<b;)b=f[b]>>8,++v;var x=b;if(r<h+v+(y!==g?1:0))return void console.log("Warning, gif stream longer than expected.");n[h++]=x;var w=h+=v;for(y!==g&&(n[h++]=x),b=y;v--;)b=f[b],n[--w]=255&b,b>>=8;null!==m&&s<4096&&(f[s++]=m<<8|x,c+1<=s&&l<12&&(++l,c=c<<1|1)),m=g}}h!==r&&console.log("Warning, gif stream shorter than expected.")}try{n.GifWriter=function(e,t,n,r){var o=0,i=void 0===(r=void 0===r?{}:r).loop?null:r.loop,a=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function s(e){if((e=e.length)<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}e[o++]=71,e[o++]=73,e[o++]=70,e[o++]=56,e[o++]=57,e[o++]=97;var l=0,c=0;if(null!==a){for(var u=s(a);u>>=1;)++l;if(u=1<<l,--l,void 0!==r.background){if(u<=(c=r.background))throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=(null!==a?128:0)|l,e[o++]=c,e[o++]=0,null!==a)for(var d=0,h=a.length;d<h;++d){var p=a[d];e[o++]=p>>16&255,e[o++]=p>>8&255,e[o++]=255&p}if(null!==i){if(i<0||65535<i)throw new Error("Loop count invalid.");e[o++]=33,e[o++]=255,e[o++]=11,e[o++]=78,e[o++]=69,e[o++]=84,e[o++]=83,e[o++]=67,e[o++]=65,e[o++]=80,e[o++]=69,e[o++]=50,e[o++]=46,e[o++]=48,e[o++]=3,e[o++]=1,e[o++]=255&i,e[o++]=i>>8&255,e[o++]=0}var f=!1;this.addFrame=function(t,n,r,i,l,c){if(!0===f&&(--o,f=!1),c=void 0===c?{}:c,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||i<=0||65535<r||65535<i)throw new Error("Width/Height invalid.");if(l.length<r*i)throw new Error("Not enough pixels for the frame size.");var u=!0,d=c.palette;if(null==d&&(u=!1,d=a),null==d)throw new Error("Must supply either a local or global palette.");for(var h=s(d),p=0;h>>=1;)++p;h=1<<p;var m=void 0===c.delay?0:c.delay,g=void 0===c.disposal?0:c.disposal;if(g<0||3<g)throw new Error("Disposal out of range.");var y=!1,v=0;if(void 0!==c.transparent&&null!==c.transparent&&(y=!0,(v=c.transparent)<0||h<=v))throw new Error("Transparent color index.");if(0===g&&!y&&0===m||(e[o++]=33,e[o++]=249,e[o++]=4,e[o++]=g<<2|(!0===y?1:0),e[o++]=255&m,e[o++]=m>>8&255,e[o++]=v,e[o++]=0),e[o++]=44,e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=255&i,e[o++]=i>>8&255,e[o++]=!0===u?128|p-1:0,!0===u)for(var b=0,x=d.length;b<x;++b){var w=d[b];e[o++]=w>>16&255,e[o++]=w>>8&255,e[o++]=255&w}return o=function(e,t,n,r){e[t++]=n;var o=t++,i=1<<n,a=i-1,s=1+i,l=1+s,c=n+1,u=0,d=0;function h(n){for(;n<=u;)e[t++]=255&d,d>>=8,u-=8,t===o+256&&(e[o]=255,o=t++)}function p(e){d|=e<<u,u+=c,h(8)}var f=r[0]&a,m={};p(i);for(var g=1,y=r.length;g<y;++g){var v=r[g]&a,b=f<<8|v,x=m[b];if(void 0===x){for(d|=f<<u,u+=c;8<=u;)e[t++]=255&d,d>>=8,u-=8,t===o+256&&(e[o]=255,o=t++);4096===l?(p(i),l=1+s,c=n+1,m={}):(1<<c<=l&&++c,m[b]=l++),f=v}else f=x}return p(f),p(s),h(1),o+1===t?e[o]=0:(e[o]=t-o-1,e[t++]=0),t}(e,o,p<2?2:p,l)},this.end=function(){return!1===f&&(e[o++]=59,f=!0),o},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return o},this.setOutputBufferPosition=function(e){o=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,o=e[t++]|e[t++]<<8,i=e[t++],a=1<<1+(7&i),s=(e[t++],e[t++],null),l=null,c=(i>>7&&(s=t,t+=3*(l=a)),!0),u=[],d=0,h=null,p=0,f=null;for(this.width=n,this.height=o;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,w=(T=e[t++])>>6&1,S=s,_=l,k=!1,T=(T>>7&&(k=!0,S=t,t+=3*(_=1<<1+(7&T))),t);for(t++;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}u.push({x:y,y:v,width:b,height:x,has_local_palette:k,palette_offset:S,palette_size:_,data_offset:T,data_length:t-T,transparent_index:h,interlaced:!!w,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,o){for(var i=(t=this.frameInfo(t)).width*t.height,a=new Uint8Array(i),s=(r(e,t.data_offset,a,i),t.palette_offset),l=t.transparent_index,c=(null===l&&(l=256),t.width),u=n-c,d=c,h=4*(t.y*n+t.x),p=4*((t.y+t.height)*n+t.x),f=h,m=4*u,g=(!0===t.interlaced&&(m+=4*n*7),8),y=0,v=a.length;y<v;++y){var b,x,w=a[y];0===d&&(d=c,p<=(f+=m)&&(m=4*u+4*n*(g-1),f=h+(c+u)*(g<<1),g>>=1)),w===l?f+=4:(b=e[s+3*w],x=e[s+3*w+1],w=e[s+3*w+2],o[f++]=w,o[f++]=x,o[f++]=b,o[f++]=255),--d}},this.decodeAndBlitFrameRGBA=function(t,o){for(var i=(t=this.frameInfo(t)).width*t.height,a=new Uint8Array(i),s=(r(e,t.data_offset,a,i),t.palette_offset),l=t.transparent_index,c=(null===l&&(l=256),t.width),u=n-c,d=c,h=4*(t.y*n+t.x),p=4*((t.y+t.height)*n+t.x),f=h,m=4*u,g=(!0===t.interlaced&&(m+=4*n*7),8),y=0,v=a.length;y<v;++y){var b,x,w=a[y];0===d&&(d=c,p<=(f+=m)&&(m=4*u+4*n*(g-1),f=h+(c+u)*(g<<1),g>>=1)),w===l?f+=4:(b=e[s+3*w],x=e[s+3*w+1],w=e[s+3*w+2],o[f++]=b,o[f++]=x,o[f++]=w,o[f++]=255),--d}}}}catch(e){}},{}],247:[function(e,t,n){(function(r){!function(t){"use strict";function n(e){if(null==this)throw TypeError();var t,n=String(this),r=n.length;if(!((e=(e=e?Number(e):0)!=e?0:e)<0||r<=e))return 55296<=(t=n.charCodeAt(e))&&t<=56319&&e+1<r&&56320<=(r=n.charCodeAt(e+1))&&r<=57343?1024*(t-55296)+r-56320+65536:t}var o;function i(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function a(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new i,this.dtree=new i}String.prototype.codePointAt||((o=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?o(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var s=new i,l=new i,c=new Uint8Array(30),u=new Uint16Array(30),d=new Uint8Array(30),h=new Uint16Array(30),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new i,m=new Uint8Array(320);function g(e,t,n,r){for(var o,i=0;i<n;++i)e[i]=0;for(i=0;i<30-n;++i)e[i+n]=i/n|0;for(o=r,i=0;i<30;++i)t[i]=o,o+=1<<e[i]}var y=new Uint16Array(16);function v(e,t,n,r){for(var o,i=0;i<16;++i)e.table[i]=0;for(i=0;i<r;++i)e.table[t[n+i]]++;for(i=o=e.table[0]=0;i<16;++i)y[i]=o,o+=e.table[i];for(i=0;i<r;++i)t[n+i]&&(e.trans[y[t[n+i]]++]=i)}function b(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function x(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,o=0,i=e.tag;r=2*r+(1&i),i>>>=1,n+=t.table[++o],0<=(r-=t.table[o]););return e.tag=i,e.bitcount-=o,t.trans[n+r]}function w(e,t,n){for(;;){if(256===(i=x(e,t)))return 0;if(i<256)e.dest[e.destLen++]=i;else for(var r,o=b(e,c[i-=257],u[i]),i=x(e,n),a=r=e.destLen-b(e,d[i],h[i]);a<r+o;++a)e.dest[e.destLen++]=e.dest[a]}}for(var S=s,_=l,k=0;k<7;++k)S.table[k]=0;for(S.table[7]=24,S.table[8]=152,S.table[9]=112,k=0;k<24;++k)S.trans[k]=256+k;for(k=0;k<144;++k)S.trans[24+k]=k;for(k=0;k<8;++k)S.trans[168+k]=280+k;for(k=0;k<112;++k)S.trans[176+k]=144+k;for(k=0;k<5;++k)_.table[k]=0;for(_.table[5]=32,k=0;k<32;++k)_.trans[k]=k;function T(e,t,n,r,o){return Math.pow(1-o,3)*e+3*Math.pow(1-o,2)*o*t+3*(1-o)*Math.pow(o,2)*n+Math.pow(o,3)*r}function E(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function C(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function I(e){throw new Error(e)}function j(e,t){e||I(t)}g(c,u,4,3),g(d,h,2,1),c[28]=0,u[28]=258,E.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},E.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},E.prototype.addX=function(e){this.addPoint(e,null)},E.prototype.addY=function(e){this.addPoint(null,e)},E.prototype.addBezier=function(e,t,n,r,o,i,a,s){var l=[e,t],c=[n,r],u=[o,i],d=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var h=0;h<=1;h++){var p,f=6*l[h]-12*c[h]+6*u[h],m=-3*l[h]+9*c[h]-9*u[h]+3*d[h],g=3*c[h]-3*l[h];0==m?0==f||0<(p=-g/f)&&p<1&&(0===h&&this.addX(T(l[h],c[h],u[h],d[h],p)),1===h&&this.addY(T(l[h],c[h],u[h],d[h],p))):(p=Math.pow(f,2)-4*g*m)<0||(0<(g=(-f+Math.sqrt(p))/(2*m))&&g<1&&(0===h&&this.addX(T(l[h],c[h],u[h],d[h],g)),1===h&&this.addY(T(l[h],c[h],u[h],d[h],g))),0<(g=(-f-Math.sqrt(p))/(2*m))&&g<1&&(0===h&&this.addX(T(l[h],c[h],u[h],d[h],g)),1===h&&this.addY(T(l[h],c[h],u[h],d[h],g))))}},E.prototype.addQuad=function(e,t,n,r,o,i){n=e+2/3*(n-e),r=t+2/3*(r-t),this.addBezier(e,t,n,r,n+1/3*(o-e),r+1/3*(i-t),o,i)},C.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},C.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},C.prototype.curveTo=C.prototype.bezierCurveTo=function(e,t,n,r,o,i){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:o,y:i})},C.prototype.quadTo=C.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},C.prototype.close=C.prototype.closePath=function(){this.commands.push({type:"Z"})},C.prototype.extend=function(e){var t;if(e.commands)e=e.commands;else if(e instanceof E)return t=e,this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close();Array.prototype.push.apply(this.commands,e)},C.prototype.getBoundingBox=function(){for(var e=new E,t=0,n=0,r=0,o=0,i=0;i<this.commands.length;i++){var a=this.commands[i];switch(a.type){case"M":e.addPoint(a.x,a.y),t=r=a.x,n=o=a.y;break;case"L":e.addPoint(a.x,a.y),r=a.x,o=a.y;break;case"Q":e.addQuad(r,o,a.x1,a.y1,a.x,a.y),r=a.x,o=a.y;break;case"C":e.addBezier(r,o,a.x1,a.y1,a.x2,a.y2,a.x,a.y),r=a.x,o=a.y;break;case"Z":r=t,o=n;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},C.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},C.prototype.toPathData=function(e){function t(){for(var t=arguments,n="",r=0;r<arguments.length;r+=1){var o=t[r];0<=o&&0<r&&(n+=" "),n+=Math.round(o)===o?""+Math.round(o):o.toFixed(e)}return n}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var o=this.commands[r];"M"===o.type?n+="M"+t(o.x,o.y):"L"===o.type?n+="L"+t(o.x,o.y):"C"===o.type?n+="C"+t(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?n+="Q"+t(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(n+="Z")}return n},C.prototype.toSVG=function(e){var t=(t='<path d="')+this.toPathData(e)+'"';return this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},C.prototype.toDOMElement=function(e){e=this.toPathData(e);var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};var A={fail:I,argument:j,assert:j},O={},N={},R={};function P(e){return function(){return e}}N.BYTE=function(e){return A.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},R.BYTE=P(1),N.CHAR=function(e){return[e.charCodeAt(0)]},R.CHAR=P(1),N.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},R.CHARARRAY=function(e){return e.length},N.USHORT=function(e){return[e>>8&255,255&e]},R.USHORT=P(2),N.SHORT=function(e){return[(e=32768<=e?-(65536-e):e)>>8&255,255&e]},R.SHORT=P(2),N.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},R.UINT24=P(3),N.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},R.ULONG=P(4),N.LONG=function(e){return[(e=2147483648<=e?-(4294967296-e):e)>>24&255,e>>16&255,e>>8&255,255&e]},R.LONG=P(4),N.FIXED=N.ULONG,R.FIXED=R.ULONG,N.FWORD=N.SHORT,R.FWORD=R.SHORT,N.UFWORD=N.USHORT,R.UFWORD=R.USHORT,N.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONGDATETIME=P(8),N.TAG=function(e){return A.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},R.TAG=P(4),N.Card8=N.BYTE,R.Card8=R.BYTE,N.Card16=N.USHORT,R.Card16=R.USHORT,N.OffSize=N.BYTE,R.OffSize=R.BYTE,N.SID=N.USHORT,R.SID=R.USHORT,N.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?N.NUMBER16(e):N.NUMBER32(e)},R.NUMBER=function(e){return N.NUMBER(e).length},N.NUMBER16=function(e){return[28,e>>8&255,255&e]},R.NUMBER16=P(3),N.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},R.NUMBER32=P(5),N.REAL=function(e){for(var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t),r=(n&&(n=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length)),t=(Math.round(e*n)/n).toString()),""),o=0,i=t.length;o<i;o+=1){var a=t[o];r+="e"===a?"-"===t[++o]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var s=[30],l=0,c=(r+=1&r.length?"f":"ff").length;l<c;l+=2)s.push(parseInt(r.substr(l,2),16));return s},R.REAL=function(e){return N.REAL(e).length},N.NAME=N.CHARARRAY,R.NAME=R.CHARARRAY,N.STRING=N.CHARARRAY,R.STRING=R.CHARARRAY,O.UTF8=function(e,t,n){for(var r=[],o=n,i=0;i<o;i++,t+=1)r[i]=e.getUint8(t);return String.fromCharCode.apply(null,r)},O.UTF16=function(e,t,n){for(var r=[],o=n/2,i=0;i<o;i++,t+=2)r[i]=e.getUint16(t);return String.fromCharCode.apply(null,r)},N.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},R.UTF16=function(e){return 2*e.length};var M,D={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},L=(O.MACSTRING=function(e,t,n,r){var o=D[r];if(void 0!==o){for(var i="",a=0;a<n;a++){var s=e.getUint8(t+a);i+=s<=127?String.fromCharCode(s):o[127&s]}return i}},"function"==typeof WeakMap&&new WeakMap);function F(e){return-128<=e&&e<=127}N.MACSTRING=function(e,t){var n=function(e){if(!M)for(var t in M={},D)M[t]=new String(t);var n=M[e];if(void 0!==n){if(L){var r=L.get(n);if(void 0!==r)return r}var o=D[e];if(void 0!==o){for(var i={},a=0;a<o.length;a++)i[o.charCodeAt(a)]=a+128;return L&&L.set(n,i),i}}}(t);if(void 0!==n){for(var r=[],o=0;o<e.length;o++){var i=e.charCodeAt(o);if(128<=i&&void 0===(i=n[i]))return;r[o]=i}return r}},R.MACSTRING=function(e,t){return void 0!==(e=N.MACSTRING(e,t))?e.length:0},N.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=(0===r?function(e,t,n){for(var r=0,o=e.length;t<o&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}:-128<=r&&r<=127?function(e,t,n){for(var r=0,o=e.length,i=t;i<o&&r<64;){var a=e[i];if(!F(a))break;if(0===a&&i+1<o&&0===e[i+1])break;++i,++r}n.push(r-1);for(var s=t;s<i;++s)n.push(e[s]+256&255);return i}:function(e,t,n){for(var r=0,o=e.length,i=t;i<o&&r<64;){var a=e[i];if(0===a)break;if(F(a)&&i+1<o&&F(e[i+1]))break;++i,++r}n.push(64|r-1);for(var s=t;s<i;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return i})(e,t,n)}return n},N.INDEX=function(e){for(var t=1,n=[t],r=[],o=0;o<e.length;o+=1){var i=N.OBJECT(e[o]);Array.prototype.push.apply(r,i),t+=i.length,n.push(t)}if(0===r.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,N.BYTE,N.USHORT,N.UINT24,N.ULONG][s],c=0;c<n.length;c+=1){var u=l(n[c]);Array.prototype.push.apply(a,u)}return Array.prototype.concat(N.Card16(e.length),N.OffSize(s),a,r)},R.INDEX=function(e){return N.INDEX(e).length},N.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,o=0;o<r;o+=1){var i=parseInt(n[o],0),a=e[i];t=(t=t.concat(N.OPERAND(a.value,a.type))).concat(N.OPERATOR(i))}return t},R.DICT=function(e){return N.DICT(e).length},N.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},N.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)A.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(N.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(N.NUMBER(e));else if("offset"===t)n=n.concat(N.NUMBER32(e));else if("number"===t)n=n.concat(N.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(N.REAL(e))}return n},N.OP=N.BYTE,R.OP=R.BYTE;var B="function"==typeof WeakMap&&new WeakMap;function U(e,t,n){for(var r=0;r<t.length;r+=1){var o=t[r];this[o.name]=o.value}if(this.tableName=e,this.fields=t,n)for(var i=Object.keys(n),a=0;a<i.length;a+=1){var s=i[a],l=n[s];void 0!==this[s]&&(this[s]=l)}}function z(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var o=0;o<t.length;o++)r[o+1]={name:e+o,type:"USHORT",value:t[o]};return r}function V(e,t,n){var r=t.length,o=new Array(r+1);o[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)o[i+1]={name:e+i,type:"TABLE",value:n(t[i],i)};return o}function G(e,t,n){var r=t.length,o=[];o[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)o=o.concat(n(t[i],i));return o}function W(e){1===e.format?U.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(z("glyph",e.glyphs))):A.assert(!1,"Can't create coverage table format 2 yet.")}function H(e){U.call(this,"scriptListTable",G("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return A.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new U("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new U("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(z("featureIndex",r.featureIndexes)))}].concat(G("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new U("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(z("featureIndex",n.featureIndexes)))}]}))))}]})))}function q(e){U.call(this,"featureListTable",G("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new U("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(z("lookupListIndex",n.lookupListIndexes)))}]})))}function X(e,t){U.call(this,"lookupListTable",V("lookup",e,(function(e){var n=t[e.lookupType];return A.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new U("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(V("subtable",e.subtables,n)))})))}N.CHARSTRING=function(e){if(B){var t=B.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,o=0;o<r;o+=1){var i=e[o];n=n.concat(N[i.type](i.value))}return B&&B.set(e,n),n},R.CHARSTRING=function(e){return N.CHARSTRING(e).length},N.OBJECT=function(e){var t=N[e.type];return A.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},R.OBJECT=function(e){var t=R[e.type];return A.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},N.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],o=[],i=0;i<n;i+=1){var a=e.fields[i],s=N[a.type],l=(A.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")"),e[a.name]);s=s(l=void 0===l?a.value:l),"TABLE"===a.type?(o.push(t.length),t=t.concat([0,0]),r.push(s)):t=t.concat(s)}for(var c=0;c<r.length;c+=1){var u=o[c],d=t.length;A.argument(d<65536,"Table "+e.tableName+" too big."),t[u]=d>>8,t[u+1]=255&d,t=t.concat(r[c])}return t},R.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var o=e.fields[r],i=R[o.type],a=(A.argument(void 0!==i,"No sizeOf function for field type "+o.type+" ("+o.name+")"),e[o.name]);t+=i(a=void 0===a?o.value:a),"TABLE"===o.type&&(t+=2)}return t},N.RECORD=N.TABLE,R.RECORD=R.TABLE,N.LITERAL=function(e){return e},R.LITERAL=function(e){return e.length},U.prototype.encode=function(){return N.TABLE(this)},U.prototype.sizeOf=function(){return R.TABLE(this)};var Y={Table:U,Record:U,Coverage:(W.prototype=Object.create(U.prototype)).constructor=W,ScriptList:(H.prototype=Object.create(U.prototype)).constructor=H,FeatureList:(q.prototype=Object.create(U.prototype)).constructor=q,LookupList:(X.prototype=Object.create(U.prototype)).constructor=X,ushortList:z,tableList:V,recordList:G};function K(e,t){return e.getUint8(t)}function Z(e,t){return e.getUint16(t,!1)}function Q(e,t){return e.getUint32(t,!1)}function J(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var $={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ee(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ee.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ee.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ee.prototype.parseCard8=ee.prototype.parseByte,ee.prototype.parseCard16=ee.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ee.prototype.parseSID=ee.prototype.parseUShort,ee.prototype.parseOffset16=ee.prototype.parseUShort,ee.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ee.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ee.prototype.parseOffset32=ee.prototype.parseULong=function(){var e=Q(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ee.prototype.parseFixed=function(){var e=J(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ee.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var o=0;o<e;o++)r+=String.fromCharCode(t.getUint8(n+o));return r},ee.prototype.parseTag=function(){return this.parseString(4)},ee.prototype.parseLongDateTime=function(){var e=Q(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ee.prototype.parseVersion=function(e){var t=Z(this.data,this.offset+this.relativeOffset),n=Z(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+n/(e=void 0===e?4096:e)/10},ee.prototype.skip=function(e,t){this.relativeOffset+=$[e]*(t=void 0===t?1:t)},ee.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ee.prototype.parseOffset16List=ee.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ee.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ee.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=n.getUint8(r++);return this.relativeOffset+=e,t},ee.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ee.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ee.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),o=0;o<e;o++){for(var i={},a=0;a<r.length;a++){var s=r[a],l=t[s];i[s]=l.call(this)}n[o]=i}return n},ee.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),o=0;o<e;o++){for(var i={},a=0;a<r.length;a++){var s=r[a],l=t[s];i[s]=l.call(this)}n[o]=i}return n},ee.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r],i=e[o];n[o]=i.call(this)}return n},ee.prototype.parseValueRecord=function(e){var t;if(0!==(e=void 0===e?this.parseUShort():e))return t={},1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t},ee.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ee.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ee(this.data,this.offset+t).parseStruct(e)},ee.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ee(this.data,this.offset+t).parseStruct(e)},ee.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,o=new Array(n),i=0;i<n;i++){var a=t[i];if(0===a)o[i]=void 0;else if(this.relativeOffset=a,e){for(var s=this.parseOffset16List(),l=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=a+s[c],l[c]=e.call(this);o[i]=l}else o[i]=this.parseUShortList()}return this.relativeOffset=r,o},ee.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),o=0;o<n;o++)r[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},ee.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ee.uShort,end:ee.uShort,classId:ee.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ee.list=function(e,t){return function(){return this.parseList(e,t)}},ee.list32=function(e,t){return function(){return this.parseList32(e,t)}},ee.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ee.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ee.pointer=function(e){return function(){return this.parsePointer(e)}},ee.pointer32=function(e){return function(){return this.parsePointer32(e)}},ee.tag=ee.prototype.parseTag,ee.byte=ee.prototype.parseByte,ee.uShort=ee.offset16=ee.prototype.parseUShort,ee.uShortList=ee.prototype.parseUShortList,ee.uLong=ee.offset32=ee.prototype.parseULong,ee.uLongList=ee.prototype.parseULongList,ee.struct=ee.prototype.parseStruct,ee.coverage=ee.prototype.parseCoverage,ee.classDef=ee.prototype.parseClassDef;var te={reserved:ee.uShort,reqFeatureIndex:ee.uShort,featureIndexes:ee.uShortList},ne=(ee.prototype.parseScriptList=function(){return this.parsePointer(ee.recordList({tag:ee.tag,script:ee.pointer({defaultLangSys:ee.pointer(te),langSysRecords:ee.recordList({tag:ee.tag,langSys:ee.pointer(te)})})}))||[]},ee.prototype.parseFeatureList=function(){return this.parsePointer(ee.recordList({tag:ee.tag,feature:ee.pointer({featureParams:ee.offset16,lookupListIndexes:ee.uShortList})}))||[]},ee.prototype.parseLookupList=function(e){return this.parsePointer(ee.list(ee.pointer((function(){var t=this.parseUShort(),n=(A.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown."),this.parseUShort()),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ee.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ee.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return A.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ee.offset32,featureTableSubstitutionOffset:ee.offset32})}))||[]},{getByte:K,getCard8:K,getUShort:Z,getCard16:Z,getShort:function(e,t){return e.getInt16(t,!1)},getULong:Q,getFixed:J,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,o=0;o<n;o+=1)r=(r<<=8)+e.getUint8(t+o);return r},getBytes:function(e,t,n){for(var r=[],o=t;o<n;o+=1)r.push(e.getUint8(o));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ee}),re=function(e,t){for(var n={},r=(n.version=ne.getUShort(e,t),A.argument(0===n.version,"cmap table version should be 0."),n.numTables=ne.getUShort(e,t+2),-1),o=n.numTables-1;0<=o;--o){var i=ne.getUShort(e,t+4+8*o),a=ne.getUShort(e,t+4+8*o+2);if(3===i&&(0===a||1===a||10===a)||0===i&&(0===a||1===a||2===a||3===a||4===a)){r=ne.getULong(e,t+4+8*o+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ne.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format){var l,c=n,u=s;u.parseUShort(),c.length=u.parseULong(),c.language=u.parseULong(),c.groupCount=l=u.parseULong(),c.glyphIndexMap={};for(var d=0;d<l;d+=1)for(var h=u.parseULong(),p=u.parseULong(),f=u.parseULong(),m=h;m<=p;m+=1)c.glyphIndexMap[m]=f,f++}else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");var g=n,y=e,v=t,b=r;g.length=s.parseUShort(),g.language=s.parseUShort(),g.segCount=x=s.parseUShort()>>1,s.skip("uShort",3),g.glyphIndexMap={};for(var x,w=new ne.Parser(y,v+b+14),S=new ne.Parser(y,v+b+16+2*x),_=new ne.Parser(y,v+b+16+4*x),k=new ne.Parser(y,v+b+16+6*x),T=v+b+16+8*x,E=0;E<x-1;E+=1)for(var C=void 0,I=w.parseUShort(),j=S.parseUShort(),O=_.parseShort(),N=k.parseUShort(),R=j;R<=I;R+=1)0!==N?(T=(T=k.offset+k.relativeOffset-2)+N+2*(R-j),0!==(C=ne.getUShort(y,T))&&(C=C+O&65535)):C=R+O&65535,g.glyphIndexMap[R]=C}return n},oe=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ie=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],se=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function le(e){this.font=e}function ce(e){this.cmap=e}function ue(e,t){this.encoding=e,this.charset=t}function de(e){switch(e.version){case 1:this.names=se.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<se.length?this.names[t]=se[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-se.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=se[n+e.glyphNameIndex[n]];break;default:this.names=[]}}le.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var o=n.get(r),i=0;i<o.unicodes.length;i+=1)if(o.unicodes[i]===t)return r;return null},ce.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ue.prototype.charToGlyphIndex=function(e){return e=e.codePointAt(0),e=this.encoding[e],this.charset.indexOf(e)},de.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},de.prototype.glyphIndexToName=function(e){return this.names[e]};var he=function(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),e.stroke()};function pe(e){this.bindConstructorValues(e)}function fe(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function me(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}pe.prototype.bindConstructorValues=function(e){var t;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(e=e.path,t=e||new C,{configurable:!0,get:function(){return t="function"==typeof t?t():t},set:function(e){t=e}}))},pe.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},pe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},pe.prototype.getPath=function(e,t,n,r,o){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;for(var i,a,s=(r=r||{}).xScale,l=r.yScale,c=((i=r.hinting&&o&&o.hinting?this.path&&o.hinting.exec(this,n):i)?(a=o.hinting.getCommands(i),e=Math.round(e),t=Math.round(t),s=l=1):(a=this.path.commands,r=1/this.path.unitsPerEm*n,void 0===s&&(s=r),void 0===l&&(l=r)),new C),u=0;u<a.length;u+=1){var d=a[u];"M"===d.type?c.moveTo(e+d.x*s,t+-d.y*l):"L"===d.type?c.lineTo(e+d.x*s,t+-d.y*l):"Q"===d.type?c.quadraticCurveTo(e+d.x1*s,t+-d.y1*l,e+d.x*s,t+-d.y*l):"C"===d.type?c.curveTo(e+d.x1*s,t+-d.y1*l,e+d.x2*s,t+-d.y2*l,e+d.x*s,t+-d.y*l):"Z"===d.type&&c.closePath()}return c},pe.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return A.argument(0===t.length,"There are still points left in the current contour."),e},pe.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var o=e[r];"Z"!==o.type&&(t.push(o.x),n.push(o.y)),"Q"!==o.type&&"C"!==o.type||(t.push(o.x1),n.push(o.y1)),"C"===o.type&&(t.push(o.x2),n.push(o.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},pe.prototype.draw=function(e,t,n,r,o){this.getPath(t,n,r,o).draw(e)},pe.prototype.drawPoints=function(e,t,n,r){function o(t,n,r,o){var i=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*o,r+t[a].y*o),e.arc(n+t[a].x*o,r+t[a].y*o,2,0,i,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=1/this.path.unitsPerEm*(r=void 0!==r?r:24);for(var i=[],a=[],s=this.path,l=0;l<s.commands.length;l+=1){var c=s.commands[l];void 0!==c.x&&i.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",o(i,t,n,r),e.fillStyle="red",o(a,t,n,r)},pe.prototype.drawMetrics=function(e,t,n,r){t=void 0!==t?t:0,n=void 0!==n?n:0,r=1/this.path.unitsPerEm*(r=void 0!==r?r:24),e.lineWidth=1,e.strokeStyle="black",he(e,t,-1e4,t,1e4),he(e,-1e4,n,1e4,n);var o=this.xMin||0,i=this.yMin||0,a=this.xMax||0,s=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",he(e,t+o*r,-1e4,t+o*r,1e4),he(e,t+a*r,-1e4,t+a*r,1e4),he(e,-1e4,n+-i*r,1e4,n+-i*r),he(e,-1e4,n+-s*r,1e4,n+-s*r),e.strokeStyle="green",he(e,t+l*r,-1e4,t+l*r,1e4)},me.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},me.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var ge={GlyphSet:me,glyphLoader:function(e,t){return new pe({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,o,i){return function(){var a=new pe({index:t,font:e});return a.path=function(){n(a,r,o);var t=i(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},fe(a,"xMin","_xMin"),fe(a,"xMax","_xMax"),fe(a,"yMin","_yMin"),fe(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,n,r){return function(){var o=new pe({index:t,font:e});return o.path=function(){var t=n(e,o,r);return t.unitsPerEm=e.unitsPerEm,t},o}}};function ye(e){return e.length<1240?107:e.length<33900?1131:32768}function ve(e,t,n){var r,o=[],i=[],a=ne.getCard16(e,t);if(0!==a){for(var s=ne.getByte(e,t+2),l=t+(a+1)*s+2,c=t+3,u=0;u<a+1;u+=1)o.push(ne.getOffset(e,c,s)),c+=s;r=l+o[a]}else r=t+2;for(var d=0;d<o.length-1;d+=1){var h=ne.getBytes(e,l+o[d],l+o[d+1]);n&&(h=n(h)),i.push(h)}return{objects:i,startOffset:t,endOffset:r}}function be(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t){for(var n=e,r="",o=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=(a=n.parseByte())>>4,a=15&a;if(15==i)break;if(r+=o[i],15==a)break;r+=o[a]}return parseFloat(r)}if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function xe(e,t,n){var r=new ne.Parser(e,t=void 0!==t?t:0),o=[],i=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var a=r.parseByte();a<=21?(12===a&&(a=1200+r.parseByte()),o.push([a,i]),i=[]):i.push(be(r,a))}for(var s=o,l={},c=0;c<s.length;c+=1){var u=s[c][0],d=s[c][1],h=1===d.length?d[0]:d;if(l.hasOwnProperty(u)&&!isNaN(l[u]))throw new Error("Object "+l+" already has key "+u);l[u]=h}return l}function we(e,t){return t<=390?oe[t]:e[t-391]}function Se(e,t,n){for(var r,o={},i=0;i<t.length;i+=1){var a=t[i];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(r=void 0!==e[a.op]?e[a.op][l]:void 0)&&(r=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(r=we(n,r)),s[l]=r;o[a.name]=s}else void 0===(r=e[a.op])&&(r=void 0!==a.value?a.value:null),"SID"===a.type&&(r=we(n,r)),o[a.name]=r}return o}var _e=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],ke=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Te(e,t,n,r){return Se(xe(e,t,n),ke,r)}function Ee(e,t,n,r){for(var o=[],i=0;i<n.length;i+=1){var a,s=((s=r,a=Se(xe(a=new DataView(new Uint8Array(n[i]).buffer),0,a.byteLength),_e,s))._subrs=[],a._subrsBias=0,a.private[0]),l=a.private[1];0!==s&&0!==l&&(s=Te(e,l+t,s,r),a._defaultWidthX=s.defaultWidthX,a._nominalWidthX=s.nominalWidthX,0!==s.subrs&&(l=ve(e,l+s.subrs+t),a._subrs=l.objects,a._subrsBias=ye(a._subrs)),a._privateDict=s),o.push(a)}return o}function Ce(e,t,n){var r,o,i,a,s,l,c,u,d,h=new C,p=[],f=0,m=!1,g=!1,y=0,v=0,b=(d=(e.isCIDFont?(s=e.tables.cff.topDict._fdSelect[t.index],s=e.tables.cff.topDict._fdArray[s],l=s._subrs,c=s._subrsBias,u=s._defaultWidthX,s):(l=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,e.tables.cff.topDict))._nominalWidthX,u);function x(e,t){g&&h.closePath(),h.moveTo(e,t),g=!0}function w(){p.length%2==0||m||(b=p.shift()+d),f+=p.length>>1,p.length=0,m=!0}return function n(s){for(var u,S,_,k,T,E,C,I,j,A,O,N,R=0;R<s.length;){var P=s[R];switch(R+=1,P){case 1:case 3:case 18:case 23:w();break;case 4:1<p.length&&!m&&(b=p.shift()+d,m=!0),v+=p.pop(),x(y,v);break;case 5:for(;0<p.length;)y+=p.shift(),v+=p.shift(),h.lineTo(y,v);break;case 6:for(;0<p.length&&(y+=p.shift(),h.lineTo(y,v),0!==p.length);)v+=p.shift(),h.lineTo(y,v);break;case 7:for(;0<p.length&&(v+=p.shift(),h.lineTo(y,v),0!==p.length);)y+=p.shift(),h.lineTo(y,v);break;case 8:for(;0<p.length;)r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a+p.shift(),h.curveTo(r,o,i,a,y,v);break;case 10:T=p.pop()+c,(E=l[T])&&n(E);break;case 11:return;case 12:switch(P=s[R],R+=1,P){case 35:r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),C=i+p.shift(),I=a+p.shift(),j=C+p.shift(),A=I+p.shift(),O=j+p.shift(),N=A+p.shift(),y=O+p.shift(),v=N+p.shift(),p.shift(),h.curveTo(r,o,i,a,C,I),h.curveTo(j,A,O,N,y,v);break;case 34:r=y+p.shift(),o=v,i=r+p.shift(),a=o+p.shift(),C=i+p.shift(),I=a,j=C+p.shift(),A=a,O=j+p.shift(),N=v,y=O+p.shift(),h.curveTo(r,o,i,a,C,I),h.curveTo(j,A,O,N,y,v);break;case 36:r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),C=i+p.shift(),I=a,j=C+p.shift(),A=a,O=j+p.shift(),N=A+p.shift(),y=O+p.shift(),h.curveTo(r,o,i,a,C,I),h.curveTo(j,A,O,N,y,v);break;case 37:r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),C=i+p.shift(),I=a+p.shift(),j=C+p.shift(),A=I+p.shift(),O=j+p.shift(),N=A+p.shift(),Math.abs(O-y)>Math.abs(N-v)?y=O+p.shift():v=N+p.shift(),h.curveTo(r,o,i,a,C,I),h.curveTo(j,A,O,N,y,v);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+P),p.length=0}break;case 14:0<p.length&&!m&&(b=p.shift()+d,m=!0),g&&(h.closePath(),g=!1);break;case 19:case 20:w(),R+=f+7>>3;break;case 21:2<p.length&&!m&&(b=p.shift()+d,m=!0),v+=p.pop(),x(y+=p.pop(),v);break;case 22:1<p.length&&!m&&(b=p.shift()+d,m=!0),x(y+=p.pop(),v);break;case 24:for(;2<p.length;)r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a+p.shift(),h.curveTo(r,o,i,a,y,v);y+=p.shift(),v+=p.shift(),h.lineTo(y,v);break;case 25:for(;6<p.length;)y+=p.shift(),v+=p.shift(),h.lineTo(y,v);r=y+p.shift(),o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a+p.shift(),h.curveTo(r,o,i,a,y,v);break;case 26:for(p.length%2&&(y+=p.shift());0<p.length;)r=y,o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i,v=a+p.shift(),h.curveTo(r,o,i,a,y,v);break;case 27:for(p.length%2&&(v+=p.shift());0<p.length;)r=y+p.shift(),o=v,i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a,h.curveTo(r,o,i,a,y,v);break;case 28:u=s[R],S=s[R+1],p.push((u<<24|S<<16)>>16),R+=2;break;case 29:T=p.pop()+e.gsubrsBias,(E=e.gsubrs[T])&&n(E);break;case 30:for(;0<p.length&&(r=y,o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a+(1===p.length?p.shift():0),h.curveTo(r,o,i,a,y,v),0!==p.length);)r=y+p.shift(),o=v,i=r+p.shift(),a=o+p.shift(),v=a+p.shift(),y=i+(1===p.length?p.shift():0),h.curveTo(r,o,i,a,y,v);break;case 31:for(;0<p.length&&(r=y+p.shift(),o=v,i=r+p.shift(),a=o+p.shift(),v=a+p.shift(),y=i+(1===p.length?p.shift():0),h.curveTo(r,o,i,a,y,v),0!==p.length);)r=y,o=v+p.shift(),i=r+p.shift(),a=o+p.shift(),y=i+p.shift(),v=a+(1===p.length?p.shift():0),h.curveTo(r,o,i,a,y,v);break;default:P<32?console.log("Glyph "+t.index+": unknown operator "+P):P<247?p.push(P-139):P<251?(u=s[R],R+=1,p.push(256*(P-247)+u+108)):P<255?(u=s[R],R+=1,p.push(256*-(P-251)-u-108)):(u=s[R],S=s[R+1],_=s[R+2],k=s[R+3],R+=4,p.push((u<<24|S<<16|_<<8|k)/65536))}}}(n),t.advanceWidth=b,h}function Ie(e,t){var n,r=oe.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+oe.length:(n=oe.length+t.length,t.push(e)),n}function je(e,t,n){for(var r={},o=0;o<e.length;o+=1){var i=e[o],a=t[i.name];void 0===a||function e(t,n){if(t===n)return 1;if(Array.isArray(t)&&Array.isArray(n)&&t.length===n.length){for(var r=0;r<t.length;r+=1)if(!e(t[r],n[r]))return;return 1}}(a,i.value)||("SID"===i.type&&(a=Ie(a,n)),r[i.op]={name:i.name,type:i.type,value:a})}return r}function Ae(e,t){var n=new Y.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=je(_e,e,t),n}function Oe(e){var t=new Y.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}var Ne=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.fontRevision=Math.round(1e3*e.parseFixed())/1e3,n.checkSumAdjustment=e.parseULong(),n.magicNumber=e.parseULong(),A.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=e.parseUShort(),n.unitsPerEm=e.parseUShort(),n.created=e.parseLongDateTime(),n.modified=e.parseLongDateTime(),n.xMin=e.parseShort(),n.yMin=e.parseShort(),n.xMax=e.parseShort(),n.yMax=e.parseShort(),n.macStyle=e.parseUShort(),n.lowestRecPPEM=e.parseUShort(),n.fontDirectionHint=e.parseShort(),n.indexToLocFormat=e.parseShort(),n.glyphDataFormat=e.parseShort(),n},Re=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.ascender=e.parseShort(),n.descender=e.parseShort(),n.lineGap=e.parseShort(),n.advanceWidthMax=e.parseUShort(),n.minLeftSideBearing=e.parseShort(),n.minRightSideBearing=e.parseShort(),n.xMaxExtent=e.parseShort(),n.caretSlopeRise=e.parseShort(),n.caretSlopeRun=e.parseShort(),n.caretOffset=e.parseShort(),e.relativeOffset+=8,n.metricDataFormat=e.parseShort(),n.numberOfHMetrics=e.parseUShort(),n},Pe=function(e,t){for(var n=new ne.Parser(e,t),r=n.parseULong(),o=(A.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1),n.parseULong()),i=[],a=0;a<o;a++){for(var s="",l=t+n.parseUShort(),c=n.parseUShort(),u=l;u<l+c;++u)s+=String.fromCharCode(e.getInt8(u));i.push(s)}return i},Me=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.numGlyphs=e.parseUShort(),1===n.version&&(n.maxPoints=e.parseUShort(),n.maxContours=e.parseUShort(),n.maxCompositePoints=e.parseUShort(),n.maxCompositeContours=e.parseUShort(),n.maxZones=e.parseUShort(),n.maxTwilightPoints=e.parseUShort(),n.maxStorage=e.parseUShort(),n.maxFunctionDefs=e.parseUShort(),n.maxInstructionDefs=e.parseUShort(),n.maxStackElements=e.parseUShort(),n.maxSizeOfInstructions=e.parseUShort(),n.maxComponentElements=e.parseUShort(),n.maxComponentDepth=e.parseUShort()),n},De=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Le={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Fe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Be={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Ue="utf-16",ze={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ve={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Ge(e,t,n){switch(e){case 0:return Ue;case 1:return Ve[n]||ze[t];case 3:if(1===t||10===t)return Ue}}function We(e){var t,n={};for(t in e)n[e[t]]=parseInt(t);return n}function He(e,t,n,r,o,i){return new Y.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:i}])}function qe(e,t){if((n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var o=0;o<r;o++)for(;o<r;o++){for(var i=0;i<n;i++)if(t[o+i]!==e[i])continue e;return o}return-1}(e,t))<0)for(var n=t.length,r=0,o=e.length;r<o;++r)t.push(e[r]);return n}var Xe=function(e,t){var n,r=[],o={},i=We(De);for(n in e){var a=i[n];if(void 0===a&&(a=n),h=parseInt(a),isNaN(h))throw new Error('Name table entry "'+n+'" does not exist, see nameTableNames for complete list.');o[h]=e[n],r.push(h)}for(var s=We(Le),l=We(Be),c=[],u=[],d=0;d<r.length;d++){var h,p,f=o[h=r[d]];for(p in f){var m=f[p],g=1,y=s[p],v=Fe[y],b=Ge(g,v,y),x=(void 0===(b=N.MACSTRING(m,b))&&(g=0,(y=t.indexOf(p))<0&&(y=t.length,t.push(p)),v=4,b=N.UTF16(m)),qe(b,u));void 0!==(c.push(He(g,v,y,h,b.length,x)),g=l[p])&&(y=qe(v=N.UTF16(m),u),c.push(He(3,1,g,h,v.length,y)))}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var w=new Y.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),S=0;S<c.length;S++)w.fields.push({name:"record_"+S,type:"RECORD",value:c[S]});return w.fields.push({name:"strings",type:"LITERAL",value:u}),w},Ye=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Ke=function(e,t){var n={},r=new ne.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var o=0;o<10;o++)n.panose[o]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},Ze=function(e){for(var t=0;t<Ye.length;t+=1){var n=Ye[t];if(e>=n.begin&&e<n.end)return t}return-1},Qe=function(e,t){var n={},r=new ne.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=se.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var o=0;o<n.numberOfGlyphs;o++)n.glyphNameIndex[o]=r.parseUShort();n.names=[];for(var i,a=0;a<n.numberOfGlyphs;a++)n.glyphNameIndex[a]>=se.length&&(i=r.parseChar(),n.names.push(r.parseString(i)));break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},Je=new Array(9),$e=(Je[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ee.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ee.coverage),substitute:this.parseOffset16List()}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},Je[2]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),sequences:this.parseListOfLists()}},Je[3]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),alternateSets:this.parseListOfLists()}},Je[4]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}},{sequenceIndex:ee.uShort,lookupListIndex:ee.uShort});Je[5]=function(){var e,t,n=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{substFormat:r,coverage:this.parsePointer(ee.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,$e)}}))}:2===r?{substFormat:r,coverage:this.parsePointer(ee.coverage),classDef:this.parsePointer(ee.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,$e)}}))}:3===r?(e=this.parseUShort(),t=this.parseUShort(),{substFormat:r,coverages:this.parseList(e,ee.pointer(ee.coverage)),lookupRecords:this.parseRecordList(t,$e)}):void A.assert(!1,"0x"+n.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Je[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ee.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList($e)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ee.coverage),backtrackClassDef:this.parsePointer(ee.classDef),inputClassDef:this.parsePointer(ee.classDef),lookaheadClassDef:this.parsePointer(ee.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList($e)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ee.pointer(ee.coverage)),inputCoverage:this.parseList(ee.pointer(ee.coverage)),lookaheadCoverage:this.parseList(ee.pointer(ee.coverage)),lookupRecords:this.parseRecordList($e)}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Je[7]=function(){var e=this.parseUShort(),t=(A.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1"),e=this.parseUShort(),new ee(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:e,extension:Je[e].call(t)}},Je[8]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),backtrackCoverage:this.parseList(ee.pointer(ee.coverage)),lookaheadCoverage:this.parseList(ee.pointer(ee.coverage)),substitutes:this.parseUShortList()}};var et=new Array(9);function tt(e){return Math.log(e)/Math.log(2)|0}function nt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function rt(e,t,n,r){return new Y.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function ot(e){for(var t=new Y.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),n=(t.tables=e,t.numTables=e.length,Math.pow(2,tt(t.numTables))),r=(t.searchRange=16*n,t.entrySelector=tt(n),t.rangeShift=16*t.numTables-t.searchRange,[]),o=[],i=t.sizeOf()+rt().sizeOf()*t.numTables;i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a],l=(A.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid."),s.sizeOf()),c=rt(s.tableName,nt(s.encode()),i,l);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),o.push({name:s.tableName+" table",type:"RECORD",value:s}),i+=l,A.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(o),t}function it(e,t,n){for(var r=0;r<t.length;r+=1){var o=e.charToGlyphIndex(t[r]);if(0<o)return e.glyphs.get(o).getMetrics()}return n}et[1]=function(e){return 1===e.substFormat?new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.ushortList("substitute",e.substitute)))},et[3]=function(e){return A.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.tableList("altSet",e.alternateSets,(function(e){return new Y.Table("alternateSetTable",Y.ushortList("alternate",e))}))))},et[4]=function(e){return A.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.tableList("ligSet",e.ligatureSets,(function(e){return new Y.Table("ligatureSetTable",Y.tableList("ligature",e,(function(e){return new Y.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Y.ushortList("component",e.components,e.components.length+1)))})))}))))};var at=function(e){for(var t,n=[],r=[],o=[],i=[],a=[],s=[],l=[],c=0,u=0,d=0,h=0,p=0,f=0;f<e.glyphs.length;f+=1){var m=e.glyphs.get(f),g=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+f+"): advanceWidth is not a number.");if((g<t||void 0===t)&&0<g&&(t=g),c<g&&(c=g),(g=Ze(g))<32)u|=1<<g;else if(g<64)d|=1<<g-32;else if(g<96)h|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<g-96}".notdef"!==m.name&&(g=m.getMetrics(),n.push(g.xMin),r.push(g.yMin),o.push(g.xMax),i.push(g.yMax),s.push(g.leftSideBearing),l.push(g.rightSideBearing),a.push(m.advanceWidth))}var y,v={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)},b=(v.ascender=e.ascender,v.descender=e.descender,function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new Y.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}({flags:3,unitsPerEm:e.unitsPerEm,xMin:v.xMin,yMin:v.yMin,xMax:v.xMax,yMax:v.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp})),x=function(e){return new Y.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}({ascender:v.ascender,descender:v.descender,advanceWidthMax:v.advanceWidthMax,minLeftSideBearing:v.minLeftSideBearing,minRightSideBearing:v.minRightSideBearing,xMaxExtent:v.maxLeftSideBearing+(v.xMax-v.xMin),numberOfHMetrics:e.glyphs.length}),w=function(e){return new Y.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}(e.glyphs.length),S=function(e){return new Y.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}({xAvgCharWidth:Math.round(v.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:d,ulUnicodeRange3:h,ulUnicodeRange4:p,fsSelection:e.tables.os2.fsSelection,sTypoAscender:v.ascender,sTypoDescender:v.descender,sTypoLineGap:0,usWinAscent:v.yMax,usWinDescent:Math.abs(v.yMin),ulCodePageRange1:1,sxHeight:it(e,"xyvw",{yMax:Math.round(v.ascender/2)}).yMax,sCapHeight:it(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",v).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),_=function(e){for(var t=new Y.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=(o=e.get(n)).advanceWidth||0,o=o.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}(e.glyphs),k=function(e){for(var t=!0,n=e.length-1;0<n;--n)if(65535<e.get(n).unicode){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}var r,o,i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}],a=(i=(i=t?i:i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Y.Table("cmap",i));for(a.segments=[],n=0;n<e.length;n+=1){for(var s=e.get(n),l=0;l<s.unicodes.length;l+=1)r=s.unicodes[l],o=n,a.segments.push({end:r,start:r,delta:-(r-o),offset:0,glyphIndex:o});a.segments=a.segments.sort((function(e,t){return e.start-t.start}))}a.segments.push({end:65535,start:65535,delta:1,offset:0});var c=a.segments.length,u=0,d=[],h=[],p=[],f=[],m=[],g=[];for(n=0;n<c;n+=1){var y=a.segments[n];y.end<=65535&&y.start<=65535?(d=d.concat({name:"end_"+n,type:"USHORT",value:y.end}),h=h.concat({name:"start_"+n,type:"USHORT",value:y.start}),p=p.concat({name:"idDelta_"+n,type:"SHORT",value:y.delta}),f=f.concat({name:"idRangeOffset_"+n,type:"USHORT",value:y.offset}),void 0!==y.glyphId&&(m=m.concat({name:"glyph_"+n,type:"USHORT",value:y.glyphId}))):u+=1,t||void 0===y.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+n,type:"ULONG",value:y.start})).concat({name:"cmap12End_"+n,type:"ULONG",value:y.end})).concat({name:"cmap12Glyph_"+n,type:"ULONG",value:y.glyphIndex}))}return a.segCountX2=2*(c-u),a.searchRange=2*Math.pow(2,Math.floor(Math.log(c-u)/Math.log(2))),a.entrySelector=Math.log(a.searchRange/2)/Math.log(2),a.rangeShift=a.segCountX2-a.searchRange,a.fields=a.fields.concat(d),a.fields.push({name:"reservedPad",type:"USHORT",value:0}),a.fields=a.fields.concat(h),a.fields=a.fields.concat(p),a.fields=a.fields.concat(f),a.fields=a.fields.concat(m),a.cmap4Length=14+2*d.length+2+2*h.length+2*p.length+2*f.length+2*m.length,t||(i=16+4*g.length,a.cmap12Offset=20+a.cmap4Length,a.fields=a.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:i},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),a.fields=a.fields.concat(g)),a}(e.glyphs),T=(O=e.getEnglishName("fontFamily"))+" "+(N=e.getEnglishName("fontSubfamily")),E=(E=e.getEnglishName("postScriptName"))||O.replace(/\s/g,"")+"-"+N,C={};for(y in e.names)C[y]=e.names[y];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+T}),C.postScriptName||(C.postScriptName={en:E}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);var I=Xe(C,j=[]),j=0<j.length?function(e){for(var t=new Y.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,o=0;o<e.length;++o){var i=n.indexOf(e[o]);i<0&&(i=n.length,n+=e[o]),t.fields.push({name:"offset "+o,type:"USHORT",value:r+i}),t.fields.push({name:"length "+o,type:"USHORT",value:e[o].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}(j):void 0,A=new Y.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}]),O=(T=function(e,t){for(var n,r=new Y.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),o=1/t.unitsPerEm,i=(o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[o,0,0,o,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),a=1;a<e.length;a+=1)n=e.get(a),i.push(n.name);var s,l,c=[],u=(r.header=new Y.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new Y.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]),t=Ae(o,c),r.topDictIndex=Oe(t),r.globalSubrIndex=new Y.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new Y.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var o=Ie(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:o})}return n}(i,c),r.charStringsIndex=function(e){for(var t=new Y.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),o=function(e){for(var t=[],n=e.path,r=(t.push({name:"width",type:"NUMBER",value:e.advanceWidth}),0),o=0,i=0;i<n.commands.length;i+=1){var a,s,l,c,u=void 0,d=void 0,h=n.commands[i];"M"===(h="Q"===h.type?{type:"C",x:h.x,y:h.y,x1:1/3*r+2/3*h.x1,y1:1/3*o+2/3*h.y1,x2:1/3*h.x+2/3*h.x1,y2:1/3*h.y+2/3*h.y1}:h).type?(u=Math.round(h.x-r),d=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(h.x),o=Math.round(h.y)):"L"===h.type?(u=Math.round(h.x-r),d=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(h.x),o=Math.round(h.y)):"C"===h.type&&(a=Math.round(h.x1-r),s=Math.round(h.y1-o),l=Math.round(h.x2-h.x1),c=Math.round(h.y2-h.y1),u=Math.round(h.x-h.x2),d=Math.round(h.y-h.y2),t.push({name:"dx1",type:"NUMBER",value:a}),t.push({name:"dy1",type:"NUMBER",value:s}),t.push({name:"dx2",type:"NUMBER",value:l}),t.push({name:"dy2",type:"NUMBER",value:c}),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(h.x),o=Math.round(h.y))}return t.push({name:"endchar",type:"OP",value:14}),t}(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:o})}return t}(e),r.privateDict=(u={},s=c,(l=new Y.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=je(ke,u,s),l),r.stringIndex=function(e){var t=new Y.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(c),r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf());return o.charset=u,o.encoding=0,o.charStrings=o.charset+r.charsets.sizeOf(),o.private[1]=o.charStrings+r.charStringsIndex.sizeOf(),t=Ae(o,c),r.topDictIndex=Oe(t),r}(e.glyphs,{version:e.getEnglishName("version"),fullName:T,familyName:O,weightName:N,postScriptName:E,unitsPerEm:e.unitsPerEm,fontBBox:[0,v.yMin,v.ascender,v.advanceWidthMax]}),e.metas&&0<Object.keys(e.metas).length?function(e){var t,n=Object.keys(e).length,r="",o=16+12*n,i=new Y.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:o},{name:"numTags",type:"ULONG",value:n}]);for(t in e){var a=r.length;r+=e[t],i.fields.push({name:"tag "+t,type:"TAG",value:t}),i.fields.push({name:"offset "+t,type:"ULONG",value:o+a}),i.fields.push({name:"length "+t,type:"ULONG",value:e[t].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),i}(e.metas):void 0),N=[b,x,w,S,I,k,A,T,_];j&&N.push(j),e.tables.gsub&&N.push(function(e){return new Y.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Y.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Y.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Y.LookupList(e.lookups,et)}])}(e.tables.gsub)),O&&N.push(O);for(var R=nt((E=ot(N)).encode()),P=E.fields,M=!1,D=0;D<P.length;D+=1)if("head table"===P[D].name){P[D].value.checkSumAdjustment=2981146554-R,M=!0;break}if(M)return E;throw new Error("Could not find head table with checkSum to adjust.")};function st(e,t){for(var n=0,r=e.length-1;n<=r;){var o=n+r>>>1,i=e[o].tag;if(i===t)return o;i<t?n=1+o:r=o-1}return-n-1}function lt(e,t){for(var n=0,r=e.length-1;n<=r;){var o=n+r>>>1,i=e[o];if(i===t)return o;i<t?n=1+o:r=o-1}return-n-1}function ct(e,t){for(var n=0,r=e.length-1;n<=r;){var o,i=n+r>>>1,a=(o=e[i]).start;if(a===t)return o;a<t?n=1+i:r=i-1}if(0<n)return t>(o=e[n-1]).end?0:o}function ut(e,t){this.font=e,this.tableName=t}function dt(e){ut.call(this,e,"gpos")}function ht(e){ut.call(this,e,"gsub")}function pt(e,t,n){for(var r=e.subtables,o=0;o<r.length;o++){var i=r[o];if(i.substFormat===t)return i}if(n)return r.push(n),n}function ft(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function mt(e,t){if(!e)throw t}function gt(e,t,n,r,o){var i=0<(t&r)?(i=e.parseByte(),n+(i=0==(t&o)?-i:i)):0<(t&o)?n:n+e.parseShort();return i}function yt(e,t,n){var r,o=new ne.Parser(t,n);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),0<e.numberOfContours){for(var i=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)i.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var s=0;s<e.instructionLength;s+=1)e.instructions.push(o.parseByte());for(var l=i[i.length-1]+1,c=[],u=0;u<l;u+=1)if(r=o.parseByte(),c.push(r),0<(8&r))for(var d=o.parseByte(),h=0;h<d;h+=1)c.push(r),u+=1;if(A.argument(c.length===l,"Bad flags."),0<i.length){var p,f=[];if(0<l){for(var m=0;m<l;m+=1)r=c[m],(p={}).onCurve=!!(1&r),p.lastPointOfContour=0<=i.indexOf(m),f.push(p);for(var g=0,y=0;y<l;y+=1)r=c[y],(p=f[y]).x=gt(o,r,g,2,16),g=p.x;for(var v=0,b=0;b<l;b+=1)r=c[b],(p=f[b]).y=gt(o,r,v,4,32),v=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){c=o.parseUShort();var w={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&c)?0<(2&c)?(w.dx=o.parseShort(),w.dy=o.parseShort()):w.matchedPoints=[o.parseUShort(),o.parseUShort()]:0<(2&c)?(w.dx=o.parseChar(),w.dy=o.parseChar()):w.matchedPoints=[o.parseByte(),o.parseByte()],0<(8&c)?w.xScale=w.yScale=o.parseF2Dot14():0<(64&c)?(w.xScale=o.parseF2Dot14(),w.yScale=o.parseF2Dot14()):0<(128&c)&&(w.xScale=o.parseF2Dot14(),w.scale01=o.parseF2Dot14(),w.scale10=o.parseF2Dot14(),w.yScale=o.parseF2Dot14()),e.components.push(w),x=!!(32&c)}if(256&c){e.instructionLength=o.parseUShort(),e.instructions=[];for(var S=0;S<e.instructionLength;S+=1)e.instructions.push(o.parseByte())}}}function vt(e,t){for(var n=[],r=0;r<e.length;r+=1){var o=e[r];o={x:t.xScale*o.x+t.scale01*o.y+t.dx,y:t.scale10*o.x+t.yScale*o.y+t.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour},n.push(o)}return n}function bt(e){var t=new C;if(e)for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var o=e[r];n.push(o),o.lastPointOfContour&&(t.push(n),n=[])}return A.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var o,i=n[r],a=i[i.length-1],s=i[0];a.onCurve?t.moveTo(a.x,a.y):s.onCurve?t.moveTo(s.x,s.y):(o={x:.5*(a.x+s.x),y:.5*(a.y+s.y)},t.moveTo(o.x,o.y));for(var l=0;l<i.length;++l){var c,u=a;a=s,s=i[(l+1)%i.length],a.onCurve?t.lineTo(a.x,a.y):(c=s,u.onCurve||(a.x,u.x,a.y,u.y),s.onCurve||(c={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,c.x,c.y))}t.closePath()}return t}function xt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],o=e.get(r.glyphIndex);if(o.getPath(),o.points){var i=void 0;if(void 0===r.matchedPoints)i=vt(o.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[r.matchedPoints[0]],s=vt([s=o.points[r.matchedPoints[1]]],r={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0})[0];r.dx=a.x-s.x,r.dy=a.y-s.y,i=vt(o.points,r)}t.points=t.points.concat(i)}}return bt(t.points)}(dt.prototype=ut.prototype={searchTag:st,binSearch:lt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e?this.font.tables[this.tableName]=this.createDefaultTable():t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n,r=this.getTable(t);if(r)return n=r.scripts,0<=(r=st(r.scripts,e=e||"DFLT"))?n[r].script:t?(n.splice(-1-r,0,t={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),t.script):void 0},getLangSysTable:function(e,t,n){var r;if(e=this.getScriptTable(e,n))return t&&"dflt"!==t&&"DFLT"!==t?0<=(r=st(e.langSysRecords,t))?e.langSysRecords[r].langSys:n?(e.langSysRecords.splice(-1-r,0,n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),n.langSys):void 0:e.defaultLangSys},getFeatureTable:function(e,t,n,r){if(e=this.getLangSysTable(e,t,r)){for(var o,i=e.featureIndexes,a=this.font.tables[this.tableName].features,s=0;s<i.length;s++)if((o=a[i[s]]).tag===n)return o.feature;if(r)return t=a.length,A.assert(0===t||n>=a[t-1].tag,"Features must be added in alphabetical order."),a.push(o={tag:n,feature:{params:0,lookupListIndexes:[]}}),i.push(t),o.feature}},getLookupTables:function(e,t,n,r,o){var i=[];if(e=this.getFeatureTable(e,t,n,o)){for(var a,s=e.lookupListIndexes,l=this.font.tables[this.tableName].lookups,c=0;c<s.length;c++)(a=l[s[c]]).lookupType===r&&i.push(a);if(0===i.length&&o)return t=l.length,l.push(a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0}),s.push(t),[a]}return i},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=ct(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=lt(e.glyphs,t);return 0<=n?n:-1;case 2:return(n=ct(e.ranges,t))?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var o=n[r],i=o.start,a=o.end,s=i;s<=a;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},dt.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var o=e[r].subtables,i=0;i<o.length;i++){var a=o[i],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===n)return u.value1&&u.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(a.classDef1,t),h=this.getGlyphClass(a.classDef2,n);return(d=a.classRecords[d][h]).value1&&d.value1.xAdvance||0}}return 0},dt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(ht.prototype=ut.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ht.prototype.getSingle=function(e,t,n){for(var r=[],o=this.getLookupTables(t,n,e,1),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++){var l=a[s],c=this.expandCoverage(l.coverage),u=void 0;if(1===l.substFormat){var d=l.deltaGlyphId;for(u=0;u<c.length;u++){var h=c[u];r.push({sub:h,by:h+d})}}else{var p=l.substitute;for(u=0;u<c.length;u++)r.push({sub:c[u],by:p[u]})}}return r},ht.prototype.getAlternates=function(e,t,n){for(var r=[],o=this.getLookupTables(t,n,e,3),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.alternateSets,d=0;d<c.length;d++)r.push({sub:c[d],by:u[d]});return r},ht.prototype.getLigatures=function(e,t,n){for(var r=[],o=this.getLookupTables(t,n,e,4),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.ligatureSets,d=0;d<c.length;d++)for(var h=c[d],p=u[d],f=0;f<p.length;f++){var m=p[f];r.push({sub:[h].concat(m.components),by:m.ligGlyph})}return r},ht.prototype.addSingle=function(e,t,n,r){n=pt(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),A.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.substitute.splice(e,0,0)),n.substitute[e]=t.by},ht.prototype.addAlternate=function(e,t,n,r){n=pt(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),A.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.alternateSets.splice(e,0,0)),n.alternateSets[e]=t.by},ht.prototype.addLigature=function(e,t,n,r){(r=(n=this.getLookupTables(n,r,e,4,!0)[0]).subtables[0])||(n.subtables[0]=r={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),A.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format),e=t.sub[0];var o=t.sub.slice(1);if(n={ligGlyph:t.by,components:o},0<=(t=this.binSearch(r.coverage.glyphs,e))){for(var i=r.ligatureSets[t],a=0;a<i.length;a++)if(function(e,t){var n=e.length;if(n===t.length){for(var r=0;r<n;r++)if(e[r]!==t[r])return;return 1}}(i[a].components,o))return;i.push(n)}else r.coverage.glyphs.splice(t=-1-t,0,e),r.ligatureSets.splice(t,0,[n])},ht.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},ht.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var wt={getPath:bt,parse:function(e,t,n,r){for(var o=new ge.GlyphSet(r),i=0;i<n.length-1;i+=1){var a=n[i];a!==n[i+1]?o.push(i,ge.ttfGlyphLoader(r,i,yt,e,t+a,xt)):o.push(i,ge.glyphLoader(r,i))}return o}};function St(e){this.font=e,this.getCommands=function(e){return wt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function _t(e){return e}function kt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Tt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Et(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ct(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function It(e){return Math.sign(e)*Math.floor(Math.abs(e))}function jt(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var At={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var o,i,a,s,l,c,u;if(!r||r===this)return o=e.xo-t.xo,i=e.xo-n.xo,l=t.x-t.xo,c=n.x-n.xo,0===(u=(a=Math.abs(o))+(s=Math.abs(i)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*a)/u);o=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(u=(a=Math.abs(o))+(s=Math.abs(i)))?At.setRelative(e,e,(l+c)/2,r,!0):At.setRelative(e,e,(l*s+c*a)/u,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,o){var i,a;r&&r!==this?(i=o?t.xo:t.x,a=o?t.yo:t.y,i+=n*r.x,a+=n*r.y,e.x=i+(e.y-a)/r.normalSlope):e.x=(o?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Ot={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var o,i,a,s,l,c,u;if(!r||r===this)return o=e.yo-t.yo,i=e.yo-n.yo,l=t.y-t.yo,c=n.y-n.yo,0===(u=(a=Math.abs(o))+(s=Math.abs(i)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*a)/u);o=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(u=(a=Math.abs(o))+(s=Math.abs(i)))?Ot.setRelative(e,e,(l+c)/2,r,!0):Ot.setRelative(e,e,(l*s+c*a)/u,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,o){var i,a;r&&r!==this?(i=o?t.xo:t.x,a=o?t.yo:t.y,i+=n*r.x,a+=n*r.y,e.y=a+r.normalSlope*(e.x-i)):e.y=(o?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Nt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Rt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?At:0===e&&1===t?Ot:new Nt(e,t)}function Pt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(At),Object.freeze(Ot),Nt.prototype.distance=function(e,t,n,r){return this.x*At.distance(e,t,n,r)+this.y*Ot.distance(e,t,n,r)},Nt.prototype.interpolate=function(e,t,n,r){var o=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),a=(t=r.distance(t,t,!1,!0),n=r.distance(n,n,!1,!0),(o=Math.abs(o))+(i=Math.abs(i)));0===a?this.setRelative(e,e,(t+n)/2,r,!0):this.setRelative(e,e,(t*i+n*o)/a,r,!0)},Nt.prototype.setRelative=function(e,t,n,r,o){var i=o?t.xo:t.x,a=(o=o?t.yo:t.y,t=i+n*(r=r||this).x,i=o+n*r.y,o=r.normalSlope,n=this.slope,r=e.x,e.y);e.x=(n*r-o*t+i-a)/(n-o),e.y=n*(e.x-r)+a},Nt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Pt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Pt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Mt=Object.freeze(new Pt(0,0)),Dt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Lt(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=At,this.round=kt}}function Ft(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Pt(0,0)}function Bt(e,t){var n,r=e.prog,o=e.ip,i=1;do{if(88===(n=r[++o]))i++;else if(89===n)i--;else if(64===n)o+=r[o+1]+1;else if(65===n)o+=2*r[o+1]+1;else if(176<=n&&n<=183)o+=n-176+1;else if(184<=n&&n<=191)o+=2*(n-184+1);else if(t&&1===i&&27===n)break}while(0<i);e.ip=o}function Ut(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function zt(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function Vt(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function Gt(e,n){var r,o=(i=n.stack).pop(),i=i.pop(),a=n.z2[o],s=n.z1[i];t.DEBUG&&console.log("SPVTL["+e+"]",o,i),o=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.pv=n.dpv=Rt(r,o)}function Wt(e,n){var r,o=(i=n.stack).pop(),i=i.pop(),a=n.z2[o],s=n.z1[i];t.DEBUG&&console.log("SFVTL["+e+"]",o,i),o=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.fv=Rt(r,o)}function Ht(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function qt(e,n){var r=n.stack.pop(),o=n.z0[r],i=n.fv,a=n.pv,s=(t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r),a.distance(o,Mt));e&&(s=n.round(s)),i.setRelative(o,Mt,s,a),i.touch(o),n.rp0=n.rp1=r}function Xt(e,n){var r,o,i,a=n.z2,s=a.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)r=a[l],e.touched(r)||(o=r.prevTouched(e))!==r&&(o===(i=r.nextTouched(e))&&e.setRelative(r,r,e.distance(o,o,!1,!0),e,!0),e.interpolate(r,o,i,e))}function Yt(e,n){for(var r=n.stack,o=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[o],a=n.fv,s=n.pv,l=n.loop,c=n.z2;l--;){var u=r.pop(),d=c[u],h=s.distance(i,i,!1,!0);a.setRelative(d,d,h,s),a.touch(d),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}n.loop=1}function Kt(e,n){for(var r=n.stack,o=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[o],a=n.fv,s=n.pv,l=(o=r.pop(),n.z2[n.contours[o]]),c=l,u=(t.DEBUG&&console.log(n.step,"SHC["+e+"]",o),s.distance(i,i,!1,!0));c!==i&&a.setRelative(c,c,u,s),(c=c.nextPointOnContour)!==l;);}function Zt(e,n){var r,o,i=n.stack,a=e?n.rp1:n.rp2,s=(a=(e?n.z0:n.z1)[a],n.fv),l=n.pv;switch(i=i.pop(),t.DEBUG&&console.log(n.step,"SHZ["+e+"]",i),i){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var c=l.distance(a,a,!1,!0),u=r.length-2,d=0;d<u;d++)o=r[d],s.setRelative(o,o,c,l)}function Qt(e,n){var r=(o=n.stack).pop()/64,o=o.pop(),i=n.z1[o],a=n.z0[n.rp0],s=n.fv,l=n.pv;s.setRelative(i,a,r,l),s.touch(i),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",r,o),n.rp1=n.rp0,n.rp2=o,e&&(n.rp0=o)}function Jt(e,n){var r=(o=n.stack).pop(),o=o.pop(),i=n.z0[o],a=n.fv,s=n.pv,l=n.cvt[r];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",r,"(",l,")",o),r=s.distance(i,Mt),e&&(Math.abs(r-l)<n.cvCutIn&&(r=l),r=n.round(r)),a.setRelative(i,Mt,r,s),0===n.zp0&&(i.xo=i.x,i.yo=i.y),a.touch(i),n.rp0=n.rp1=o}function $t(e,n){var r=n.stack,o=r.pop(),i=n.z2[o];t.DEBUG&&console.log(n.step,"GC["+e+"]",o),r.push(64*n.dpv.distance(i,Mt,e,!1))}function en(e,n){var r=(o=n.stack).pop(),o=o.pop(),i=n.z1[r],a=n.z0[o];a=n.dpv.distance(a,i,e,e),t.DEBUG&&console.log(n.step,"MD["+e+"]",r,o,"->",a),n.stack.push(Math.round(64*a))}function tn(e,n){var r=n.stack,o=r.pop(),i=n.fv,a=n.pv,s=n.ppem,l=n.deltaBase+16*(e-1),c=n.deltaShift,u=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",o,r);for(var d=0;d<o;d++){var h=r.pop(),p=r.pop();l+((240&p)>>4)===s&&(0<=(p=(15&p)-8)&&p++,t.DEBUG&&console.log(n.step,"DELTAPFIX",h,"by",p*c),h=u[h],i.setRelative(h,h,p*c,a))}}function nn(e,n){var r=n.stack,o=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(o/64))}function rn(e,n){var r=n.stack,o=r.pop(),i=n.ppem,a=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",o,r);for(var l=0;l<o;l++){var c=r.pop(),u=r.pop();a+((240&u)>>4)===i&&(0<=(u=(15&u)-8)&&u++,u*=s,t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",u),n.cvt[c]+=u)}}function on(e,n){var r,o=(i=n.stack).pop(),i=i.pop(),a=n.z2[o],s=n.z1[i];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",o,i),o=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.dpv=Rt(r,o)}function an(e,n){var r=n.stack,o=n.prog,i=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)r.push(o[++i]);n.ip=i}function sn(e,n){var r=n.ip,o=n.prog,i=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=o[++r]<<8|o[++r];32768&s&&(s=-(1+(65535^s))),i.push(s)}n.ip=r}function ln(e,n,r,o,i,a){var s,l,c=a.stack,u=e&&c.pop(),d=(c=c.pop(),a.rp0),h=(d=a.z0[d],a.z1[c]),p=a.minDis,f=a.fv,m=a.dpv,g=s=m.distance(h,d,!0,!0),y=0<=g?1:-1;g=Math.abs(g),e&&(l=a.cvt[u],o&&Math.abs(g-l)<a.cvCutIn&&(g=l)),r&&g<p&&(g=p),o&&(g=a.round(g)),f.setRelative(h,d,y*g,m),f.touch(h),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(o?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?u+"("+a.cvt[u]+","+l+")":"",c,"(d =",s,"->",y*g,")"),a.rp1=a.rp0,a.rp2=c,n&&(a.rp0=c)}St.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,o=this._prepState;if(!o||o.ppem!==n){var i=this._fpgmState;if(!i){Lt.prototype=Dt,(i=this._fpgmState=new Lt("fpgm",r.tables.fpgm)).funcs=[],i.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{dn(i)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Lt.prototype=i,(o=this._prepState=new Lt("prep",r.tables.prep)).ppem=n;var a=r.tables.cvt;if(a)for(var s=o.cvt=new Array(a.length),l=n/r.unitsPerEm,c=0;c<a.length;c++)s[c]=a[c]*l;else o.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),o.step=-1);try{dn(o)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return cn(e,o)}catch(e){this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var cn=function(e,n){var r=n.ppem/n.font.unitsPerEm,o=r,i=e.components;if(Lt.prototype=n,i){for(var a=n.font,s=[],l=[],c=0;c<i.length;c++){var u=i[c],d=a.glyphs.get(u.glyphIndex),h=new Lt("glyf",d.instructions);t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),h.step=-1),un(d,h,r,o);for(var p=Math.round(u.dx*r),f=Math.round(u.dy*o),m=h.gZone,g=h.contours,y=0;y<m.length;y++){var v=m[y];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+p,v.yo=v.y=v.y+f}var b=s.length;s.push.apply(s,m);for(var x=0;x<g.length;x++)l.push(g[x]+b)}e.instructions&&!h.inhibitGridFit&&((h=new Lt("glyf",e.instructions)).gZone=h.z0=h.z1=h.z2=s,h.contours=l,s.push(new Pt(0,0),new Pt(Math.round(e.advanceWidth*r),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),h.step=-1),dn(h),s.length-=2)}else h=new Lt("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),h.step=-1),un(e,h,r,o),s=h.gZone;return s},un=function(e,n,r,o){for(var i,a,s,l=e.points||[],c=l.length,u=n.gZone=n.z0=n.z1=n.z2=[],d=n.contours=[],h=0;h<c;h++)i=l[h],u[h]=new Pt(i.x*r,i.y*o,i.lastPointOfContour,i.onCurve);for(var p=0;p<c;p++)i=u[p],a||(a=i,d.push(p)),i.lastPointOfContour?((i.nextPointOnContour=a).prevPointOnContour=i,a=void 0):(s=u[p+1],(i.nextPointOnContour=s).prevPointOnContour=i);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var f=0;f<c;f++)console.log(f,u[f].x,u[f].y)}if(u.push(new Pt(0,0),new Pt(Math.round(e.advanceWidth*r),0)),dn(n),u.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var m=0;m<c;m++)console.log(m,u[m].x,u[m].y)}}},dn=function(e){var n=e.prog;if(n){var r,o=n.length;for(e.ip=0;e.ip<o;e.ip++){if(t.DEBUG&&e.step++,!(r=hn[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},hn=[Ut.bind(void 0,Ot),Ut.bind(void 0,At),zt.bind(void 0,Ot),zt.bind(void 0,At),Vt.bind(void 0,Ot),Vt.bind(void 0,At),Gt.bind(void 0,0),Gt.bind(void 0,1),Wt.bind(void 0,0),Wt.bind(void 0,1),function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=Rt(r,n)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=Rt(r,n)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=(a=e.stack).pop(),r=a.pop(),o=a.pop(),i=a.pop(),a=a.pop(),s=e.z0,l=e.z1,c=s[n],u=(s=s[r],l[o]),d=(l=l[i],e=e.z2[a],t.DEBUG&&console.log("ISECT[], ",n,r,o,i,a),n=c.x,r=c.y,o=s.x,i=s.y,a=u.x,c=u.y,s=l.x,l=(n-o)*(c-(u=l.y))-(r-i)*(a-s),n*i-r*o),h=a*u-c*s;e.x=(d*(a-s)-h*(n-o))/l,e.y=(d*(c-u)-h*(r-i))/l},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||Ft(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||Ft(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||Ft(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n){case 0:e.tZone||Ft(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=kt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Et},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),Bt(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},Ht,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(o)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=(o=e.stack).pop(),r=o.pop(),o=(t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r),e.ip),i=e.prog;e.prog=e.funcs[n];for(var a=0;a<r;a++)dn(e),t.DEBUG&&console.log(++e.step,a+1<r?"next loopcall":"done loopcall",a);e.ip=o,e.prog=i},function(e){var n=e.stack.pop(),r=(t.DEBUG&&console.log(e.step,"CALL[]",n),e.ip),o=e.prog;e.prog=e.funcs[n],dn(e),e.ip=r,e.prog=o,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,o=e.ip,i=(n=n.pop(),o);for(t.DEBUG&&console.log(e.step,"FDEF[]",n);45!==r[++o];);e.ip=o,e.funcs[n]=r.slice(i+1,o)},void 0,qt.bind(void 0,0),qt.bind(void 0,1),Xt.bind(void 0,Ot),Xt.bind(void 0,At),Yt.bind(void 0,0),Yt.bind(void 0,1),Kt.bind(void 0,0),Kt.bind(void 0,1),Zt.bind(void 0,0),Zt.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,o=e.fv,i=n.pop()/64,a=e.z2;r--;){var s=n.pop(),l=a[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,i),o.setRelative(l,l,i),o.touch(l)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,o=e.rp2,i=e.loop,a=e.z0[r],s=e.z1[o],l=e.fv,c=e.dpv,u=e.z2;i--;){var d=n.pop(),h=u[d];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"IP[]",d,r,"<->",o),l.interpolate(h,a,s,c),l.touch(h)}e.loop=1},Qt.bind(void 0,0),Qt.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,o=e.z0[r],i=e.loop,a=e.fv,s=e.pv,l=e.z1;i--;){var c=n.pop(),u=l[c];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",c),a.setRelative(u,o,0,s),a.touch(u)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Tt},Jt.bind(void 0,0),Jt.bind(void 0,1),function(e){var n=e.prog,r=e.ip,o=e.stack,i=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var a=0;a<i;a++)o.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,o=e.stack,i=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var a=0;a<i;a++){var s=r[++n]<<8|r[++n];32768&s&&(s=-(1+(65535^s))),o.push(s)}e.ip=n},function(e){var n=e.stack,r=(r=e.store)||(e.store=[]),o=n.pop();n=n.pop(),t.DEBUG&&console.log(e.step,"WS",o,n),r[n]=o},function(e){var n=e.stack,r=e.store,o=n.pop();t.DEBUG&&console.log(e.step,"RS",o),e=r&&r[o]||0,n.push(e)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},$t.bind(void 0,0),$t.bind(void 0,1),void 0,en.bind(void 0,0),en.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,o),n.push(o<r?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,o),n.push(o<=r?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,o),n.push(r<o?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,o),n.push(r<=o?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,o),n.push(r===o?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,o),n.push(r!==o?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(Bt(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,o),n.push(r&&o?1:0)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,o),n.push(r||o?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},tn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,o),n.push(o+r)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,o),n.push(o-r)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,o),n.push(64*o/r)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,o),n.push(o*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},nn.bind(void 0,0),nn.bind(void 0,1),nn.bind(void 0,2),nn.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm},tn.bind(void 0,2),tn.bind(void 0,3),rn.bind(void 0,1),rn.bind(void 0,2),rn.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=jt,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e.srThreshold=0==(r&=15)?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=jt,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e.srThreshold=0==(r&=15)?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=_t},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ct},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=It},Ht,Ht,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},on.bind(void 0,0),on.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),o=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(o=35),32&r&&(o|=4096),n.push(o)},void 0,function(e){var n=e.stack,r=n.pop(),o=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(o),n.push(r),n.push(i)},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,o),n.push(Math.max(o,r))},function(e){var n=e.stack,r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,o),n.push(Math.min(o,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,an.bind(void 0,1),an.bind(void 0,2),an.bind(void 0,3),an.bind(void 0,4),an.bind(void 0,5),an.bind(void 0,6),an.bind(void 0,7),an.bind(void 0,8),sn.bind(void 0,1),sn.bind(void 0,2),sn.bind(void 0,3),sn.bind(void 0,4),sn.bind(void 0,5),sn.bind(void 0,6),sn.bind(void 0,7),sn.bind(void 0,8),ln.bind(void 0,0,0,0,0,0),ln.bind(void 0,0,0,0,0,1),ln.bind(void 0,0,0,0,0,2),ln.bind(void 0,0,0,0,0,3),ln.bind(void 0,0,0,0,1,0),ln.bind(void 0,0,0,0,1,1),ln.bind(void 0,0,0,0,1,2),ln.bind(void 0,0,0,0,1,3),ln.bind(void 0,0,0,1,0,0),ln.bind(void 0,0,0,1,0,1),ln.bind(void 0,0,0,1,0,2),ln.bind(void 0,0,0,1,0,3),ln.bind(void 0,0,0,1,1,0),ln.bind(void 0,0,0,1,1,1),ln.bind(void 0,0,0,1,1,2),ln.bind(void 0,0,0,1,1,3),ln.bind(void 0,0,1,0,0,0),ln.bind(void 0,0,1,0,0,1),ln.bind(void 0,0,1,0,0,2),ln.bind(void 0,0,1,0,0,3),ln.bind(void 0,0,1,0,1,0),ln.bind(void 0,0,1,0,1,1),ln.bind(void 0,0,1,0,1,2),ln.bind(void 0,0,1,0,1,3),ln.bind(void 0,0,1,1,0,0),ln.bind(void 0,0,1,1,0,1),ln.bind(void 0,0,1,1,0,2),ln.bind(void 0,0,1,1,0,3),ln.bind(void 0,0,1,1,1,0),ln.bind(void 0,0,1,1,1,1),ln.bind(void 0,0,1,1,1,2),ln.bind(void 0,0,1,1,1,3),ln.bind(void 0,1,0,0,0,0),ln.bind(void 0,1,0,0,0,1),ln.bind(void 0,1,0,0,0,2),ln.bind(void 0,1,0,0,0,3),ln.bind(void 0,1,0,0,1,0),ln.bind(void 0,1,0,0,1,1),ln.bind(void 0,1,0,0,1,2),ln.bind(void 0,1,0,0,1,3),ln.bind(void 0,1,0,1,0,0),ln.bind(void 0,1,0,1,0,1),ln.bind(void 0,1,0,1,0,2),ln.bind(void 0,1,0,1,0,3),ln.bind(void 0,1,0,1,1,0),ln.bind(void 0,1,0,1,1,1),ln.bind(void 0,1,0,1,1,2),ln.bind(void 0,1,0,1,1,3),ln.bind(void 0,1,1,0,0,0),ln.bind(void 0,1,1,0,0,1),ln.bind(void 0,1,1,0,0,2),ln.bind(void 0,1,1,0,0,3),ln.bind(void 0,1,1,0,1,0),ln.bind(void 0,1,1,0,1,1),ln.bind(void 0,1,1,0,1,2),ln.bind(void 0,1,1,0,1,3),ln.bind(void 0,1,1,1,0,0),ln.bind(void 0,1,1,1,0,1),ln.bind(void 0,1,1,1,0,2),ln.bind(void 0,1,1,1,0,3),ln.bind(void 0,1,1,1,1,0),ln.bind(void 0,1,1,1,1,1),ln.bind(void 0,1,1,1,1,2),ln.bind(void 0,1,1,1,1,3)],pn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function fn(e){(e=e||{}).empty||(mt(e.familyName,"When creating a new Font object, familyName is required."),mt(e.styleName,"When creating a new Font object, styleName is required."),mt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),mt(e.ascender,"When creating a new Font object, ascender is required."),mt(e.descender,"When creating a new Font object, descender is required."),mt(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ge.GlyphSet(this,e.glyphs||[]),this.encoding=new le(this),this.position=new dt(this),this.substitution=new ht(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new St(this):void 0)}})}fn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},fn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},fn.prototype.charToGlyph=function(e){return e=this.charToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},fn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=pn(e),r=[],o=0;o<n.length;o+=1){var i=n[o];r.push(this.charToGlyphIndex(i))}var a=r.length;if(t.features){e=t.script||this.substitution.getDefaultScriptName();var s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",e,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",e,t.language)));for(var l=0;l<a;l+=1)for(var c=0;c<s.length;c++){for(var u=s[c],d=u.sub,h=d.length,p=0;p<h&&d[p]===r[l+p];)p++;p===h&&(r.splice(l,h,u.by),a=a-h+1)}}for(var f=new Array(a),m=this.glyphs.get(0),g=0;g<a;g+=1)f[g]=this.glyphs.get(r[g])||m;return f},fn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},fn.prototype.nameToGlyph=function(e){return e=this.nameToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},fn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},fn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},fn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},fn.prototype.forEachGlyph=function(e,t,n,r,o,i){t=void 0!==t?t:0,n=void 0!==n?n:0,o=o||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*(r=void 0!==r?r:72),l=this.stringToGlyphs(e,o);o.kerning&&(e=o.script||this.position.getDefaultScriptName(),a=this.position.getKerningTables(e,o.language));for(var c=0;c<l.length;c+=1){var u=l[c];i.call(this,u,t,n,r,o),u.advanceWidth&&(t+=u.advanceWidth*s),o.kerning&&c<l.length-1&&(t+=(a?this.position.getKerningValue(a,u.index,l[c+1].index):this.getKerningValue(u,l[c+1]))*s),o.letterSpacing?t+=o.letterSpacing*r:o.tracking&&(t+=o.tracking/1e3*r)}return t},fn.prototype.getPath=function(e,t,n,r,o){var i=new C;return this.forEachGlyph(e,t,n,r,o,(function(e,t,n,r){e=e.getPath(t,n,r,o,this),i.extend(e)})),i},fn.prototype.getPaths=function(e,t,n,r,o){var i=[];return this.forEachGlyph(e,t,n,r,o,(function(e,t,n,r){e=e.getPath(t,n,r,o,this),i.push(e)})),i},fn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},fn.prototype.draw=function(e,t,n,r,o,i){this.getPath(t,n,r,o,i).draw(e)},fn.prototype.drawPoints=function(e,t,n,r,o,i){this.forEachGlyph(t,n,r,o,i,(function(t,n,r,o){t.drawPoints(e,n,r,o)}))},fn.prototype.drawMetrics=function(e,t,n,r,o,i){this.forEachGlyph(t,n,r,o,i,(function(t,n,r,o){t.drawMetrics(e,n,r,o)}))},fn.prototype.getEnglishName=function(e){if(e=this.names[e])return e.en},fn.prototype.validate=function(){var e=this;function t(t){(t=e.getEnglishName(t))&&t.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},fn.prototype.toTables=function(){return at(this)},fn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},fn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},fn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),o=this.getEnglishName("fontSubfamily"),i=(t=t||n.replace(/\s/g,"")+"-"+o+".otf",this.toArrayBuffer());"undefined"!=typeof window?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(i);n=new Blob([n],{type:"font/opentype"}),t.write(n),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}))):(n=e("fs"),o=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),o=0;o<t.length;++o)t[o]=n[o];return t}(i),n.writeFileSync(t,o))},fn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},fn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},fn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var mn=new Array(10);function gn(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,ft(t))}))}function yn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function vn(e,t){for(var n=[],r=12,o=0;o<t;o+=1){var i=ne.getTag(e,r),a=ne.getULong(e,r+4),s=ne.getULong(e,r+8),l=ne.getULong(e,r+12);n.push({tag:i,checksum:a,offset:s,length:l,compression:!1}),r+=16}return n}function bn(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};e=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2);var n=new Uint8Array(t.length);if(function(e,t){var n,r,o,i=new a(e,t);do{switch((r=i).bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7),o=1&r.tag,r.tag>>>=1,r=o,b(i,2,0)){case 0:n=function(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*e.source[e.sourceIndex+1]+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}(i);break;case 1:n=w(i,s,l);break;case 2:E=T=k=C=c=_=void 0;for(var c,u=i,d=i.ltree,h=i.dtree,g=b(u,5,257),y=b(u,5,1),S=b(u,4,4),_=0;_<19;++_)m[_]=0;for(_=0;_<S;++_){var k=b(u,3,0);m[p[_]]=k}for(v(f,m,0,19),c=0;c<g+y;){var T=x(u,f);switch(T){case 16:for(var E=m[c-1],C=b(u,2,3);C;--C)m[c++]=E;break;case 17:for(C=b(u,3,3);C;--C)m[c++]=0;break;case 18:for(C=b(u,7,11);C;--C)m[c++]=0;break;default:m[c++]=T}}v(d,m,0,g),v(h,m,g,y),n=w(i,i.ltree,i.dtree);break;default:n=-3}if(0!==n)throw new Error("Data error")}while(!r);i.destLen<i.dest.length?"function"==typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen):i.dest}(e,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}function xn(e){var t,n,r,o,i,a,s,l,c,u,d,h,p,f,m=new fn({empty:!0}),g=new DataView(e,0),y=[];if((e=ne.getTag(g,0))===String.fromCharCode(0,1,0,0)||"true"===e||"typ1"===e)m.outlinesFormat="truetype",y=vn(g,r=ne.getUShort(g,4));else if("OTTO"===e)m.outlinesFormat="cff",y=vn(g,r=ne.getUShort(g,4));else{if("wOFF"!==e)throw new Error("Unsupported OpenType signature "+e);if((w=ne.getTag(g,4))===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+e);m.outlinesFormat="cff"}y=function(e,t){for(var n=[],r=44,o=0;o<t;o+=1){var i=ne.getTag(e,r),a=ne.getULong(e,r+4),s=ne.getULong(e,r+8),l=ne.getULong(e,r+12),c=s<l&&"WOFF";n.push({tag:i,offset:a,compression:c,compressedLength:s,length:l}),r+=20}return n}(g,r=ne.getUShort(g,12))}for(var v=0;v<r;v+=1){var b=y[v],x=void 0;switch(b.tag){case"cmap":x=bn(g,b),m.tables.cmap=re(x.data,x.offset),m.encoding=new ce(m.tables.cmap);break;case"cvt ":x=bn(g,b),f=new ne.Parser(x.data,x.offset),m.tables.cvt=f.parseShortList(b.length/2);break;case"fvar":i=b;break;case"fpgm":x=bn(g,b),f=new ne.Parser(x.data,x.offset),m.tables.fpgm=f.parseByteList(b.length);break;case"head":x=bn(g,b),m.tables.head=Ne(x.data,x.offset),m.unitsPerEm=m.tables.head.unitsPerEm,t=m.tables.head.indexToLocFormat;break;case"hhea":x=bn(g,b),m.tables.hhea=Re(x.data,x.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":c=b;break;case"ltag":x=bn(g,b),n=Pe(x.data,x.offset);break;case"maxp":x=bn(g,b),m.tables.maxp=Me(x.data,x.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":h=b;break;case"OS/2":x=bn(g,b),m.tables.os2=Ke(x.data,x.offset);break;case"post":x=bn(g,b),m.tables.post=Qe(x.data,x.offset),m.glyphNames=new de(m.tables.post);break;case"prep":x=bn(g,b),f=new ne.Parser(x.data,x.offset),m.tables.prep=f.parseByteList(b.length);break;case"glyf":a=b;break;case"loca":d=b;break;case"CFF ":o=b;break;case"kern":u=b;break;case"GPOS":s=b;break;case"GSUB":l=b;break;case"meta":p=b}}if(w=bn(g,h),m.tables.name=function(e,t,n){for(var r={},o=new ne.Parser(e,t),i=(t=o.parseUShort(),o.parseUShort()),a=o.offset+o.parseUShort(),s=0;s<i;s++){var l=o.parseUShort(),c=o.parseUShort(),u=o.parseUShort(),d=o.parseUShort(),h=(d=De[d]||d,o.parseUShort()),p=o.parseUShort(),f=function(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Le[t];case 3:return Be[t]}}(l,u,n);void 0!==(l=Ge(l,c,u))&&void 0!==f&&(c=void 0,(c=l===Ue?O.UTF16(e,a+p,h):O.MACSTRING(e,a+p,h,l))&&((u=void 0===(u=r[d])?r[d]={}:u)[f]=c))}return 1===t&&o.parseUShort(),r}(w.data,w.offset,n),m.names=m.tables.name,a&&d)e=0===t,w=function(e,t,n,r){for(var o=new ne.Parser(e,t),i=r?o.parseUShort:o.parseULong,a=[],s=0;s<n+1;s+=1){var l=i.call(o);r&&(l*=2),a.push(l)}return a}((w=bn(g,d)).data,w.offset,m.numGlyphs,e),e=bn(g,a),m.glyphs=wt.parse(e.data,e.offset,w,m);else{if(!o)throw new Error("Font doesn't contain TrueType or CFF outlines.");!function(e,t,n){n.tables.cff={},r=e,o=t,(i={}).formatMajor=ne.getCard8(r,o),i.formatMinor=ne.getCard8(r,o+1),i.size=ne.getCard8(r,o+2),i.offsetSize=ne.getCard8(r,o+3),i.startOffset=o,i.endOffset=o+4;var r=ve(e,i.endOffset,ne.bytesToString),o=ve(e,r.endOffset),i=ve(e,o.endOffset,ne.bytesToString);if(r=ve(e,i.endOffset),n.gsubrs=r.objects,n.gsubrsBias=ye(n.gsubrs),1!==(r=Ee(e,t,o.objects,i.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+r.length);if(o=r[0],(n.tables.cff.topDict=o)._privateDict&&(n.defaultWidthX=o._privateDict.defaultWidthX,n.nominalWidthX=o._privateDict.nominalWidthX),void 0!==o.ros[0]&&void 0!==o.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){r=o.fdArray;var a=o.fdSelect;if(0===r||0===a)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");r=Ee(e,t,ve(e,r+=t).objects,i.objects),o._fdArray=r,o._fdSelect=function(e,t,n,r){var o,i=[],a=new ne.Parser(e,t);if(0===(e=a.parseCard8()))for(var s=0;s<n;s++){if(r<=(o=a.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");i.push(o)}else{if(3!==e)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+e);var l,c=a.parseCard16(),u=a.parseCard16();if(0!==u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var d=0;d<c;d++){if(o=a.parseCard8(),l=a.parseCard16(),r<=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");if(n<l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;u<l;u++)i.push(o);u=l}if(l!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return i}(e,a+=t,n.numGlyphs,r.length)}r=Te(e,a=t+o.private[1],o.private[0],i.objects);var s=(n.defaultWidthX=r.defaultWidthX,n.nominalWidthX=r.nominalWidthX,0!==r.subrs?(a=ve(e,a+r.subrs),n.subrs=a.objects,n.subrsBias=ye(n.subrs)):(n.subrs=[],n.subrsBias=0),ve(e,t+o.charStrings));n.nGlyphs=s.objects.length,r=function(e,t,n,r){var o=new ne.Parser(e,t),i=(--n,[".notdef"]);if(0===(e=o.parseCard8()))for(var a=0;a<n;a+=1)s=o.parseSID(),i.push(we(r,s));else if(1===e)for(;i.length<=n;)for(var s=o.parseSID(),l=o.parseCard8(),c=0;c<=l;c+=1)i.push(we(r,s)),s+=1;else{if(2!==e)throw new Error("Unknown charset format "+e);for(;i.length<=n;){s=o.parseSID(),l=o.parseCard16();for(var u=0;u<=l;u+=1)i.push(we(r,s)),s+=1}}return i}(e,t+o.charset,n.nGlyphs,i.objects),0===o.encoding?n.cffEncoding=new ue(ie,r):1===o.encoding?n.cffEncoding=new ue(ae,r):n.cffEncoding=function(e,t,n){var r={},o=new ne.Parser(e,t);if(0===(e=o.parseCard8()))for(var i=o.parseCard8(),a=0;a<i;a+=1)r[l=o.parseCard8()]=a;else{if(1!==e)throw new Error("Unknown encoding format "+e);for(var s=o.parseCard8(),l=1,c=0;c<s;c+=1)for(var u=o.parseCard8(),d=o.parseCard8(),h=u;h<=u+d;h+=1)r[h]=l,l+=1}return new ue(r,n)}(e,t+o.encoding,r),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ge.GlyphSet(n);for(var l=0;l<n.nGlyphs;l+=1){var c=s.objects[l];n.glyphs.push(l,ge.cffGlyphLoader(n,l,Ce,c))}}((e=bn(g,o)).data,e.offset,m)}for(var w=bn(g,c),S=(function(e,t,n,r,o){for(var i,a,s=new ne.Parser(e,t),l=0;l<r;l+=1){l<n&&(i=s.parseUShort(),a=s.parseShort());var c=o.get(l);c.advanceWidth=i,c.leftSideBearing=a}}(w.data,w.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs),m),_=S.tables.cmap.glyphIndexMap,k=Object.keys(_),T=0;T<k.length;T+=1){var E,C=k[T],I=_[C];(E=S.glyphs.get(I)).addUnicode(parseInt(C))}for(var j=0;j<S.glyphs.length;j+=1)E=S.glyphs.get(j),S.cffEncoding?S.isCIDFont?E.name="gid"+j:E.name=S.cffEncoding.charset[j]:S.glyphNames.names&&(E.name=S.glyphNames.glyphIndexToName(j));return u?(e=bn(g,u),m.kerningPairs=function(e,t){if(0===(t=(e=new ne.Parser(e,t)).parseUShort())){var n=e,r={},o=(n.skip("uShort"),n.parseUShort()),i=(A.argument(0===o,"Unsupported kern sub-table version."),n.skip("uShort",2),n.parseUShort());n.skip("uShort",3);for(var a=0;a<i;a+=1){var s=n.parseUShort(),l=n.parseUShort(),c=n.parseShort();r[s+","+l]=c}return r}if(1!==t)throw new Error("Unsupported kern table version ("+t+").");var u=e,d={};if(u.skip("uShort"),1<u.parseULong()&&console.warn("Only the first kern subtable is supported."),u.skip("uLong"),o=255&u.parseUShort(),u.skip("uShort"),0==o){var h=u.parseUShort();u.skip("uShort",3);for(var p=0;p<h;p+=1){var f=u.parseUShort(),m=u.parseUShort(),g=u.parseShort();d[f+","+m]=g}}return d}(e.data,e.offset)):m.kerningPairs={},s&&(w=bn(g,s),m.tables.gpos=function(e,t){return t=(e=new ee(e,t=t||0)).parseVersion(1),A.argument(1===t||1.1===t,"Unsupported GPOS table version "+t),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(mn)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(mn),variations:e.parseFeatureVariationsList()}}(w.data,w.offset),m.position.init()),l&&(e=bn(g,l),m.tables.gsub=function(e,t){return t=(e=new ee(e,t=t||0)).parseVersion(1),A.argument(1===t||1.1===t,"Unsupported GSUB table version."),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(Je)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(Je),variations:e.parseFeatureVariationsList()}}(e.data,e.offset)),i&&(w=bn(g,i),m.tables.fvar=function(e,t,n){for(var r,o,i,a,s=new ne.Parser(e,t),l=s.parseULong(),c=(A.argument(65536===l,"Unsupported fvar table version."),s.parseOffset16()),u=(s.skip("uShort",1),s.parseUShort()),d=s.parseUShort(),h=s.parseUShort(),p=s.parseUShort(),f=[],m=0;m<u;m++)f.push((r=e,o=t+c+m*d,i=n,a={},r=new ne.Parser(r,o),a.tag=r.parseTag(),a.minValue=r.parseFixed(),a.defaultValue=r.parseFixed(),a.maxValue=r.parseFixed(),r.skip("uShort",1),a.name=i[r.parseUShort()]||{},a));for(var g=[],y=t+c+u*d,v=0;v<h;v++)g.push(function(e,t,n,r){var o={},i=new ne.Parser(e,t);o.name=r[i.parseUShort()]||{},i.skip("uShort",1),o.coordinates={};for(var a=0;a<n.length;++a)o.coordinates[n[a].tag]=i.parseFixed();return o}(e,y+v*p,f,n));return{axes:f,instances:g}}(w.data,w.offset,m.names)),p&&(e=bn(g,p),m.tables.meta=function(e,t){for(var n=new ne.Parser(e,t),r=n.parseULong(),o=(A.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong(),n.parseULong()),i={},a=0;a<o;a++){var s=n.parseTag(),l=n.parseULong(),c=n.parseULong();l=O.UTF8(e,t+l,c),i[s]=l}return i}(e.data,e.offset),m.metas=m.tables.meta),m}mn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ee.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ee.coverage),values:this.parseValueRecordList()}:void A.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},mn[2]=function(){var e,t,n,r,o=this.offset+this.relativeOffset,i=this.parseUShort(),a=(A.assert(1===i||2===i,"0x"+o.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),o=this.parsePointer(ee.coverage),this.parseUShort()),s=this.parseUShort();return 1===i?{posFormat:i,coverage:o,valueFormat1:a,valueFormat2:s,pairSets:this.parseList(ee.pointer(ee.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(a),value2:this.parseValueRecord(s)}}))))}:2===i?(e=this.parsePointer(ee.classDef),t=this.parsePointer(ee.classDef),n=this.parseUShort(),r=this.parseUShort(),{posFormat:i,coverage:o,valueFormat1:a,valueFormat2:s,classDef1:e,classDef2:t,class1Count:n,class2Count:r,classRecords:this.parseList(n,ee.list(r,(function(){return{value1:this.parseValueRecord(a),value2:this.parseValueRecord(s)}})))}):void 0},mn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},mn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},mn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},mn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},mn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},mn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},mn[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10),t.Font=fn,t.Glyph=pe,t.Path=C,t.BoundingBox=E,t._parse=ne,t.parse=xn,t.load=function(e,t){("undefined"==typeof window?gn:yn)(e,(function(e,n){if(e)return t(e);var r;try{r=xn(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return xn(ft(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],248:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;-1<=i&&!o;i--){var a=0<=i?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,o="/"===a.charAt(0))}return(o?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!o).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),a="/"===o(e,-1);return(e=(e=t(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i?e:".")&&a&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),a=Math.min(o.length,i.length),s=a,l=0;l<a;l++)if(o[l]!==i[l]){s=l;break}var c=[];for(l=s;l<o.length;l++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,r=!0,o=e.length-1;1<=o;--o)if(47===e.charCodeAt(o)){if(!r){n=o;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"/":e.slice(0,n)},n.basename=function(e,t){return e=function(e){"string"!=typeof e&&(e+="");for(var t=0,n=-1,r=!0,o=e.length-1;0<=o;--o)if(47===e.charCodeAt(o)){if(!r){t=o+1;break}}else-1===n&&(r=!1,n=o+1);return-1===n?"":e.slice(t,n)}(e),t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(o)continue;n=a+1;break}-1===r&&(o=!1,r=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1)}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var o=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:249}],249:[function(e,t,n){var r,o;function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}t=t.exports={};try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){for(var e=s(h),t=(u=!0,c.length);t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return(o=clearTimeout)(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],250:[function(e,t,n){t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=y.asyncIterator||"@@asyncIterator",a=y.toStringTag||"@@toStringTag";function s(e,n,r,o){var i,a,s,m;return n=n&&n.prototype instanceof f?n:f,n=Object.create(n.prototype),o=new k(o||[]),n._invoke=(i=e,a=r,s=o,m=c,function(e,n){if(m===d)throw new Error("Generator is already running");if(m===h){if("throw"===e)throw n;return E()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r&&(r=function e(n,r){var o=n.iterator[r.method];if(o===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}return"throw"===(o=l(o,n.iterator,r.arg)).type?(r.method="throw",r.arg=o.arg,r.delegate=null,p):(o=o.arg)?o.done?(r[n.resultName]=o.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}(r,s))){if(r===p)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(m===c)throw m=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(m=d,"normal"===(r=l(i,a,s)).type){if(m=s.done?h:u,r.arg!==p)return{value:r.arg,done:s.done}}else"throw"===r.type&&(m=h,s.method="throw",s.arg=r.arg)}}),n}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c="suspendedStart",u="suspendedYield",d="executing",h="completed",p={};function f(){}function m(){}function g(){}var y,v,b=((y={})[o]=function(){return this},(v=(v=Object.getPrototypeOf)&&v(v(T([]))))&&v!==n&&r.call(v,o)&&(y=v),g.prototype=f.prototype=Object.create(y));function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,o){function i(){return new Promise((function(t,i){!function t(n,o,i,a){var s;if("throw"!==(n=l(e[n],e,o)).type)return(o=(s=n.arg).value)&&"object"==typeof o&&r.call(o,"__await")?Promise.resolve(o.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(o).then((function(e){s.value=e,i(s)}),(function(e){return t("throw",e,i,a)}));a(n.arg)}(n,o,t,i)}))}return t=t?t.then(i,i):i()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var n,i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(i=function o(){for(;++n<e.length;)if(r.call(e,n))return o.value=e[n],o.done=!1,o;return o.value=t,o.done=!0,o}).next=i}return{next:E}}function E(){return{value:t,done:!0}}return(m.prototype=b.constructor=g).constructor=m,g[a]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,o){var i=new w(s(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(b),b[a]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,_(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},{}],251:[function(e,t,n){!function(e){"use strict";var t,n,r,o,i,a,s,l,c,u;function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e?String(e):e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function v(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n=m(this);if(n)return n;if(this._bodyBlob)return n=this._bodyBlob,t=g(e=new FileReader),e.readAsText(n),t;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(e,t){var n,r=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(n=(e=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(n)?n:e),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){var n;e&&(n=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),t.append(decodeURIComponent(n),decodeURIComponent(e)))})),t}function S(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,(i="ArrayBuffer"in e)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))}),f.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+","+t:t},f.prototype.delete=function(e){delete this.map[d(e)]},f.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},f.prototype.set=function(e,t){this.map[d(e)]=h(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},b.call(x.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e},u=[301,302,303,307,308],S.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},e.Headers=f,e.Request=x,e.Response=S,e.fetch=function(e,t){return new Promise((function(n,o){var i=new x(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=(t=t.split(":")).shift().trim();n&&(t=t.join(":").trim(),e.append(n,t))})),e)},r=(t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL"),"response"in a?a.response:a.responseText);n(new S(r,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},{}],252:[function(e,t,n){"use strict";e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=a(e("../core/main")),i=a(e("../color/color_conversion"));function a(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],l=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];o.default.prototype._rgbColorName=function(e){e=i.default._rgbaToHSBA(e);var t,n,o=[(r=e)[0],e[1],e[2]];0!==o[0]&&(o[0]=Math.round(100*o[0]),(e=o[0].toString().split(""))[n=e.length-1]=parseInt(e[n]),e[n]<2.5?e[n]=0:2.5<=e[n]&&e[n]<7.5&&(e[n]=5),2===e.length?(e[0]=parseInt(e[0]),7.5<=e[n]&&(e[n]=0,e[0]=e[0]+1),o[0]=10*e[0]+e[1]):7.5<=e[n]?o[0]=10:o[0]=e[n]),o[2]=o[2]/255;for(var a=o.length-1;1<=a;a--)o[a]<=.25?o[a]=0:.25<o[a]&&o[a]<.75?o[a]=.5:o[a]=1;if(0===o[0]&&0===o[1]&&1===o[2]){for(var c=2;0<=c;c--)r[c]=Math.round(1e4*r[c])/1e4;for(var u=0;u<s.length;u++){if(s[u].h===r[0]&&s[u].s===r[1]&&s[u].b===r[2]){t=s[u].name;break}t="white"}}else for(var d=0;d<l.length;d++)if(l[d].h===o[0]&&l[d].s===o[1]&&l[d].b===o[2]){t=l[d].name;break}return t},e=o.default,n.default=e},{"../color/color_conversion":258,"../core/main":273,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196}],253:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},o="_Description",i="_fallbackDesc",a="_fallbackTable",s="_Label",l="_labelDesc",c="_labelTable";function u(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}r.default.prototype.describe=function(e,t){var n;r.default._validateParameters("describe",arguments),"string"==typeof e&&(n=this.canvas.id,e=u(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e)))},r.default.prototype.describeElement=function(e,t,n){var o,i;r.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e&&(o=this.canvas.id,t=u(t),i=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e),e=e.replace(/[^a-zA-Z0-9]/g,""),i='<th scope="row">'.concat(i,"</th><td>").concat(t,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==i&&(this.descriptions.fallbackElements[e].innerHTML=i):this._describeElementHTML("fallback",e,i),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==i&&(this.descriptions.labelElements[e].innerHTML=i):this._describeElementHTML("label",e,i)))},r.default.prototype._describeHTML=function(e,t){var n,r=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(r+o))?this.dummyDOM.querySelector("#"+r+a).insertAdjacentHTML("beforebegin",'<p id="'.concat(r+i,'"></p>')):(n='<div id="'.concat(r).concat(o,'" role="region" aria-label="Canvas Description"><p id="').concat(r).concat(i,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(r)).innerHTML=n),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(r).concat(i)),this.descriptions.fallback.innerHTML=t):"label"===e&&(this.dummyDOM.querySelector("#".concat(r+s))?this.dummyDOM.querySelector("#".concat(r+c))&&this.dummyDOM.querySelector("#".concat(r+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(r).concat(l,'"></p>')):(n='<div id="'.concat(r).concat(s,'" class="p5Label"><p id="').concat(r).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",n)),this.descriptions.label=this.dummyDOM.querySelector("#"+r+l),this.descriptions.label.innerHTML=t)},r.default.prototype._describeElementHTML=function(e,t,n){var r,u=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(u+o))?this.dummyDOM.querySelector("#"+u+a)||this.dummyDOM.querySelector("#"+u+i).insertAdjacentHTML("afterend",'<table id="'.concat(u).concat(a,'"><caption>Canvas elements and their descriptions</caption></table>')):(r='<div id="'.concat(u).concat(o,'" role="region" aria-label="Canvas Description"><table id="').concat(u).concat(a,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).innerHTML=r),(r=document.createElement("tr")).id=u+"_fte_"+t,this.dummyDOM.querySelector("#"+u+a).appendChild(r),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(u).concat("_fte_").concat(t)),this.descriptions.fallbackElements[t].innerHTML=n):"label"===e&&(this.dummyDOM.querySelector("#".concat(u+s))?this.dummyDOM.querySelector("#".concat(u+c))||this.dummyDOM.querySelector("#"+u+l).insertAdjacentHTML("afterend",'<table id="'.concat(u+c,'"></table>')):(r='<div id="'.concat(u).concat(s,'" class="p5Label"><table id="').concat(u).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).insertAdjacentHTML("afterend",r)),(e=document.createElement("tr")).id=u+"_lte_"+t,this.dummyDOM.querySelector("#"+u+c).appendChild(e),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(u).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n)},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.replace":194}],254:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateGridOutput=function(e){var t,n,r,o;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return t="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]),(1===e[0]?"".concat(t," shape: "):"".concat(t," shapes: ")).concat(e[1])}((n=function(e,t){var n,r="",o="",i=0;for(n in t){var a,s=0;for(a in t[n]){var l='<li id="'.concat(e,"shape").concat(i,'">').concat(t[n][a].color," ").concat(n,",");"line"===n?l+=" location = ".concat(t[n][a].pos,", length = ").concat(t[n][a].length," pixels"):(l+=" location = ".concat(t[n][a].pos),"point"!==n&&(l+=", area = ".concat(t[n][a].area," %")),l+="</li>"),r+=l,s++,i++}o=1<s?"".concat(o," ").concat(s," ").concat(n,"s"):"".concat(o," ").concat(s," ").concat(n)}return{numShapes:[i,o],details:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),o=function(e,t){var n,r,o=0,i="",a=Array.from(Array(10),(function(){return Array(10)}));for(n in t)for(var s in t[n]){var l;l="line"!==n?'<a href="#'.concat(e,"shape").concat(o,'">').concat(t[n][s].color," ").concat(n,"</a>"):'<a href="#'.concat(e,"shape").concat(o,'">').concat(t[n][s].color," ").concat(n," midpoint</a>"),a[t[n][s].loc.locY][t[n][s].loc.locX]?a[t[n][s].loc.locY][t[n][s].loc.locX]=a[t[n][s].loc.locY][t[n][s].loc.locX]+"  "+l:a[t[n][s].loc.locY][t[n][s].loc.locX]=l,o++}for(r in a){var c,u="<tr>";for(c in a[r])u+="<td>",void 0!==a[r][c]&&(u+=a[r][c]),u+="</td>";i=i+u+"</tr>"}return i}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),o!==t.map.innerHTML&&(t.map.innerHTML=o),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":157,"core-js/modules/es.array.map":163,"core-js/modules/es.string.iterator":190}],255:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e,t,n){return 10===(t=Math.floor(e[0]/t*10))&&(t-=1),10===(e=Math.floor(e[1]/n*10))&&(e-=1),{locX:t,locY:e}}r.default.prototype.textOutput=function(e){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(e){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(e,t){var n,r,o,i=this.canvas.id,a=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode),"");"Fallback"===t?(n=i+e,this.dummyDOM.querySelector("#".concat(r=i+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=i+e+(a=t),this.dummyDOM.querySelector("#".concat(r=i+"accessibleOutput"+t))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")):this.dummyDOM.querySelector("#".concat(i))).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>'))),this._accessibleOutputs[n]={},"textOutput"===e?(a="#".concat(i,"gridOutput").concat(a),o='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#".concat(r)).innerHTML=o,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(a="#".concat(i,"textOutput").concat(a),o='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",o):this.dummyDOM.querySelector("#".concat(r)).innerHTML=o,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},r.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},r.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},r.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},r.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n,r,i={},a=!0,s=function(e,t){var n;return e="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,e]}(e,t);if("line"===e?(i.color=this.ingredients.colors.stroke,i.length=Math.round(this.dist(t[0],t[1],t[2],t[3])),n=this._getPos(t[0],[1]),r=this._getPos(t[2],[3]),i.loc=o(s,this.width,this.height),i.pos=n===r?"at ".concat(n):"from ".concat(n," to ").concat(r)):("point"===e?i.color=this.ingredients.colors.stroke:(i.color=this.ingredients.colors.fill,i.area=this._getArea(e,t)),i.pos=this._getPos.apply(this,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(s)),i.loc=o(s,this.width,this.height)),this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[i]){for(var l in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][l])===JSON.stringify(i)&&(a=!1);!0===a&&this.ingredients.shapes[e].push(i)}}else this.ingredients.shapes[e]=[i]},r.default.prototype._getPos=function(e,t){e=new DOMPointReadOnly(e,t),t=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),t=(e=e.matrixTransform(t)).x,e=e.y;var n=this.width,r=this.height;return t<.4*n?e<.4*r?"top left":.6*r<e?"bottom left":"mid left":.6*n<t?e<.4*r?"top right":.6*r<e?"bottom right":"mid right":e<.4*r?"top middle":.6*r<e?"bottom middle":"middle"},r.default.prototype._getArea=function(e,t){var n,r,o=0,i=("arc"===e?(o=(n=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*t[2]*t[3]/8,"open"!==t[6]&&"chord"!==t[6]||(r=t[0],c=t[1],i=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),u=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),s=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),a=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),r=Math.abs(r*(u-a)+i*(a-c)+s*(c-u))/2,n>Math.PI?o+=r:o-=r)):"ellipse"===e||"circle"===e?o=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?o=0:"quadrilateral"===e?o=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?o=t[2]*t[3]:"triangle"===e&&(o=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2),this.width*this._pixelDensity),a=this.height*this._pixelDensity,s=[new DOMPoint(0,0),new DOMPoint(i,0),new DOMPoint(i,a),new DOMPoint(0,a)],l=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),c=s.map((function(e){return e.matrixTransform(l)})),u=Math.abs((c[3].x+c[0].x)*(c[3].y-c[0].y)+(c[0].x+c[1].x)*(c[0].y-c[1].y)+(c[1].x+c[2].x)*(c[1].y-c[2].y)+(c[2].x+c[3].x)*(c[2].y-c[3].y))/2;return Math.round(100*o/u)},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],256:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateTextOutput=function(e){var t,n,r,o;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return n="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following"),1===e?"".concat(n," shape:"):"".concat(n," ").concat(e," shapes:")}((n=function(e,t){var n,r="",o=0;for(n in t)for(var i in t[n]){var a='<li><a href="#'.concat(e,"shape").concat(o,'">').concat(t[n][i].color," ").concat(n,"</a>");"line"===n?a+=", ".concat(t[n][i].pos,", ").concat(t[n][i].length," pixels long.</li>"):(a+=", at ".concat(t[n][i].pos),"point"!==n&&(a+=", covering ".concat(t[n][i].area,"% of the canvas")),a+=".</li>"),r+=a,o++}return{numShapes:o,listShapes:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),o=function(e,t){var n,r="",o=0;for(n in t)for(var i in t[n]){var a='<tr id="'.concat(e,"shape").concat(o,'"><th>').concat(t[n][i].color," ").concat(n,"</th>");"line"===n?a+="<td>location = ".concat(t[n][i].pos,"</td><td>length = ").concat(t[n][i].length," pixels</td></tr>"):(a+="<td>location = ".concat(t[n][i].pos,"</td>"),"point"!==n&&(a+="<td> area = ".concat(t[n][i].area,"%</td>")),a+="</tr>"),r+=a,o++}return r}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),o!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=o),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151}],257:[function(e,t,n){"use strict";var r=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Framebuffer"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=r.default},{"./accessibility/color_namer":252,"./accessibility/describe":253,"./accessibility/gridOutput":254,"./accessibility/outputs":255,"./accessibility/textOutput":256,"./color/color_conversion":258,"./color/creating_reading":259,"./color/p5.Color":260,"./color/setting":261,"./core/constants":262,"./core/environment":263,"./core/friendly_errors/fes_core":264,"./core/friendly_errors/file_errors":265,"./core/friendly_errors/sketch_reader":266,"./core/friendly_errors/stacktrace":267,"./core/friendly_errors/validate_params":268,"./core/helpers":269,"./core/init":270,"./core/legacy":272,"./core/main":273,"./core/p5.Element":274,"./core/p5.Graphics":275,"./core/p5.Renderer":276,"./core/p5.Renderer2D":277,"./core/preload":278,"./core/rendering":279,"./core/shape/2d_primitives":280,"./core/shape/attributes":281,"./core/shape/curves":282,"./core/shape/vertex":283,"./core/shim":284,"./core/structure":285,"./core/transform":286,"./data/local_storage.js":287,"./data/p5.TypedDict":288,"./dom/dom":289,"./events/acceleration":290,"./events/keyboard":291,"./events/mouse":292,"./events/touch":293,"./image/filters":294,"./image/image":295,"./image/loading_displaying":296,"./image/p5.Image":297,"./image/pixels":298,"./io/files":299,"./io/p5.Table":300,"./io/p5.TableRow":301,"./io/p5.XML":302,"./math/calculation":303,"./math/math":304,"./math/noise":305,"./math/p5.Vector":306,"./math/random":307,"./math/trigonometry":308,"./typography/attributes":309,"./typography/loading_displaying":310,"./typography/p5.Font":311,"./utilities/array_functions":312,"./utilities/conversion":313,"./utilities/string_functions":314,"./utilities/time_date":315,"./webgl/3d_primitives":316,"./webgl/interaction":317,"./webgl/light":318,"./webgl/loading":319,"./webgl/material":320,"./webgl/p5.Camera":321,"./webgl/p5.Framebuffer":322,"./webgl/p5.Geometry":323,"./webgl/p5.Matrix":324,"./webgl/p5.RenderBuffer":325,"./webgl/p5.RendererGL":328,"./webgl/p5.RendererGL.Immediate":326,"./webgl/p5.RendererGL.Retained":327,"./webgl/p5.Shader":329,"./webgl/p5.Texture":330,"./webgl/text":331}],258:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.ColorConversion={_hsbaToHSLA:function(e){var t=e[0],n=e[1],r=e[2],o=(2-n)*r/2;return 0!=o&&(1==o?n=0:o<.5?n/=2-n:n=n*r/(2-2*o)),[t,n,o,e[3]]},_hsbaToRGBA:function(e){var t,n,r,o,i,a=6*e[0],s=e[1],l=e[2];return 0===s?[l,l,l,e[3]]:(n=l*(1-s),r=l*(1-s*(a-(t=Math.floor(a)))),s=l*(1-s*(1+t-a)),a=1===t?(o=r,i=l,n):2===t?(o=n,i=l,s):3===t?(o=n,i=r,l):4===t?(o=s,i=n,l):5===t?(o=l,i=n,r):(o=l,i=s,n),[o,i,a,e[3]])},_hslaToHSBA:function(e){var t=e[0],n=e[1],r=e[2],o=r<.5?(1+n)*r:r+n-r*n;return[t,n=2*(o-r)/o,o,e[3]]},_hslaToRGBA:function(e){var t,n=6*e[0],r=e[1],o=e[2];return 0===r?[o,o,o,e[3]]:[(t=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t})(2+n,r=2*o-(o=o<.5?(1+r)*o:o+r-o*r),o),t(n,r,o),t(n-2,r,o),e[3]]},_rgbaToHSBA:function(e){var t,n,r=e[0],o=e[1],i=e[2],a=Math.max(r,o,i),s=a-Math.min(r,o,i);return 0==s?n=t=0:(n=s/a,r===a?t=(o-i)/s:o===a?t=2+(i-r)/s:i===a&&(t=4+(r-o)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,a,e[3]]},_rgbaToHSLA:function(e){var t,n,r,o=e[0],i=e[1],a=e[2],s=Math.max(o,i,a),l=s+(r=Math.min(o,i,a));return 0==(r=s-r)?n=t=0:(n=l<1?r/l:r/(2-l),o===s?t=(i-a)/r:i===s?t=2+(a-o)/r:a===s&&(t=4+(o-i)/r),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,l/2,e[3]]}},e=e.default.ColorConversion,n.default=e},{"../core/main":273}],259:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(e){return i.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},i.default.prototype.blue=function(e){return i.default._validateParameters("blue",arguments),this.color(e)._getBlue()},i.default.prototype.brightness=function(e){return i.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},i.default.prototype.color=function(){var e;return i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color?arguments[0]:(e=arguments[0]instanceof Array?arguments[0]:arguments,new i.default.Color(this,e))},i.default.prototype.green=function(e){return i.default._validateParameters("green",arguments),this.color(e)._getGreen()},i.default.prototype.hue=function(e){return i.default._validateParameters("hue",arguments),this.color(e)._getHue()},i.default.prototype.lerpColor=function(e,t,n){i.default._validateParameters("lerpColor",arguments);var r,o,s,l=this._colorMode,c=this._colorMaxes;if(l===a.RGB)o=e.levels.map((function(e){return e/255})),s=t.levels.map((function(e){return e/255}));else if(l===a.HSB)e._getBrightness(),t._getBrightness(),o=e.hsba,s=t.hsba;else{if(l!==a.HSL)throw new Error("".concat(l,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),o=e.hsla,s=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),e=this.lerp(o[0],s[0],n),t=this.lerp(o[1],s[1],n),r=this.lerp(o[2],s[2],n),o=this.lerp(o[3],s[3],n),e*=c[l][0],t*=c[l][1],r*=c[l][2],o*=c[l][3],this.color(e,t,r,o)},i.default.prototype.lightness=function(e){return i.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},i.default.prototype.red=function(e){return i.default._validateParameters("red",arguments),this.color(e)._getRed()},i.default.prototype.saturation=function(e){return i.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var s=i.default;n.default=s},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],260:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=l(e("../core/main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=l(e("./color_conversion"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=(e=/\s*/,/(\d{1,3})/),h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(h.source,"%")),f={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(e.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),RGBA:new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(e.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(e.source),"i"),HSL:new RegExp(["^hsl\\(",d.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSLA:new RegExp(["^hsla\\(",d.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(e.source),"i"),HSB:new RegExp(["^hsb\\(",d.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSBA:new RegExp(["^hsba\\(",d.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(e.source),"i")};i.default.Color=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(t._colorMode,t._colorMaxes),![a.RGB,a.HSL,a.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=e._parseInputs.apply(this,n),this._calculateLevels()}var t,n,r;return t=e,r=[{key:"_parseInputs",value:function(t,n,r,o){var i,l=arguments.length,c=this.mode,d=this.maxes[c],h=[];if(3<=l){for(h[0]=t/d[0],h[1]=n/d[1],h[2]=r/d[2],h[3]="number"==typeof o?o/d[3]:1,i=h.length-1;0<=i;--i){var p=h[i];p<0?h[i]=0:1<p&&(h[i]=1)}return c===a.HSL?s.default._hslaToRGBA(h):c===a.HSB?s.default._hsbaToRGBA(h):h}if(1===l&&"string"==typeof t){if(r=t.trim().toLowerCase(),u[r])return e._parseInputs.call(this,u[r]);if(f.HEX3.test(r))return(h=f.HEX3.exec(r).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,h;if(f.HEX6.test(r))return(h=f.HEX6.exec(r).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,h;if(f.HEX4.test(r))return f.HEX4.exec(r).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(f.HEX8.test(r))return f.HEX8.exec(r).slice(1).map((function(e){return parseInt(e,16)/255}));if(f.RGB.test(r))return(h=f.RGB.exec(r).slice(1).map((function(e){return e/255})))[3]=1,h;if(f.RGB_PERCENT.test(r))return(h=f.RGB_PERCENT.exec(r).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,h;if(f.RGBA.test(r))return f.RGBA.exec(r).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(f.RGBA_PERCENT.test(r))return f.RGBA_PERCENT.exec(r).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(f.HSL.test(r)?(h=f.HSL.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSLA.test(r)&&(h=f.HSLA.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(h=h.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return s.default._hslaToRGBA(h);if(f.HSB.test(r)?(h=f.HSB.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSBA.test(r)&&(h=f.HSBA.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),h.length){for(i=h.length-1;0<=i;--i)h[i]=Math.max(Math.min(h[i],1),0);return s.default._hsbaToRGBA(h)}h=[1,1,1,1]}else{if(1!==l&&2!==l||"number"!=typeof t)throw new Error("".concat(arguments,"is not a valid color representation."));h[0]=t/d[2],h[1]=t/d[2],h[2]=t/d[2],h[3]="number"==typeof n?n/d[3]:1,h=h.map((function(e){return Math.max(Math.min(e,1),0)}))}return h}}],(n=[{key:"toString",value:function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}}},{key:"setRed",value:function(e){this._array[0]=e/this.maxes[a.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(e){this._array[1]=e/this.maxes[a.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(e){this._array[2]=e/this.maxes[a.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(e,t){this.mode=e,this.maxes=t}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[a.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[a.RGB][1]}},{key:"_getHue",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[a.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])}}])&&c(t.prototype,n),r&&c(t,r),e}(),d=i.default.Color,n.default=d},{"../core/constants":262,"../core/main":273,"./color_conversion":258,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],261:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Color"),i.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},i.default.prototype.colorMode=function(e,t,n,r,o){return i.default._validateParameters("colorMode",arguments),e!==a.RGB&&e!==a.HSB&&e!==a.HSL||(this._colorMode=e,e=this._colorMaxes[e],2===arguments.length?(e[0]=t,e[1]=t,e[2]=t,e[3]=t):4===arguments.length?(e[0]=t,e[1]=n,e[2]=r):5===arguments.length&&(e[0]=t,e[1]=n,e[2]=r,e[3]=o)),this},i.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},i.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var s=i.default;n.default=s},{"../core/constants":262,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],262:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.WORD=n.CHAR=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL2=n.WEBGL=n.P2D=n.VERSION=void 0,n.RGBA=n.HALF_FLOAT=n.FLOAT=n.UNSIGNED_INT=n.UNSIGNED_BYTE=n.COVER=n.CONTAIN=n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=n.FILL=n.STROKE=n.CURVE=n.BEZIER=void 0;var r=Math.PI,o=(n.VERSION="1.7.0",n.P2D="p2d",n.WEBGL="webgl",n.WEBGL2="webgl2",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait",r/2);n.HALF_PI=o,o=r,n.PI=o,o=r/4,n.QUARTER_PI=o,o=2*r,n.TAU=o,o=2*r,n.TWO_PI=o,n.DEGREES="degrees",n.RADIANS="radians",o=r/180,n.DEG_TO_RAD=o,o=180/r,n.RAD_TO_DEG=o,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n.CHAR="CHAR",n.WORD="WORD",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback",n.CONTAIN="contain",n.COVER="cover",n.UNSIGNED_BYTE="unsigned-byte",n.UNSIGNED_INT="unsigned-int",n.FLOAT="float",n.HALF_FLOAT="half-float",n.RGBA="rgba"},{}],263:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(a=e("./main"))&&a.__esModule?a:{default:a},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants")),s=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT],l=(i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60,window.print);function c(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function u(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):l()},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(e,t,n){var r,o="auto",i=this._curElement.elt;s.includes(e)?o=e:"string"==typeof e&&(r="",t&&n&&"number"==typeof t&&"number"==typeof n&&(r="".concat(t," ").concat(n)),o="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(r,", auto"):e),i.style.cursor=o},i.default.prototype.frameRate=function(e){return i.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(e){return this.frameRate(e)},i.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.webglVersion=a.P2D,i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=c(),i.default.prototype.windowHeight=u(),i.default.prototype._onresize=function(e){this._setProperty("windowWidth",c()),this._setProperty("windowHeight",u());var t=this._isGlobal?window:this;"function"!=typeof t.windowResized||void 0===(t=t.windowResized(e))||t||e.preventDefault()},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(e){if(i.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(e){if(e=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(e){var t;return i.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},i.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n},e=i.default,n.default=e},{"./constants":262,"./main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.search":195,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],264:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.starts-with"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.starts-with"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(l=e("../main"))&&l.__esModule?l:{default:l};function o(e,t){t=t||console.log.bind(console),i||a(),i.some((function(n){var r;if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W")))return r="function"===n.type?"".concat(n.name,"()"):n.name,t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(s)),!0}))}e("../internationalization");var i=null,a=null,s=(r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},i=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),l=(a=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable";return{name:t,type:n}}))}var n={};(i=[].concat(t(r.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},r.default.prototype._helpForMisusedAtTopLevelCode=o,"complete"!==document.readyState&&(window.addEventListener("error",o,!1),window.addEventListener("load",(function(){window.removeEventListener("error",o,!1)}))),r.default);n.default=l},{"../constants":262,"../internationalization":271,"../main":273,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.function.name":167,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.starts-with":197,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],265:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),r.default._friendlyFileLoadError=function(){},e=r.default,n.default=e},{"../internationalization":271,"../main":273}],266:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../main"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}e("../internationalization"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=s?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);i.default=e,t&&t.set(e,i)}(e("../constants")),i.default._fesCodeReader=function(){};var s=i.default;n.default=s},{"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],267:[function(e,t,n){"use strict";function r(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){return-1===e.indexOf(":")?[e]:[(e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,"")))[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){var t=(n=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),n=(n=t?n.replace(t[0],""):n).split(/\s+/).slice(1);return t=this.extractLocation(t?t[1]:n.pop()),{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(t[0])?void 0:t[0],lineNumber:t[1],columnNumber:t[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){var t,n;return-1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":")?{functionName:e}:{functionName:(n=e.match(t=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&n[1]?n[1]:void 0,fileName:(n=this.extractLocation(e.replace(t,"")))[0],lineNumber:n[1],columnNumber:n[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],o=2,i=n.length;o<i;o+=2){var a=t.exec(n[o]);a&&r.push({fileName:a[2],lineNumber:a[1],source:n[o]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],o=0,i=n.length;o<i;o+=2){var a=t.exec(n[o]);a&&r.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[o]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop());return{functionName:(n=n.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(t=n.match(/\(([^)]*)\)/)?n.replace(/^[^(]+\(([^)]*)\)$/,"$1"):t)||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../main"))&&e.__esModule?e:{default:e}).default._getErrorStackParser=function(){return new r},e=e.default,n.default=e},{"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196}],268:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(o=e("../main"))&&o.__esModule?o:{default:o};function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}(function(e){if(!(e&&e.__esModule||null===e||"object"!==i(e)&&"function"!=typeof e)){var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r)}})(e("../constants")),e("../internationalization"),o.default._validateParameters=o.default._clearValidateParamsCache=function(){},e=o.default,n.default=e},{"../../../docs/parameterData.json":void 0,"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.map":168,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],269:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));n.default={modeAdjust:function(e,t,n,r,o){return o===i.CORNER?{x:e,y:t,w:n,h:r}:o===i.CORNERS?{x:e,y:t,w:n-e,h:r-t}:o===i.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:o===i.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}}},{"./constants":262,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],270:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(o=e("../core/main"))&&o.__esModule?o:{default:o};e("./internationalization");var o=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),o]).then((function(){void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!r.default.instance&&new r.default}))},{"../core/main":273,"./internationalization":271,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/web.dom-collections.iterator":236}],271:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.setTranslatorLanguage=n.currentTranslatorLanguage=n.availableTranslatorLanguages=n.initialize=n.translator=void 0;var r,o=a(e("i18next")),i=a(e("i18next-browser-languagedetector"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init(t,n)}var t;return(t=[{key:"fetchWithTimeout",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}},{key:"init",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t}},{key:"read",value:function(e,t,n){var o=this.options.loadPath;e===this.options.fallback?n(null,r[e][t]):(void 0).includes(e)?(o=this.services.interpolator.interpolate(o,{lng:e,ns:t}),this.loadUrl(o,n)):n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(t.ok)return t.json();throw new Error("failed loading ".concat(e))}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();s.type="backend",n.translator=function(e,t){console.debug("p5.js translator called before translations were loaded"),o.default.t(e,t)},n.initialize=function(){return o.default.use(i.default).use(s).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))},n.availableTranslatorLanguages=function(){return o.default.languages},n.currentTranslatorLanguage=function(e){return o.default.language},n.setTranslatorLanguage=function(e){return o.default.changeLanguage(e||void 0,(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236,i18next:3,"i18next-browser-languagedetector":3}],272:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,n.default=e},{"./main":273}],273:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var i,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants")),s=function(){function e(t,n,r){var o=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},n=Object.getOwnPropertyNames(e.prototype._registeredMethods);var i=!0,a=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;this._registeredMethods[u]=e.prototype._registeredMethods[u].slice()}}catch(t){a=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){o._userNode&&"string"==typeof o._userNode&&(o._userNode=document.getElementById(o._userNode));var t=o._isGlobal?window:o;if(t.preload){var n,r=document.getElementById(o._loadingScreenId),i=(r||((r=document.createElement("div")).innerHTML="Loading...",r.style.position="absolute",r.id=o._loadingScreenId,(o._userNode||document.body).appendChild(r)),o._preloadMethods);for(n in i){i[n]=i[n]||e;var a=i[n];a!==e.prototype&&a!==e||(o._isGlobal&&(window[n]=o._wrapPreload(o,n)),a=o),o._registeredPreloadMethods[n]=a[n],a[n]=o._wrapPreload(a,n)}t.preload(),o._runIfPreloadsAreDone()}else o._setup(),o._recording||o._draw()},this._runIfPreloadsAreDone=function(){var e,t=this._isGlobal?window:this;0===t._preloadCount&&((e=document.getElementById(t._loadingScreenId))&&e.parentNode.removeChild(e),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),t._setup(),this._recording||t._draw()))},this._decrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||"function"!=typeof e.preload||(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n._registeredPreloadMethods[t].apply(e,o)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){o.createCanvas(o._defaultCanvasSize.width,o._defaultCanvasSize.height,"p2d");var e=o._isGlobal?window:o;if("function"==typeof e.preload)for(var t in o._preloadMethods)e[t]=o._preloadMethods[t][t],e[t]&&o&&(e[t]=e[t].bind(o));o._millisStart=window.performance.now(),e._preloadDone=!0,"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),r=!0,i=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}o._lastTargetFrameTime=window.performance.now(),o._lastRealFrameTime=window.performance.now(),o._setupDone=!0,(o._accessibleOutputs.grid||o._accessibleOutputs.text)&&o._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-o._lastTargetFrameTime,n=1e3/o._targetFrameRate;(!o._loop||n-5<=t)&&(o.deltaTime=e-o._lastRealFrameTime,o._setProperty("deltaTime",o.deltaTime),o._frameRate=1e3/o.deltaTime,o.redraw(),o._lastTargetFrameTime=Math.max(o._lastTargetFrameTime+n,e),o._lastRealFrameTime=e,void 0!==o._updateMouseCoords&&(o._updateMouseCoords(),o._setProperty("movedX",0),o._setProperty("movedY",0))),o._loop&&(o._requestAnimId=window.requestAnimationFrame(o._draw))},this._setProperty=function(e,t){o[e]=t,o._isGlobal&&(window[e]=t)},this.remove=function(){if((r=document.getElementById(o._loadingScreenId))&&(r.parentNode.removeChild(r),o._incrementPreload()),o._curElement){for(var t in o._loop=!1,o._requestAnimId&&window.cancelAnimationFrame(o._requestAnimId),o._events)window.removeEventListener(t,o._events[t]);var n=!0,r=!1,i=void 0;try{for(var a,s=o._elements[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l,c=a.value;for(l in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(l,c._events[l])}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}var u=o;o._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(u)}))}if(o._isGlobal){for(var d in e.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var h in o)if(o.hasOwnProperty(h))try{delete window[h]}catch(t){window[h]=void 0}e.instance=null}},this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var d,h,p=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var f in this._isGlobal=!0,e.instance=this,e.prototype)"function"==typeof e.prototype[f]?(d=f.substring(2),this._events.hasOwnProperty(d)||(Math.hasOwnProperty(f)&&Math[f]===e.prototype[f]?p(f,e.prototype[f]):p(f,e.prototype[f].bind(this)))):p(f,e.prototype[f]);for(var m in this)this.hasOwnProperty(m)&&p(m,this[m])}for(h in this._events){var g=this["_on".concat(h)];g&&(g=g.bind(this),window.addEventListener(h,g,{passive:!1}),this._events[h]=g)}function y(){o._setProperty("focused",!0)}function v(){o._setProperty("focused",!1)}window.addEventListener("focus",y),window.addEventListener("blur",v),this.registerMethod("remove",(function(){window.removeEventListener("focus",y),window.removeEventListener("blur",v)})),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t;return(t=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(t,r){e.disableFriendlyErrors,n[t]=r}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();for(i in s.instance=null,s.disableFriendlyErrors=!1,a)s.prototype[i]=a[i];s.VERSION=a.VERSION,s.prototype._preloadMethods={loadJSON:s.prototype,loadImage:s.prototype,loadStrings:s.prototype,loadXML:s.prototype,loadBytes:s.prototype,loadTable:s.prototype,loadFont:s.prototype,loadModel:s.prototype,loadShader:s.prototype},s.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},s.prototype._registeredPreloadMethods={},n.default=s},{"./constants":262,"./shim":284,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],274:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.default.Element=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.elt=t,this._pInst=this._pixelsState=n,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var t,n,i;return t=e,i=[{key:"_adjustListener",value:function(e,t,n){return!1===t?r.default.Element._detachListener(e,n):r.default.Element._attachListener(e,t,n),this}},{key:"_attachListener",value:function(e,t,n){n._events[e]&&r.default.Element._detachListener(e,n),t=t.bind(n),n.elt.addEventListener(e,t,!1),n._events[e]=t}},{key:"_detachListener",value:function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null}}],(n=[{key:"parent",value:function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof r.default.Element&&(e=e.elt),e.appendChild(this.elt),this)}},{key:"id",value:function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)}},{key:"mousePressed",value:function(e){return r.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this,t)}),this),this}},{key:"doubleClicked",value:function(e){return r.default.Element._adjustListener("dblclick",e,this),this}},{key:"mouseWheel",value:function(e){return r.default.Element._adjustListener("wheel",e,this),this}},{key:"mouseReleased",value:function(e){return r.default.Element._adjustListener("mouseup",e,this),this}},{key:"mouseClicked",value:function(e){return r.default.Element._adjustListener("click",e,this),this}},{key:"mouseMoved",value:function(e){return r.default.Element._adjustListener("mousemove",e,this),this}},{key:"mouseOver",value:function(e){return r.default.Element._adjustListener("mouseover",e,this),this}},{key:"mouseOut",value:function(e){return r.default.Element._adjustListener("mouseout",e,this),this}},{key:"touchStarted",value:function(e){return r.default.Element._adjustListener("touchstart",e,this),this}},{key:"touchMoved",value:function(e){return r.default.Element._adjustListener("touchmove",e,this),this}},{key:"touchEnded",value:function(e){return r.default.Element._adjustListener("touchend",e,this),this}},{key:"dragOver",value:function(e){return r.default.Element._adjustListener("dragover",e,this),this}},{key:"dragLeave",value:function(e){return r.default.Element._adjustListener("dragleave",e,this),this}},{key:"_setProperty",value:function(e,t){this[e]=t}}])&&o(t.prototype,n),i&&o(t,i),e}(),e=r.default.Element,n.default=e},{"./main":273}],275:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(d=e("./main"))&&d.__esModule?d:{default:d},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.default.Graphics=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var n=function(e){return function(){var t,n=u(e);return l(this,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=u(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}(r);function r(e,t,a,s,u){var d;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");p=u||document.createElement("canvas"),(d=n.call(this,p,s)).canvas=p;var h,p=a||i.P2D;for(h in a=s._userNode||document.body,u||a.appendChild(d.canvas),o.default.prototype)d[h]||("function"==typeof o.default.prototype[h]?d[h]=o.default.prototype[h].bind(c(d)):d[h]=o.default.prototype[h]);return o.default.prototype._initializeInstanceVariables.apply(c(d)),d.width=e,d.height=t,d._pixelDensity=s._pixelDensity,p===i.WEBGL?d._renderer=new o.default.RendererGL(d.canvas,c(d),!1):d._renderer=new o.default.Renderer2D(d.canvas,c(d),!1),s._elements.push(c(d)),Object.defineProperty(c(d),"deltaTime",{get:function(){return this._pInst.deltaTime}}),d._renderer.resize(e,t),d._renderer._applyDefaults(),l(d,c(d))}return t=r,(e=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e])}},{key:"createFramebuffer",value:function(e){return new o.default.Framebuffer(this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Element);var d=o.default.Graphics;n.default=d},{"./constants":262,"./main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],276:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("./main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var n=function(e){return function(){var t,n,r=c(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=c(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==a(n)&&"function"!=typeof n?l(r):n}}(r);function r(e,t,o){var a;if(this instanceof r)return(a=n.call(this,e,t)).canvas=e,a._pixelsState=t,o?(a._isMainCanvas=!0,a._pInst._setProperty("_curElement",l(a)),a._pInst._setProperty("canvas",a.canvas),a._pInst._setProperty("width",a.width),a._pInst._setProperty("height",a.height)):(a.canvas.style.display="none",a._styles=[]),a._textSize=12,a._textLeading=15,a._textFont="sans-serif",a._textStyle=i.NORMAL,a._textAscent=null,a._textDescent=null,a._textAlign=i.LEFT,a._textBaseline=i.BASELINE,a._textWrap=i.WORD,a._rectMode=i.CORNER,a._ellipseMode=i.CENTER,a._curveTightness=0,a._imageMode=i.CORNER,a._tint=null,a._doStroke=!0,a._doFill=!0,a._strokeSet=!1,a._fillSet=!1,a._leadingSet=!1,a;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"push",value:function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(e){e.properties&&Object.assign(this,e.properties)}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(e,t,n,r){var i=this._pixelsState,a=i._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=i.width,r=i.height;else if(e*=a,t*=a,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);return(i=new o.default.Image(n,r)).canvas.getContext("2d").drawImage(s,e,t,n*a,r*a,0,0,n,r),i}},{key:"textLeading",value:function(e){return"number"==typeof e?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",e),this._pInst):this._textLeading}},{key:"textStyle",value:function(e){return e?(e!==i.NORMAL&&e!==i.ITALIC&&e!==i.BOLD&&e!==i.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(e){return this._setProperty("_textWrap",e),this._textWrap}},{key:"text",value:function(e,t,n,r,o){var a,s,l,c,u=this._pInst,d=this._textWrap,h=Number.MAX_VALUE,p=n;if((this._doFill||this._doStroke)&&void 0!==e){if(a=(e=(e="string"!=typeof e?e.toString():e).replace(/(\t)/g,"  ")).split("\n"),void 0!==r){switch(this._rectMode===i.CENTER&&(t-=r/2),this._textAlign){case i.CENTER:t+=r/2;break;case i.RIGHT:t+=r}if(void 0!==o){this._rectMode===i.CENTER&&(n-=o/2,p-=o/2),e=n;var f=u.textAscent();switch(this._textBaseline){case i.BOTTOM:c=n+o,n=Math.max(c,n),p+=f;break;case i.CENTER:c=n+o/2,n=Math.max(c,n),p+=f/2}h=n+o-f,this._textBaseline===i.CENTER&&(h=e+o-f/2)}else this._textBaseline!==i.BOTTOM&&this._textBaseline!==i.CENTER||(p=n-(e=u.textSize()*this._textLeading)/2,h=n+e/2);if(d===i.WORD){for(var m=[],g=0;g<a.length;g++){for(var y="",v=a[g].split(" "),b=0;b<v.length;b++)s="".concat(y+v[b])+" ",y=r<(l=this.textWidth(s))&&0<y.length?(m.push(y),"".concat(v[b])+" "):s;m.push(y)}var x=0;this._textBaseline===i.CENTER?x=(m.length-1)*u.textLeading()/2:this._textBaseline===i.BOTTOM&&(x=(m.length-1)*u.textLeading());for(var w=0;w<a.length;w++){y="",v=a[w].split(" ");for(var S=0;S<v.length;S++)s="".concat(y+v[S])+" ",r<(l=this.textWidth(s))&&0<y.length?(this._renderText(u,y.trim(),t,n-x,h,p),y="".concat(v[S])+" ",n+=u.textLeading()):y=s;this._renderText(u,y.trim(),t,n-x,h,p),n+=u.textLeading()}}else{for(var _=[],k=0;k<a.length;k++)for(var T=a[k].split(y=""),E=0;E<T.length;E++)s="".concat(y+T[E]),(l=this.textWidth(s))<=r?y+=T[E]:r<l&&0<y.length&&(_.push(y),y="".concat(T[E]));_.push(y);var C=0;this._textBaseline===i.CENTER?C=(_.length-1)*u.textLeading()/2:this._textBaseline===i.BOTTOM&&(C=(_.length-1)*u.textLeading());for(var I=0;I<a.length;I++){T=a[I].split(y="");for(var j=0;j<T.length;j++)s="".concat(y+T[j]),(l=this.textWidth(s))<=r?y+=T[j]:r<l&&0<y.length&&(this._renderText(u,y.trim(),t,n-C,h,p),n+=u.textLeading(),y="".concat(T[j]))}this._renderText(u,y.trim(),t,n-C,h,p),n+=u.textLeading()}}else{var A=0;this._textBaseline===i.CENTER?A=(a.length-1)*u.textLeading()/2:this._textBaseline===i.BOTTOM&&(A=(a.length-1)*u.textLeading());for(var O=0;O<a.length;O++)this._renderText(u,a[O],t,n-A,h,p-A),n+=u.textLeading()}return u}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===a(e)&&e.font&&e.font.supported}},{key:"_updateTextMetrics",value:function(){var e,t,n,r,o,i;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((e=document.createElement("span")).style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|",(i=document.createElement("div")).style.display="inline-block",i.style.width="1px",i.style.height="0px",(t=document.createElement("div")).appendChild(e),t.appendChild(i),t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t),i.style.verticalAlign="baseline",r=d(i),o=d(e),n=r[1]-o[1],i.style.verticalAlign="bottom",r=d(i),o=d(e),i=r[1]-o[1]-n,document.body.removeChild(t),this._setProperty("_textAscent",n),this._setProperty("_textDescent",i)),this}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Element);function d(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}u.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._leadingSet||this._setProperty("_textLeading",e*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},o.default.Renderer=u,e=o.default.Renderer,n.default=e},{"../core/constants":262,"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],277:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(d=e("./main"))&&d.__esModule?d:{default:d},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t))return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(n):e.value})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e("./p5.Renderer");var u="rgba(0,0,0,0)",d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e);var n=function(e){return function(){var t,n=c(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=c(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==a(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}(r);function r(e,t,o){if(this instanceof r)return(e=n.call(this,e,t,o)).drawingContext=e.canvas.getContext("2d"),e._pInst._setProperty("drawingContext",e.drawingContext),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(e,t){s(c(r.prototype),"resize",this).call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var e,t;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof o.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(e=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(e,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(e=this._getFill(),t=(t=this._pInst).color.apply(t,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(t.levels),t=t.toString(),this._setFill(t),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setFill(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",e.levels)}},{key:"stroke",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setStroke(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",e.levels)}},{key:"erase",value:function(e,t){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,e=this._pInst.color(255,e).toString(),this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,e=this._pInst.color(255,t).toString(),this.drawingContext.strokeStyle=e,t=this._cachedBlendMode,this.blendMode(i.REMOVE),this._cachedBlendMode=t,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"image",value:function(e,t,n,r,i,a,s,l,c){e.gifProperties&&e._animateGif(this._pInst);try{o.default.MediaElement&&e instanceof o.default.MediaElement&&e._ensureCanvas();var u=(u=this._tint&&e.canvas?this._getTintedImageCanvas(e):u)||e.canvas||e.elt,d=1;e.width&&0<e.width&&(d=u.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(u,d*t,d*n,d*r,d*i,a,s,l,c),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}}},{key:"_getTintedImageCanvas",value:function(e){if(!e.canvas)return e;e.tintCanvas||(e.tintCanvas=document.createElement("canvas")),e.tintCanvas.width!==e.canvas.width&&(e.tintCanvas.width=e.canvas.width),e.tintCanvas.height!==e.canvas.height&&(e.tintCanvas.height=e.canvas.height);var t=e.tintCanvas.getContext("2d");return t.save(),t.clearRect(0,0,e.canvas.width,e.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(t.drawImage(e.canvas,0,0),t.globalCompositeOperation="luminosity",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="color",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="multiply",t.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),t.fillRect(0,0,e.canvas.width,e.canvas.height),t.globalCompositeOperation="destination-in"),t.globalAlpha=this._tint[3]/255,t.drawImage(e.canvas,0,0),t.restore(),e.tintCanvas}},{key:"blendMode",value:function(e){if(e===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==i.BLEND&&e!==i.REMOVE&&e!==i.DARKEST&&e!==i.LIGHTEST&&e!==i.DIFFERENCE&&e!==i.MULTIPLY&&e!==i.EXCLUSION&&e!==i.SCREEN&&e!==i.REPLACE&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE&&e!==i.BURN&&e!==i.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}}},{key:"blend",value:function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[n.length-1],a=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=i,o.default.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=e}},{key:"_getPixel",value:function(e,t){return[(e=this.drawingContext.getImageData(e,t,1,1).data)[0],e[1],e[2],e[3]]}},{key:"loadPixels",value:function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t;t=this.height*t,n=this.drawingContext.getImageData(0,0,n,t),e._setProperty("imageData",n),e._setProperty("pixels",n.data)}},{key:"set",value:function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof o.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var i=0,a=0,s=0,l=0,c=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels.call(r),"number"==typeof n)c<r.pixels.length&&(s=a=i=n,l=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");c<r.pixels.length&&(i=n[0],a=n[1],s=n[2],l=n[3])}else n instanceof o.default.Color&&c<r.pixels.length&&(i=n.levels[0],a=n.levels[1],s=n.levels[2],l=n.levels[3]);for(var u=0;u<r._pixelDensity;u++)for(var d=0;d<r._pixelDensity;d++)c=4*((t*r._pixelDensity+d)*this.width*r._pixelDensity+(e*r._pixelDensity+u)),r.pixels[c]=i,r.pixels[c+1]=a,r.pixels[c+2]=s,r.pixels[c+3]=l}}},{key:"updatePixels",value:function(e,t,n,r){var o=this._pixelsState,i=o._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=i,t*=i,n*=i,r*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=o.imageData),this.drawingContext.putImageData(o.imageData,e,t,0,0,n,r)}},{key:"_acuteArcToBezier",value:function(e,t){var n=t/2,r=Math.cos(n),o=Math.sin(n),i=1/Math.tan(n),a=(n=e+n,Math.cos(n)),s=(n=Math.sin(n),(4-r)/3);return o+=(r-s)*i,{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(s*a+o*n).toFixed(7),by:(s*n-o*a).toFixed(7),cx:(s*a-o*n).toFixed(7),cy:(s*n+o*a).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}}},{key:"arc",value:function(e,t,n,r,o,a,s){var l,c=this.drawingContext,u=n/2,d=r/2,h=[];for(e+=u,t+=d;1e-5<=a-o;)l=Math.min(a-o,i.HALF_PI),h.push(this._acuteArcToBezier(o,l)),o+=l;return this._doFill&&(c.beginPath(),h.forEach((function(n,r){0===r&&c.moveTo(e+n.ax*u,t+n.ay*d),c.bezierCurveTo(e+n.bx*u,t+n.by*d,e+n.cx*u,t+n.cy*d,e+n.dx*u,t+n.dy*d)})),s!==i.PIE&&null!=s||c.lineTo(e,t),c.closePath(),c.fill()),this._doStroke&&(c.beginPath(),h.forEach((function(n,r){0===r&&c.moveTo(e+n.ax*u,t+n.ay*d),c.bezierCurveTo(e+n.bx*u,t+n.by*d,e+n.cx*u,t+n.cy*d,e+n.dx*u,t+n.dy*d)})),s===i.PIE?(c.lineTo(e,t),c.closePath()):s===i.CHORD&&c.closePath(),c.stroke()),this}},{key:"ellipse",value:function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,o=parseFloat(e[0]),i=parseFloat(e[1]),a=parseFloat(e[2]);if(e=parseFloat(e[3]),n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;var s=a/2*.5522847498,l=e/2*.5522847498,c=o+a,d=i+e;a=o+a/2,e=i+e/2,t.beginPath(),t.moveTo(o,e),t.bezierCurveTo(o,e-l,a-s,i,a,i),t.bezierCurveTo(a+s,i,c,e-l,c,e),t.bezierCurveTo(c,e+l,a+s,d,a,d),t.bezierCurveTo(a-s,d,o,e+l,o,e),n&&t.fill(),r&&t.stroke()}},{key:"line",value:function(e,t,n,r){var o=this.drawingContext;return this._doStroke&&this._getStroke()!==u&&(o.beginPath(),o.moveTo(e,t),o.lineTo(n,r),o.stroke()),this}},{key:"point",value:function(e,t){var n,r,o=this.drawingContext;return this._doStroke&&this._getStroke()!==u?(n=this._getStroke(),r=this._getFill(),this._setFill(n),o.beginPath(),o.arc(e,t,o.lineWidth/2,0,i.TWO_PI,!1),o.fill(),void this._setFill(r)):this}},{key:"quad",value:function(e,t,n,r,o,i,a,s){var l=this.drawingContext,c=this._doFill,d=this._doStroke;if(c&&!d){if(this._getFill()===u)return this}else if(!c&&d&&this._getStroke()===u)return this;return l.beginPath(),l.moveTo(e,t),l.lineTo(n,r),l.lineTo(o,i),l.lineTo(a,s),l.closePath(),c&&l.fill(),d&&l.stroke(),this}},{key:"rect",value:function(e){var t,n,r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],d=(e=e[7],this.drawingContext),h=this._doFill,p=this._doStroke;if(h&&!p){if(this._getFill()===u)return this}else if(!h&&p&&this._getStroke()===u)return this;return d.beginPath(),void 0===s?d.rect(r,o,i,a):(void 0===l&&(l=s),void 0===c&&(c=l),void 0===e&&(e=c),p=(h=Math.abs(i))/2,n=(t=Math.abs(a))/2,t<2*(s=h<2*s?p:s)&&(s=n),t<2*(l=h<2*l?p:l)&&(l=n),t<2*(c=h<2*c?p:c)&&(c=n),t<2*(e=h<2*e?p:e)&&(e=n),d.beginPath(),d.moveTo(r+s,o),d.arcTo(r+i,o,r+i,o+a,l),d.arcTo(r+i,o+a,r,o+a,c),d.arcTo(r,o+a,r,o,e),d.arcTo(r,o,r+i,o,s),d.closePath()),this._doFill&&d.fill(),this._doStroke&&d.stroke(),this}},{key:"triangle",value:function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,o=e[0],i=e[1],a=e[2],s=e[3],l=e[4];if(e=e[5],n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;t.beginPath(),t.moveTo(o,i),t.lineTo(a,s),t.lineTo(l,e),t.closePath(),n&&t.fill(),r&&t.stroke()}},{key:"endShape",value:function(e,t,n,r,o,a,s){if(0!==t.length&&(this._doStroke||this._doFill)){var l,c,u,d=e===i.CLOSE,h=(d&&!a&&t.push(t[0]),t.length);if(!n||s!==i.POLYGON&&null!==s)if(!r||s!==i.POLYGON&&null!==s)if(!o||s!==i.POLYGON&&null!==s)if(s===i.POINTS)for(c=0;c<h;c++)l=t[c],this._doStroke&&this._pInst.stroke(l[6]),this._pInst.point(l[0],l[1]);else if(s===i.LINES)for(c=0;c+1<h;c+=2)l=t[c],this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(l[0],l[1],t[c+1][0],t[c+1][1]);else if(s===i.TRIANGLES)for(c=0;c+2<h;c+=3)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke());else if(s===i.TRIANGLE_STRIP)for(c=0;c+1<h;c++)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(l[0],l[1]),this._doStroke&&this._pInst.stroke(t[c+1][6]),this._doFill&&this._pInst.fill(t[c+1][5]),c+2<h&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this._doStroke&&this._pInst.stroke(t[c+2][6]),this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose(d);else if(s===i.TRIANGLE_FAN){if(2<h){for(this.drawingContext.beginPath(),c=2;c<h;c++)l=t[c],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),c<h-1&&(this._doFill&&l[5]!==t[c+1][5]||this._doStroke&&l[6]!==t[c+1][6])&&(this._doFill&&(this._pInst.fill(l[5]),this.drawingContext.fill(),this._pInst.fill(t[c+1][5])),this._doStroke&&(this._pInst.stroke(l[6]),this.drawingContext.stroke(),this._pInst.stroke(t[c+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(d)}}else if(s===i.QUADS)for(c=0;c+3<h;c+=4){for(l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),u=1;u<4;u++)this.drawingContext.lineTo(t[c+u][0],t[c+u][1]);this.drawingContext.lineTo(l[0],l[1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose(d)}else if(s===i.QUAD_STRIP){if(3<h)for(c=0;c+1<h;c+=2)l=t[c],this.drawingContext.beginPath(),c+3<h?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<h;c++)(l=t[c]).isVert&&(l.moveTo?this.drawingContext.moveTo(l[0],l[1]):this.drawingContext.lineTo(l[0],l[1]));this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),c=0;c<h;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),c=0;c<h;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose(d)}else if(3<h){var p=[],f=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<h;c++)l=t[c],p[0]=[l[0],l[1]],p[1]=[l[0]+(f*t[c+1][0]-f*t[c-1][0])/6,l[1]+(f*t[c+1][1]-f*t[c-1][1])/6],p[2]=[t[c+1][0]+(f*t[c][0]-f*t[c+2][0])/6,t[c+1][1]+(f*t[c][1]-f*t[c+2][1])/6],p[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]);d&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose(d)}a=o=r=n=!1,d&&t.pop()}return this}},{key:"strokeCap",value:function(e){return e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||(this.drawingContext.lineCap=e),this}},{key:"strokeJoin",value:function(e){return e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||(this.drawingContext.lineJoin=e),this}},{key:"strokeWeight",value:function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)}},{key:"bezier",value:function(e,t,n,r,o,i,a,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,o,i,a,s),this._pInst.endShape(),this}},{key:"curve",value:function(e,t,n,r,o,i,a,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(o,i),this._pInst.curveVertex(a,s),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(e,t,n,r,o,i){this.drawingContext.transform(e,t,n,r,o,i)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(e){this.drawingContext.rotate(e)}},{key:"scale",value:function(e,t){return this.drawingContext.scale(e,t),this}},{key:"translate",value:function(e,t){return e instanceof o.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this}},{key:"_renderText",value:function(e,t,n,r,o,a){if(!(r<a||o<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e}},{key:"textWidth",value:function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width}},{key:"_applyTextProperties",value:function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t}},{key:"push",value:function(){return this.drawingContext.save(),s(c(r.prototype),"push",this).call(this)}},{key:"pop",value:function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,s(c(r.prototype),"pop",this).call(this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Renderer);d.prototype.text=function(e,t,n,r,a){var s;return void 0!==r&&this.drawingContext.textBaseline===i.BASELINE&&(s=!0,this.drawingContext.textBaseline=i.TOP),r=o.default.Renderer.prototype.text.apply(this,arguments),s&&(this.drawingContext.textBaseline=i.BASELINE),r},o.default.Renderer2D=d,e=o.default.Renderer2D,n.default=e},{"./constants":262,"./main":273,"./p5.Renderer":276,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],278:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(e=e("./main"))&&e.__esModule?e:{default:e};function o(){return{}}r.default.prototype._promisePreloads=[];var i=!(r.default.prototype.registerPromisePreload=function(e){r.default.prototype._promisePreloads.push(e)});r.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var o,a=this._promisePreloads[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value,l=this,c=s.method,u=s.addCallbacks,d=s.legacyPreloadSetup,h=s.target||this,p=h[c].bind(h);if(h===r.default.prototype){if(i)continue;l=null,p=h[c]}h[c]=this._wrapPromisePreload(l,p,u),d&&(h[d.method]=this._legacyPreloadGenerator(l,d,h[c]))}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}i=!0},r.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){for(var e=this,r=(this._incrementPreload(),null),o=null,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(n)for(var l=a.length-1;0<=l&&!o&&"function"==typeof a[l];l--)o=r,r=a.pop();var c=Promise.resolve(t.apply(this,a));return r&&c.then(r),o&&c.catch(o),c.then((function(){return e._decrementPreload()})),c};return e?r.bind(e):r},r.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||o;return t=function(){var e=this;this._incrementPreload();for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=r.apply(this,o);return n.apply(this,o).then((function(t){Object.assign(a,t),e._decrementPreload()})),a},e?t.bind(e):t}},{"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],279:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("./main"))&&l.__esModule?l:{default:l},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var s="defaultCanvas0",l=(o.default.prototype.createCanvas=function(e,t,n,r){var a,l,c;if(o.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(n=i.P2D,r=arguments[2]):a=n||i.P2D,r)(c=document.getElementById(s))&&c.parentNode.removeChild(c),c=r,this._defaultGraphicsCreated=!1;else{if(a===i.WEBGL)(c=document.getElementById(s))&&(c.parentNode.removeChild(c),l=this._renderer,this._elements=this._elements.filter((function(e){return e!==l}))),(c=document.createElement("canvas")).id=s,c.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)c=this.canvas;else{c=r||document.createElement("canvas");for(var u=0;document.getElementById("defaultCanvas".concat(u));)u++;s="defaultCanvas".concat(u),c.id=s,c.classList.add("p5Canvas")}this._setupDone||(c.dataset.hidden=!0,c.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(n=document.createElement("main"),document.body.appendChild(n)),document.getElementsByTagName("main")[0])).appendChild(c)}return a===i.WEBGL?(this._setProperty("_renderer",new o.default.RendererGL(c,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new o.default.Renderer2D(c,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},o.default.prototype.resizeCanvas=function(e,t,n){if(o.default._validateParameters("resizeCanvas",arguments),this._renderer){var r,i,s={};for(r in this.drawingContext){var l=this.drawingContext[r];"object"!==a(l)&&"function"!=typeof l&&(s[r]=l)}for(i in this.width=e,this.height=t,this._renderer.resize(e,t),s)try{this.drawingContext[i]=s[i]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},o.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},o.default.prototype.createGraphics=function(e,t,n,r){return arguments[2]instanceof HTMLCanvasElement&&(n=i.P2D,r=arguments[2]),o.default._validateParameters("createGraphics",arguments),new o.default.Graphics(e,t,n,this,r)},o.default.prototype.createFramebuffer=function(e){return new o.default.Framebuffer(this,e)},o.default.prototype.blendMode=function(e){o.default._validateParameters("blendMode",arguments),e===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=i.BLEND),this._renderer.blendMode(e)},o.default);n.default=l},{"../webgl/p5.RendererGL":328,"./constants":262,"./main":273,"./p5.Graphics":275,"./p5.Renderer2D":277,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],280:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=l(e("../main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants")),s=l(e("../helpers"));function l(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(e,t,n,r,o){var i;return e-=a.TWO_PI*Math.floor(e/a.TWO_PI),t-=a.TWO_PI*Math.floor(t/a.TWO_PI),i=Math.min(Math.abs(e-t),a.TWO_PI-Math.abs(e-t)),o&&(e=e<=a.HALF_PI?Math.atan(n/r*Math.tan(e)):e>a.HALF_PI&&e<=3*a.HALF_PI?Math.atan(n/r*Math.tan(e))+a.PI:Math.atan(n/r*Math.tan(e))+a.TWO_PI,t=t<=a.HALF_PI?Math.atan(n/r*Math.tan(t)):t>a.HALF_PI&&t<=3*a.HALF_PI?Math.atan(n/r*Math.tan(t))+a.PI:Math.atan(n/r*Math.tan(t))+a.TWO_PI),t<e&&(t+=a.TWO_PI),{start:e,stop:t,correspondToSamePoint:i<1e-5}},i.default.prototype.arc=function(e,t,n,r,o,a,l,c){return i.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&o!==a&&(o=this._toRadians(o),a=this._toRadians(a),n=Math.abs(n),r=Math.abs(r),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),(t=this._normalizeArcAngles(o,a,e.w,e.h,!0)).correspondToSamePoint?this._renderer.ellipse([e.x,e.y,e.w,e.h,c]):(this._renderer.arc(e.x,e.y,e.w,e.h,t.start,t.stop,l,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[e.x,e.y,e.w,e.h,t.start,t.stop,l]))),this},i.default.prototype.ellipse=function(e,t,n,r,o){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e))},i.default.prototype._renderEllipse=function(e,t,n,r,o){return(this._renderer._doStroke||this._renderer._doFill)&&(n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r)),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),this._renderer.ellipse([e.x,e.y,e.w,e.h,o]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[e.x,e.y,e.w,e.h])),this},i.default.prototype.line=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("line",n),this._renderer._doStroke&&(e=this._renderer).line.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",n),this},i.default.prototype.point=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("point",n),this._renderer._doStroke&&(1===n.length&&n[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,n[0].x,n[0].y,n[0].z):((e=this._renderer).point.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",n))),this},i.default.prototype.quad=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("quad",n),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&n.length<12?this._renderer.quad.call(this._renderer,n[0],n[1],0,n[2],n[3],0,n[4],n[5],0,n[6],n[7],0,n[8],n[9]):((e=this._renderer).quad.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",n))),this},i.default.prototype.rect=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("rect",t),this._renderRect.apply(this,t)},i.default.prototype.square=function(e,t,n,r,o,a,s){return i.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,o,a,s)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=s.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},i.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this},e=i.default,n.default=e},{"../constants":262,"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../helpers":269,"../main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],281:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(s=e("../main"))&&s.__esModule?s:{default:s},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants"));i.default.prototype.ellipseMode=function(e){return i.default._validateParameters("ellipseMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._ellipseMode=e),this},i.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(e){return i.default._validateParameters("rectMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._rectMode=e),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(e){return i.default._validateParameters("strokeCap",arguments),e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||this._renderer.strokeCap(e),this},i.default.prototype.strokeJoin=function(e){return i.default._validateParameters("strokeJoin",arguments),e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||this._renderer.strokeJoin(e),this},i.default.prototype.strokeWeight=function(e){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var s=i.default;n.default=s},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],282:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(o=e("../main"))&&o.__esModule?o:{default:o};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},r.default.prototype.bezierDetail=function(e){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},r.default.prototype.bezierPoint=function(e,t,n,o,i){r.default._validateParameters("bezierPoint",arguments);var a=1-i;return Math.pow(a,3)*e+3*Math.pow(a,2)*i*t+3*a*Math.pow(i,2)*n+Math.pow(i,3)*o},r.default.prototype.bezierTangent=function(e,t,n,o,i){r.default._validateParameters("bezierTangent",arguments);var a=1-i;return 3*o*Math.pow(i,2)-3*n*Math.pow(i,2)+6*n*a*i-6*t*a*i+3*t*Math.pow(a,2)-3*e*Math.pow(a,2)},r.default.prototype.curve=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("curve",n),this._renderer._doStroke&&(e=this._renderer).curve.apply(e,n),this},r.default.prototype.curveDetail=function(e){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},r.default.prototype.curveTightness=function(e){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},r.default.prototype.curvePoint=function(e,t,n,o,i){r.default._validateParameters("curvePoint",arguments);var a=this._renderer._curveTightness,s=i*i*i,l=i*i;return e*((a-1)/2*s+(1-a)*l+(a-1)/2*i)+t*((a+3)/2*s+(-5-a)/2*l+1)+n*((-3-a)/2*s+(a+2)*l+(1-a)/2*i)+o*((1-a)/2*s+(a-1)/2*l)},r.default.prototype.curveTangent=function(e,t,n,o,i){r.default._validateParameters("curveTangent",arguments);var a=this._renderer._curveTightness,s=i*i*3;return e*((a-1)/2*s+(1-a)*(i*=2)+(a-1)/2)+t*((a+3)/2*s+(-5-a)/2*i)+n*((-3-a)/2*s+(a+2)*i+(1-a)/2)+o*((1-a)/2*s+(a-1)/2*i)};var o=r.default;n.default=o},{"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../main":273}],283:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(m=e("../main"))&&m.__esModule?m:{default:m},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants")),s=null,l=[],c=[],u=!1,d=!1,h=!1,p=!1,f=!0,m=(i.default.prototype.beginContour=function(){return c=[],p=!0,this},i.default.prototype.beginShape=function(e){var t;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(s=e===a.POINTS||e===a.LINES||e===a.TRIANGLES||e===a.TRIANGLE_FAN||e===a.TRIANGLE_STRIP||e===a.QUADS||e===a.QUAD_STRIP?e:null,l=[],c=[]),this},i.default.prototype.bezierVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(i.default._validateParameters("bezierVertex",n),this._renderer.isP3D)(e=this._renderer).bezierVertex.apply(e,n);else if(0===l.length)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{u=!0;for(var o=[],a=0;a<n.length;a++)o[a]=n[a];o.isVert=!1,(p?c:l).push(o)}return this},i.default.prototype.curveVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("curveVertex",n),this._renderer.isP3D?(e=this._renderer).curveVertex.apply(e,n):(d=!0,this.vertex(n[0],n[1])),this},i.default.prototype.endContour=function(){var e=c[0].slice();e.isVert=c[0].isVert,e.moveTo=!1,c.push(e),f&&(l.push(l[0]),f=!1);for(var t=0;t<c.length;t++)l.push(c[t]);return this},i.default.prototype.endShape=function(e){if(i.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,d,u,h,p,s);else{if(0===l.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===a.CLOSE;t&&!p&&l.push(l[0]),this._renderer.endShape(e,l,d,u,h,p,s),f=!(p=h=u=d=!1),t&&l.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(i.default._validateParameters("quadraticVertex",n),this._renderer.isP3D)(e=this._renderer).quadraticVertex.apply(e,n);else{if(this._contourInited)return(e={}).x=n[0],e.y=n[1],e.x3=n[2],e.y3=n[3],e.type=a.QUADRATIC,this._contourVertices.push(e),this;if(0<l.length){h=!0;for(var o=[],s=0;s<n.length;s++)o[s]=n[s];o.isVert=!1,(p?c:l).push(o)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(e,t,n,r,o){var i;return this._renderer.isP3D?(i=this._renderer).vertex.apply(i,arguments):((i=[]).isVert=!0,i[0]=e,i[1]=t,i[2]=0,i[3]=0,i[4]=0,i[5]=this._renderer._getFill(),i[6]=this._renderer._getStroke(),n&&(i.moveTo=n),(p?(0===c.length&&(i.moveTo=!0),c):l).push(i)),this},i.default.prototype.normal=function(e,t,n){var r;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(r=this._renderer).normal.apply(r,arguments),this},i.default);n.default=m},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],284:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var a,s,l;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(a=Object.keys,e=Object.defineProperty,s="function"==typeof Symbol&&"symbol"===i(Symbol()),l=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("target must be an object");for(var n,r=Object(e),i=1;i<arguments.length;++i){var c=Object(arguments[i]),u=a(c);for(s&&Object.getOwnPropertySymbols&&u.push.apply(u,o(Object.getOwnPropertySymbols(c).filter(function(e){return function(t){return l.call(e,t)}}(c)))),n=0;n<u.length;++n)r[u[n]]=c[u[n]]}return r},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/web.dom-collections.iterator":236}],285:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e),n=((isNaN(t)||t<1)&&(t=1),this._isGlobal?window:this);if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=function(e){e.call(n)},o=0;o<t;o++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(r),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(r)}}}},e=e.default,n.default=e},{"./main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.object.assign":174,"core-js/modules/web.dom-collections.for-each":235}],286:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};r.default.prototype.applyMatrix=function(){var e=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||e?(e=this._renderer).applyMatrix.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(e=this._renderer).applyMatrix.apply(e,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(e,t){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},r.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},r.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},r.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},r.default.prototype.scale=function(e,t,n){var o;return r.default._validateParameters("scale",arguments),e instanceof r.default.Vector?(e=(o=e).x,t=o.y,n=o.z):e instanceof Array&&(e=(o=e)[0],t=o[1],n=o[2]||1),isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,e,t,n),this},r.default.prototype.shearX=function(e){return r.default._validateParameters("shearX",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,0,Math.tan(e),1,0,0),this},r.default.prototype.shearY=function(e){return r.default._validateParameters("shearY",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,Math.tan(e),0,1,0,0),this},r.default.prototype.translate=function(e,t,n){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this},e=r.default,n.default=e},{"./main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236}],287:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}o.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=a(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof o.default.Color?n="p5.Color":t instanceof o.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t),e="".concat(e,"p5TypeID"),localStorage.setItem(e,n)},o.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,i(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,i(t))}return t},o.default.prototype.clearStorage=function(){localStorage.clear()},o.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],288:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function s(e){return function(){var t,n=l(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=l(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==i(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}o.default.prototype.createStringDict=function(e,t){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(e,t)},o.default.prototype.createNumberDict=function(e,t){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(e,t)},o.default.TypedDict=function(){function e(t,n){return c(this,e),t instanceof Object?this.data=t:(this.data={},this.data[t]=n),this}return d(e,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(e){return this.data.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))}},{key:"set",value:function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(e){for(var t in e)this.set(t,e[t])}},{key:"create",value:function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]}},{key:"print",value:function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))}},{key:"saveTable",value:function(e){var t,n="";for(t in this.data)n+="".concat(t,",").concat(this.data[t],"\n");var r=new Blob([n],{type:"text/csv"});o.default.prototype.downloadFile(r,e||"mycsv","csv")}},{key:"saveJSON",value:function(e,t){o.default.prototype.saveJSON(this.data,e,t)}},{key:"_validate",value:function(e){return!0}}]),e}(),o.default.StringDict=function(){a(t,o.default.TypedDict);var e=s(t);function t(){c(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.call.apply(e,[this].concat(r))}return d(t,[{key:"_validate",value:function(e){return"string"==typeof e}}]),t}(),o.default.NumberDict=function(){a(t,o.default.TypedDict);var e=s(t);function t(){c(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.call.apply(e,[this].concat(r))}return d(t,[{key:"_validate",value:function(e){return"number"==typeof e}},{key:"add",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"sub",value:function(e,t){this.add(e,-t)}},{key:"mult",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"div",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"_valueTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t,n=this.data[Object.keys(this.data)[0]];for(t in this.data)this.data[t]*e<n*e&&(n=this.data[t]);return n}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),t}(),e=o.default.TypedDict,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],289:[function(t,n,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){return(h="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function p(e,t,n){return(t._userNode||document.body).appendChild(e),n=new(n?i.default.MediaElement:i.default.Element)(e,t),t._elements.push(n),n}function f(e,t,n,r){var o=document.createElement(t),i=("string"==typeof(n=n||"")&&(n=[n]),!0),a=void(t=!1);try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=document.createElement("source");u.setAttribute("src",c),o.appendChild(u)}}catch(e){t=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(t)throw a}}"function"==typeof r&&o.addEventListener("canplaythrough",(function e(){r(),o.removeEventListener("canplaythrough",e)}));var d=p(o,e,!0);return d.loadedmetadata=!1,o.addEventListener("loadedmetadata",(function(){d.width=o.videoWidth,d.height=o.videoHeight,0===d.elt.width&&(d.elt.width=o.videoWidth),0===d.elt.height&&(d.elt.height=o.videoHeight),d.presetPlaybackRate&&(d.elt.playbackRate=d.presetPlaybackRate,delete d.presetPlaybackRate),d.loadedmetadata=!0})),d}function m(e,t,n,r){d(this,m),this.callback=e,this.time=t,this.id=n,this.val=r}i.default.prototype.select=function(e,t){return i.default._validateParameters("select",arguments),(t=this._getContainer(t).querySelector(e))?this._wrapElement(t):null},i.default.prototype.selectAll=function(e,t){i.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var o=0;o<r.length;o++){var a=this._wrapElement(r[o]);n.push(a)}return n},i.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof i.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},i.default.prototype._wrapElement=function(e){var t,n=Array.prototype.slice.call(e.children);return"INPUT"===e.tagName&&"checkbox"===e.type?((t=new i.default.Element(e,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},t):"VIDEO"===e.tagName||"AUDIO"===e.tagName?new i.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new i.default.Element(e,this)):0<n.length&&n.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))?this.createRadio(new i.default.Element(e,this)):new i.default.Element(e,this)},i.default.prototype.removeElements=function(e){i.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},i.default.Element.prototype.changed=function(e){return i.default.Element._adjustListener("change",e,this),this},i.default.Element.prototype.input=function(e){return i.default.Element._adjustListener("input",e,this),this},i.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,p(t,this)},i.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,p(t,this)},i.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,p(t,this)},i.default.prototype.createImg=function(){i.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=p(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},i.default.prototype.createA=function(e,t,n){i.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),p(r,this)},i.default.prototype.createSlider=function(e,t,n,r){i.default._validateParameters("createSlider",arguments);var o=document.createElement("input");return o.type="range",o.min=e,o.max=t,0===r?o.step=1e-18:r&&(o.step=r),"number"==typeof n&&(o.value=n),p(o,this)},i.default.prototype.createButton=function(e,t){i.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),p(n,this)},i.default.prototype.createCheckbox=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("createCheckbox",t);var r=document.createElement("div"),o=document.createElement("input"),a=(o.type="checkbox",document.createElement("label")),s=(a.appendChild(o),r.appendChild(a),p(r,this));return s.checked=function(){var e=s.elt.firstElementChild.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!(arguments.length<=0||!arguments[0])}return s},this.value=function(e){return s.value=e,this},t[0]&&(s.value(t[0]),(r=document.createElement("span")).innerHTML=t[0],a.appendChild(r)),t[1]&&(o.checked=!0),s},i.default.prototype.createSelect=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i.default._validateParameters("createSelect",n);var o,a=n[0];return a instanceof i.default.Element&&a.elt instanceof HTMLSelectElement?this.elt=(e=a).elt:a instanceof HTMLSelectElement?(e=p(a,this),this.elt=a):(o=document.createElement("select"),a&&"boolean"==typeof a&&o.setAttribute("multiple","true"),e=p(o,this),this.elt=o),e.option=function(e,t){var n;if(void 0!==e){for(var r,o=0;o<this.elt.length;o+=1)if(this.elt[o].textContent===e){n=o;break}void 0!==n?!1===t?this.elt.remove(n):this.elt[n].value=t:((r=document.createElement("option")).textContent=e,r.value=void 0===t?e:t,this.elt.appendChild(r),this._pInst._elements.push(r))}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=this.elt.selectedOptions[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l.value)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e.enable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!1,this.elt[t].selected=!1);else{this.elt.disabled=!1;for(var n=0;n<this.elt.length;n++)this.elt[n].disabled=!1,this.elt[n].selected=!1}return this},e},i.default.prototype.createRadio=function(){function e(e){return e instanceof HTMLInputElement&&"radio"===e.type}function t(e){return e instanceof HTMLLabelElement}var n,r,o,a=arguments.length<=0?void 0:arguments[0];return a instanceof i.default.Element&&(a.elt instanceof HTMLDivElement||a.elt instanceof HTMLSpanElement)?(n=a,this.elt=a.elt):a instanceof HTMLDivElement||a instanceof HTMLSpanElement?(n=p(a,this),r=this.elt=a,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(o=arguments.length<=1?void 0:arguments[1])):("string"==typeof a&&(o=a),r=document.createElement("div"),n=p(r,this),this.elt=r),n._name=o||"radioOption",n._getOptionsArray=function(){return Array.from(this.elt.children).filter((function(n){return e(n)||t(n)&&e(n.firstElementChild)})).map((function(t){return e(t)?t:t.firstElementChild}))},n.option=function(e,r){var o,i,a,s=!0,l=!1,c=void 0;try{for(var u,d=n._getOptionsArray()[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value;if(h.value===e){o=h;break}}}catch(e){l=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}return void 0===o&&((o=document.createElement("input")).setAttribute("type","radio"),o.setAttribute("value",e)),o.setAttribute("name",n._name),t(o.parentElement)?i=o.parentElement:(i=document.createElement("label")).insertAdjacentElement("afterbegin",o),i.lastElementChild instanceof HTMLSpanElement?a=i.lastElementChild:(a=document.createElement("span"),o.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===r?e:r,this.elt.appendChild(i),o},n.remove=function(e){var r=!0,o=!1,i=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.value===e)return void(t(l.parentElement)?l.parentElement:l).remove()}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}},n.value=function(){var e="",t=!0,r=!1,o=void 0;try{for(var i,a=n._getOptionsArray()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(s.checked){e=s.value;break}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return e},n.selected=function(e){var t=null;if(void 0===e){var r=!0,o=!1,i=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.checked){t=l;break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}else{n._getOptionsArray().forEach((function(e){e.checked=!1,e.removeAttribute("checked")}));var c=!0;o=!1,i=void 0;try{for(var u,d=n._getOptionsArray()[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value;h.value===e&&(h.setAttribute("checked",!0),h.checked=!0,t=h)}}catch(e){o=!0,i=e}finally{try{c||null==d.return||d.return()}finally{if(o)throw i}}}return t},n.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,r=!1,o=void 0;try{for(var i,a=n._getOptionsArray()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.setAttribute("disabled",e)}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}},n},i.default.prototype.createColorPicker=function(e){i.default._validateParameters("createColorPicker",arguments);var t=document.createElement("input");return t.type="color",e?e instanceof i.default.Color?t.value=e.toString("#rrggbb"):(i.default.prototype._colorMode="rgb",i.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},t.value=i.default.prototype.color(e).toString("#rrggbb")):t.value="#000000",(t=p(t,this)).color=function(){return e&&(e.mode&&(i.default.prototype._colorMode=e.mode),e.maxes&&(i.default.prototype._colorMaxes=e.maxes)),i.default.prototype.color(this.elt.value)},t},i.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",n=(i.default._validateParameters("createInput",arguments),document.createElement("input"));return n.setAttribute("value",e),n.setAttribute("type",t),p(n,this)},i.default.prototype.createFileInput=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(i.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(t=document.createElement("input")).setAttribute("type","file"),n&&t.setAttribute("multiple",!0),t.addEventListener("change",(function(t){var n=!0,r=!1,o=void 0;try{for(var a,s=t.target.files[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;i.default.File._load(l,e)}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}),!1),p(t,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},i.default.prototype.createVideo=function(e,t){return i.default._validateParameters("createVideo",arguments),f(this,"video",e,t)},i.default.prototype.createAudio=function(e,t){return i.default._validateParameters("createAudio",arguments),f(this,"audio",e,t)},i.default.prototype.VIDEO="video",i.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),i.default.prototype.createCapture=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(i.default._validateParameters("createCapture",t),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var r,o=!0,a=!0,s=0,l=t;s<l.length;s++){var c=l[s];c===i.default.prototype.VIDEO?a=!1:c===i.default.prototype.AUDIO?o=!1:"object"===h(c)?u=c:"function"==typeof c&&(r=c)}var u=u||{video:o,audio:a},d=document.createElement("video"),f=(d.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(u).then((function(e){try{"srcObject"in d?d.srcObject=e:d.src=window.URL.createObjectURL(e)}catch(t){d.src=e}}),console.log),p(d,this,!0));return f.loadedmetadata=!1,d.addEventListener("loadedmetadata",(function(){d.play(),d.width?(f.width=d.width,f.height=d.height):(f.width=f.elt.width=d.videoWidth,f.height=f.elt.height=d.videoHeight),f.loadedmetadata=!0,r&&r(d.srcObject)})),f},i.default.prototype.createElement=function(e,t){return i.default._validateParameters("createElement",arguments),e=document.createElement(e),void 0!==t&&(e.innerHTML=t),p(e,this)},i.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},i.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},i.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},i.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},i.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof i.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},i.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,o={x:this.elt.offsetLeft,y:this.elt.offsetTop},i=(n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(i/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===e?this.position(i/2+this.parent().offsetLeft,o.y):"vertical"===e&&this.position(o.x,a/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},i.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},i.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},i.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=e,this},i.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=e,this},i.default.Element.prototype.style=function(e,t){if(void 0===(t=t instanceof i.default.Color?"rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")":t)){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var o=n[r].split(":");o[0]&&o[1]&&(this.elt.style[o[0].trim()]=o[1].trim())}}else this.elt.style[e]=t,"width"!==e&&"height"!==e&&"left"!==e&&"top"!==e||(t=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/[^\d.]/g,""),this[e]=Math.round(parseFloat(t,10)));return this},i.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},i.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},i.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},i.default.Element.prototype.show=function(){return this.elt.style.display="block",this},i.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},i.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,o=i.default.prototype.AUTO;if(n!==o||r!==o){if(n===o?n=t*this.width/this.height:r===o&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a,s={},l=this.elt.getContext("2d");for(a in l)s[a]=l[a];for(a in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[a]=s[a]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},i.default.Element.prototype.remove=function(){this instanceof i.default.MediaElement&&(this.stop(),null!==(t=this.elt.srcObject)&&t.getTracks().forEach((function(e){e.stop()})));var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},i.default.Element.prototype.drop=function(e,t){var n;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",n=function(e){e.preventDefault()}),this.elt.addEventListener("dragleave",n)),i.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n),n=n.dataTransfer.files;var r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;i.default.File._load(c,e)}}catch(n){o=!0,a=n}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}),this)):console.log("The File APIs are not fully supported in this browser."),this},t=function(t){var n=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&l(n,t);var r=function(e){return function(){var t,n,r=u(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=u(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?c(r):n}}(o);function o(e,t){d(this,o);var n=c(t=r.call(this,e,t));return t.elt.crossOrigin="anonymous",t._prevTime=0,t._cueIDCounter=0,t._cues=[],t.pixels=[],t._pixelsState=c(t),t._pixelDensity=1,t._modified=!1,t._frameOnCanvas=-1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var o=document.createElement("source");o.src=t,e.appendChild(o),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)},t}return s(o,[{key:"play",value:function(){var e;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?console.error(e):console.error("Media play method encountered an unexpected error",e)})),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var t=setTimeout((function(){console.error(e)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})}},{key:"autoplay",value:function(e){var t=this,n=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",e),e&&!n&&(e=function(){return t._setupAutoplayFailDetection()},4===this.elt.readyState?e():this.elt.addEventListener("canplay",e,{passive:!0,once:!0})),this}},{key:"volume",value:function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e}},{key:"speed",value:function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e}},{key:"time",value:function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var e=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&e&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.Renderer2D.prototype.loadPixels.apply(this,t)}},{key:"updatePixels",value:function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.Renderer2D.prototype.get.apply(this,t)}},{key:"_getPixel",value:function(){this.loadPixels();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default.prototype.copy.apply(this,t)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default.Image.prototype.mask.apply(this,t)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(e){this._modified=e}},{key:"onended",value:function(e){return this._onended=e,this}},{key:"connect",value:function(e){var t,n;if("function"==typeof i.default.prototype.getAudioContext)t=i.default.prototype.getAudioContext(),n=i.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(e,t,n){var r=this._cueIDCounter++;return t=new m(t,e,r,n),this._cues.push(t),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r}},{key:"removeCue",value:function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e}}]),o}(i.default.Element),i.default.MediaElement=t,t=function(){function e(t,n){d(this,e),this.file=t,this._pInst=n,n=t.type.split("/"),this.type=n[0],this.subtype=n[1],this.name=t.name,this.size=t.size,this.data=void 0}return s(e,null,[{key:"_createLoader",value:function(e,t){var n=new FileReader;return n.onload=function(n){var r,o=new i.default.File(e);"application/json"===o.file.type?o.data=JSON.parse(n.target.result):"text/xml"===o.file.type?(r=(new DOMParser).parseFromString(n.target.result,"text/xml"),o.data=new i.default.XML(r.documentElement)):o.data=n.target.result,t(o)},n}},{key:"_load",value:function(e,t){var n;/^text\//.test(e.type)||"application/json"===e.type?i.default.File._createLoader(e,t).readAsText(e):/^(video|audio)\//.test(e.type)?((n=new i.default.File(e)).data=URL.createObjectURL(e),t(n)):i.default.File._createLoader(e,t).readAsDataURL(e)}}]),e}(),i.default.File=t,t=i.default,r.default=t},{"../core/main":273,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238}],290:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(m=e("../core/main"))&&m.__esModule?m:{default:m},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var s=i.default.prototype.pRotationZ=0,l=0,c=0,u="clockwise",d="clockwise",h="clockwise",p=(i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0,.5),f=30,m=(i.default.prototype.setMoveThreshold=function(e){i.default._validateParameters("setMoveThreshold",arguments),p=e},i.default.prototype.setShakeThreshold=function(e){i.default._validateParameters("setShakeThreshold",arguments),f=e},i.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===a.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n,r,o,i=this._isGlobal?window:this;"function"==typeof i.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&i.deviceMoved(),"function"==typeof i.deviceTurned&&(t=this.rotationX+180,e=this.pRotationX+180,n=s+180,0<t-e&&t-e<270||t-e<-270?u="clockwise":(t-e<0||270<t-e)&&(u="counter-clockwise"),u!==this.pRotateDirectionX&&(n=t),90<Math.abs(t-n)&&Math.abs(t-n)<270&&(n=t,this._setProperty("turnAxis","X"),i.deviceTurned()),this.pRotateDirectionX=u,s=n-180,e=this.rotationY+180,t=this.pRotationY+180,n=l+180,0<e-t&&e-t<270||e-t<-270?d="clockwise":(e-t<0||270<e-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(n=e),90<Math.abs(e-n)&&Math.abs(e-n)<270&&(n=e,this._setProperty("turnAxis","Y"),i.deviceTurned()),this.pRotateDirectionY=d,l=n-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?h="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(c=this.rotationZ),90<Math.abs(this.rotationZ-c)&&Math.abs(this.rotationZ-c)<270&&(c=this.rotationZ,this._setProperty("turnAxis","Z"),i.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)),"function"==typeof i.deviceShaken&&(null!==this.pAccelerationX&&(r=Math.abs(this.accelerationX-this.pAccelerationX),o=Math.abs(this.accelerationY-this.pAccelerationY)),f<r+o&&i.deviceShaken())},i.default);n.default=m},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],291:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(e){var t;this._downKeys[e.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"!=typeof(t=this._isGlobal?window:this).keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault())},r.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},r.default.prototype._onkeypress=function(e){var t;e.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"==typeof(t=this._isGlobal?window:this).keyTyped&&!1===t.keyTyped(e)&&e.preventDefault())},r.default.prototype._onblur=function(e){this._downKeys={}},r.default.prototype.keyIsDown=function(e){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},r.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1},e=r.default,n.default=e},{"../core/main":273}],292:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(e){var t,n,r,o,i;null!==this._curElement&&(!e.touches||0<e.touches.length)&&(t=this._curElement.elt,n=this.width,r=this.height,(o=e)&&!o.clientX&&(o.touches?o=o.touches[0]:o.changedTouches&&(o=o.changedTouches[0])),i=t.getBoundingClientRect(),n=t.scrollWidth/n||1,t=t.scrollHeight/r||1,r={x:(o.clientX-i.left)/n,y:(o.clientY-i.top)/t,winX:o.clientX,winY:o.clientY,id:o.identifier},this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",r.x),this._setProperty("mouseY",r.y),this._setProperty("winMouseX",r.winX),this._setProperty("winMouseY",r.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",a.CENTER):2===e.button?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},i.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},i.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},i.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},i.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},i.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=i.default,n.default=e},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],293:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=function(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=e.getBoundingClientRect();return t=e.scrollWidth/t||1,e=e.scrollHeight/n||1,{x:((n=r.touches[o]||r.changedTouches[o]).clientX-i.left)/t,y:(n.clientY-i.top)/e,winX:n.clientX,winY:n.clientY,id:n.identifier}}(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},e.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},e.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},e.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()},e=e.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.string.includes":189}],294:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o,i,a,s={_toPixels:function(e){var t,n;return e instanceof ImageData?e.data:e.getContext("2d")?e.getContext("2d").getImageData(0,0,e.width,e.height).data:e.getContext("webgl")?(n=(t=e.getContext("webgl")).drawingBufferWidth*t.drawingBufferHeight*4,n=new Uint8Array(n),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),n):void 0},_getARGB:function(e,t){return e[3+(t*=4)]<<24&4278190080|e[t]<<16&16711680|e[1+t]<<8&65280|255&e[2+t]},_setPixels:function(e,t){for(var n,r=0,o=e.length;r<o;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[1+n]=(65280&t[r])>>>8,e[2+n]=255&t[r],e[3+n]=(4278190080&t[r])>>>24},_toImageData:function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},_createImageData:function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply:function(e,t,n){var r=e.getContext("2d"),o=r.getImageData(0,0,e.width,e.height);(t=t(o,n))instanceof ImageData?r.putImageData(t,0,0,0,0,e.width,e.height):r.putImageData(o,0,0,0,0,e.width,e.height)},threshold:function(e,t){for(var n=s._toPixels(e),r=(void 0===t&&(t=.5),Math.floor(255*t)),o=0;o<n.length;o+=4){var i=r<=.2126*n[o]+.7152*n[o+1]+.0722*n[o+2]?255:0;n[o]=n[o+1]=n[o+2]=i}},gray:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4){var r=t[n],o=t[n+1],i=t[n+2];t[n]=t[n+1]=t[n+2]=.2126*r+.7152*o+.0722*i}},opaque:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},invert:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},posterize:function(e,t){var n=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,o=0;o<n.length;o+=4){var i=n[o],a=n[o+1],l=n[o+2];n[o]=255*(i*t>>8)/r,n[o+1]=255*(a*t>>8)/r,n[o+2]=255*(l*t>>8)/r}},dilate:function(e){for(var t,n,r,o,i,a,l,c,u,d=s._toPixels(e),h=0,p=d.length?d.length/4:0,f=new Int32Array(p);h<p;)for(n=(t=h)+e.width;h<n;)o=r=s._getARGB(d,h),(u=h-1)<t&&(u=h),n<=(c=h+1)&&(c=h),(i=h-e.width)<0&&(i=0),p<=(a=h+e.width)&&(a=h),i=s._getARGB(d,i),u=s._getARGB(d,u),a=s._getARGB(d,a),(o=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))<(l=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))&&(r=u,o=l),o<(l=77*((u=s._getARGB(d,c))>>16&255)+151*(u>>8&255)+28*(255&u))&&(r=u,o=l),o<(c=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(r=i,o=c),o<(u=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(r=a,o=u),f[h++]=r;s._setPixels(d,f)},erode:function(e){for(var t,n,r,o,i,a,l,c,u,d=s._toPixels(e),h=0,p=d.length?d.length/4:0,f=new Int32Array(p);h<p;)for(n=(t=h)+e.width;h<n;)o=r=s._getARGB(d,h),(u=h-1)<t&&(u=h),n<=(c=h+1)&&(c=h),(i=h-e.width)<0&&(i=0),p<=(a=h+e.width)&&(a=h),i=s._getARGB(d,i),u=s._getARGB(d,u),a=s._getARGB(d,a),(l=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))<(o=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))&&(r=u,o=l),(l=77*((u=s._getARGB(d,c))>>16&255)+151*(u>>8&255)+28*(255&u))<o&&(r=u,o=l),(c=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<o&&(r=i,o=c),(u=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<o&&(r=a,o=u),f[h++]=r;s._setPixels(d,f)},blur:function(e,t){for(var n,l,c,u,d,h,p,f,m,g,y=s._toPixels(e),v=e.width,b=e.height,x=v*b,w=new Int32Array(x),S=0;S<x;S++)w[S]=s._getARGB(y,S);var _,k,T,E,C,I,j,A,O=new Int32Array(x),N=new Int32Array(x),R=new Int32Array(x),P=new Int32Array(x),M=0,D=3.5*t|0;if(r!==(D=D<1?1:D<248?D:248)){o=1+(r=D)<<1,i=new Int32Array(o),a=new Array(o);for(var L=0;L<o;L++)a[L]=new Int32Array(256);for(var F=1,B=D-1;F<D;F++){i[D+F]=i[B]=I=B*B,j=a[D+F],A=a[B--];for(var U=0;U<256;U++)j[U]=A[U]=I*U}C=i[D]=D*D,j=a[D];for(var z=0;z<256;z++)j[z]=C*z}for(k=0;k<b;k++){for(_=0;_<v;_++){if(u=c=l=d=n=0,(h=_-r)<0)g=-h,h=0;else{if(v<=h)break;g=0}for(T=g;T<o&&!(v<=h);T++){var V=w[h+M];d+=(E=a[T])[(-16777216&V)>>>24],l+=E[(16711680&V)>>16],c+=E[(65280&V)>>8],u+=E[255&V],n+=i[T],h++}O[p=M+_]=d/n,N[p]=l/n,R[p]=c/n,P[p]=u/n}M+=v}for(m=(f=-r)*v,k=M=0;k<b;k++){for(_=0;_<v;_++){if(u=c=l=d=n=0,f<0)g=p=-f,h=_;else{if(b<=f)break;g=0,p=f,h=_+m}for(T=g;T<o&&!(b<=p);T++)d+=(E=a[T])[O[h]],l+=E[N[h]],c+=E[R[h]],u+=E[P[h]],n+=i[T],p++,h+=v;w[_+M]=d/n<<24|l/n<<16|c/n<<8|u/n}M+=v,m+=v,f++}s._setPixels(y,w)}};n.default=s},{"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int32-array":215,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232}],295:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),o=i(e("omggif"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){r.default._validateParameters("saveCanvas",arguments);var e,t,n,o,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],i.shift()):arguments[0]instanceof r.default.Element?(e=arguments[0].elt,i.shift()):e=this._curElement&&this._curElement.elt,1<=i.length&&(t=i[0]),n=(n=2<=i.length?i[1]:n)||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n)}),o)},r.default.prototype.encodeAndDownloadGif=function(e,t){for(var n=e.gifProperties,i=(1===(I=n.loopLimit)?I=null:null===I&&(I=0),new Uint8Array(e.width*e.height*n.numFrames)),s=[],l={},c=0;c<n.numFrames;c++){for(var u=new Set,d=n.frames[c].image.data,h=d.length,p=new Uint32Array(e.width*e.height),f=0,m=0;f<h;f+=4,m++){var g=d[f+0]<<16|d[f+1]<<8|d[f+2]<<0;u.add(g),p[m]=g}var y=a(u).sort().toString();void 0===l[y]?l[y]={freq:1,frames:[c]}:(l[y].freq+=1,l[y].frames.push(c)),s.push(p)}for(var v=[],b=Object.keys(l).sort((function(e,t){return l[t].freq-l[e].freq})),x=b[0].split(",").map((function(e){return parseInt(e)})),w=(v=v.concat(l[x].frames),new Set(x)),S=1;S<b.length;S++){var _=b[S].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!w.has(e)}));if(x.length+_.length<=256){for(var k=0;k<_.length;k++)x.push(_[k]),w.add(_[k]);v=v.concat(l[b[S]].frames)}}v=new Set(v);for(var T={},E=0;E<x.length;E++)T[x[E]]||(T[x[E]]=E);for(var C=1;C<x.length;)C<<=1;x.length=C;for(var I={loop:I,palette:new Uint32Array(x)},j=new o.default.GifWriter(i,e.width,e.height,I),A={},O=0;O<n.numFrames;O++)!function(t){var r=!v.has(t),o=r?[]:x,i=new Uint8Array(e.width*e.height),a={},l=new Set,c=(s[t].forEach((function(e,n){r?(void 0===a[e]&&(a[e]=o.length,o.push(e)),i[n]=a[e]):i[n]=T[e],0<t&&s[t-1][n]!==e&&l.add(e)})),{});if(0<(u=o.filter((function(e){return!l.has(e)}))).length){var u=u[0],d=(r?a:T)[u];if(0<t){for(var h=0;h<s[t].length;h++)s[t-1][h]===s[t][h]&&(i[h]=d);c.transparent=d,A.frameOpts.disposal=1}}if(c.delay=n.frames[t].delay/10,r){for(var p=1;p<o.length;)p<<=1;o.length=p,c.palette=new Uint32Array(o)}0<t&&j.addFrame(0,0,e.width,e.height,A.pixelPaletteIndex,A.frameOpts),A={pixelPaletteIndex:i,frameOpts:c}}(O);A.frameOpts.disposal=1,j.addFrame(0,0,e.width,e.height,A.pixelPaletteIndex,A.frameOpts),I=new Blob([i.slice(0,j.end())],{type:"image/gif"}),r.default.prototype.downloadFile(I,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,o,i){r.default._validateParameters("saveFrames",arguments),n=r.default.prototype.constrain(n=n||3,0,15),n*=1e3,o=r.default.prototype.constrain(o||15,0,22);var a=0,s=r.default.prototype._makeFrame,l=this._curElement.elt,c=[],u=setInterval((function(){c.push(s(e+a,t,l)),a++}),1e3/o);setTimeout((function(){if(clearInterval(u),i)i(c);else{var e=!0,t=!1,n=void 0;try{for(var o,a=c[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;r.default.prototype.downloadFile(s.imageData,s.filename,s.ext)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}c=[]}),.01+n)},r.default.prototype._makeFrame=function(e,t,n){var r;if(n=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":default:r="image/png";break;case"jpeg":case"jpg":r="image/jpeg"}else t="png",r="image/png";n=(n=n.toDataURL(r)).replace(r,"image/octet-stream");var o={};return o.imageData=n,o.filename=e,o.ext=t,o},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,omggif:246}],296:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("regenerator-runtime/runtime");var a=d(e("../core/main")),s=d(e("../core/helpers")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),c=d(e("omggif")),u=e("gifenc");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function p(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(e,t,n){a.default._validateParameters("loadImage",arguments);var r=new a.default.Image(1,1,this),o=this,i=new Request(e,{method:"GET",mode:"cors"});return fetch(e,i).then((function(i){var s,l=i.headers.get("content-type");null===l&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),l&&l.includes("image/gif")?i.arrayBuffer().then((function(e){if(e){e=new Uint8Array(e);for(var i=r,s=t,l=n,u=function(e){o._decrementPreload()}.bind(o),d=new c.default.GifReader(e),h=(i.width=i.canvas.width=d.width,i.height=i.canvas.height=d.height,[]),p=d.numFrames(),f=new Uint8ClampedArray(i.width*i.height*4),m=0;m<p;m++){var g=d.frameInfo(m),y=i.drawingContext.getImageData(0,0,i.width,i.height),v=(f=y.data.slice(),function(e,t){try{t.decodeAndBlitFrameRGBA(e,f)}catch(e){a.default._friendlyFileLoadError(8,i.src),"function"==typeof l?l(e):console.error(e)}}(m,d),new ImageData(f,i.width,i.height));0===(i.drawingContext.putImageData(v,0,0),v=g.delay)&&(v=10),h.push({image:i.drawingContext.getImageData(0,0,i.width,i.height),delay:10*v}),2===g.disposal?i.drawingContext.clearRect(g.x,g.y,g.width,g.height):3===g.disposal&&i.drawingContext.putImageData(y,0,0,g.x,g.y,g.width,g.height)}null===(e=d.loopCount())?e=1:0===e&&(e=null),i.drawingContext.putImageData(h[0].image,0,0),1<h.length&&(i.gifProperties={displayIndex:0,loopLimit:e,loopCount:0,frames:h,numFrames:p,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof s&&s(i),u()}}),(function(e){"function"==typeof n?(n(e),o._decrementPreload()):console.error(e)})):((s=new Image).onload=function(){r.width=r.canvas.width=s.width,r.height=r.canvas.height=s.height,r.drawingContext.drawImage(s,0,0),r.modified=!0,"function"==typeof t&&t(r),o._decrementPreload()},s.onerror=function(e){a.default._friendlyFileLoadError(0,s.src),"function"==typeof n?(n(e),o._decrementPreload()):console.error(e)},0!==e.indexOf("data:image/")&&(s.crossOrigin="Anonymous"),s.src=e),r.modified=!0})).catch((function(t){a.default._friendlyFileLoadError(0,e),"function"==typeof n?(n(t),o._decrementPreload()):console.error(t)})),r},a.default.prototype.saveGif=function(){e=i.mark((function e(t,n){var r,o,s,l,c,d,h,p,f,m,g,y,v,b,x,w,S,_,k,T,E,C,I,j,A,O,N=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<N.length&&void 0!==N[2]?N[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof t)throw TypeError("fileName parameter must be a string");e.next=3;break;case 3:if("number"!=typeof n)throw TypeError("Duration parameter must be a number");e.next=5;break;case 5:if(o=r&&r.delay||0,s=r&&r.units||"seconds",l=r&&r.silent||!1,c=r&&r.notificationDuration||0,d=r&&r.notificationID||"progressBar","number"!=typeof o)throw TypeError("Delay parameter must be a number");e.next=12;break;case 12:if("seconds"!==s&&"frames"!==s)throw TypeError('Units parameter must be either "frames" or "seconds"');e.next=14;break;case 14:if("boolean"!=typeof l)throw TypeError("Silent parameter must be a boolean");e.next=16;break;case 16:if("number"!=typeof c)throw TypeError("Notification duration parameter must be a number");e.next=18;break;case 18:if("string"!=typeof d)throw TypeError("Notification ID parameter must be a string");e.next=20;break;case 20:return this._recording=!0,m=this._targetFrameRate,h=(h=1/(m=m!==1/0&&void 0!==m&&0!==m?m:60)*1e3)<20?20:h,f=(p="seconds"===s?n*m:n)+(m="seconds"===s?o*m:o),this.frameCount=m,g=this._pixelDensity,this.pixelDensity(1),y=[],null!==document.getElementById(d)&&document.getElementById(d).remove(),l||((v=this.createP("")).id(d),v.style("font-size","16px"),v.style("font-family","Montserrat"),v.style("background-color","#ffffffa0"),v.style("padding","8px"),v.style("border-radius","10px"),v.position(0,0)),this._renderer instanceof a.default.RendererGL&&(x=this.drawingContext,b=new Uint8Array(x.drawingBufferWidth*x.drawingBufferHeight*4)),this.noLoop(),e.next=39,Promise.resolve();case 39:if(m<f)return this.redraw(),j=void 0,j=this._renderer instanceof a.default.RendererGL?(b=new Uint8Array(x.drawingBufferWidth*x.drawingBufferHeight*4),x.readPixels(0,0,x.drawingBufferWidth,x.drawingBufferHeight,x.RGBA,x.UNSIGNED_BYTE,b),function(e){for(var t=parseInt(height/2),n=4*width,r=new Uint8Array(4*width),o=0;o<t;++o){var i=o*n,a=(height-o-1)*n;r.set(e.subarray(i,i+n)),e.copyWithin(i,a,a+n),e.set(r,a)}return e}(b)):this.drawingContext.getImageData(0,0,this.width,this.height).data,y.push(j),m++,l||v.html("Saved frame <b>"+y.length.toString()+"</b> out of "+p.toString()),e.next=48,new Promise((function(e){return setTimeout(e,0)}));e.next=50;break;case 48:e.next=39;break;case 50:l||v.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(g),w=(0,u.GIFEncoder)(),S=function(e){for(var t=new Uint8Array(e.length*e[0].length),n=0;n<e.length;n++)t.set(e[n],n*e[0].length);var r=(0,u.quantize)(t,256,{format:"rgba4444",oneBitAlpha:!0});return 256===r.length?r[r.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:r.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),r}(y),_={},k=function(e){for(var t=e.length/4,n=new Uint8Array(t),r=0;r<t;r++){var o=e[4*r]<<24|e[4*r+1]<<16|e[4*r+2]<<8|e[4*r+3];void 0===_[o]&&(_[o]=(0,u.nearestColorIndex)(S,e.slice(4*r,4*(r+1)))),n[r]=_[o]}return n},T=S.length-1,E=[],C=0;case 60:if(!(C<y.length)){e.next=71;break}if(I=k(y[C]),j=I.slice(),0===C)w.writeFrame(I,this.width,this.height,{palette:S,delay:h,dispose:1});else{for(A=0;A<I.length;A++)I[A]===E[A]&&(I[A]=T);w.writeFrame(I,this.width,this.height,{delay:h,transparent:!0,transparentIndex:T,dispose:1})}return E=j,l||v.html("Rendered frame <b>"+C.toString()+"</b> out of "+p.toString()),e.next=68,new Promise((function(e){return setTimeout(e,0)}));case 68:C++,e.next=60;break;case 71:w.finish(),O=w.bytesView(),O=new Blob([O],{type:"image/gif"}),y=[],this._recording=!1,this.loop(),l||(v.html("Done. Downloading your gif!\ud83c\udf38"),0<c&&setTimeout((function(){return v.remove()}),1e3*c)),a.default.prototype.downloadFile(O,t,"gif");case 80:case"end":return e.stop()}}),e,this)}));var e,t=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,s,"next",e)}function s(e){h(i,r,o,a,s,"throw",e)}a(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),a.default.prototype.image=function(e,t,n,r,o,i,c,u,d,h,f,m){a.default._validateParameters("image",arguments);var g=e.width,y=e.height,v=(m=m||l.CENTER,f=f||l.CENTER,e.elt&&e.elt.videoWidth&&!e.canvas&&(g=e.elt.videoWidth,y=e.elt.videoHeight),r||g);o=o||y,i=i||0,c=c||0,u=p(u||g,g),g=p(d||y,y),d=1,e.elt&&!e.canvas&&e.elt.style.width&&(d=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,d/=parseInt(e.elt.style.width,10)),i*=d,c*=d,g*=d,u*=d,y=function(e,t,n,r,o,i,a,s,c,u,d){var h,p,f,m,g,y,v,b,x;return e===l.COVER&&(h=t,f=n,v=i,b=a,y=s,x=c,p=u,m=d,v/=g=Math.max(v/p,b/m),b/=g,g=y,y=x,h===l.CENTER?g+=(p-v)/2:h===l.RIGHT&&(g+=p-v),f===l.CENTER?y+=(m-b)/2:f===l.BOTTOM&&(y+=m-b),s=(x={x:g,y:y,w:v,h:b}).x,c=x.y,u=x.w,d=x.h),e===l.CONTAIN&&(h=t,p=n,f=r,m=o,g=i,y=a,v=u,b=d,v/=x=Math.max(v/g,b/y),b/=x,x=f,f=m,h===l.CENTER?x+=(g-v)/2:h===l.RIGHT&&(x+=g-v),p===l.CENTER?f+=(y-b)/2:p===l.BOTTOM&&(f+=y-b),r=(e={x:x,y:f,w:v,h:b}).x,o=e.y,i=e.w,a=e.h),{sx:s,sy:c,sw:u,sh:d,dx:r,dy:o,dw:i,dh:a}}(h,f,m,(y=s.default.modeAdjust(t,n,v,o,this._renderer._imageMode)).x,y.y,y.w,y.h,i,c,u,g),this._renderer.image(e,y.sx,y.sy,y.sw,y.sh,y.dx,y.dy,y.dw,y.dh)},a.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=a.default.Renderer2D.prototype._getTintedImageCanvas,a.default.prototype.imageMode=function(e){a.default._validateParameters("imageMode",arguments),e!==l.CORNER&&e!==l.CORNERS&&e!==l.CENTER||(this._renderer._imageMode=e)},e=a.default,n.default=e},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/helpers":269,"../core/main":273,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,gifenc:243,omggif:246,"regenerator-runtime/runtime":250}],297:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),o=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.width=t,this.height=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var t;return(t=[{key:"_animateGif",value:function(e){var t,n=this.gifProperties;e=e._lastRealFrameTime,0===n.lastChangeTime&&(n.lastChangeTime=e),n.playing&&(n.timeDisplayed=e-n.lastChangeTime,t=n.frames[n.displayIndex].delay,n.timeDisplayed>=t&&(t=Math.floor(n.timeDisplayed/t),n.timeDisplayed=0,n.lastChangeTime=e,n.displayIndex+=t,n.loopCount=Math.floor(n.displayIndex/n.numFrames),null!==n.loopLimit&&n.loopCount>=n.loopLimit?n.playing=!1:(e=n.displayIndex%n.numFrames,this.drawingContext.putImageData(n.frames[e].image,0,0),n.displayIndex=e,this.setModified(!0))))}},{key:"_setProperty",value:function(e,t){this[e]=t,this.setModified(!0)}},{key:"loadPixels",value:function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(e,t,n,o){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,o),this.setModified(!0)}},{key:"get",value:function(e,t,n,o){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)}},{key:"resize",value:function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,o=0;o<r.numFrames;o++){for(var i=this.drawingContext.createImageData(e,t),a=(d=d=u=c=l=void 0,r.frames[o].image),s=i,l=0,c=0;c<s.height;c++)for(var u=0;u<s.width;u++){var d=Math.floor(u*a.width/s.width);d=4*(Math.floor(c*a.height/s.height)*a.width+d),s.data[l++]=a.data[d++],s.data[l++]=a.data[d++],s.data[l++]=a.data[d++],s.data[l++]=a.data[+d]}r.frames[o].image=i}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)}},{key:"mask",value:function(e){var t=this.drawingContext.globalCompositeOperation,n=1,o=[e=void 0===e?this:e,0,0,(n=e instanceof r.default.Renderer?e._pInst._pixelDensity:n)*e.width,n*e.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var i=0;i<this.gifProperties.frames.length;i++)this.drawingContext.putImageData(this.gifProperties.frames[i].image,0,0),this.copy.apply(this,o),this.gifProperties.frames[i].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,o);this.drawingContext.globalCompositeOperation=t,this.setModified(!0)}},{key:"filter",value:function(e,t){o.default.apply(this.canvas,o.default[e],t),this.setModified(!0)}},{key:"blend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)}},{key:"setModified",value:function(e){this._modified=e}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(e,t){this.gifProperties?r.default.prototype.encodeAndDownloadGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)}},{key:"reset",value:function(){var e;this.gifProperties&&((e=this.gifProperties).playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var e;if(this.gifProperties)return(e=this.gifProperties).displayIndex%e.numFrames}},{key:"setFrame",value:function(e){var t;this.gifProperties&&(e<(t=this.gifProperties).numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,o=void(t=!1);try{for(var i,a=n.frames[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)i.value.delay=e}catch(e){t=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw o}}}}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default.Image,n.default=e},{"../core/main":273,"./filters":294,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],298:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),o=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.default._validateParameters("blend",n),this._renderer?(e=this._renderer).blend.apply(e,n):r.default.Renderer2D.prototype.blend.apply(this,n)},r.default.prototype.copy=function(){for(var e,t,n,o,i,a,s,l,c,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];if(r.default._validateParameters("copy",d),9===d.length)e=d[0],t=d[1],n=d[2],o=d[3],i=d[4],a=d[5],s=d[6],l=d[7],c=d[8];else{if(8!==d.length)throw new Error("Signature not supported");e=this,t=d[0],n=d[1],o=d[2],i=d[3],a=d[4],s=d[5],l=d[6],c=d[7]}r.default.prototype._copyHelper(this,e,t,n,o,i,a,s,l,c)},r.default.prototype._copyHelper=function(e,t,n,o,i,a,s,l,c,u){t.loadPixels();var d=t.canvas.width/t.width,h=0,p=0;t._renderer&&t._renderer.isP3D&&(h=t.width/2,p=t.height/2),e._renderer&&e._renderer.isP3D?r.default.RendererGL.prototype.image.call(e._renderer,t,n+h,o+p,i,a,s,l,c,u):e.drawingContext.drawImage(t.canvas,d*(n+h),d*(o+p),d*i,d*a,s,l,c,u)},r.default.prototype.filter=function(e,t){r.default._validateParameters("filter",arguments),void 0!==this.canvas?o.default.apply(this.canvas,o.default[e],t):o.default.apply(this.elt,o.default[e],t)},r.default.prototype.get=function(e,t,n,o){var i;return r.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,o){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,o)},e=r.default,n.default=e},{"../color/p5.Color":260,"../core/main":273,"./filters":294,"core-js/modules/es.array.filter":155}],299:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=s(e("../core/main")),i=(e("whatwg-fetch"),e("es6-promise/auto"),s(e("fetch-jsonp"))),a=s(e("file-saver"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("loadJSON",t);for(var r,i,a,s=t[0],c={},u="json",d=1;d<t.length;d++){var h=t[d];"string"==typeof h?"jsonp"!==h&&"json"!==h||(u=h):"function"==typeof h?r?i=h:r=h:"object"===l(h)&&(h.hasOwnProperty("jsonpCallback")||h.hasOwnProperty("jsonpCallbackFunction"))&&(u="jsonp",a=h)}var p=this;return this.httpDo(s,"GET",a,u,(function(e){for(var t in e)c[t]=e[t];void 0!==r&&r(e),p._decrementPreload()}),(function(e){if(o.default._friendlyFileLoadError(5,s),!i)throw e;i(e)})),c},o.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("loadStrings",t);for(var r,i,a=[],s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===r?r=l:void 0===i&&(i=l))}var c=this;return o.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,o=t.length;n<o;n+=32768)Array.prototype.push.apply(a,t.slice(n,Math.min(n+32768,o)));void 0!==r&&r(a),c._decrementPreload()}),(function(e){if(o.default._friendlyFileLoadError(3,e),!i)throw e;i(e)})),a},o.default.prototype.loadTable=function(e){var t,n,r,i=[],a=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?r=",":"ssv"===s?r=";":"tsv"===s&&(r="\t");for(var l=1;l<arguments.length;l++)"function"==typeof arguments[l]?void 0===t?t=arguments[l]:void 0===n&&(n=arguments[l]):"string"==typeof arguments[l]&&(i.push(arguments[l]),"header"===arguments[l]&&(a=!0),"csv"===arguments[l]?r=",":"ssv"===arguments[l]?r=";":"tsv"===arguments[l]&&(r="\t"));var c=new o.default.Table,u=this;return this.httpDo(e,"GET","table",(function(e){for(var n,i,s={},l=[],d=0,h=null,p=function(){s.currentState=0,s.token=""},f=function(){h.push(s.token),p()},m=function(){s.currentState=4,l.push(h),h=null};;){if(null==(n=e[d++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(h){f(),m();break}}if(null===h&&(s.escaped=!1,h=[],p()),0===s.currentState){if('"'===n){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===n)'"'===e[d]?(s.token+='"',d++):(s.escaped=!1,s.currentState=2);else{if("\r"===n)continue;s.token+=n}else"\r"===n?("\n"===e[d]&&d++,f(),m()):"\n"===n?(f(),m()):n===r?f():1===s.currentState&&(s.token+=n)}if(a)c.columns=l.shift();else for(var g=0;g<l[0].length;g++)c.columns[g]="null";for(var y=0;y<l.length;y++)(1!==l[y].length||"undefined"!==l[y][0]&&""!==l[y][0])&&((i=new o.default.TableRow).arr=l[y],i.obj=function(e,t){if(void 0===(t=t||[]))for(var n=0;n<e.length;n++)t[n.toString()]=n;return Object.fromEntries(t.map((function(t,n){return[t,e[n]]})))}(l[y],c.columns),c.addRow(i));"function"==typeof t&&t(c),u._decrementPreload()}),(function(t){o.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),c},o.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r,i,a=new o.default.XML,s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===r?r=l:void 0===i&&(i=l))}var c=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)a[t]=e[t];void 0!==r&&r(a),c._decrementPreload()}),(function(e){if(o.default._friendlyFileLoadError(1,e),!i)throw e;i(e)})),a},o.default.prototype.loadBytes=function(e,t,n){var r={},i=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){r.bytes=new Uint8Array(e),"function"==typeof t&&t(r),i._decrementPreload()}),(function(t){if(o.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),r},o.default.prototype.httpGet=function(){o.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),o.default.prototype.httpDo.apply(this,e)},o.default.prototype.httpPost=function(){o.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),o.default.prototype.httpDo.apply(this,e)},o.default.prototype.httpDo=function(){for(var e,t,n,r={},a=0,s="text/plain",c=arguments.length-1;0<c&&"function"==typeof(c<0||arguments.length<=c?void 0:arguments[c]);c--)a++;var u=arguments.length<=0?void 0:arguments[0];if(2==(g=arguments.length-a)&&"string"==typeof u&&"object"===l(arguments.length<=1?void 0:arguments[1]))y=new Request(u,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var d,h="GET",p=1;p<arguments.length;p++){var f=p<0||arguments.length<=p?void 0:arguments[p];if("string"==typeof f)"GET"===f||"POST"===f||"PUT"===f||"DELETE"===f?h=f:"json"===f||"jsonp"===f||"binary"===f||"arrayBuffer"===f||"xml"===f||"text"===f||"table"===f?e=f:d=f;else if("number"==typeof f)d=f.toString();else if("object"===l(f))if(f.hasOwnProperty("jsonpCallback")||f.hasOwnProperty("jsonpCallbackFunction"))for(var m in f)r[m]=f[m];else s=f instanceof o.default.XML?(d=f.serialize(),"application/xml"):(d=JSON.stringify(f),"application/json");else"function"==typeof f&&(t?n=f:t=f)}var g="GET"===h?new Headers:new Headers({"Content-Type":s}),y=new Request(u,{method:h,mode:"cors",body:d,headers:g})}return(g=(g="jsonp"===(e=e||(u.includes("json")?"json":u.includes("xml")?"xml":"text"))?(0,i.default)(u,r):fetch(y)).then((function(t){if(!t.ok)throw(n=new Error(t.body)).status=t.status,n.ok=!1,n;var n=0;switch((n="jsonp"!==e?t.headers.get("content-length"):n)&&64e6<n&&o.default._friendlyFileLoadError(7,u),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){return e=(new DOMParser).parseFromString(e,"text/xml"),new o.default.XML(e.documentElement)}));default:return t.text()}}))).then(t||function(){}),g.catch(n||console.error),g},window.URL=window.URL||window.webkitURL,o.default.prototype._pWriters=[],o.default.prototype.createWriter=function(e,t){var n,r;for(r in o.default.prototype._pWriters)if(o.default.prototype._pWriters[r].name===e)return n=new o.default.PrintWriter(e+this.millis(),t),o.default.prototype._pWriters.push(n),n;return n=new o.default.PrintWriter(e,t),o.default.prototype._pWriters.push(n),n},o.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var r,i=[];for(r in i.push(this.content),o.default.prototype.writeFile(i,e,t),o.default.prototype._pWriters)o.default.prototype._pWriters[r].name===this.name&&o.default.prototype._pWriters.splice(r,1);n.clear(),n={}}},o.default.prototype.save=function(e,t,n){var r=arguments,i=(this._curElement||this).elt;if(0===r.length)o.default.prototype.saveCanvas(i);else if(r[0]instanceof o.default.Renderer||r[0]instanceof o.default.Graphics)o.default.prototype.saveCanvas(r[0].elt,r[1],r[2]);else if(1===r.length&&"string"==typeof r[0])o.default.prototype.saveCanvas(i,r[0]);else switch(u(r[1],r[2])[1]){case"json":return void o.default.prototype.saveJSON(r[0],r[1],r[2]);case"txt":return void o.default.prototype.saveStrings(r[0],r[1],r[2]);default:r[0]instanceof Array?o.default.prototype.saveStrings(r[0],r[1],r[2]):r[0]instanceof o.default.Table?o.default.prototype.saveTable(r[0],r[1],r[2]):r[0]instanceof o.default.Image?o.default.prototype.saveCanvas(r[0].canvas,r[1]):r[0]instanceof o.default.SoundFile&&o.default.prototype.saveSound(r[0],r[1],r[2],r[3])}},o.default.prototype.saveJSON=function(e,t,n){o.default._validateParameters("saveJSON",arguments),n=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(n.split("\n"),t,"json")},o.default.prototype.saveJSONObject=o.default.prototype.saveJSON,o.default.prototype.saveJSONArray=o.default.prototype.saveJSON,o.default.prototype.saveStrings=function(e,t,n,r){o.default._validateParameters("saveStrings",arguments);for(var i=this.createWriter(t,n||"txt"),a=0;a<e.length;a++)r?i.write(e[a]+"\r\n"):i.write(e[a]+"\n");i.close(),i.clear()},o.default.prototype.saveTable=function(e,t,n){o.default._validateParameters("saveTable",arguments),r=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var r,i=this.createWriter(t,r),a=e.columns,s="tsv"===r?"\t":",";if("html"!==r){if("0"!==a[0]){for(var l=0;l<a.length;l++)l<a.length-1?i.write(a[l]+s):i.write(a[l]);i.write("\n")}for(var u=0;u<e.rows.length;u++){var d=void 0;for(d=0;d<e.rows[u].arr.length;d++)d<e.rows[u].arr.length-1?"csv"===r&&String(e.rows[u].arr[d]).includes(",")?i.write('"'+e.rows[u].arr[d]+'"'+s):i.write(e.rows[u].arr[d]+s):"csv"===r&&String(e.rows[u].arr[d]).includes(",")?i.write('"'+e.rows[u].arr[d]+'"'):i.write(e.rows[u].arr[d]);i.write("\n")}}else{if(i.print("<html>"),i.print("<head>"),i.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),i.print("</head>"),i.print("<body>"),i.print("  <table>"),"0"!==a[0]){i.print("    <tr>");for(var h=0;h<a.length;h++){var p=c(a[h]);i.print("      <td>".concat(p)),i.print("      </td>")}i.print("    </tr>")}for(var f=0;f<e.rows.length;f++){i.print("    <tr>");for(var m=0;m<e.columns.length;m++){var g=c(e.rows[f].getString(m));i.print("      <td>".concat(g)),i.print("      </td>")}i.print("    </tr>")}i.print("  </table>"),i.print("</body>"),i.print("</html>")}i.close(),i.clear()},o.default.prototype.writeFile=function(e,t,n){var r="application/octet-stream";o.default.prototype._isSafari()&&(r="text/plain"),e=new Blob(e,{type:r}),o.default.prototype.downloadFile(e,t,n)},o.default.prototype.downloadFile=function(e,t,n){var r;n=(t=u(t,n))[0],e instanceof Blob?a.default.saveAs(e,n):((r=document.createElement("a")).href=e,r.download=n,r.onclick=function(e){document.body.removeChild(e.target),e.stopPropagation()},r.style.display="none",document.body.appendChild(r),o.default.prototype._isSafari()&&(e=(e='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(t[1],'"'),alert(e)),r.click())},o.default.prototype._checkFileExtension=u,o.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},e=o.default,n.default=e},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238,"es6-promise/auto":239,"fetch-jsonp":241,"file-saver":242,"whatwg-fetch":251}],300:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Table=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var t;return(t=[{key:"addRow",value:function(e){if(void 0===(e=e||new r.default.TableRow).arr||void 0===e.obj)throw new Error("invalid TableRow: ".concat(e));return(e.table=this).rows.push(e),e}},{key:"removeRow",value:function(e){this.rows[e].table=null,e=this.rows.splice(e+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(e)}},{key:"getRow",value:function(e){return this.rows[e]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null}},{key:"findRows",value:function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var o=0;o<this.rows.length;o++)this.rows[o].arr[t]===e&&n.push(this.rows[o]);return n}},{key:"matchRow",value:function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null}},{key:"matchRows",value:function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var o=0;o<this.rows.length;o++)this.rows[o].obj[t].match(e)&&n.push(this.rows[o]);return n}},{key:"getColumn",value:function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(e){this.columns.push(e||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o=new RegExp(n.join("|"),"g");if(void 0===t)for(var i=0;i<this.columns.length;i++)for(var a=0;a<this.rows.length;a++){var s=(s=this.rows[a].arr[i]).replace(o,"");this.rows[a].arr[i]=s,this.rows[a].obj[this.columns[i]]=s}else if("string"==typeof t)for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].obj[t]).replace(o,""),u=(this.rows[l].obj[t]=c,this.columns.indexOf(t));this.rows[l].arr[u]=c}else for(var d=0;d<this.rows.length;d++){var h=(h=this.rows[d].arr[t]).replace(o,"");this.rows[d].arr[t]=h,this.rows[d].obj[this.columns[t]]=h}}},{key:"trim",value:function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var o=(o=this.rows[r].arr[n]).replace(t,"");this.rows[r].arr[n]=o,this.rows[r].obj[this.columns[n]]=o}else if("string"==typeof e)for(var i=0;i<this.rows.length;i++){var a=(a=this.rows[i].obj[e]).replace(t,""),s=(this.rows[i].obj[e]=a,this.columns.indexOf(e));this.rows[i].arr[s]=a}else for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].arr[e]).replace(t,"");this.rows[l].arr[e]=c,this.rows[l].obj[this.columns[e]]=c}}},{key:"removeColumn",value:function(e){var t,n;"string"==typeof e?n=this.columns.indexOf(t=e):t=this.columns[n=e],e=this.columns.splice(n+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(e);for(var r=0;r<this.rows.length;r++){var o=this.rows[r].arr,i=o.splice(n+1,o.length);o.pop(),this.rows[r].arr=o.concat(i),delete this.rows[r].obj[t]}}},{key:"set",value:function(e,t,n){this.rows[e].set(t,n)}},{key:"setNum",value:function(e,t,n){this.rows[e].setNum(t,n)}},{key:"setString",value:function(e,t,n){this.rows[e].setString(t,n)}},{key:"get",value:function(e,t){return this.rows[e].get(t)}},{key:"getNum",value:function(e,t){return this.rows[e].getNum(t)}},{key:"getString",value:function(e,t){return this.rows[e].getString(t)}},{key:"getObject",value:function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n}},{key:"getArray",value:function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.splice":166,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194}],301:[function(e,t,n){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.TableRow=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var r=[];t&&(r=t.split(n=n||",")),this.arr=r,this.obj=Object.fromEntries(r.entries()),this.table=null}var t;return(t=[{key:"set",value:function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t,n=this.table.columns[e],this.obj[n]=t}}},{key:"setNum",value:function(e,t){t=parseFloat(t),this.set(e,t)}},{key:"setString",value:function(e,t){t=t.toString(),this.set(e,t)}},{key:"get",value:function(e){return("string"==typeof e?this.obj:this.arr)[e]}},{key:"getNum",value:function(e){var t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e]);if("NaN"===t.toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t}},{key:"getString",value:function(e){return("string"==typeof e?this.obj:this.arr)[e].toString()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=e.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236}],302:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.XML=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t?this.DOM=t:(t=document.implementation.createDocument(null,"doc"),this.DOM=t.createElement("root"))}var t;return(t=[{key:"getParent",value:function(){return new r.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var o=0;o<n.length;o++)r.setAttribute(n[o].nodeName,n.nodeValue);this.DOM=r}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e}},{key:"getChildren",value:function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push(new r.default.XML(e[n]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)}},{key:"getChild",value:function(e){if("string"!=typeof e)return new r.default.XML(this.DOM.children[e]);var t=!0,n=!1,o=void 0;try{for(var i,a=this.DOM.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(s.tagName===e)return new r.default.XML(s)}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}}},{key:"addChild",value:function(e){e instanceof r.default.XML&&this.DOM.appendChild(e.DOM)}},{key:"removeChild",value:function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.DOM.attributes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push(a.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"hasAttribute",value:function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=this.DOM.attributes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t[s.nodeName]=s.nodeValue}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!!t[e]}},{key:"getNum",value:function(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return Number(n[e])||t||0}},{key:"getString",value:function(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n[e]?String(n[e]):t||null}},{key:"setAttribute",value:function(e,t){this.DOM.setAttribute(e,t)}},{key:"getContent",value:function(e){var t=this.DOM.textContent;return(t=t.replace(/\s\s+/g,","))||e||null}},{key:"setContent",value:function(e){this.DOM.children.length||(this.DOM.textContent=e)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],303:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],n=0,r=0;r<e;r++){var o=arguments[r];if((o=+o)==1/0||o===-1/0)return 1/0;n<(o=Math.abs(o))&&(n=o),t[r]=o}0===n&&(n=1);for(var i=0,a=0,s=0;s<e;s++){var l,c=i+(l=(l=t[s]/n)*l-a);a=c-i-l,i=c}return Math.sqrt(i)*n}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(e,t,n){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},r.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("dist",t),4===t.length?o(t[2]-t[0],t[3]-t[1]):6===t.length?o(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(e,t,n){return r.default._validateParameters("lerp",arguments),n*(t-e)+e},r.default.prototype.log=Math.log,r.default.prototype.mag=function(e,t){return r.default._validateParameters("mag",arguments),o(e,t)},r.default.prototype.map=function(e,t,n,o,i,a){return r.default._validateParameters("map",arguments),e=(e-t)/(n-t)*(i-o)+o,a?o<i?this.constrain(e,o,i):this.constrain(e,i,o):e},r.default.prototype.max=function(){for(var e=function(e){var t=-1/0,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t=t<s?s:t}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n[0]instanceof Array?e(n[0]):e(n)},r.default.prototype.min=function(){for(var e=function(e){var t=1/0,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t=s<t?s:t}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n[0]instanceof Array?e(n[0]):e(n)},r.default.prototype.norm=function(e,t,n){return r.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(e,t){return t?(t=Math.pow(10,t),Math.round(e*t)/t):Math.round(e)},r.default.prototype.sq=function(e){return e*e},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(e){r.default._validateParameters("fract",arguments);var t,n=0;return e=Number(e),isNaN(e)||Math.abs(e)===1/0?e:(e<0&&(e=-e,n=1),String(e).includes(".")&&!String(e).includes("e")?(t=String(e),t=Number("0"+t.slice(t.indexOf("."))),Math.abs(n-t)):e<1?Math.abs(n-e):0)},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],304:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e,t,n){return(o=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&i(t,n.prototype),t}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.default.prototype.createVector=function(e,t,n){return this instanceof r.default?o(r.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new r.default.Vector(e,t,n)},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186}],305:[function(e,t,n){"use strict";function r(e){return.5*(1-Math.cos(e*Math.PI))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e};var o,i=4095,a=4,s=.5;e.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==o){o=new Array(4096);for(var l=0;l<4096;l++)o[l]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var c,u,d=Math.floor(e),h=Math.floor(t),p=Math.floor(n),f=e-d,m=t-h,g=n-p,y=0,v=.5,b=0;b<a;b++){var x=d+(h<<4)+(p<<8),w=r(f),S=r(m),_=o[x&i];_+=w*(o[x+1&i]-_),c=o[x+16&i],_+=S*((c+=w*(o[x+16+1&i]-c))-_),c=o[(x+=256)&i],c+=w*(o[x+1&i]-c),u=o[x+16&i],c+=S*((u+=w*(o[x+16+1&i]-u))-c),y+=(_+=r(g)*(c-_))*v,v*=s,d<<=1,h<<=1,p<<=1,1<=(f*=2)&&(d++,f--),1<=(m*=2)&&(h++,m--),1<=(g*=2)&&(p++,g--)}return y},e.default.prototype.noiseDetail=function(e,t){0<e&&(a=e),0<t&&(s=t)},e.default.prototype.noiseSeed=function(e){var t,n;n=4294967296,function(e){t=(null==e?Math.random()*n:e)>>>0}(e),o=new Array(4096);for(var r=0;r<4096;r++)o[r]=(t=(1664525*t+1013904223)%n)/n},e=e.default,n.default=e},{"../core/main":273}],306:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(u=e("../core/main"))&&u.__esModule?u:{default:u},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function c(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}i.default.Vector=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t,n,r="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],t=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(t=(arguments.length<=0?void 0:arguments[0])||0,n=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=t,this.y=n,this.z=r}var t,n,r;return t=e,r=[{key:"fromAngle",value:function(e,t){return new i.default.Vector((t=void 0===t?1:t)*Math.cos(e),t*Math.sin(e),0)}},{key:"fromAngles",value:function(e,t,n){void 0===n&&(n=1);var r=Math.cos(t),o=(t=Math.sin(t),Math.cos(e));return e=Math.sin(e),new i.default.Vector(n*e*t,-n*o,n*e*r)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*a.TWO_PI)}},{key:"random3D",value:function(){var e=Math.random()*a.TWO_PI,t=2*Math.random()-1,n=(r=Math.sqrt(1-t*t))*Math.cos(e),r=r*Math.sin(e);return new i.default.Vector(n,r,t)}},{key:"copy",value:function(e){return e.copy(e)}},{key:"add",value:function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n}},{key:"rem",value:function(e,t){if(e instanceof i.default.Vector&&t instanceof i.default.Vector)return(e=e.copy()).rem(t),e}},{key:"sub",value:function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n}},{key:"mult",value:function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n}},{key:"rotate",value:function(e,t,n){return 2===arguments.length?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),n.set(e)),n.rotate(t),n}},{key:"div",value:function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n}},{key:"dot",value:function(e,t){return e.dot(t)}},{key:"cross",value:function(e,t){return e.cross(t)}},{key:"dist",value:function(e,t){return e.dist(t)}},{key:"lerp",value:function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r}},{key:"slerp",value:function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),r.slerp(t,n),r}},{key:"mag",value:function(e){return e.mag()}},{key:"magSq",value:function(e){return e.magSq()}},{key:"normalize",value:function(e,t){return arguments.length<2?t=e.copy():(t instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()}},{key:"limit",value:function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),n.set(e)),n.limit(t)}},{key:"setMag",value:function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),n.set(e)),n.setMag(t)}},{key:"heading",value:function(e){return e.heading()}},{key:"angleBetween",value:function(e,t){return e.angleBetween(t)}},{key:"reflect",value:function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),n.set(e)),n.reflect(t)}},{key:"array",value:function(e){return e.array()}},{key:"equals",value:function(e,t){var n;return e instanceof i.default.Vector?n=e:e instanceof Array?n=(new i.default.Vector).set(e):i.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),n.equals(t)}}],(n=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(e,t,n){return e instanceof i.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):Array.isArray(e)?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this}},{key:"copy",value:function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(e,t,n){return e instanceof i.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):Array.isArray(e)?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this}},{key:"rem",value:function(e,t,n){var r;if(e instanceof i.default.Vector){if([e.x,e.y,e.z].every(Number.isFinite))return o=parseFloat(e.x),a=parseFloat(e.y),r=parseFloat(e.z),c.call(this,o,a,r)}else if(Array.isArray(e)){if(e.every((function(e){return Number.isFinite(e)})))return 2===e.length?l.call(this,e[0],e[1]):3===e.length?c.call(this,e[0],e[1],e[2]):void 0}else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var o=Array.prototype.slice.call(arguments);if(o.every((function(e){return Number.isFinite(e)}))&&2===o.length)return l.call(this,o[0],o[1])}else if(3===arguments.length){var a=Array.prototype.slice.call(arguments);if(a.every((function(e){return Number.isFinite(e)}))&&3===a.length)return c.call(this,a[0],a[1],a[2])}}},{key:"sub",value:function(e,t,n){return e instanceof i.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):Array.isArray(e)?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this}},{key:"mult",value:function(e,t,n){var r;return e instanceof i.default.Vector?Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(e)?e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(r=Array.prototype.slice.call(arguments)).every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=n)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(e,t,n){if(e instanceof i.default.Vector)if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){var r=0===e.z&&0===this.z;if(0===e.x||0===e.y||!r&&0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,r||(this.z/=e.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(e))if(e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))){if(e.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if((r=Array.prototype.slice.call(arguments)).every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=n)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n}},{key:"dot",value:function(e,t,n){return e instanceof i.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)}},{key:"cross",value:function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z;return e=this.x*e.y-this.y*e.x,this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,t,n,e):new i.default.Vector(t,n,e)}},{key:"dist",value:function(e){return e.copy().sub(this).mag()}},{key:"normalize",value:function(){var e=this.mag();return 0!==e&&this.mult(1/e),this}},{key:"limit",value:function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this}},{key:"setMag",value:function(e){return this.normalize().mult(e)}},{key:"heading",value:function(){var e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e}},{key:"setHeading",value:function(e){this.isPInst&&(e=this._toRadians(e));var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this}},{key:"rotate",value:function(e){e=this.heading()+e;var t=(this.isPInst&&(e=this._toRadians(e)),this.mag());return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"angleBetween",value:function(e){var t;return 0==this.magSq()*e.magSq()?NaN:(t=this.cross(e),e=Math.atan2(t.mag(),this.dot(e))*Math.sign(t.z||1),this.isPInst?this._fromRadians(e):e)}},{key:"lerp",value:function(e,t,n,r){return e instanceof i.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)}},{key:"slerp",value:function(e,t){if(0!==t){if(1===t)return this.set(e);var n=this.mag(),r=e.mag();if(0==n*r)this.mult(1-t).add(e.x*t,e.y*t,e.z*t);else{var o=this.cross(e),i=o.mag(),a=Math.atan2(i,this.dot(e));if(0<i)o.x/=i,o.y/=i,o.z/=i;else{if(a<.5*Math.PI)return this.mult(1-t).add(e.x*t,e.y*t,e.z*t),this;0===this.z&&0===e.z?o.set(0,0,1):0!==this.x?o.set(this.y,-this.x,0).normalize():o.set(1,0,0)}i=o.cross(this),o=(e=1-t+t*r/n)*Math.cos(t*a),r=e*Math.sin(t*a),this.x=this.x*o+i.x*r,this.y=this.y*o+i.y*r,this.z=this.z*o+i.z*r}}return this}},{key:"reflect",value:function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(e,t,n){var r,o;return e=e instanceof i.default.Vector?(r=e.x||0,o=e.y||0,e.z||0):Array.isArray(e)?(r=e[0]||0,o=e[1]||0,e[2]||0):(r=e||0,o=t||0,n||0),this.x===r&&this.y===o&&this.z===e}}])&&s(t.prototype,n),r&&s(t,r),e}();var u=i.default.Vector;n.default=u},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.constructor":171,"core-js/modules/es.number.is-finite":172,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],307:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},o="_lcg_random_state",i=4294967296,a=0;r.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%i,this[e]/i},r.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*i:t)>>>0},r.default.prototype.randomSeed=function(e){this._lcgSetSeed(o,e),this._gaussian_previous=!1},r.default.prototype.random=function(e,t){var n,i;return r.default._validateParameters("random",arguments),n=null!=this[o]?this._lcg(o):Math.random(),void 0===e?n:void 0===t?e instanceof Array?e[Math.floor(n*e.length)]:n*e:(t<e&&(i=e,e=t,t=i),n*(t-e)+e)},r.default.prototype.randomGaussian=function(e){var t,n,r,o,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=a,this._gaussian_previous=!1;else{for(;1<=(o=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(o=Math.sqrt(-2*Math.log(o)/o)),a=r*o,this._gaussian_previous=!0}return t*i+(e||0)},e=r.default,n.default=e},{"../core/main":273}],308:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype._angleMode=a.RADIANS,i.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},i.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},i.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},i.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},i.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},i.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},i.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},i.default.prototype.degrees=function(e){return e*a.RAD_TO_DEG},i.default.prototype.radians=function(e){return e*a.DEG_TO_RAD},i.default.prototype.angleMode=function(e){if(i.default._validateParameters("angleMode",arguments),void 0===e)return this._angleMode;e!==a.DEGREES&&e!==a.RADIANS||(this._angleMode=e)},i.default.prototype._toRadians=function(e){return this._angleMode===a.DEGREES?e*a.DEG_TO_RAD:e},i.default.prototype._toDegrees=function(e){return this._angleMode===a.RADIANS?e*a.RAD_TO_DEG:e},i.default.prototype._fromRadians=function(e){return this._angleMode===a.DEGREES?e*a.RAD_TO_DEG:e};var s=i.default;n.default=s},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],309:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.textAlign=function(e,t){var n;return r.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},r.default.prototype.textLeading=function(e){var t;return r.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},r.default.prototype.textSize=function(e){var t;return r.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},r.default.prototype.textStyle=function(e){var t;return r.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},r.default.prototype.textWidth=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n[0]+="",r.default._validateParameters("textWidth",n),0===n[0].length?0:(e=this._renderer).textWidth.apply(e,n)},r.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textAscent",t),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textDescent",t),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(e){if("WORD"!==e&&"CHAR"!==e)throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(e)},e=r.default,n.default=e},{"../core/main":273}],310:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(u=e("../core/main"))&&u.__esModule?u:{default:u},a=c(e("../core/constants")),s=c(e("opentype.js"));function l(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(e,t,n){i.default._validateParameters("loadFont",arguments);var r=new i.default.Font(this),o=this;return s.load(e,(function(a,s){if(a)return i.default._friendlyFileLoadError(4,e),void 0!==n?n(a):void console.error(a,e);r.font=s,void 0!==t&&t(r),o._decrementPreload();var l=(s=(a=e.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:a.slice(s+1);["ttf","otf","woff","woff2"].includes(l)&&(l=a.slice(0,-1!==s?s:0),(a=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(l,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(a))})),r},i.default.prototype.text=function(e,t,n,r,o){var a;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(a=this._renderer).text.apply(a,arguments):this},i.default.prototype.textFont=function(e,t){if(i.default._validateParameters("textFont",arguments),arguments.length){if(e)return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",t*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var u=i.default;n.default=u},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,"opentype.js":247}],311:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(o=e("../core/main"))&&o.__esModule?o:{default:o},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function s(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function l(e,t,n,r){var o,i,a;return r?(void 0===l.tmpPoint1&&(l.tmpPoint1=[],l.tmpPoint2=[]),i=l.tmpPoint1,a=l.tmpPoint2,i.x=t.x-e.x,i.y=t.y-e.y,a.x=n.x-t.x,a.y=n.y-t.y,o=i.x*a.x+i.y*a.y,i=Math.sqrt(i.x*i.x+i.y*i.y),a=Math.sqrt(a.x*a.x+a.y*a.y),Math.acos(o/(i*a))<r):0==(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function c(e,t,n,r,o,i,a,s,l){var c=1-l,u=(d=Math.pow(c,3))*e+3*(h=Math.pow(c,2))*l*n+3*c*l*l*o+(p=(m=l*l)*l)*a,d=d*t+3*h*l*r+3*c*l*l*i+p*s,h=e+2*l*(n-e)+m*(o-2*n+e),p=t+2*l*(r-t)+m*(i-2*r+t),f=n+2*l*(o-n)+m*(a-2*o+n),m=r+2*l*(i-r)+m*(s-2*i+r);return e=c*e+l*n,n=c*t+l*r,t=c*o+l*a,r=c*i+l*s,o=90-180*Math.atan2(h-f,p-m)/Math.PI,(f<h||p<m)&&(o+=180),{x:u,y:d,m:{x:h,y:p},n:{x:f,y:m},start:{x:e,y:n},end:{x:t,y:r},alpha:o}}function u(e,t,n,r,o,i,a,s,l){return null==l?y(e,t,n,r,o,i,a,s):c(e,t,n,r,o,i,a,s,function(e,t,n,r,o,i,a,s,l){if(!(l<0||y(e,t,n,r,o,i,a,s)<l)){var c,u=.5,d=1-u;for(c=y(e,t,n,r,o,i,a,s,d);.01<Math.abs(c-l);)c=y(e,t,n,r,o,i,a,s,d+=(c<l?1:-1)*(u/=2));return d}}(e,t,n,r,o,i,a,s,l))}function d(e,t,n){for(var r,o,i,a,s,l=0,d=0,f=(e=function(e,t){function n(e,t,n){var r,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(p.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":o="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,o].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(g(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(g(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(m(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(m(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(m(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(m(t.x,t.y,t.X,t.Y))}return e}function r(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)u[t]="A",s&&(d[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),i=Math.max(a.length,s&&s.length||0)}}function o(e,t,n,r,o){e&&t&&"M"===e[o][0]&&"M"!==t[o][0]&&(t.splice(o,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],i=Math.max(a.length,s&&s.length||0))}var i,a=h(e),s=void 0,l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=[],d=[],f="",y="";i=Math.max(a.length,s&&s.length||0);for(var v=0;v<i;v++){"C"!==(f=a[v]?a[v][0]:f)&&(u[v]=f,v&&(y=u[v-1])),a[v]=n(a[v],l,y),"A"!==u[v]&&"C"===f&&(u[v]="C"),r(a,v),s&&("C"!==(f=s[v]?s[v][0]:f)&&(d[v]=f,v&&(y=d[v-1])),s[v]=n(s[v],c,y),"A"!==d[v]&&"C"===f&&(d[v]="C"),r(s,v)),o(a,s,l,c,v),o(s,a,c,l,v);var b=a[v],x=s&&s[v],w=b.length,S=s&&x.length;l.x=b[w-2],l.y=b[w-1],l.bx=parseFloat(b[w-4])||l.x,l.by=parseFloat(b[w-3])||l.y,c.bx=s&&(parseFloat(x[S-4])||c.x),c.by=s&&(parseFloat(x[S-3])||c.y),c.x=s&&x[S-2],c.y=s&&x[S-1]}return s?[a,s]:a}(e)).length;d<f;d++){if("M"===(i=e[d])[0])r=+i[1],o=+i[2];else{if(t<l+(a=u(r,o,i[1],i[2],i[3],i[4],i[5],i[6]))&&!n)return{x:(s=u(r,o,i[1],i[2],i[3],i[4],i[5],i[6],t-l)).x,y:s.y,alpha:s.alpha};l+=a,r=+i[5],o=+i[6]}i.shift()}return(s=n?l:c(r,o,i[0],i[1],i[2],i[3],i[4],i[5],1)).alpha?{x:s.x,y:s.y,alpha:s.alpha}:s}function h(e){var t=[],n=0,r=0,o=0,i=0,a=0;if(e){"M"===e[0][0]&&(o=n=+e[0][1],i=r=+e[0][2],a++,t[0]=["M",n,r]);for(var s,l,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=a,d=e.length;u<d;u++){if(t.push(s=[]),(l=e[u])[0]!==String.prototype.toUpperCase.call(l[0]))switch(s[0]=String.prototype.toUpperCase.call(l[0]),s[0]){case"A":s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=+(l[6]+n),s[7]=+(l[7]+r);break;case"V":s[1]=+l[1]+r;break;case"H":s[1]=+l[1]+n;break;case"R":for(var h,p=2,m=(h=[n,r].concat(l.slice(1))).length;p<m;p++)h[p]=+h[p]+n,h[++p]=+h[p]+r;t.pop(),t=t.concat(f(h,c));break;case"M":o=+l[1]+n,i=+l[2]+r;break;default:for(var g=1,y=l.length;g<y;g++)s[g]=+l[g]+(g%2?n:r)}else if("R"===l[0])h=[n,r].concat(l.slice(1)),t.pop(),t=t.concat(f(h,c)),s=["R"].concat(l.slice(-2));else for(var v=0,b=l.length;v<b;v++)s[v]=l[v];switch(s[0]){case"Z":n=o,r=i;break;case"H":n=s[1];break;case"V":r=s[1];break;case"M":o=s[s.length-2],i=s[s.length-1];break;default:n=s[s.length-2],r=s[s.length-1]}}}return t}function p(e,t,n,r,o,i,a,s,l,c){function u(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var d,h=120*(v=Math.PI)/180,f=v/180*(+o||0),m=[],g=(c?(_=c[0],d=c[1],w=c[2],S=c[3]):(e=(b=u(e,t,-f)).x,t=b.y,1<(g=(y=(e-(s=(b=u(s,l,-f)).x))/2)*y/(n*n)+(b=(t-(l=b.y))/2)*b/(r*r))&&(n*=g=Math.sqrt(g),r*=g),g=n*n,x=r*r,w=(i=(i===a?-1:1)*Math.sqrt(Math.abs((g*x-g*b*b-x*y*y)/(g*b*b+x*y*y))))*n*b/r+(e+s)/2,S=i*-r*y/n+(t+l)/2,_=Math.asin(((t-S)/r).toFixed(9)),d=Math.asin(((l-S)/r).toFixed(9)),(_=e<w?v-_:_)<0&&(_=2*v+_),(d=s<w?v-d:d)<0&&(d=2*v+d),a&&d<_&&(_-=2*v),!a&&_<d&&(d-=2*v)),d-_),y=(Math.abs(g)>h&&(x=d,b=s,i=l,d=_+h*(a&&_<d?1:-1),m=p(s=w+n*Math.cos(d),l=S+r*Math.sin(d),n,r,o,0,a,b,i,[d,x,w,S])),g=d-_,Math.cos(_)),v=Math.sin(_),b=(h=Math.cos(d),o=Math.sin(d),4/3*n*(a=Math.tan(g/4))),x=[e,t],w=[e+b*v,t-(i=4/3*r*a)*y],S=[s+b*o,l-i*h],_=[s,l];if(w[0]=2*x[0]-w[0],w[1]=2*x[1]-w[1],c)return[w,S,_].concat(m);for(var k=[],T=0,E=(m=[w,S,_].concat(m).join().split(",")).length;T<E;T++)k[T]=T%2?u(m[T-1],m[T],f).y:u(m[T],m[T+1],f).x;return k}function f(e,t){for(var n=[],r=0,o=e.length;r<o-2*!t;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4===r?i[3]={x:+e[0],y:+e[1]}:o-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}function m(e,t,n,r){return[e,t,n,r,n,r]}function g(e,t,n,r,o,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*o+2/3*n,1/3*i+2/3*r,o,i]}function y(e,t,n,r,o,i,a,s,l){for(var c=(l=1<(l=null==l?1:l)?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=0,h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;p<12;p++){var f=v(m=c*u[p]+c,e,n,o,a),m=v(m,t,r,i,s);d+=h[p]*Math.sqrt(f*f+m*m)}return c*d}function v(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n}o.default.Font=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.parent=t,this.cache={},this.font=void 0}var t;return(t=[{key:"textBounds",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0,a=o&&o.renderer&&o.renderer._pInst||this.parent;if((y=a._renderer.drawingContext).textAlign||i.LEFT,y.textBaseline||i.BASELINE,r=r||a._renderer._textSize,!v){for(var s=[],l=[],c=[],u=(c[0]=[],[]),d=this._scale(r),h=a._renderer.textLeading(),p=0,f=(this.font.forEachGlyph(e,t,n,r,o,(function(e,t,n,r){var o=e.getMetrics();0===e.index||10===e.index?c[p+=1]=[]:(c[p].push(t+o.xMin*d),c[p].push(t+o.xMax*d),u.push(n+p*h+-o.yMin*d),u.push(n+p*h+-o.yMax*d))})),0<c[p].length&&(s[p]=Math.min.apply(null,c[p]),l[p]=Math.max.apply(null,c[p])),0),m=0;m<=p;m++){s[m]=Math.min.apply(null,c[m]),l[m]=Math.max.apply(null,c[m]);var g=l[m]-s[m];f<g&&(f=g)}var y,v={x:y=Math.min.apply(null,s),y:n=Math.min.apply(null,u),h:Math.max.apply(null,u)-n,w:f,advance:y-t};r=this._handleAlignment(a._renderer,e,v.x,v.y,v.w+v.advance),v.x=r.x,v.y=r.y}return v}},{key:"textToPoints",value:function(e,t,n,r,o){var i=0,c=[],u=this._getGlyphs(e);r=r||this.parent._renderer._textSize;for(var h,p=0;p<u.length;p++){if(!(u[h=p].name&&"space"===u[h].name||e.length===u.length&&" "===e[h]))for(var f=function(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(function(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}(e[r]));return n.push(t),n}(u[p].getPath(t,n,r).commands),m=0;m<f.length;m++)for(var g=function(e,t){t=function(e,t){if("object"!==a(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0});for(var n=d(e,0,1),r=n/(n*t.sampleFactor),o=[],i=0;i<n;i+=r)o.push(d(e,i));return t.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)l(s(e,n-1),s(e,n),s(e,n+1),t)&&e.splice(n%e.length,1)}(o,t.simplifyThreshold),o}(f[m],o),y=0;y<g.length;y++)g[y].x+=i,c.push(g[y]);i+=u[p].advanceWidth*this._scale(r)}return c}},{key:"_getGlyphs",value:function(e){return this.font.stringToGlyphs(e)}},{key:"_getPath",value:function(e,t,n,r){var o=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer;return t=this._handleAlignment(o,e,t,n),this.font.getPath(e,t.x,t.y,o._textSize,r)}},{key:"_getPathData",value:function(e,t,n,r){var o=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===a(t)&&(r=t),r&&"number"==typeof r.decimals&&(o=r.decimals),e.toPathData(o)}},{key:"_getSVG",value:function(e,t,n,r){var o=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===a(t)&&(r=t),r&&("number"==typeof r.decimals&&(o=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(o)}},{key:"_renderPath",value:function(e,t,n,r){var o=r&&r.renderer||this.parent._renderer,s=o.drawingContext,l=(e=("object"===a(e)&&e.commands?e:this._getPath(e,t,n,r)).commands,s.beginPath(),!0);t=!1,n=void 0;try{for(var c,u=e[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;"M"===d.type?s.moveTo(d.x,d.y):"L"===d.type?s.lineTo(d.x,d.y):"C"===d.type?s.bezierCurveTo(d.x1,d.y1,d.x2,d.y2,d.x,d.y):"Q"===d.type?s.quadraticCurveTo(d.x1,d.y1,d.x,d.y):"Z"===d.type&&s.closePath()}}catch(e){t=!0,n=e}finally{try{l||null==u.return||u.return()}finally{if(t)throw n}}return o._doStroke&&o._strokeSet&&s.stroke(),o._doFill&&(o._fillSet||o._setFill(i._DEFAULT_TEXT_FILL),s.fill()),this}},{key:"_textWidth",value:function(e,t){return this.font.getAdvanceWidth(e,t)}},{key:"_textAscent",value:function(e){return this.font.ascender*this._scale(e)}},{key:"_textDescent",value:function(e){return-this.font.descender*this._scale(e)}},{key:"_scale",value:function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(e,t,n,r,o){var a=e._textSize;switch(void 0===o&&(o=this._textWidth(t,a)),e._textAlign){case i.CENTER:n-=o/2;break;case i.RIGHT:n-=o}switch(e._textBaseline){case i.TOP:r+=this._textAscent(a);break;case i.CENTER:r+=this._textAscent(a)/2;break;case i.BOTTOM:r-=this._textDescent(a)}return{x:n,y:r}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=o.default,n.default=e},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],312:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.append=function(e,t){return e.push(t),e},e.default.prototype.arrayCopy=function(e,t,n,r,o){var i,a;e=void 0!==o?(a=Math.min(o,e.length),i=r,e.slice(t,a+t)):(a=void 0!==n?(a=n,Math.min(a,e.length)):e.length,n=t,e.slice(i=0,a)),Array.prototype.splice.apply(n,[i,a].concat(e))},e.default.prototype.concat=function(e,t){return e.concat(t)},e.default.prototype.reverse=function(e){return e.reverse()},e.default.prototype.shorten=function(e){return e.pop(),e},e.default.prototype.shuffle=function(e,t){for(var n,r,o=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),i=(e=t||o?e:e.slice()).length;1<i;)n=this.random(0,1)*i|0,r=e[--i],e[i]=e[n],e[n]=r;return e},e.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e;return t=t?e.slice(Math.min(t,e.length)):[],(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(t)},e.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},e.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)},e=e.default,n.default=e},{"../core/main":273,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180}],313:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},r.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return r.default.prototype.int(e,t)})):void 0},r.default.prototype.str=function(e){return e instanceof Array?e.map(r.default.prototype.str):String(e)},r.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(e){return"number"==typeof(e=r.default.prototype.int(e,10))?(e+128)%256-128:e instanceof Array?e.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(r.default.prototype.char):"string"==typeof e?r.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},r.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(e,t){if(t=null==t?8:t,e instanceof Array)return e.map((function(e){return r.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t?n.substring(n.length-t,n.length):n}},r.default.prototype.unhex=function(e){return e instanceof Array?e.map(r.default.prototype.unhex):parseInt("0x".concat(e),16)},e=r.default,n.default=e},{"../core/main":273,"core-js/modules/es.array.map":163,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.repeat":193}],314:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(c=e("../core/main"))&&c.__esModule?c:{default:c};function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t,n){var r=(i=o(e.toString().split("."),2))[0],i=i[1];return void 0===n?(r=r.padStart(t,"0"),i?r+"."+i:r):(r=(e=o(e.toFixed(n).toString().split("."),2))[0],i=e[1],(r=r.padStart(t,"0"))+"."+i)}function a(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"";if(e=(e=-1!==n?e.substring(0,n):e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length)for(var o=t-(r+=-1===n?".":"").length+1,i=0;i<o;i++)r+="0";else r=r.substring(0,t+1);return e+r}function s(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function l(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.join=function(e,t){return r.default._validateParameters("join",arguments),e.join(t)},r.default.prototype.match=function(e,t){return r.default._validateParameters("match",arguments),e.match(t)},r.default.prototype.matchAll=function(e,t){r.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),o=n.exec(e),i=[];null!==o;)i.push(o),o=n.exec(e);return i},r.default.prototype.nf=function(e,t,n){return r.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return i(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):i(e,t,n)},r.default.prototype.nfc=function(e,t){return r.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return a(e,t)})):a(e,t)},r.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfp",t);var o=r.default.prototype.nf.apply(this,t);return o instanceof Array?o.map(s):s(o)},r.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfs",t);var o=r.default.prototype.nf.apply(this,t);return o instanceof Array?o.map(l):l(o)},r.default.prototype.split=function(e,t){return r.default._validateParameters("split",arguments),e.split(t)},r.default.prototype.splitTokens=function(e,t){var n,o;return r.default._validateParameters("splitTokens",arguments),o=void 0!==t?(o=/\]/g.exec(t),(n=/\[/g.exec(t))&&o?(t=t.slice(0,o.index)+t.slice(o.index+1),n=/\[/g.exec(t),t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[\\[".concat(t,"\\]]"),"g")):o?(t=t.slice(0,o.index)+t.slice(o.index+1),new RegExp("[".concat(t,"\\]]"),"g")):n?(t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[".concat(t,"\\[]"),"g")):new RegExp("[".concat(t,"]"),"g")):/\s/g,e.split(o).filter((function(e){return e}))},r.default.prototype.trim=function(e){return r.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var c=r.default;n.default=c},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.pad-start":192,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],315:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.day=function(){return(new Date).getDate()},e.default.prototype.hour=function(){return(new Date).getHours()},e.default.prototype.minute=function(){return(new Date).getMinutes()},e.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return(new Date).getMonth()+1},e.default.prototype.second=function(){return(new Date).getSeconds()},e.default.prototype.year=function(){return(new Date).getFullYear()},e=e.default,n.default=e},{"../core/main":273}],316:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=(e("./p5.Geometry"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")));function s(e,t,n,r,o,a,s){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;for(var l,c,u=(a=void 0===a||a)?-2:0,d=(o=o<1?1:o)+((s=void 0===s?0!==t:s)?2:0),h=Math.atan2(e-t,n),p=Math.sin(h),f=Math.cos(h),m=u;m<=d;++m){var g=m/o,y=n*g,v=void 0;for(v=m<0?(g=y=0,e):o<m?(y=n,g=1,t):e+(t-e)*g,-2!==m&&m!==o+2||(v=0),y-=n/2,l=0;l<r;++l){var b=l/(r-1),x=2*Math.PI*b,w=Math.sin(x),S=(x=Math.cos(x),this.vertices.push(new i.default.Vector(w*v,y,x*v)));S=m<0?new i.default.Vector(0,-1,0):o<m&&t?new i.default.Vector(0,1,0):new i.default.Vector(w*f,p,x*f),this.vertexNormals.push(S),this.uvs.push(b,g)}}var _=0;if(a){for(c=0;c<r;++c)this.faces.push([_+c,_+r+(c+1)%r,_+r+c]);_+=2*r}for(m=0;m<o;++m){for(l=0;l<r;++l){var k=(l+1)%r;this.faces.push([_+l,_+k,_+r+k]),this.faces.push([_+l,_+r+k,_+r+l])}_+=r}if(s)for(_+=r,l=0;l<r;++l)this.faces.push([_+l,_+(l+1)%r,_+r])}i.default.prototype.plane=function(e,t,n,r){this._assert3d("plane"),i.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1);var o,a="plane|".concat(n=void 0===n?1:n,"|").concat(r);return this._renderer.geometryInHash(a)||((o=new i.default.Geometry(n,r,(function(){for(var e,t,n=0;n<=this.detailY;n++)for(var r=n/this.detailY,o=0;o<=this.detailX;o++)e=o/this.detailX,t=new i.default.Vector(e-.5,r-.5,0),this.vertices.push(t),this.uvs.push(e,r)}))).computeFaces().computeNormals(),n<=1&&r<=1?o._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(a,o)),this._renderer.drawBuffersScaled(a,e,t,1),this},i.default.prototype.box=function(e,t,n,r,o){this._assert3d("box"),i.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var a,s=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===o&&(o=s?1:4),s="box|".concat(r=void 0===r?s?1:4:r,"|").concat(o),this._renderer.geometryInHash(s)||((a=new i.default.Geometry(r,o,(function(){var e=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach((function(t,n){n*=4;for(var r=0;r<4;r++){var o=t[r];o=new i.default.Vector((2*(1&o)-1)/2,((2&o)-1)/2,((4&o)/2-1)/2),e.vertices.push(o),e.uvs.push(1&r,(2&r)/2)}e.faces.push([n,1+n,2+n]),e.faces.push([2+n,1+n,3+n])}))}))).computeNormals(),r<=4&&o<=4?a._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,a)),this._renderer.drawBuffersScaled(s,e,t,n),this},i.default.prototype.sphere=function(e,t,n){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),this.ellipsoid(e=void 0===e?50:e,e,e,t=void 0===t?24:t,n=void 0===n?16:n),this},i.default.prototype.cylinder=function(e,t,n,r,o,a){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1),void 0===a&&(a=!0),void 0===o&&(o=!0);var l,c="cylinder|".concat(n=void 0===n?24:n,"|").concat(r,"|").concat(o,"|").concat(a);return this._renderer.geometryInHash(c)||(l=new i.default.Geometry(n,r),s.call(l,1,1,1,n,r,o,a),n<=24&&r<=16?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(c,l)),this._renderer.drawBuffersScaled(c,e,t,e),this},i.default.prototype.cone=function(e,t,n,r,o){this._assert3d("cone"),i.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1),void 0===o&&(o=!0);var a,l="cone|".concat(n=void 0===n?24:n,"|").concat(r,"|").concat(o);return this._renderer.geometryInHash(l)||(a=new i.default.Geometry(n,r),s.call(a,1,0,1,n,r,o,!1),n<=24&&r<=16?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,a)),this._renderer.drawBuffersScaled(l,e,t,e),this},i.default.prototype.ellipsoid=function(e,t,n,r,o){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=e),void 0===o&&(o=16);var a,s="ellipsoid|".concat(r=void 0===r?24:r,"|").concat(o);return this._renderer.geometryInHash(s)||((a=new i.default.Geometry(r,o,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),o=Math.sin(n),a=0;a<=this.detailX;a++){var s=a/this.detailX,l=2*Math.PI*s,c=Math.cos(l);l=Math.sin(l),l=new i.default.Vector(r*l,o,r*c),this.vertices.push(l),this.vertexNormals.push(l),this.uvs.push(s,t)}}))).computeFaces(),r<=24&&o<=24?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(s,a)),this._renderer.drawBuffersScaled(s,e,t,n),this},i.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var o,a=(t/e).toPrecision(4);return t="torus|".concat(a,"|").concat(n,"|").concat(r),this._renderer.geometryInHash(t)||((o=new i.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),o=Math.sin(n),s=1+a*r,l=0;l<=this.detailX;l++){var c=l/this.detailX,u=2*Math.PI*c,d=Math.cos(u),h=(u=Math.sin(u),new i.default.Vector(s*d,s*u,a*o));d=new i.default.Vector(r*d,r*u,o),this.vertices.push(h),this.vertexNormals.push(d),this.uvs.push(c,t)}}))).computeFaces(),n<=24&&r<=16?o._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(t,o)),this._renderer.drawBuffersScaled(t,e,e,e),this},i.default.RendererGL.prototype.point=function(e,t,n){var r=[];return r.push(new i.default.Vector(e,t,n=void 0===n?0:n)),this._drawPoints(r,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=(e=e[5],this.geometryInHash("tri")||((s=new i.default.Geometry(1,1,(function(){var e=[];e.push(new i.default.Vector(0,0,0)),e.push(new i.default.Vector(1,0,0)),e.push(new i.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]})))._edgesToVertices(),s.computeNormals(),this.createBuffers("tri",s)),this.uMVMatrix.copy());try{var l=Math.sign(t*o-r*n+r*e-a*o+a*n-t*e),c=new i.default.Matrix([r-t,o-n,0,0,a-t,e-n,0,0,0,0,l,0,t,n,0,1]).mult(this.uMVMatrix);this.uMVMatrix=c,this.drawBuffers("tri")}finally{this.uMVMatrix=s}return this},i.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,a.TWO_PI,a.OPEN,e[4])},i.default.RendererGL.prototype.arc=function(e){var t,n=arguments[1],r=arguments[2],o=arguments[3],s=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]||25,d=(Math.abs(l-s)>=a.TWO_PI?"".concat(h="ellipse","|"):"".concat(h="arc","|").concat(s,"|").concat(l,"|").concat(c,"|")).concat(u,"|"),h=(this.geometryInHash(d)||((t=new i.default.Geometry(u,1,(function(){if(s.toFixed(10)!==l.toFixed(10)){c!==a.PIE&&void 0!==c||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=u;e++){var t=e/u*(l-s)+s,n=.5+Math.cos(t)/2;t=.5+Math.sin(t)/2,this.vertices.push(new i.default.Vector(n,t,0)),this.uvs.push([n,t]),e<u-1&&(this.faces.push([0,e+1,e+2]),this.edges.push([e+1,e+2]))}switch(c){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case a.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case a.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}}))).computeNormals(),u<=50?t._edgesToVertices(t):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(h," with more than 50 detail")),this.createBuffers(d,t)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([e,n,0]),this.uMVMatrix.scale(r,o,1),this.drawBuffers(d)}finally{this.uMVMatrix=h}return this},i.default.RendererGL.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];if(void 0===e[4]){var s=this._pInst._glAttributes.perPixelLighting,l=e[4]||(s?1:24),c=e[5]||(s?1:16),u=(s="rect|".concat(l,"|").concat(c),this.geometryInHash(s)||((u=new i.default.Geometry(l,c,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,o=new i.default.Vector(r,t,0);this.vertices.push(o),this.uvs.push(r,t)}0<l&&0<c&&(this.edges=[[0,l],[l,(l+1)*(c+1)-1],[(l+1)*(c+1)-1,(l+1)*c],[(l+1)*c,0]])}))).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(s,u)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([t,n,0]),this.uMVMatrix.scale(r,o,1),this.drawBuffers(s)}finally{this.uMVMatrix=u}}else{s=e[4],u=void 0===e[5]?s:e[5];var d=void 0===e[6]?u:e[6],h=(e=void 0===e[7]?d:e[7],r),p=o,f=((h+=t)<t&&(g=t,t=h,h=g),(p+=n)<n&&(g=n,n=p,p=g),(g=Math.min((h-t)/2,(p-n)/2))<s&&(s=g),g<u&&(u=g),g<d&&(d=g),g<e&&(e=g),t),m=n,g=h,y=(t=p,this.beginShape(),0!==u?(this.vertex(g-u,m),this.quadraticVertex(g,m,g,m+u)):this.vertex(g,m),0!==d?(this.vertex(g,t-d),this.quadraticVertex(g,t,g-d,t)):this.vertex(g,t),0!==e?(this.vertex(f+e,t),this.quadraticVertex(f,t,f,t-e)):this.vertex(f,t),0!==s?(this.vertex(f,m+s),this.quadraticVertex(f,m,f+s,m)):this.vertex(f,m),!(this.immediateMode.geometry.uvs.length=0));n=!1,h=void 0;try{for(var v,b=this.immediateMode.geometry.vertices[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var x=v.value,w=(x.x-f)/r,S=(x.y-m)/o;this.immediateMode.geometry.uvs.push(w,S)}}catch(e){n=!0,h=e}finally{try{y||null==b.return||b.return()}finally{if(n)throw h}}this.endShape(a.CLOSE)}return this},i.default.RendererGL.prototype.quad=function(e,t,n,r,o,a,s,l,c,u,d,h,p,f){void 0===p&&(p=2),void 0===f&&(f=2);var m="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(o,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(c,"|").concat(u,"|").concat(d,"|").concat(h,"|").concat(p,"|").concat(f);if(!this.geometryInHash(m)){var g=new i.default.Geometry(p,f,(function(){for(var p=1/(this.detailX-1),f=1/(this.detailY-1),m=0;m<this.detailY;m++)for(var g=0;g<this.detailX;g++){var y=g*p,v=m*f;this.vertices.push(new i.default.Vector((1-y)*((1-v)*e+v*u)+y*((1-v)*r+v*s),(1-y)*((1-v)*t+v*d)+y*((1-v)*o+v*l),(1-y)*((1-v)*n+v*h)+y*((1-v)*a+v*c))),this.uvs.push([y,v])}}));g.faces=[];for(var y=0;y<f-1;y++)for(var v=0;v<p-1;v++){var b=v+y*p,x=v+1+(y+1)*p,w=v+(y+1)*p;g.faces.push([b,v+1+y*p,x]),g.faces.push([b,x,w])}g.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(m,g)}return this.drawBuffers(m),this},i.default.RendererGL.prototype.bezier=function(e,t,n,r,o,i,a,s,l,c,u,d){8===arguments.length&&(u=s,c=a,s=i,a=o,o=r,r=n,n=i=l=d=0);var h=this._pInst._bezierDetail||20;this.beginShape();for(var p=0;p<=h;p++){var f=Math.pow(1-p/h,3),m=p/h*3*Math.pow(1-p/h,2),g=3*Math.pow(p/h,2)*(1-p/h),y=Math.pow(p/h,3);this.vertex(e*f+r*m+a*g+c*y,t*f+o*m+s*g+u*y,n*f+i*m+l*g+d*y)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(e,t,n,r,o,i,a,s,l,c,u,d){8===arguments.length&&(c=a,u=s,a=o,s=r,o=r=n,n=i=l=d=0);var h=this._pInst._curveDetail;this.beginShape();for(var p=0;p<=h;p++){var f=.5*Math.pow(p/h,3),m=.5*Math.pow(p/h,2),g=p/h*.5;this.vertex(f*(3*r-e-3*a+c)+m*(2*e-5*r+4*a-c)+g*(-e+a)+2*r*.5,f*(3*o-t-3*s+u)+m*(2*t-5*o+4*s-u)+g*(-t+s)+2*o*.5,f*(3*i-n-3*l+d)+m*(2*n-5*i+4*l-d)+g*(-n+l)+2*i*.5)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,o,i,a=[],s=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=0,d=1,h=0;u<1;){if(i=parseFloat(u.toFixed(6)),this._lookUpTableBezier[h]=this._bezierCoefficients(i),d.toFixed(6)===c.toFixed(6)){i=parseFloat(d.toFixed(6))+parseFloat(u.toFixed(6)),++h,this._lookUpTableBezier[h]=this._bezierCoefficients(i);break}u+=c,d-=c,++h}}for(var p=this._lookUpTableBezier.length,f=[],m=0;m<4;m++)f.push([]);f[0]=this.immediateMode.geometry.vertexColors.slice(-4),f[3]=this.curFillColor.slice();var g=[];for(m=0;m<4;m++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[3]=this.curStrokeColor.slice(),6===l){this.isBezier=!0,a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var y=Math.hypot(a[0]-a[1],s[0]-s[1]),v=Math.hypot(a[1]-a[2],s[1]-s[2]),b=Math.hypot(a[2]-a[3],s[2]-s[3]);for(y/=v=y+v+b,b/=v,o=0;o<4;o++)f[1].push(f[0][o]*(1-y)+f[3][o]*y),f[2].push(f[0][o]*b+f[3][o]*(1-b)),g[1].push(g[0][o]*(1-y)+g[3][o]*y),g[2].push(g[0][o]*b+g[3][o]*(1-b));for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<4;m++){for(o=0;o<4;o++)this.curFillColor[o]+=this._lookUpTableBezier[r][m]*f[m][o],this.curStrokeColor[o]+=this._lookUpTableBezier[r][m]*g[m][o];e+=a[m]*this._lookUpTableBezier[r][m],t+=s[m]*this._lookUpTableBezier[r][m]}this.vertex(e,t)}this.curFillColor=f[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===l){this.isBezier=!0,a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],w=Math.hypot(a[0]-a[1],s[0]-s[1],x[0]-x[1]),S=(v=Math.hypot(a[1]-a[2],s[1]-s[2],x[1]-x[2]),Math.hypot(a[2]-a[3],s[2]-s[3],x[2]-x[3]));for(w/=l=w+v+S,S/=l,o=0;o<4;o++)f[1].push(f[0][o]*(1-w)+f[3][o]*w),f[2].push(f[0][o]*S+f[3][o]*(1-S)),g[1].push(g[0][o]*(1-w)+g[3][o]*w),g[2].push(g[0][o]*S+g[3][o]*(1-S));for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=n=0;m<4;m++){for(o=0;o<4;o++)this.curFillColor[o]+=this._lookUpTableBezier[r][m]*f[m][o],this.curStrokeColor[o]+=this._lookUpTableBezier[r][m]*g[m][o];e+=a[m]*this._lookUpTableBezier[r][m],t+=s[m]*this._lookUpTableBezier[r][m],n+=x[m]*this._lookUpTableBezier[r][m]}this.vertex(e,t,n)}this.curFillColor=f[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,o,i,a=[],s=[],l=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,u=0,d=1,h=0;u<1;){if(i=parseFloat(u.toFixed(6)),this._lookUpTableQuadratic[h]=this._quadraticCoefficients(i),d.toFixed(6)===c.toFixed(6)){i=parseFloat(d.toFixed(6))+parseFloat(u.toFixed(6)),++h,this._lookUpTableQuadratic[h]=this._quadraticCoefficients(i);break}u+=c,d-=c,++h}}for(var p=this._lookUpTableQuadratic.length,f=[],m=0;m<3;m++)f.push([]);f[0]=this.immediateMode.geometry.vertexColors.slice(-4),f[2]=this.curFillColor.slice();var g=[];for(m=0;m<3;m++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[2]=this.curStrokeColor.slice(),4===l){this.isQuadratic=!0,a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var y=Math.hypot(a[0]-a[1],s[0]-s[1]);for(y/=y+Math.hypot(a[1]-a[2],s[1]-s[2]),o=0;o<4;o++)f[1].push(f[0][o]*(1-y)+f[2][o]*y),g[1].push(g[0][o]*(1-y)+g[2][o]*y);for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<3;m++){for(o=0;o<4;o++)this.curFillColor[o]+=this._lookUpTableQuadratic[r][m]*f[m][o],this.curStrokeColor[o]+=this._lookUpTableQuadratic[r][m]*g[m][o];e+=a[m]*this._lookUpTableQuadratic[r][m],t+=s[m]*this._lookUpTableQuadratic[r][m]}this.vertex(e,t)}this.curFillColor=f[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===l){this.isQuadratic=!0,a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var v=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],b=Math.hypot(a[0]-a[1],s[0]-s[1],v[0]-v[1]);for(b/=b+Math.hypot(a[1]-a[2],s[1]-s[2],v[1]-v[2]),o=0;o<4;o++)f[1].push(f[0][o]*(1-b)+f[2][o]*b),g[1].push(g[0][o]*(1-b)+g[2][o]*b);for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=n=0;m<3;m++){for(o=0;o<4;o++)this.curFillColor[o]+=this._lookUpTableQuadratic[r][m]*f[m][o],this.curStrokeColor[o]+=this._lookUpTableQuadratic[r][m]*g[m][o];e+=a[m]*this._lookUpTableQuadratic[r][m],t+=s[m]*this._lookUpTableQuadratic[r][m],n+=v[m]*this._lookUpTableQuadratic[r][m]}this.vertex(e,t,n)}this.curFillColor=f[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,o,i,a=[],s=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=0,d=1,h=0;u<1;){if(i=parseFloat(u.toFixed(6)),this._lookUpTableBezier[h]=this._bezierCoefficients(i),d.toFixed(6)===c.toFixed(6)){i=parseFloat(d.toFixed(6))+parseFloat(u.toFixed(6)),++h,this._lookUpTableBezier[h]=this._bezierCoefficients(i);break}u+=c,d-=c,++h}}var p=this._lookUpTableBezier.length;if(2===l){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),o=0;o<p;o++)t=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],n=s[0]*this._lookUpTableBezier[o][0]+s[1]*this._lookUpTableBezier[o][1]+s[2]*this._lookUpTableBezier[o][2]+s[3]*this._lookUpTableBezier[o][3],this.vertex(t,n);for(o=0;o<l;o++)this.immediateMode._curveVertex.shift()}}else if(3===l&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),e=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),o=0;o<p;o++)t=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],n=s[0]*this._lookUpTableBezier[o][0]+s[1]*this._lookUpTableBezier[o][1]+s[2]*this._lookUpTableBezier[o][2]+s[3]*this._lookUpTableBezier[o][3],r=e[0]*this._lookUpTableBezier[o][0]+e[1]*this._lookUpTableBezier[o][1]+e[2]*this._lookUpTableBezier[o][2]+e[3]*this._lookUpTableBezier[o][3],this.vertex(t,n,r);for(o=0;o<l;o++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(e,t,n,r,o,i,s,l,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(e),this._pInst.textureMode(a.NORMAL);var u=0,d=(t<=e.width&&(u=t/e.width),1);t+r<=e.width&&(d=(t+r)/e.width),t=0,n<=e.height&&(t=n/e.height),r=1,n+o<=e.height&&(r=(n+o)/e.height),this.beginShape(),this.vertex(i,s,0,u,t),this.vertex(i+l,s,0,d,t),this.vertex(i+l,s+c,0,d,r),this.vertex(i,s+c,0,u,r),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var l=i.default;n.default=l},{"../core/constants":262,"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],317:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(s=e("../core/main"))&&s.__esModule?s:{default:s},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}o.default.prototype.orbitControl=function(e,t,n,r){var i=this,s=(this._assert3d("orbitControl"),o.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=1),"object"!==a(r)&&(r={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var l=r.disableTouchActions;!0===this.touchActionsDisabled||void 0!==l&&!l||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),r=void 0!==(l=r.freeRotation)&&l;var c,u,d,h=[],p=(this.touches.forEach((function(e){i._renderer.prevTouches.forEach((function(t){e.id===t.id&&(t={x:e.x,y:e.y,px:t.x,py:t.y},h.push(t))}))})),this._renderer.prevTouches=this.touches,l=0,0),f=0,m=0,g=0,y=this.height<this.width?this.height:this.width,v=!1;return 0<h.length?(v=0<h[0].x&&h[0].x<this.width&&0<h[0].y&&h[0].y<this.height,1===h.length?(p=-e*((c=h[0]).x-c.px)/y,f=t*(c.y-c.py)/y):(c=h[0],u=h[1],l=-(Math.hypot(c.x-u.x,c.y-u.y)-Math.hypot(c.px-u.px,c.py-u.py))*n*4e-4,m=.5*(c.x+u.x)-.5*(c.px+u.px),g=.5*(c.y+u.y)-.5*(c.py+u.py)),0<this.touches.length?v&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(v=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(l=Math.sign(this._mouseWheelDeltaY)*n,l*=.01,this._mouseWheelDeltaY=0,v&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(p=-e*this.movedX/y,f=t*this.movedY/y):this.mouseButton===this.RIGHT&&(m=this.movedX,g=this.movedY),v&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==l&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=l),.001<Math.abs(this._renderer.zoomVelocity)?(r?s._orbitFree(0,0,this._renderer.zoomVelocity):s._orbit(0,0,this._renderer.zoomVelocity),0!==s.projMatrix.mat4[15]&&(s.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),s.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=s.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=s.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===p&&0===f||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*p,.6*f),1e-6<this._renderer.rotateVelocity.magSq()?(r?s._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):s._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===m&&0===g||!this._renderer.executeRotateAndMove||(c=2*m/this.width,u=2*-g/this.height,this._renderer.moveVelocity.add(.15*c,.15*u)),1e-6<this._renderer.moveVelocity.magSq()?(n=s._getLocalAxes(),e=s.eyeX-s.centerX,t=s.eyeY-s.centerY,y=s.eyeZ-s.centerZ,v=Math.sqrt(e*e+t*t+y*y),l=new o.default.Vector(s.centerX,s.centerY,s.centerZ),l=s.cameraMatrix.multiplyPoint(l),(l=this._renderer.uPMatrix.multiplyAndNormalizePoint(l)).x-=this._renderer.moveVelocity.x,l.y-=this._renderer.moveVelocity.y,f=0===(p=this._renderer.uPMatrix.mat4)[15]?(d=(p[8]+l.x)/p[0]*v,(p[9]+l.y)/p[5]*v):(d=(l.x-p[12])/p[0],(l.y-p[13])/p[5]),s.setPosition(s.eyeX+d*n.x[0]+f*n.y[0],s.eyeY+d*n.x[1]+f*n.y[1],s.eyeZ+d*n.x[2]+f*n.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},o.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===i.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},o.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},o.default.prototype._grid=function(e,t,n,r,o){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0);var i=e/t,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-a+n,r,e*i-a+o),this.vertex(a+n,r,e*i-a+o),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*i-a+n,r,-a+o),this.vertex(s*i-a+n,r,a+o),this.endShape();this.pop()}},o.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var s=o.default;n.default=s},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],318:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.ambientLight=function(e,t,n,o){this._assert3d("ambientLight"),r.default._validateParameters("ambientLight",arguments);var i=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(i._array[0],i._array[1],i._array[2]),this._renderer._enableLighting=!0,this},r.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),r.default._validateParameters("specularColor",arguments);var o=this.color.apply(this,arguments);return this._renderer.specularColors=[o._array[0],o._array[1],o._array[2]],this},r.default.prototype.directionalLight=function(e,t,n,o,i,a){var s,l;return this._assert3d("directionalLight"),r.default._validateParameters("directionalLight",arguments),e=e instanceof r.default.Color?e:this.color(e,t,n),n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,l=t.y,t.z),t=Math.sqrt(s*s+l*l+n*n),this._renderer.directionalLightDirections.push(s/t,l/t,n/t),this._renderer.directionalLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},r.default.prototype.pointLight=function(e,t,n,o,i,a){var s,l;return this._assert3d("pointLight"),r.default._validateParameters("pointLight",arguments),e=e instanceof r.default.Color?e:this.color(e,t,n),n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,l=t.y,t.z),this._renderer.pointLightPositions.push(s,l,n),this._renderer.pointLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},r.default.prototype.lights=function(){this._assert3d("lights");var e=this.color("rgb(128,128,128)");return this.ambientLight(e),this.directionalLight(e,0,0,-1),this},r.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),r.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},r.default.prototype.spotLight=function(e,t,n,o,i,a,s,l,c,u,d){this._assert3d("spotLight"),r.default._validateParameters("spotLight",arguments);var h,p,f,m=arguments.length;switch(m){case 11:case 10:h=this.color(e,t,n),p=new r.default.Vector(o,i,a),f=new r.default.Vector(s,l,c);break;case 9:e instanceof r.default.Color?(h=e,p=new r.default.Vector(t,n,o),f=new r.default.Vector(i,a,s),u=l,d=c):o instanceof r.default.Vector?(h=this.color(e,t,n),p=o,f=new r.default.Vector(i,a,s),u=l,d=c):s instanceof r.default.Vector?(h=this.color(e,t,n),p=new r.default.Vector(o,i,a),f=s,u=l,d=c):(h=this.color(e,t,n),p=new r.default.Vector(o,i,a),f=new r.default.Vector(s,l,c));break;case 8:f=e instanceof r.default.Color?(h=e,p=new r.default.Vector(t,n,o),new r.default.Vector(i,a,s)):o instanceof r.default.Vector?(h=this.color(e,t,n),p=o,new r.default.Vector(i,a,s)):(h=this.color(e,t,n),p=new r.default.Vector(o,i,a),s),u=l;break;case 7:e instanceof r.default.Color&&t instanceof r.default.Vector?(h=e,p=t,f=new r.default.Vector(n,o,i),u=a,d=s):e instanceof r.default.Color&&i instanceof r.default.Vector?(h=e,p=new r.default.Vector(t,n,o),f=i,u=a,d=s):o instanceof r.default.Vector&&i instanceof r.default.Vector?(h=this.color(e,t,n),p=o,f=i,u=a,d=s):f=e instanceof r.default.Color?(h=e,p=new r.default.Vector(t,n,o),new r.default.Vector(i,a,s)):o instanceof r.default.Vector?(h=this.color(e,t,n),p=o,new r.default.Vector(i,a,s)):(h=this.color(e,t,n),p=new r.default.Vector(o,i,a),s);break;case 6:o instanceof r.default.Vector&&i instanceof r.default.Vector?(h=this.color(e,t,n),p=o,f=i,u=a):e instanceof r.default.Color&&i instanceof r.default.Vector?(h=e,p=new r.default.Vector(t,n,o),f=i,u=a):e instanceof r.default.Color&&t instanceof r.default.Vector&&(h=e,p=t,f=new r.default.Vector(n,o,i),u=a);break;case 5:e instanceof r.default.Color&&t instanceof r.default.Vector&&n instanceof r.default.Vector?(h=e,p=t,f=n,u=o,d=i):o instanceof r.default.Vector&&i instanceof r.default.Vector?(h=this.color(e,t,n),p=o,f=i):e instanceof r.default.Color&&i instanceof r.default.Vector?(h=e,p=new r.default.Vector(t,n,o),f=i):e instanceof r.default.Color&&t instanceof r.default.Vector&&(h=e,p=t,f=new r.default.Vector(n,o,i));break;case 4:h=e,p=t,f=n,u=o;break;case 3:h=e,p=t,f=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(m<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(h._array[0],h._array[1],h._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(p.x,p.y,p.z),f.normalize(),this._renderer.spotLightDirections.push(f.x,f.y,f.z),void 0===u&&(u=Math.PI/3),void 0!==d&&d<1?(d=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===d&&(d=100),u=this._renderer._pInst._toRadians(u),this._renderer.spotLightAngle.push(Math.cos(u)),this._renderer.spotLightConc.push(d),this._renderer._enableLighting=!0,this},r.default.prototype.noLights=function(){this._assert3d("noLights");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("noLights",t),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},e=r.default,n.default=e},{"../core/main":273}],319:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(o=e("../core/main"))&&o.__esModule?o:{default:o};e("./p5.Geometry"),r.default.prototype.loadModel=function(e){r.default._validateParameters("loadModel",arguments);var t,n,o,i=e.slice(-4),a=("boolean"==typeof arguments[1]?(t=arguments[1],n=arguments[2],o=arguments[3],void 0!==arguments[4]&&(i=arguments[4])):(t=!1,n=arguments[1],o=arguments[2],void 0!==arguments[3]&&(i=arguments[3])),new r.default.Geometry),s=(a.gid="".concat(e,"|").concat(t),this);return i.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){!function(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(e[r]!==t.getUint8(n+r,!1))return;return 1}(n,t,r))return;return 1}(t))!function(e,t){for(var n,o,i,a,s,l,c,u=new DataView(t),d=u.getUint32(80,!0),h=!1,p=0;p<70;p++)1129270351===u.getUint32(p,!1)&&82===u.getUint8(p+4)&&61===u.getUint8(p+5)&&(h=!0,a=[],s=u.getUint8(p+6)/255,l=u.getUint8(p+7)/255,c=u.getUint8(p+8)/255);for(var f=0;f<d;f++){for(var m,g=84+50*f,y=u.getFloat32(g,!0),v=u.getFloat32(4+g,!0),b=u.getFloat32(8+g,!0),x=(h&&(i=0==(32768&(m=u.getUint16(48+g,!0)))?(n=(31&m)/31,o=(m>>5&31)/31,(m>>10&31)/31):(n=s,o=l,c)),new r.default.Vector(y,v,b)),w=1;w<=3;w++){var S=g+12*w;S=new r.default.Vector(u.getFloat32(S,!0),u.getFloat32(4+S,!0),u.getFloat32(8+S,!0)),e.vertices.push(S),e.vertexNormals.push(x),h&&a.push(n,o,i)}e.faces.push([3*f,3*f+1,3*f+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{if(t=new DataView(t),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(e,t){for(var n,o,i="",a=[],s=0;s<t.length;++s){for(var l=t[s].trim(),c=l.split(" "),u=0;u<c.length;++u)""===c[u]&&c.splice(u,1);if(0!==c.length)switch(i){case"":if("solid"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "solid"'));i="solid";break;case"solid":if("facet"!==c[0]||"normal"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "facet normal"'));n=new r.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),i="facet normal";break;case"facet normal":if("outer"!==c[0]||"loop"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "outer loop"'));i="vertex";break;case"vertex":if("vertex"===c[0])o=new r.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),e.vertices.push(o),e.uvs.push([0,0]),a.push(e.vertices.indexOf(o));else{if("endloop"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "vertex" or "endloop"'));e.faces.push(a),a=[],i="endloop"}break;case"endloop":if("endfacet"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "endfacet"'));i="endfacet";break;case"endfacet":if("endsolid"!==c[0]){if("facet"!==c[0]||"normal"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "endsolid" or "facet normal"'));n=new r.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),i="facet normal"}break;default:console.error('Invalid state "'.concat(i,'"'))}}}(e,t=new TextDecoder("utf-8").decode(t).split("\n"))}}(a,e),t&&a.normalize(),s._decrementPreload(),"function"==typeof n&&n(a)}),o):i.match(/\.obj$/i)?this.loadStrings(e,(function(e){for(var o=a,i=e,l={v:[],vt:[],vn:[]},c={},u=0;u<i.length;++u){var d=i[u].trim().split(/\b\s+/);if(0<d.length)if("v"===d[0]||"vn"===d[0]){var h=new r.default.Vector(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));l[d[0]].push(h)}else if("vt"===d[0])h=[parseFloat(d[1]),1-parseFloat(d[2])],l[d[0]].push(h);else if("f"===d[0])for(var p=3;p<d.length;++p){for(var f=[],m=[1,p-1,p],g=0;g<m.length;++g){var y=d[m[g]],v=0;if(void 0!==c[y])v=c[y];else{for(var b=y.split("/"),x=0;x<b.length;x++)b[x]=parseInt(b[x])-1;v=c[y]=o.vertices.length,o.vertices.push(l.v[b[0]].copy()),l.vt[b[1]]?o.uvs.push(l.vt[b[1]].slice()):o.uvs.push([0,0]),l.vn[b[2]]&&o.vertexNormals.push(l.vn[b[2]].copy())}f.push(v)}f[0]!==f[1]&&f[0]!==f[2]&&f[1]!==f[2]&&o.faces.push(f)}}0===o.vertexNormals.length&&o.computeNormals(),t&&a.normalize(),s._decrementPreload(),"function"==typeof n&&n(a)}),o):(r.default._friendlyFileLoadError(3,e),o?o():r.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),a},r.default.prototype.model=function(e){this._assert3d("model"),r.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(0===e.edges.length&&e._makeTriangleEdges(),e._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var o=r.default;n.default=o},{"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199}],320:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Texture"),i.default.prototype.loadShader=function(e,t,n,r){function o(){s._decrementPreload(),n&&n(a)}i.default._validateParameters("loadShader",arguments),r=r||console.error;var a=new i.default.Shader,s=this,l=!1,c=!1;return this.loadStrings(e,(function(e){a._vertSrc=e.join("\n"),c=!0,l&&o()}),r),this.loadStrings(t,(function(e){a._fragSrc=e.join("\n"),l=!0,c&&o()}),r),a},i.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,e,t)},i.default.prototype.shader=function(e){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.init(),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(e){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(e){e!==a.IMAGE&&e!==a.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},i.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=(this._renderer.textureWrapX=e,this._renderer.textureWrapY=t,!0),r=!1,o=void 0;try{for(var i,a=this._renderer.textures.values()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)i.value.setWrapMode(e,t)}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("normalMaterial",t),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var r=i.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=r._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var o=i.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=o._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var o=i.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=o._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.shininess=function(e){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),this._renderer._useShininess=e=e<1?1:e,this},i.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,n=this.drawMode===a.TEXTURE;return(n=this.userFillShader||this.userStrokeShader||this.userPointShader||n||this.curBlendMode!==a.BLEND||e[e.length-1]<1||this._isErasing)!==this._isBlending&&(n||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=n),this._applyBlendMode(),e},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case a.BLEND:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE);break;case a.REMOVE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_ALPHA);break;case a.MULTIPLY:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case a.SCREEN:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_COLOR);break;case a.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case a.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case a.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var s=i.default;n.default=s},{"../core/constants":262,"../core/main":273,"./p5.Texture":330,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],321:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},r.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},r.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},r.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new r.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},r.default.Camera=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._renderer=t,this.cameraType="default",this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix,this.yScale=1}var t;return(t=[{key:"perspective",value:function(e,t,n,o){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===o&&(o=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),o<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=o,this.projMatrix=r.default.Matrix.identity(),e=1/Math.tan(this.cameraFOV/2);var i=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(e/t,0,0,0,0,-e*this.yScale,0,0,0,0,(o+n)*i,-1,0,0,2*o*n*i,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(e,t,n,o,i,a){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=+this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===o&&(o=+this._renderer.height/2),void 0===i&&(i=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=i;var s=t-e,l=o-n,c=(this.cameraFar=a)-i,u=2/s,d=2/l*this.yScale,h=-2/c;t=-(t+e)/s,e=-(o+n)/l,s=-(a+i)/c,this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-d,0,0,0,0,h,0,t,e,s,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(e,t,n,o,i,a){void 0===e&&(e=.05*-this._renderer.width),void 0===t&&(t=.05*+this._renderer.width),void 0===n&&(n=.05*+this._renderer.height),void 0===o&&(o=.05*-this._renderer.height),void 0===i&&(i=this.defaultCameraNear),void 0===a&&(a=this.defaultCameraFar),this.cameraNear=i;var s=t-e,l=o-n,c=(this.cameraFar=a)-i,u=2*i/s,d=2*i/l*this.yScale,h=-2*a*i/c;t=(t+e)/s,e=(o+n)/l,s=-(a+i)/c,this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-d,0,0,t,e,s,-1,0,0,h,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(e,t,n,o){var i=this.centerX,a=this.centerY,s=this.centerZ,l=(i-=this.eyeX,a-=this.eyeY,s-=this.eyeZ,r.default.Matrix.identity(this._renderer._pInst));(l.rotate(this._renderer._pInst._toRadians(e),t,n,o),e=[i*l.mat4[0]+a*l.mat4[4]+s*l.mat4[8],i*l.mat4[1]+a*l.mat4[5]+s*l.mat4[9],i*l.mat4[2]+a*l.mat4[6]+s*l.mat4[10]])[0]+=this.eyeX,e[1]+=this.eyeY,e[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,e[0],e[1],e[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])}},{key:"tilt",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])}},{key:"lookAt",value:function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(e,t,n,r,o,i,a,s,l){return void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,o=t,s=1,l=a=i=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=o,this.centerZ=i),void 0!==a&&(this.upX=a,this.upY=s,this.upZ=l),r=this._getLocalAxes(),this.cameraMatrix.set(r.x[0],r.y[0],r.z[0],0,r.x[1],r.y[1],r.z[1],0,r.x[2],r.y[2],r.z[2],0,0,0,0,1),o=-e,this.cameraMatrix.translate([o,-t,-n]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(e,t,n){e=[(r=this._getLocalAxes()).x[0]*e,r.x[1]*e,r.x[2]*e],t=[r.y[0]*t,r.y[1]*t,r.y[2]*t];var r=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+e[0]+t[0]+r[0],this.eyeY+e[1]+t[1]+r[1],this.eyeZ+e[2]+t[2]+r[2],this.centerX+e[0]+t[0]+r[0],this.centerY+e[1]+t[1]+r[1],this.centerZ+e[2]+t[2]+r[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(e,t,n){var r=e-this.eyeX,o=t-this.eyeY,i=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+o,this.centerZ+i,this.upX,this.upY,this.upZ)}},{key:"set",value:function(e){for(var t=0,n=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType"];t<n.length;t++){var r=n[t];this[r]=e[r]}this.cameraMatrix=e.cameraMatrix.copy(),this.projMatrix=e.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(e,t,n){var o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,w;0===n?this.set(e):1===n?this.set(t):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=e.projMatrix.mat4[0]*Math.pow(t.projMatrix.mat4[0]/e.projMatrix.mat4[0],n),this.projMatrix.mat4[5]=e.projMatrix.mat4[5]*Math.pow(t.projMatrix.mat4[5]/e.projMatrix.mat4[5],n),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),s=new r.default.Vector(e.eyeX,e.eyeY,e.eyeZ),l=new r.default.Vector(t.eyeX,t.eyeY,t.eyeZ),b=new r.default.Vector(e.centerX,e.centerY,e.centerZ),w=new r.default.Vector(t.centerX,t.centerY,t.centerZ),a=r.default.Vector.dist(s,b),o=r.default.Vector.dist(l,w),o=a*Math.pow(o/a,n),a=r.default.Vector.sub(s,l),i=1,1e-6<(x=(y=s.copy().sub(l).sub(b).add(w)).magSq())&&(i=r.default.Vector.dot(a,y)/x,i=Math.max(0,Math.min(i,1))),a=r.default.Vector.lerp(r.default.Vector.lerp(s,b,i),r.default.Vector.lerp(l,w,i),n),y=e.cameraMatrix.createSubMatrix3x3(),x=t.cameraMatrix.createSubMatrix3x3(),s=y.column(2),b=x.column(2),l=y.column(1),w=x.column(1),e=new r.default.Vector,t=new r.default.Vector,c=new r.default.Vector,u=new r.default.Vector,1-(d=.5*((y=(x=x.mult3x3(y.copy().transpose3x3())).diagonal())[0]+y[1]+y[2]-1))<1e-7?(e.set(r.default.Vector.lerp(s,b,n)).normalize(),c.set(e).mult(i*o).add(a),u.set(e).mult((i-1)*o).add(a),t.set(r.default.Vector.lerp(l,w,n)).normalize()):(b=1/(1-d),w=Math.max(y[0],y[1],y[2]),m=x.mat3[1]+x.mat3[3],g=x.mat3[2]+x.mat3[6],v=x.mat3[5]+x.mat3[7],w=w===y[0]?(p=.5*m*(b/=h=Math.sqrt((y[0]-d)*b)),f=.5*g*b,.5*(x.mat3[7]-x.mat3[5])/h):w===y[1]?(f=.5*v*(b/=p=Math.sqrt((y[1]-d)*b)),h=.5*m*b,.5*(x.mat3[2]-x.mat3[6])/p):(h=.5*g*(b/=f=Math.sqrt((y[2]-d)*b)),p=.5*v*b,.5*(x.mat3[3]-x.mat3[1])/f),m=n*Math.atan2(w,d),g=Math.cos(m),y=Math.sin(m),(w=new r.default.Matrix("mat3",[g+(v=1-g)*h*h,v*(b=h*p)-y*f,v*(x=f*h)+y*p,v*b+y*f,g+v*p*p,v*(n=p*f)-y*h,v*x-y*p,v*n+y*h,g+v*f*f])).multiplyVec3(s,e),c.set(e).mult(i*o).add(a),u.set(e).mult((i-1)*o).add(a),w.multiplyVec3(l,t)),this.camera(c.x,c.y,c.z,u.x,u.y,u.z,t.x,t.y,t.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var e=new r.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.upX=this.upX,e.upY=this.upY,e.upZ=this.upZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e}},{key:"_getLocalAxes",value:function(){var e,t=this.eyeX-this.centerX,n=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,o=(0!==(o=Math.sqrt(t*t+n*n+r*r))&&(t/=o,n/=o,r/=o),this.upX),i=(l=this.upY)*r-(c=this.upZ)*n,a=-o*r+c*t,s=o*n-l*t,l=(o=n*s-r*a,-t*s+r*i),c=t*a-n*i;return 0!==(0!==(e=Math.sqrt(i*i+a*a+s*s))&&(i/=e,a/=e,s/=e),e=Math.sqrt(o*o+l*l+c*c))&&(o/=e,l/=e,c/=e),{x:[i,a,s],y:[o,l,c],z:[t,n,r]}}},{key:"_orbit",value:function(e,t,n){var o=this.eyeX-this.centerX,i=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,s=Math.hypot(o,i,a),l=(o=new r.default.Vector(o,i,a).normalize(),i=new r.default.Vector(this.upX,this.upY,this.upZ).normalize(),a=new r.default.Vector.cross(i,o).normalize(),new r.default.Vector.cross(a,i));(s=(s*=Math.pow(10,n))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),n=Math.acos(Math.max(-1,Math.min(1,r.default.Vector.dot(o,i))))+t,t=e,(n<=0||n>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),i.mult(Math.cos(n)),l.mult(Math.cos(t)*Math.sin(n)),a.mult(Math.sin(t)*Math.sin(n)),o.set(i).add(l).add(a),this.eyeX=s*o.x+this.centerX,this.eyeY=s*o.y+this.centerY,this.eyeZ=s*o.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(e,t,n){var o=this.eyeX-this.centerX,i=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,s=Math.hypot(o,i,a),l=(o=new r.default.Vector(o,i,a).normalize(),i=new r.default.Vector(this.upX,this.upY,this.upZ),a=new r.default.Vector.cross(i,o).normalize(),new r.default.Vector.cross(o,a)),c=Math.atan2(t,e),u=(l.mult(Math.sin(c)),a.mult(Math.cos(c)).add(l),c=Math.sqrt(e*e+t*t),l=new r.default.Vector.cross(o,a),(s=(s*=Math.pow(10,n))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),e=Math.cos(c),t=Math.sin(c),(n=i.dot(o))*e+(c=i.dot(a))*t);n=-n*t+c*e,c=i.dot(l),i.x=u*o.x+n*a.x+c*l.x,i.y=u*o.y+n*a.y+c*l.y,i.z=u*o.z+n*a.z+c*l.z,a.mult(-t),o.mult(e).add(a).mult(s),this.camera(o.x+this.centerX,o.y+this.centerY,o.z+this.centerZ,this.centerX,this.centerY,this.centerZ,i.x,i.y,i.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),r.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])},e=r.default.Camera,n.default=e},{"../core/main":273,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.string.sub":198}],322:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(b=e("../core/main"))&&b.__esModule?b:{default:b},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),a=e("./p5.Texture"),s=e("./p5.RendererGL");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return(u="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t))return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(n):e.value})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e);var n=function(e){return function(){var t,n=g(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=g(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==u(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}(r);function r(e){var t;return d(this,r),(t=n.call(this,e.target._renderer)).fbo=e,t.yScale=-1,t}return p(r,[{key:"_computeCameraDefaultSettings",value:function(){f(g(r.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),r}(o.default.Camera),v=(o.default.FramebufferCamera=y,function(){function e(t,n){d(this,e),this.framebuffer=t,this.property=n}return p(e,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),e}()),b=(o.default.FramebufferTexture=v,function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(d(this,e),this.target=t,this.target._renderer.framebuffers.add(this),this.pixels=[],this.format=n.format||i.UNSIGNED_BYTE,this.channels=n.channels||(t._renderer._pInst._glAttributes.alpha?i.RGBA:i.RGB),this.useDepth=void 0===n.depth||n.depth,this.depthFormat=n.depthFormat||i.FLOAT,this.textureFiltering=n.textureFiltering||i.LINEAR,void 0===n.antialias?this.antialiasSamples=t._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof n.antialias?this.antialiasSamples=n.antialias:this.antialiasSamples=n.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&t.webglVersion!==i.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),n.width&&n.height?(this.width=n.width,this.height=n.height,this.autoSized=!1):(void 0===n.width!=(void 0===n.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=t.width,this.height=t.height,this.autoSized=!0),this.density=n.density||t.pixelDensity(),n=t._renderer.GL,this.gl=n,this._checkIfFormatsAvailable(),this.framebuffer=n.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=n.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),t=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=t}return p(e,[{key:"resize",value:function(e,t){this.autoSized=!1,this.width=e,this.height=t,this._handleResize()}},{key:"pixelDensity",value:function(e){if(!e)return this.density;this.autoSized=!1,this.density=e,this._handleResize()}},{key:"autoSized",value:function(e){if(void 0===e)return this.autoSized;this.autoSized=e,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var e=this.gl;(this.useDepth&&this.target.webglVersion===i.WEBGL&&!e.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===i.WEBGL&&this.depthFormat===i.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=i.UNSIGNED_INT),[i.UNSIGNED_BYTE,i.FLOAT,i.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.useDepth&&![i.UNSIGNED_INT,i.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=i.FLOAT),e=(0,a.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==i.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.useDepth&&!e.float&&this.depthFormat===i.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=i.UNSIGNED_INT),e.halfFloat||this.format!==i.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.channels===i.RGB&&[i.FLOAT,i.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=i.RGBA)}},{key:"_recreateTextures",value:function(){var e=this.gl,t=(this._updateSize(),e.getParameter(e.TEXTURE_BINDING_2D)),n=e.getParameter(e.FRAMEBUFFER_BINDING);if(!(a=e.createTexture()))throw new Error("Unable to create color texture");e.bindTexture(e.TEXTURE_2D,a);var r=this._glColorFormat();if(e.texImage2D(e.TEXTURE_2D,0,r.internalFormat,this.width*this.density,this.height*this.density,0,r.format,r.type,null),this.colorTexture=a,e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),this.useDepth){var a;if(!(a=e.createTexture()))throw new Error("Unable to create depth texture");var s=this._glDepthFormat();e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,s.internalFormat,this.width*this.density,this.height*this.density,0,s.format,s.type,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0),this.depthTexture=a}this.antialias&&(this.colorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.colorRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),r.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(s=this._glDepthFormat(),this.depthRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),s.internalFormat,this.width*this.density,this.height*this.density)),e.bindFramebuffer(e.FRAMEBUFFER,this.aaFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new v(this,"depthTexture"),a=e.NEAREST,this.depthP5Texture=new o.default.Texture(this.target._renderer,this.depth,{minFilter:a,magFilter:a}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new v(this,"colorTexture"),r=this.textureFiltering===i.LINEAR?e.LINEAR:e.NEAREST,this.colorP5Texture=new o.default.Texture(this.target._renderer,this.color,{glMinFilter:r,glMagFilter:r}),this.target._renderer.textures.set(this.color,this.colorP5Texture),e.bindTexture(e.TEXTURE_2D,t),e.bindFramebuffer(e.FRAMEBUFFER,n)}},{key:"_glColorFormat",value:function(){var e,t,n=this.gl,r=this.format===i.FLOAT?n.FLOAT:this.format===i.HALF_FLOAT?this.target.webglVersion===i.WEBGL2?n.HALF_FLOAT:n.getExtension("OES_texture_half_float").HALF_FLOAT_OES:n.UNSIGNED_BYTE,o=this.channels===i.RGBA?n.RGBA:n.RGB;return{internalFormat:this.target.webglVersion===i.WEBGL2?(c(t={},n.FLOAT,c({},n.RGBA,n.RGBA32F)),c(t,n.HALF_FLOAT,c({},n.RGBA,n.RGBA16F)),c(t,n.UNSIGNED_BYTE,(c(e={},n.RGBA,n.RGBA8),c(e,n.RGB,n.RGB8),e)),t[r][o]):this.format===i.HALF_FLOAT?n.RGBA:o,format:o,type:r}}},{key:"_glDepthFormat",value:function(){var e=this.gl,t=this.depthFormat===i.FLOAT?e.FLOAT:e.UNSIGNED_INT,n=e.DEPTH_COMPONENT;return{internalFormat:e=this.target.webglVersion===i.WEBGL2?this.depthFormat===i.FLOAT?e.DEPTH_COMPONENT32F:e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT,format:n,type:t}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var e=this.color,t=this.depth,n=this.colorRenderbuffer,r=this.depthRenderbuffer;this._deleteTexture(e),t&&this._deleteTexture(t),e=this.gl,n&&e.deleteRenderbuffer(n),r&&e.deleteRenderbuffer(r),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var e=new y(this);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this.target._renderer._curCamera=e}},{key:"_deleteTexture",value:function(e){this.gl.deleteTexture(e.rawTexture()),this.target._renderer.textures.delete(e)}},{key:"remove",value:function(){var e=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),e.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&e.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&e.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&e.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){var e=this.gl;this.prevFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),this.antialias?e.bindFramebuffer(e.FRAMEBUFFER,this.aaFramebuffer):e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.prevViewport=e.getParameter(e.VIEWPORT),e.viewport(0,0,this.width*this.density,this.height*this.density),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"end",value:function(){var e=this.gl;if(this.antialias){e.bindFramebuffer(e.READ_FRAMEBUFFER,this.aaFramebuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.framebuffer);var t=[[e.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]];this.useDepth&&t.push([e.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var n=0,r=t;n<r.length;n++){var o=(i=l(r[n],2))[0],i=i[1];e.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,o,i)}}e.bindFramebuffer(e.FRAMEBUFFER,this.prevFramebuffer),e.viewport.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.prevViewport)),this.target.pop()}},{key:"draw",value:function(e){this.begin(),e(),this.end()}},{key:"loadPixels",value:function(){var e=this.gl,t=e.getParameter(e.FRAMEBUFFER_BINDING),n=(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,s.readPixelsWebGL)(this.pixels,e,this.framebuffer,0,0,this.width*this.density,this.height*this.density,n.format,n.type),e.bindFramebuffer(e.FRAMEBUFFER,t)}},{key:"get",value:function(e,t,n,r){o.default._validateParameters("p5.Framebuffer.get",arguments);var i=this._glColorFormat();if(void 0===e&&void 0===t)t=e=0,n=this.width,r=this.height;else if(void 0===n&&void 0===r)return(e<0||t<0||e>=this.width||t>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1)),(0,s.readPixelWebGL)(this.gl,this.framebuffer,e*this.density,t*this.density,i.format,i.type);e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1),n=this.target.constrain(n,1,this.width-e),r=this.target.constrain(r,1,this.height-t);for(var a=(0,s.readPixelsWebGL)(void 0,this.gl,this.framebuffer,e*this.density,t*this.density,n*this.density,r*this.density,i.format,i.type),l=new Uint8ClampedArray(n*r*this.density*this.density*4),c=(l.fill(255),i.type===this.gl.RGB?3:4),u=0;u<r*this.density;u++)for(var d=0;d<n*this.density;d++)for(var h=0;h<4;h++){var p,f=4*(u*n*this.density+d)+h;h<c&&(p=4==c?f:(u*n*this.density+d)*c+h,l[f]=a[p])}return(e=new o.default.Image(n*this.density,r*this.density)).imageData=e.canvas.getContext("2d").createImageData(e.width,e.height),e.imageData.data.set(l),e.pixels=e.imageData.data,e.updatePixels(),1!==this.density&&e.resize(n,r),e}},{key:"updatePixels",value:function(){var e=this.gl,t=(this.colorP5Texture.bindTexture(),this._glColorFormat()),n=t.format===e.RGBA?4:3,r=(n=this.width*this.height*this.density*this.density*n,t.type===e.UNSIGNED_BYTE?Uint8Array:Float32Array);if(!(this.pixels instanceof r)||this.pixels.length!==n)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");e.texImage2D(e.TEXTURE_2D,0,t.internalFormat,this.width*this.density,this.height*this.density,0,t.format,t.type,this.pixels),this.colorP5Texture.unbindTexture(),this.prevFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),this.end()):(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),e.bindFramebuffer(e.FRAMEBUFFER,this.prevFramebuffer))}}]),e}());e=o.default.Framebuffer=b,n.default=e},{"../core/constants":262,"../core/main":273,"./p5.RendererGL":328,"./p5.Texture":330,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],323:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Geometry=function(){function e(t,n,r){if(this instanceof e)return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=void 0!==t?t:1,this.detailY=void 0!==n?n:1,this.dirtyFlags={},r instanceof Function&&r.call(this),this;throw new TypeError("Cannot call a class as a function")}var t;return(t=[{key:"reset",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var e,t,n,r=this.detailX+1,o=0;o<this.detailY;o++)for(var i=0;i<this.detailX;i++)t=(o+1)*r+i+1,this.faces.push([o*r+i,e=o*r+i+1,n=(o+1)*r+i]),this.faces.push([n,e,t]);return this}},{key:"_getFaceNormal",value:function(e){e=this.faces[e];var t=this.vertices[e[0]],n=this.vertices[e[1]],o=(e=this.vertices[e[2]],n=r.default.Vector.sub(n,t),e=r.default.Vector.sub(e,t),t=r.default.Vector.cross(n,e),r.default.Vector.mag(t));return 0===(n=o/(r.default.Vector.mag(n)*r.default.Vector.mag(e)))||isNaN(n)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),t):(1<n&&(n=1),t.mult(Math.asin(n)/o))}},{key:"computeNormals",value:function(){for(var e=this,t=this.vertexNormals,n=this.vertices,o=this.faces,i=t.length=0;i<n.length;++i)t.push(new r.default.Vector);for(o.forEach((function(n,r){for(var o=e._getFaceNormal(r),i=0;i<3;++i){var a=n[i];t[a].add(o)}})),i=0;i<n.length;++i)t[i].normalize();return this}},{key:"averageNormals",value:function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=r.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=r.default.Vector.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this}},{key:"averagePoleNormals",value:function(){for(var e=new r.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=r.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new r.default.Vector(0,0,0);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)e.add(this.vertexNormals[o]);e=r.default.Vector.div(e,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=e;return this}},{key:"_makeTriangleEdges",value:function(){for(var e=this.edges.length=0;e<this.faces.length;e++)this.edges.push([this.faces[e][0],this.faces[e][1]]),this.edges.push([this.faces[e][1],this.faces[e][2]]),this.edges.push([this.faces[e][2],this.faces[e][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var e,t=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],n=!1,r=0;r<this.edges.length;r++){var o=this.edges[r-1],i=this.edges[r],a=this.vertices[i[0]],s=this.vertices[i[1]],l=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[0],4*(i[0]+1)):[0,0,0,0],c=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[1],4*(i[1]+1)):[0,0,0,0],u=s.copy().sub(a).normalize(),d=0<u.magSq();d&&this._addSegment(a,s,l,c,u),0<r&&o[1]===i[0]?(e&&d&&u.dot(e)<1-1e-8&&this._addJoin(a,e,u,l),!d||n||t||(this._addCap(a,u.copy().mult(-1),l),n=!0)):(n=!1,d&&(!t||0<r)&&(this._addCap(a,u.copy().mult(-1),l),n=!0),e&&(!t||r<this.edges.length-1)&&(this._addCap(this.vertices[o[1]],e,l),e=void 0)),r===this.edges.length-1&&(t?this._addJoin(s,u,this.vertices[this.edges[0][1]].copy().sub(s).normalize(),c):this._addCap(s,u,c)),d&&(e=u)}return this}},{key:"_addSegment",value:function(e,t,n,r,o){e=e.array(),t=t.array();var i=o.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var a=0,s=[this.lineTangentsIn,this.lineTangentsOut];a<s.length;a++)s[a].push(i,i,i,i,i,i);return this.lineVertices.push(e,e,t,t,e,t),this.lineVertexColors.push(n,n,r,r,n,r),this}},{key:"_addCap",value:function(e,t,n){for(var r=e.array(),o=t.array(),i=[0,0,0],a=0;a<6;a++)this.lineVertices.push(r),this.lineTangentsIn.push(o),this.lineTangentsOut.push(i),this.lineVertexColors.push(n);return this.lineSides.push(-1,-2,2,2,1,-1),this}},{key:"_addJoin",value:function(e,t,n,r){for(var o=e.array(),i=t.array(),a=n.array(),s=0;s<12;s++)this.lineVertices.push(o),this.lineTangentsIn.push(i),this.lineTangentsOut.push(a),this.lineVertexColors.push(r);for(var l=0,c=[-1,1];l<c.length;l++){var u=c[l];this.lineSides.push(u,2*u,3*u,u,3*u,0)}return this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var o=r.default.Vector.lerp(e,t,.5),i=r.default.Vector.sub(e,t),a=200/Math.max(Math.max(i.x,i.y),i.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(o),this.vertices[s].mult(a)}return this}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default.Geometry,n.default=e},{"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.slice":164,"core-js/modules/es.string.sub":198,"core-js/modules/web.dom-collections.for-each":235}],324:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=Array,a=function(e){return Array.isArray(e)};"undefined"!=typeof Float32Array&&(i=Float32Array,a=function(e){return Array.isArray(e)||e instanceof Float32Array}),r.default.Matrix=function(){function e(){var t=this,n=e;if(t instanceof n)return arguments.length&&((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t])instanceof r.default&&(this.p5=(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var t,n,s;return t=e,s=[{key:"identity",value:function(e){return new r.default.Matrix(e)}}],(n=[{key:"set",value:function(e){return e instanceof r.default.Matrix?this.mat4=e.mat4:a(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new r.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var e;return void 0!==this.mat3?((e=new r.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],e.mat3[1]=this.mat3[1],e.mat3[2]=this.mat3[2],e.mat3[3]=this.mat3[3],e.mat3[4]=this.mat3[4],e.mat3[5]=this.mat3[5],e.mat3[6]=this.mat3[6],e.mat3[7]=this.mat3[7],e.mat3[8]=this.mat3[8]):((e=new r.default.Matrix(this.p5)).mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15]),e}},{key:"transpose",value:function(e){var t,n,o,i,s,l;return e instanceof r.default.Matrix?(t=e.mat4[1],n=e.mat4[2],o=e.mat4[3],i=e.mat4[6],s=e.mat4[7],l=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e.mat4[15]):a(e)&&(t=e[1],n=e[2],o=e[3],i=e[6],s=e[7],l=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e[15]),this}},{key:"invert",value:function(e){e instanceof r.default.Matrix?(t=e.mat4[0],n=e.mat4[1],o=e.mat4[2],i=e.mat4[3],s=e.mat4[4],l=e.mat4[5],c=e.mat4[6],u=e.mat4[7],d=e.mat4[8],h=e.mat4[9],p=e.mat4[10],f=e.mat4[11],m=e.mat4[12],g=e.mat4[13],y=e.mat4[14],v=e.mat4[15]):a(e)&&(t=e[0],n=e[1],o=e[2],i=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15]);var t,n,o,i,s,l,c,u,d,h,p,f,m,g,y,v,b=t*c-o*s,x=t*u-i*s,w=n*c-o*l,S=n*u-i*l,_=o*u-i*c,k=d*g-h*m,T=d*y-p*m,E=d*v-f*m,C=h*y-p*g,I=h*v-f*g,j=p*v-f*y,A=(e=t*l-n*s)*j-b*I+x*C+w*E-S*T+_*k;return A?(this.mat4[0]=(l*j-c*I+u*C)*(A=1/A),this.mat4[1]=(o*I-n*j-i*C)*A,this.mat4[2]=(g*_-y*S+v*w)*A,this.mat4[3]=(p*S-h*_-f*w)*A,this.mat4[4]=(c*E-s*j-u*T)*A,this.mat4[5]=(t*j-o*E+i*T)*A,this.mat4[6]=(y*x-m*_-v*b)*A,this.mat4[7]=(d*_-p*x+f*b)*A,this.mat4[8]=(s*I-l*E+u*k)*A,this.mat4[9]=(n*E-t*I-i*k)*A,this.mat4[10]=(m*S-g*x+v*e)*A,this.mat4[11]=(h*x-d*S-f*e)*A,this.mat4[12]=(l*T-s*C-c*k)*A,this.mat4[13]=(t*C-n*T+o*k)*A,this.mat4[14]=(g*b-m*w-y*e)*A,this.mat4[15]=(d*w-h*b+p*e)*A,this):null}},{key:"invert3x3",value:function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],o=this.mat3[4],i=this.mat3[5],a=this.mat3[6],s=this.mat3[7],l=this.mat3[8],c=l*o-i*s,u=-l*r+i*a,d=s*r-o*a,h=e*c+t*u+n*d;return h?(this.mat3[0]=c*(h=1/h),this.mat3[1]=(-l*t+n*s)*h,this.mat3[2]=(i*t-n*o)*h,this.mat3[3]=u*h,this.mat3[4]=(l*e-n*a)*h,this.mat3[5]=(-i*e+n*r)*h,this.mat3[6]=d*h,this.mat3[7]=(-s*e+t*a)*h,this.mat3[8]=(o*e-t*r)*h,this):null}},{key:"transpose3x3",value:function(e){var t=(e=void 0===e?this.mat3:e)[1],n=e[2],r=e[5];return this.mat3[0]=e[0],this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[4]=e[4],this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this.mat3[8]=e[8],this}},{key:"inverseTranspose",value:function(e){if(e=e.mat4,void 0===this.mat3?r.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=e[0],this.mat3[1]=e[1],this.mat3[2]=e[2],this.mat3[3]=e[4],this.mat3[4]=e[5],this.mat3[5]=e[6],this.mat3[6]=e[8],this.mat3[7]=e[9],this.mat3[8]=e[10]),e=this.invert3x3())e.transpose3x3(this.mat3);else for(var t=0;t<9;t++)this.mat3[t]=0;return this}},{key:"determinant",value:function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],o=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],u=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*u+n*c+r*l-o*s+i*a}},{key:"mult",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}e=this.mat4[0];var n=this.mat4[1],o=this.mat4[2],i=this.mat4[3];return this.mat4[0]=e*t[0]+n*t[4]+o*t[8]+i*t[12],this.mat4[1]=e*t[1]+n*t[5]+o*t[9]+i*t[13],this.mat4[2]=e*t[2]+n*t[6]+o*t[10]+i*t[14],this.mat4[3]=e*t[3]+n*t[7]+o*t[11]+i*t[15],e=this.mat4[4],n=this.mat4[5],o=this.mat4[6],i=this.mat4[7],this.mat4[4]=e*t[0]+n*t[4]+o*t[8]+i*t[12],this.mat4[5]=e*t[1]+n*t[5]+o*t[9]+i*t[13],this.mat4[6]=e*t[2]+n*t[6]+o*t[10]+i*t[14],this.mat4[7]=e*t[3]+n*t[7]+o*t[11]+i*t[15],e=this.mat4[8],n=this.mat4[9],o=this.mat4[10],i=this.mat4[11],this.mat4[8]=e*t[0]+n*t[4]+o*t[8]+i*t[12],this.mat4[9]=e*t[1]+n*t[5]+o*t[9]+i*t[13],this.mat4[10]=e*t[2]+n*t[6]+o*t[10]+i*t[14],this.mat4[11]=e*t[3]+n*t[7]+o*t[11]+i*t[15],e=this.mat4[12],n=this.mat4[13],o=this.mat4[14],i=this.mat4[15],this.mat4[12]=e*t[0]+n*t[4]+o*t[8]+i*t[12],this.mat4[13]=e*t[1]+n*t[5]+o*t[9]+i*t[13],this.mat4[14]=e*t[2]+n*t[6]+o*t[10]+i*t[14],this.mat4[15]=e*t[3]+n*t[7]+o*t[11]+i*t[15],this}},{key:"apply",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=(e=this.mat4)[0],o=e[4],i=e[8],s=e[12];return e[0]=t[0]*n+t[1]*o+t[2]*i+t[3]*s,e[4]=t[4]*n+t[5]*o+t[6]*i+t[7]*s,e[8]=t[8]*n+t[9]*o+t[10]*i+t[11]*s,e[12]=t[12]*n+t[13]*o+t[14]*i+t[15]*s,n=e[1],o=e[5],i=e[9],s=e[13],e[1]=t[0]*n+t[1]*o+t[2]*i+t[3]*s,e[5]=t[4]*n+t[5]*o+t[6]*i+t[7]*s,e[9]=t[8]*n+t[9]*o+t[10]*i+t[11]*s,e[13]=t[12]*n+t[13]*o+t[14]*i+t[15]*s,n=e[2],o=e[6],i=e[10],s=e[14],e[2]=t[0]*n+t[1]*o+t[2]*i+t[3]*s,e[6]=t[4]*n+t[5]*o+t[6]*i+t[7]*s,e[10]=t[8]*n+t[9]*o+t[10]*i+t[11]*s,e[14]=t[12]*n+t[13]*o+t[14]*i+t[15]*s,n=e[3],o=e[7],i=e[11],s=e[15],e[3]=t[0]*n+t[1]*o+t[2]*i+t[3]*s,e[7]=t[4]*n+t[5]*o+t[6]*i+t[7]*s,e[11]=t[8]*n+t[9]*o+t[10]*i+t[11]*s,e[15]=t[12]*n+t[13]*o+t[14]*i+t[15]*s,this}},{key:"scale",value:function(e,t,n){return e instanceof r.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this}},{key:"rotate",value:function(e,t,n,o){t instanceof r.default.Vector?(n=t.y,o=t.z,t=t.x):t instanceof Array&&(n=t[1],o=t[2],t=t[0]);var i=(t*=1/(i=Math.sqrt(t*t+n*n+o*o)),n*=1/i,o*=1/i,this.mat4[0]),a=this.mat4[1],s=this.mat4[2],l=this.mat4[3],c=this.mat4[4],u=this.mat4[5],d=this.mat4[6],h=this.mat4[7],p=this.mat4[8],f=this.mat4[9],m=this.mat4[10],g=this.mat4[11],y=Math.sin(e),v=1-(e=Math.cos(e)),b=t*t*v+e,x=n*t*v+o*y,w=o*t*v-n*y,S=t*n*v-o*y,_=n*n*v+e,k=o*n*v+t*y,T=t*o*v+n*y;return n=n*o*v-t*y,t=o*o*v+e,this.mat4[0]=i*b+c*x+p*w,this.mat4[1]=a*b+u*x+f*w,this.mat4[2]=s*b+d*x+m*w,this.mat4[3]=l*b+h*x+g*w,this.mat4[4]=i*S+c*_+p*k,this.mat4[5]=a*S+u*_+f*k,this.mat4[6]=s*S+d*_+m*k,this.mat4[7]=l*S+h*_+g*k,this.mat4[8]=i*T+c*n+p*t,this.mat4[9]=a*T+u*n+f*t,this.mat4[10]=s*T+d*n+m*t,this.mat4[11]=l*T+h*n+g*t,this}},{key:"translate",value:function(e){var t=e[0],n=e[1];e=e[2]||0,this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*e,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*e,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*e,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*e}},{key:"rotateX",value:function(e){this.rotate(e,1,0,0)}},{key:"rotateY",value:function(e){this.rotate(e,0,1,0)}},{key:"rotateZ",value:function(e){this.rotate(e,0,0,1)}},{key:"perspective",value:function(e,t,n,r){e=1/Math.tan(e/2);var o=1/(n-r);return this.mat4[0]=e/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*o,this.mat4[15]=0,this}},{key:"ortho",value:function(e,t,n,r,o,i){var a=1/(e-t),s=1/(n-r),l=1/(o-i);return this.mat4[0]=-2*a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*a,this.mat4[13]=(r+n)*s,this.mat4[14]=(i+o)*l,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(e,t,n,r){var o=new Array(4),i=this.mat4;return o[0]=i[0]*e+i[4]*t+i[8]*n+i[12]*r,o[1]=i[1]*e+i[5]*t+i[9]*n+i[13]*r,o[2]=i[2]*e+i[6]*t+i[10]*n+i[14]*r,o[3]=i[3]*e+i[7]*t+i[11]*n+i[15]*r,o}},{key:"multiplyPoint",value:function(e){var t=e.x,n=e.y;return e=e.z,t=this.multiplyVec4(t,n,e,1),new r.default.Vector(t[0],t[1],t[2])}},{key:"multiplyAndNormalizePoint",value:function(e){var t=e.x,n=e.y;return e=e.z,(t=this.multiplyVec4(t,n,e,1))[0]/=t[3],t[1]/=t[3],t[2]/=t[3],new r.default.Vector(t[0],t[1],t[2])}},{key:"multiplyDirection",value:function(e){var t=e.x,n=e.y;return e=e.z,t=this.multiplyVec4(t,n,e,0),new r.default.Vector(t[0],t[1],t[2])}},{key:"mult3x3",value:function(e){var t;if(e===this||e===this.mat3)t=this.copy().mat3;else if(e instanceof r.default.Matrix)t=e.mat3;else if(a(e))t=e;else{if(9!==arguments.length)return;t=arguments}e=this.mat3[0];var n=this.mat3[1],o=this.mat3[2];return this.mat3[0]=e*t[0]+n*t[3]+o*t[6],this.mat3[1]=e*t[1]+n*t[4]+o*t[7],this.mat3[2]=e*t[2]+n*t[5]+o*t[8],e=this.mat3[3],n=this.mat3[4],o=this.mat3[5],this.mat3[3]=e*t[0]+n*t[3]+o*t[6],this.mat3[4]=e*t[1]+n*t[4]+o*t[7],this.mat3[5]=e*t[2]+n*t[5]+o*t[8],e=this.mat3[6],n=this.mat3[7],o=this.mat3[8],this.mat3[6]=e*t[0]+n*t[3]+o*t[6],this.mat3[7]=e*t[1]+n*t[4]+o*t[7],this.mat3[8]=e*t[2]+n*t[5]+o*t[8],this}},{key:"column",value:function(e){return new r.default.Vector(this.mat3[e],this.mat3[e+3],this.mat3[e+6])}},{key:"row",value:function(e){return new r.default.Vector(this.mat3[3*e],this.mat3[3*e+1],this.mat3[3*e+2])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(e,t){return(t=void 0===t?e.copy():t).x=this.row(0).dot(e),t.y=this.row(1).dot(e),t.z=this.row(2).dot(e),t}},{key:"createSubMatrix3x3",value:function(){var e=new r.default.Matrix("mat3");return e.mat3[0]=this.mat4[0],e.mat3[1]=this.mat4[1],e.mat3[2]=this.mat4[2],e.mat3[3]=this.mat4[4],e.mat3[4]=this.mat4[5],e.mat3[5]=this.mat4[6],e.mat3[6]=this.mat4[8],e.mat3[7]=this.mat4[9],e.mat3[8]=this.mat4[10],e}}])&&o(t.prototype,n),s&&o(t,s),e}(),e=r.default.Matrix,n.default=e},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229}],325:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.RenderBuffer=function(){function e(t,n,r,o,i,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.size=t,this.src=n,this.dst=r,this.attr=o,this._renderer=i,this.map=a}var t;return(t=[{key:"_prepareBuffer",value:function(e,t){var n,r,o,i=t.attributes,a=this._renderer.GL,s=e.model||e;(i=i[this.attr])&&(n=e[this.dst],0<(r=s[this.src]).length?((o=!n)&&(e[this.dst]=n=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,n),!o&&!1===s.dirtyFlags[this.src]||(o=(e=this.map)?e(r):r,this._renderer._bindBuffer(n,a.ARRAY_BUFFER,o),s.dirtyFlags[this.src]=!1),t.enableAttrib(i,this.size)):-1!==(e=i.location)&&this._renderer.registerEnabled[e]&&(a.disableVertexAttribArray(e),this._renderer.registerEnabled[e]=!1))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=e.default.RenderBuffer,n.default=e},{"../core/main":273,"core-js/modules/es.array.map":163}],326:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(c=e("../core/main"))&&c.__esModule?c:{default:c},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:a.TESS,this.immediateMode.geometry.reset(),this};var l={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},c=(i.default.RendererGL.prototype.vertex=function(e,t){if(this.immediateMode.shapeMode===a.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var n in l){var r=l[n];(n=this.immediateMode.geometry[n]).push.apply(n,s(n.slice(n.length-3*r,n.length-2*r)).concat(s(n.slice(n.length-r,n.length))))}var o,c,u=o=c=0,d=(3===arguments.length?u=arguments[2]:4===arguments.length?(o=arguments[2],c=arguments[3]):5===arguments.length&&(u=arguments[2],o=arguments[3],c=arguments[4]),new i.default.Vector(e,t,u));return this.immediateMode.geometry.vertices.push(d),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),d=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(d[0],d[1],d[2],d[3]),d=this.curStrokeColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexStrokeColors.push(d[0],d[1],d[2],d[3]),this.textureMode===a.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(o/=this._tex.width,c/=this._tex.height):!this.isProcessingVertices&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(o,c),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=u,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=u,this},i.default.RendererGL.prototype.normal=function(e,t,n){return e instanceof i.default.Vector?this._currentNormal=e:this._currentNormal=new i.default.Vector(e,t,n),this},i.default.RendererGL.prototype.endShape=function(e,t,n,r,o,i){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(e){var t;0!==this.immediateMode.geometry.vertices.length&&(t=this._doStroke,e=e===a.CLOSE,t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,e),this.immediateMode.geometry._edgesToVertices()),t=this.immediateMode.shapeMode===a.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||t)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape())},i.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],o=0;switch(e){case a.TRIANGLE_STRIP:for(o=0;o<t.length-2;o++)r.push([o,o+1]),r.push([o,o+2]);r.push([o,o+1]);break;case a.TRIANGLE_FAN:for(o=1;o<t.length-1;o++)r.push([0,o]),r.push([o,o+1]);r.push([0,t.length-1]);break;case a.TRIANGLES:for(o=0;o<t.length-2;o+=3)r.push([o,o+1]),r.push([o+1,o+2]),r.push([o+2,o]);break;case a.LINES:for(o=0;o<t.length-1;o+=2)r.push([o,o+1]);break;case a.QUADS:for(o=0;o<t.length-5;o+=6)r.push([o,o+1]),r.push([o+1,o+2]),r.push([o+3,o+5]),r.push([o+4,o+5]);break;case a.QUAD_STRIP:for(o=0;o<t.length-2;o+=2)r.push([o,o+1]),r.push([o,o+2]),r.push([o+1,o+3]);r.push([o,o+1]);break;default:for(o=0;o<t.length-1;o++)r.push([o,o+1])}return n&&r.push([t.length-1,0]),r},i.default.RendererGL.prototype._tesselateShape=function(){for(var e=this,t=(this.immediateMode.shapeMode=a.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map((function(t,n){return[t.x,t.y,t.z,e.immediateMode.geometry.uvs[2*n],e.immediateMode.geometry.uvs[2*n+1],e.immediateMode.geometry.vertexColors[4*n],e.immediateMode.geometry.vertexColors[4*n+1],e.immediateMode.geometry.vertexColors[4*n+2],e.immediateMode.geometry.vertexColors[4*n+3],e.immediateMode.geometry.vertexNormals[n].x,e.immediateMode.geometry.vertexNormals[n].y,e.immediateMode.geometry.vertexNormals[n].z]})))]),n=this._triangulate(t),r=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),o=0,l=n.length;o<l;o+=i.default.RendererGL.prototype.tessyVertexSize)r.push.apply(r,s(n.slice(o+5,o+9))),this.normal.apply(this,s(n.slice(o+9,o+12))),this.vertex.apply(this,s(n.slice(o,o+5)));this.immediateMode.geometry.vertexColors=r},i.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),n=(this._setFillUniforms(t),!0),r=!1,o=void 0;try{for(var i,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this.immediateMode.shapeMode===a.QUADS?this.immediateMode.shapeMode=a.TRIANGLES:this.immediateMode.shapeMode===a.QUAD_STRIP&&(this.immediateMode.shapeMode=a.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=e.isEnabled(e.CULL_FACE),n=(e.disable(e.CULL_FACE),this._getImmediateStrokeShader()),r=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(n),!0),o=!1,i=void 0;try{for(var a,s=this.immediateMode.buffers.stroke[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value._prepareBuffer(this.immediateMode.geometry,n)}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t&&e.enable(e.CULL_FACE),n.unbindShader()},i.default.RendererGL);n.default=c},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],327:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=(e("./p5.RendererGL"),e("./p5.RenderBuffer"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"))),s=0,l=(i.default.RendererGL.prototype._initBufferDefaults=function(e){var t;return this._freeBuffers(e),1e3<++s&&(t=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[t],s--),this.retainedMode.geometry[e]={}},i.default.RendererGL.prototype._freeBuffers=function(e){var t,n=this.retainedMode.geometry[e];function r(e){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.dst]&&(t.deleteBuffer(n[l.dst]),n[l.dst]=null)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}n&&(delete this.retainedMode.geometry[e],s--,t=this.GL,n.indexBuffer&&t.deleteBuffer(n.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill))},i.default.RendererGL.prototype.createBuffers=function(e,t){var n,r,o,a=this.GL,s=((e=this._initBufferDefaults(e)).model=t,e.indexBuffer);return t.faces.length?(s=s||(e.indexBuffer=a.createBuffer()),o=(r=(n=i.default.RendererGL.prototype._flatten(t.faces)).some((function(e){return 65535<e})))?Uint32Array:Uint16Array,this._bindBuffer(s,a.ELEMENT_ARRAY_BUFFER,n,o),e.indexBufferType=r?a.UNSIGNED_INT:a.UNSIGNED_SHORT,e.vertexCount=3*t.faces.length):(s&&(a.deleteBuffer(s),e.indexBuffer=null),e.vertexCount=t.vertices?t.vertices.length:0),e.lineVertexCount=t.lineVertices?t.lineVertices.length:0,e},i.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(this._doFill){this._useVertexColor=0<n.model.vertexColors.length;var r=this._getRetainedFillShader(),o=(this._setFillUniforms(r),!0),i=!1,a=void 0;try{for(var s,l=this.retainedMode.buffers.fill[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)s.value._prepareBuffer(n,r)}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),r.unbindShader()}if(this._doStroke&&0<n.lineVertexCount){i=t.isEnabled(t.CULL_FACE);var c=(t.disable(t.CULL_FACE),this._getRetainedStrokeShader()),u=(this._useLineColor=0<n.model.vertexStrokeColors.length,this._setStrokeUniforms(c),!0),d=void(a=!1);try{for(var h,p=this.retainedMode.buffers.stroke[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)h.value._prepareBuffer(n,c)}catch(e){a=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(a)throw d}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),i&&t.enable(t.CULL_FACE),c.unbindShader()}return this},i.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var o=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uMVMatrix=o}},i.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(e,t){t=this.retainedMode.geometry[t];var n=this.GL;if(t.indexBuffer){if(this._pInst.webglVersion!==a.WEBGL2&&t.indexBufferType===n.UNSIGNED_INT&&!n.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");n.drawElements(n.TRIANGLES,t.vertexCount,t.indexBufferType,0)}else n.drawArrays(e||n.TRIANGLES,0,t.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),n.drawArrays(n.Points,0,e.length),r.unbindShader()},i.default.RendererGL);n.default=l},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"./p5.RendererGL":328,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.some":165,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],328:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.readPixelsWebGL=x,n.readPixelWebGL=w,n.default=void 0;var o=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),a=s(e("libtess"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){y+="#define STROKE_CAP_".concat(e," ").concat(t,"\n"),m[i[e]]=t}function f(e,t){y+="#define STROKE_JOIN_".concat(e," ").concat(t,"\n"),g[i[e]]=t}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var m={},g={},y="",v="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n",b={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",lightVert:(p("ROUND",0),p("PROJECT",1),p("SQUARE",2),f("ROUND",0),f("MITER",1),f("BEVEL",2),(e="precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n")+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"precision highp float;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",phongFrag:e+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec4 baseColor = isTexture\n    // Textures come in with premultiplied alpha. To apply tint and still have\n    // premultiplied alpha output, we need to multiply the RGB channels by the\n    // tint RGB, and all channels by the tint alpha.\n    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n    // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n    // channels by alpha to convert it to premultiplied alpha.\n    : vec4(vColor.rgb * vColor.a, vColor.a);\n  gl_FragColor = vec4(diffuse * baseColor.rgb + \n                    vAmbientColor * (\n                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb\n                    ) + \n                    specular * uSpecularMatColor.rgb + \n                    uEmissiveMatColor.rgb, baseColor.a);\n}\n",fontVert:v+"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec2 pixelScale = vec2(\n    1. / uModelViewMatrix[0][0],\n    1. / uModelViewMatrix[1][1]\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:v+"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:y+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump float;\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nattribute vec4 aPosition;\nattribute vec3 aTangentIn;\nattribute vec3 aTangentOut;\nattribute float aSide;\nattribute vec4 aVertexColor;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));\n  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float scale = mix(1., 0.995, facingCamera);\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posqIn.xyz = posqIn.xyz * scale;\n  posqOut.xyz = posqOut.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = p.xy;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,\n          tangentIn,\n          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * uStrokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));\n    } else {\n      vMaxDist = uStrokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      uStrokeWeight * 0.5 * curPerspScale;\n    vMaxDist = uStrokeWeight / 2.;\n  }\n  vPosition = vCenter + offset / curPerspScale;\n\n  gl_Position.xy = p.xy + offset.xy;\n  gl_Position.zw = p.zw;\n  \n  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);\n}\n",lineFrag:y+"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\nuniform float uStrokeWeight;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nvoid main() {\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      dot(vPosition - vCenter, vTangent) > 0.\n    ) {\n      discard;\n    }\n    // Use full area for PROJECT\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-vTangent.y, vTangent.x);\n      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {\n        discard;\n      }\n    }\n    // Use full area for MITER\n  }\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(mask > 0.98){\n    discard;\n  }\n\n  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n}\n"};function x(e,t,n,r,o,i,a,s,l,c){var u=t.getParameter(t.FRAMEBUFFER_BINDING),d=i*a*(t.bindFramebuffer(t.FRAMEBUFFER,n),n=s===t.RGBA?4:3),h=l===t.UNSIGNED_BYTE?Uint8Array:Float32Array;if(e instanceof h&&e.length===d||(e=new h(d)),t.readPixels(r,c?c-o-a:o,i,a,s,l,e),t.bindFramebuffer(t.FRAMEBUFFER,u),c)for(var p=Math.floor(a/2),f=new h(i*n),m=0;m<p;m++){var g=m*i*4,y=(a-m-1)*i*4;f.set(e.subarray(g,g+4*i)),e.copyWithin(g,y,y+4*i),e.set(f,y)}return e}function w(e,t,n,r,o,i,a){var s=e.getParameter(e.FRAMEBUFFER_BINDING);return e.bindFramebuffer(e.FRAMEBUFFER,t),t=o===e.RGBA?4:3,t=new(i===e.UNSIGNED_BYTE?Uint8Array:Float32Array)(t),e.readPixels(n,a?a-r-1:r,1,1,o,i,t),e.bindFramebuffer(e.FRAMEBUFFER,s),Array.from(t)}o.default.prototype.setAttributes=function(e,t){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void o.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},o.default.RendererGL=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e);var n=function(e){return function(){var t,n,r=h(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=h(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==l(n)&&"function"!=typeof n?d(r):n}}(r);function r(e,t,a,s){if(this instanceof r)return(e=n.call(this,e,t,a))._setAttributeDefaults(t),e._initContext(),e.isP3D=!0,e.GL=e.drawingContext,e._pInst._setProperty("drawingContext",e.drawingContext),e._isErasing=!1,e._enableLighting=!1,e.ambientLightColors=[],e.specularColors=[1,1,1],e.directionalLightDirections=[],e.directionalLightDiffuseColors=[],e.directionalLightSpecularColors=[],e.pointLightPositions=[],e.pointLightDiffuseColors=[],e.pointLightSpecularColors=[],e.spotLightPositions=[],e.spotLightDirections=[],e.spotLightDiffuseColors=[],e.spotLightSpecularColors=[],e.spotLightAngle=[],e.spotLightConc=[],e.drawMode=i.FILL,e.curFillColor=e._cachedFillStyle=[1,1,1,1],e.curAmbientColor=e._cachedFillStyle=[1,1,1,1],e.curSpecularColor=e._cachedFillStyle=[0,0,0,0],e.curEmissiveColor=e._cachedFillStyle=[0,0,0,0],e.curStrokeColor=e._cachedStrokeStyle=[0,0,0,1],e.curBlendMode=i.BLEND,e._cachedBlendMode=void 0,e.webglVersion===i.WEBGL2?e.blendExt=e.GL:e.blendExt=e.GL.getExtension("EXT_blend_minmax"),e._isBlending=!1,e._hasSetAmbient=!1,e._useSpecularMaterial=!1,e._useEmissiveMaterial=!1,e._useNormalMaterial=!1,e._useShininess=1,e._useLineColor=!1,e._useVertexColor=!1,e.registerEnabled=[],e._tint=[255,255,255,255],e.constantAttenuation=1,e.linearAttenuation=0,e.quadraticAttenuation=0,e.uMVMatrix=new o.default.Matrix,e.uPMatrix=new o.default.Matrix,e.uNMatrix=new o.default.Matrix("mat3"),e._currentNormal=new o.default.Vector(0,0,1),e._curCamera=new o.default.Camera(d(e)),e._curCamera._computeCameraDefaultSettings(),e._curCamera._setDefaultCamera(),e.prevTouches=[],e.zoomVelocity=0,e.rotateVelocity=new o.default.Vector(0,0),e.moveVelocity=new o.default.Vector(0,0),e.executeZoom=!1,e.executeRotateAndMove=!1,e._defaultLightShader=void 0,e._defaultImmediateModeShader=void 0,e._defaultNormalShader=void 0,e._defaultColorShader=void 0,e._defaultPointShader=void 0,e.userFillShader=void 0,e.userStrokeShader=void 0,e.userPointShader=void 0,e.retainedMode={geometry:{},buffers:{stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",d(e),e._flatten),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",d(e),e._flatten),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",d(e),e._flatten),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",d(e),e._flatten),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",d(e))],fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",d(e),e._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",d(e),e._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",d(e)),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",d(e)),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",d(e),e._flatten)],text:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",d(e),e._vToNArray),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",d(e),e._flatten)]}},e.immediateMode={geometry:new o.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",d(e),e._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",d(e),e._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",d(e)),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",d(e)),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",d(e),e._flatten)],stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",d(e),e._flatten),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",d(e),e._flatten),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",d(e),e._flatten),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",d(e),e._flatten),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",d(e))],point:e.GL.createBuffer()}},e.pointSize=5,e.curStrokeWeight=1,e.curStrokeCap=i.ROUND,e.curStrokeJoin=i.ROUND,e.textures=new Map,e.framebuffers=new Set,e.textureMode=i.IMAGE,e.textureWrapX=i.CLAMP,e.textureWrapY=i.CLAMP,e._tex=null,e._curveTightness=6,e._lookUpTableBezier=[],e._lookUpTableQuadratic=[],e._lutBezierDetail=0,e._lutQuadraticDetail=0,e.isProcessingVertices=!1,e._tessy=e._initTessy(),e.fontInfos={},e._curShader=void 0,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"_setAttributeDefaults",value:function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?i.WEBGL2:i.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(e,t){var n,r=this.width,i=this.height,a=this.canvas.id,s=this._pInst instanceof o.default.Graphics;s?((n=this._pInst).canvas.parentNode.removeChild(n.canvas),n.canvas=document.createElement("canvas"),(n._pInst._userNode||document.body).appendChild(n.canvas),o.default.Element.call(n,n.canvas,n._pInst),n.width=r,n.height=i):((n=this.canvas)&&n.parentNode.removeChild(n),(n=document.createElement("canvas")).id=a,(this._pInst._userNode||document.body).appendChild(n),this._pInst.canvas=n,this.canvas=n),a=new o.default.RendererGL(this._pInst.canvas,this._pInst,!s),this._pInst._setProperty("_renderer",a),a.resize(r,i),a._applyDefaults(),s||this._pInst._elements.push(a),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"background",value:function(){var e=(r=(r=this._pInst).color.apply(r,arguments)).levels[0]/255,t=r.levels[1]/255,n=r.levels[2]/255,r=r.levels[3]/255;this.clear(e,t,n,r)}},{key:"fill",value:function(e,t,n,r){var a=o.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(e,t,n,r){var i=o.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array}},{key:"strokeCap",value:function(e){this.curStrokeCap=e}},{key:"strokeJoin",value:function(e){this.curStrokeJoin=e}},{key:"filter",value:function(e){o.default._friendlyError("filter() does not work in WEBGL mode")}},{key:"blendMode",value:function(e){e===i.DARKEST||e===i.LIGHTEST||e===i.ADD||e===i.BLEND||e===i.SUBTRACT||e===i.SCREEN||e===i.EXCLUSION||e===i.REPLACE||e===i.MULTIPLY||e===i.REMOVE?this.curBlendMode=e:e!==i.BURN&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(e,t){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"strokeWeight",value:function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)}},{key:"_getPixel",value:function(e,t){var n=this.GL;return w(n,null,e,t,n.RGBA,n.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var e,t,n=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(e=this._pInst._pixelDensity,t=this.GL,n._setProperty("pixels",x(n.pixels,t,null,0,0,this.width*e,this.height*e,t.RGBA,t.UNSIGNED_BYTE,this.height*e)))}},{key:"updatePixels",value:function(){var e=this._getTempFramebuffer();e.pixels=this._pixelsState.pixels,e.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(i.CENTER),this._pInst.image(e,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:i.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:i.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(e){return void 0!==this.retainedMode.geometry[e]}},{key:"resize",value:function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var n=(void 0!==(e=this._pixelsState).pixels&&e._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);t=!1,e=void 0;try{for(var r,i=this.framebuffers[Symbol.iterator]();!(n=(r=i.next()).done);n=!0)r.value._canvasSizeChanged()}catch(n){t=!0,e=n}finally{try{n||null==i.return||i.return()}finally{if(t)throw e}}}},{key:"clear",value:function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e*r,t*r,n*r,r),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(e,t,n,r,i,a){16===arguments.length?o.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,i,a,0,1])}},{key:"translate",value:function(e,t,n){return e instanceof o.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,n]),this}},{key:"scale",value:function(e,t,n){return this.uMVMatrix.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return void 0===t?this.rotateZ(e):(o.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(e){return this.rotate(e,1,0,0),this}},{key:"rotateY",value:function(e){return this.rotate(e,0,1,0),this}},{key:"rotateZ",value:function(e){return this.rotate(e,0,0,1),this}},{key:"push",value:function(){var e=o.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t.curAmbientColor=this.curAmbientColor,t.curSpecularColor=this.curSpecularColor,t.curEmissiveColor=this.curEmissiveColor,t._hasSetAmbient=this._hasSetAmbient,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,t._currentNormal=this._currentNormal,t.curBlendMode=this.curBlendMode,e}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e}},{key:"_getImmediatePointShader",value:function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new o.default.Shader(this,b.phongVert,b.phongFrag):this._defaultLightShader=new o.default.Shader(this,b.lightVert,b.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.default.Shader(this,b.immediateVert,b.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.default.Shader(this,b.normalVert,b.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new o.default.Shader(this,b.normalVert,b.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new o.default.Shader(this,b.pointVert,b.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new o.default.Shader(this,b.lineVert,b.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===i.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+b.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+b.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(e,t){var n="";return this.webglVersion===i.WEBGL2&&(n+="#version 300 es\n#define WEBGL2\n"),"vert"===e?n+="#define VERTEX_SHADER\n":"frag"===e&&(n+="#define FRAGMENT_SHADER\n"),t&&(n+="precision ".concat(t," float;\n")),n}},{key:"_getEmptyTexture",value:function(){var e;return this._emptyTexture||((e=new o.default.Image(1,1)).set(0,0,255),this._emptyTexture=new o.default.Texture(this,e)),this._emptyTexture}},{key:"getTexture",value:function(e){e instanceof o.default.Framebuffer&&(e=e.color);var t=this.textures.get(e);return t||(t=new o.default.Texture(this,e),this.textures.set(e,t),t)}},{key:"createFramebuffer",value:function(e){return new o.default.Framebuffer(this,e)}},{key:"_setStrokeUniforms",value:function(e){e.bindShader(),e.setUniform("uUseLineColor",this._useLineColor),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight),e.setUniform("uStrokeCap",m[this.curStrokeCap]),e.setUniform("uStrokeJoin",g[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(e){e.bindShader(),e.setUniform("uUseVertexColor",this._useVertexColor),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uHasSetAmbient",this._hasSetAmbient),e.setUniform("uAmbientMatColor",this.curAmbientColor),e.setUniform("uSpecularMatColor",this.curSpecularColor),e.setUniform("uEmissiveMatColor",this.curEmissiveColor),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),t=this.directionalLightDiffuseColors.length/3,e.setUniform("uDirectionalLightCount",t),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),t=this.ambientLightColors.length/3,e.setUniform("uAmbientLightCount",t),e.setUniform("uAmbientColor",this.ambientLightColors),t=this.spotLightDiffuseColors.length/3,e.setUniform("uSpotLightCount",t),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()}},{key:"_setPointUniforms",value:function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(e,t,n,r,o){t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n&&(e=new(r||Float32Array)(n),this.GL.bufferData(t,e,o||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}},{key:"_isTypedArray",value:function(e){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some((function(t){return e instanceof t}))}},{key:"_flatten",value:function(e){if(0===e.length)return[];var t;if(2e4<e.length){for(var n=[],r=e.slice(),o=r.pop();Array.isArray(o)?r.push.apply(r,c(o)):n.push(o),r.length&&void 0!==(o=r.pop()););return n.reverse(),n}return(t=[]).concat.apply(t,c(e))}},{key:"_vToNArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(s.x,s.y,s.z)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"_bezierCoefficients",value:function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]}},{key:"_quadraticCoefficients",value:function(e){var t=1-e;return[t*t,2*t*e,e*e]}},{key:"_bezierToCatmull",value:function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]}},{key:"_initTessy",value:function(){var e=new a.default.GluTesselator;return e.gluTessCallback(a.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){for(var n=0;n<e.length;n++)t.push(e[n])})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==a.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){for(var r=new Array(o.default.RendererGL.prototype.tessyVertexSize).fill(0),i=0;i<n.length;i++)for(var a=0;a<r.length;a++)0!==n[i]&&t[i]&&(r[a]+=t[i][a]*n[i]);return r})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e}},{key:"_triangulate",value:function(e){var t=e[0]?e[0][2]:void 0,n=!0,r=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)for(var c=s.value,u=0;u<c.length;u+=o.default.RendererGL.prototype.tessyVertexSize)if(c[u+2]!==t){n=!1;break}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}n?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),i=[];var d=(this._tessy.gluTessBeginPolygon(i),!0),h=void(a=!1);try{for(var p,f=e[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var m=p.value;this._tessy.gluTessBeginContour();for(var g=0;g<m.length;g+=o.default.RendererGL.prototype.tessyVertexSize){var y=m.slice(g,g+o.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(y,y)}this._tessy.gluTessEndContour()}}catch(e){a=!0,h=e}finally{try{d||null==f.return||f.return()}finally{if(a)throw h}}return this._tessy.gluTessEndPolygon(),i}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Renderer),o.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},o.default.RendererGL.prototype.tessyVertexSize=12,e=o.default.RendererGL,n.default=e},{"../core/constants":262,"../core/main":273,"../core/p5.Renderer":276,"./p5.Camera":321,"./p5.Matrix":324,"./p5.Shader":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.map":168,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.float64-array":210,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int16-array":214,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,libtess:245,path:248}],329:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Shader=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._renderer=t,this._vertSrc=n,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var t;return(t=[{key:"init",value:function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return r.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return r.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||r.default._friendlyError("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),o=r.name,i=e.getAttribLocation(this._glProgram,o),a={};a.name=o,a.location=i,a.index=n,a.type=r.type,a.size=r.size,this.attributes[o]=a}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var o=e.getActiveUniform(this._glProgram,r),i={},a=(i.location=e.getUniformLocation(this._glProgram,o.name),i.size=o.size,o.name);1<o.size&&(a=a.substring(0,a.indexOf("[0]"))),i.name=a,i.type=o.type,i._cachedData=void 0,i.type===e.SAMPLER_2D&&(i.samplerIndex=n,n++,this.samplers.push(i)),i.isArray=1<o.size||i.type===e.FLOAT_MAT3||i.type===e.FLOAT_MAT4||i.type===e.FLOAT_VEC2||i.type===e.FLOAT_VEC3||i.type===e.FLOAT_VEC4||i.type===e.INT_VEC2||i.type===e.INT_VEC4||i.type===e.INT_VEC3,this.uniforms[a]=i}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var o,i=this.samplers[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=a.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+a.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(a.location,a.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"updateTextures",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.samplers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value.texture;i&&i.update()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"unbindTextures",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.samplers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.setUniform(i.name,this._renderer._getEmptyTexture())}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"_setMatrixUniforms",value:function(){var e=this._renderer._curCamera.cameraMatrix,t=this._renderer.uPMatrix,n=this._renderer.uMVMatrix,r=n.copy();r.mult(t),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",e.mat4),this.setUniform("uProjectionMatrix",t.mat4),this.setUniform("uModelViewMatrix",n.mat4),this.setUniform("uModelViewProjectionMatrix",r.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(e,t){var n=this.uniforms[e];if(n){var o=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;Array.isArray(t)?n._cachedData=t.slice(0):n._cachedData=t}var i=n.location;switch(this.useProgram(),n.type){case o.BOOL:!0===t?o.uniform1i(i,1):o.uniform1i(i,0);break;case o.INT:1<n.size?t.length&&o.uniform1iv(i,t):o.uniform1i(i,t);break;case o.FLOAT:1<n.size?t.length&&o.uniform1fv(i,t):o.uniform1f(i,t);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(i,!1,t);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(i,!1,t);break;case o.FLOAT_VEC2:1<n.size?t.length&&o.uniform2fv(i,t):o.uniform2f(i,t[0],t[1]);break;case o.FLOAT_VEC3:1<n.size?t.length&&o.uniform3fv(i,t):o.uniform3f(i,t[0],t[1],t[2]);break;case o.FLOAT_VEC4:1<n.size?t.length&&o.uniform4fv(i,t):o.uniform4f(i,t[0],t[1],t[2],t[3]);break;case o.INT_VEC2:1<n.size?t.length&&o.uniform2iv(i,t):o.uniform2i(i,t[0],t[1]);break;case o.INT_VEC3:1<n.size?t.length&&o.uniform3iv(i,t):o.uniform3i(i,t[0],t[1],t[2]);break;case o.INT_VEC4:1<n.size?t.length&&o.uniform4iv(i,t):o.uniform4i(i,t[0],t[1],t[2],t[3]);break;case o.SAMPLER_2D:o.activeTexture(o.TEXTURE0+n.samplerIndex),n.texture=t instanceof r.default.Texture?t:this._renderer.getTexture(t),o.uniform1i(i,n.samplerIndex),n.texture.src.gifProperties&&n.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(e,t,n,r,o,i){var a;return e&&-1!==(e=e.location)&&(a=this._renderer.GL,this._renderer.registerEnabled[e]||(a.enableVertexAttribArray(e),this._renderer.registerEnabled[e]=!0),this._renderer.GL.vertexAttribPointer(e,t,n||a.FLOAT,r||!1,o||0,i||0)),this}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default.Shader,n.default=e},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],330:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.checkWebGLCapabilities=s,n.default=void 0;var i=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e){var t=e.GL,n=(e=e.webglVersion)===a.WEBGL2?t.getExtension("EXT_color_buffer_float")&&t.getExtension("EXT_float_blend"):t.getExtension("OES_texture_float");return{float:n,floatLinear:n&&t.getExtension("OES_texture_float_linear"),halfFloat:e=e===a.WEBGL2?t.getExtension("EXT_color_buffer_float"):t.getExtension("OES_texture_half_float"),halfFloatLinear:e&&t.getExtension("OES_texture_half_float_linear")}}i.default.Texture=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._renderer=t;var o=this._renderer.GL;return r=r||{},this.src=n,this.glTex=void 0,this.glTarget=o.TEXTURE_2D,this.glFormat=r.format||o.RGBA,this.mipmaps=!1,this.glMinFilter=r.minFilter||o.LINEAR,this.glMagFilter=r.magFilter||o.LINEAR,this.glWrapS=r.wrapS||o.CLAMP_TO_EDGE,this.glWrapT=r.wrapT||o.CLAMP_TO_EDGE,this.glDataType=r.dataType||o.UNSIGNED_BYTE,r=s(t),this.glFormat!==o.HALF_FLOAT||r.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=o.FLOAT),this.glFormat!==o.HALF_FLOAT||this.glMinFilter!==o.LINEAR&&this.glMagFilter!==o.LINEAR||r.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===o.LINEAR&&(this.glMinFilter=o.NEAREST),this.glMagFilter===o.LINEAR&&(this.glMagFilter=o.NEAREST)),this.glFormat!==o.FLOAT||r.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=o.UNSIGNED_BYTE),this.glFormat!==o.FLOAT||this.glMinFilter!==o.LINEAR&&this.glMagFilter!==o.LINEAR||r.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===o.LINEAR&&(this.glMinFilter=o.NEAREST),this.glMagFilter===o.LINEAR&&(this.glMagFilter=o.NEAREST)),this.isSrcMediaElement=void 0!==i.default.MediaElement&&n instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==i.default.Element&&n instanceof i.default.Element&&!(n instanceof i.default.Graphics)&&!(n instanceof i.default.Renderer),this.isSrcP5Image=n instanceof i.default.Image,this.isSrcP5Graphics=n instanceof i.default.Graphics,this.isSrcP5Renderer=n instanceof i.default.Renderer,this.isImageData="undefined"!=typeof ImageData&&n instanceof ImageData,this.isFramebufferTexture=n instanceof i.default.FramebufferTexture,t=this._getTextureDataFromSource(),this.width=t.width,this.height=t.height,this.init(t),this}var t;return(t=[{key:"_getTextureDataFromSource",value:function(){var e;return this.isFramebufferTexture?e=this.src.rawTexture():this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e}},{key:"init",value:function(e){var t,n=this._renderer.GL;this.isFramebufferTexture||(this.glTex=n.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(t=new Uint8Array([1,1,1,1]),n.texImage2D(this.glTarget,0,n.RGBA,1,1,0,this.glFormat,this.glDataType,t)):n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e))}},{key:"update",value:function(){var e,t,n,r=this.src;return 0!==r.width&&0!==r.height&&!this.isFramebufferTexture&&(e=this._getTextureDataFromSource(),t=!1,n=this._renderer.GL,e.width!==this.width||e.height!==this.height?(t=!0,this.width=e.width||r.width,this.height=e.height||r.height,this.isSrcP5Image?r.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&r.setModified(!0)):this.isSrcP5Image?r.isModified()&&r.setModified(!(t=!0)):this.isSrcMediaElement?r.isModified()?r.setModified(!(t=!0)):r.loadedmetadata&&this._videoPrevUpdateTime!==r.time()&&(this._videoPrevUpdateTime=r.time(),t=!0):this.isImageData?r._dirty&&(t=!(r._dirty=!1)):t=!0,t&&(this.bindTexture(),n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)),t)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(e,t){var n=this._renderer.GL;e===a.NEAREST?this.glMinFilter=n.NEAREST:this.glMinFilter=n.LINEAR,t===a.NEAREST?this.glMagFilter=n.NEAREST:this.glMagFilter=n.LINEAR,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(e,t){function n(e){return 0==(e&e-1)}var r=this._renderer.GL,o=(o=this._getTextureDataFromSource()).naturalWidth&&o.naturalHeight?(i=o.naturalWidth,o.naturalHeight):(i=this.width,this.height),i=n(i);o=n(o),e===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||i&&o?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||i&&o?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||i&&o?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||i&&o?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();var l=i.default.Texture;n.default=l},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],331:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var i,a=(i=e("../core/main"))&&i.__esModule?i:{default:i},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}e("./p5.Shader"),e("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){},a.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var d=function(){function e(t,n){l(this,e),this.width=t,this.height=n,this.infos=[]}return u(e,[{key:"findImage",value:function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var o=this.infos.length-1;0<=o;--o){var i=this.infos[o];if(i.index+e<r){n=(t=i).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var a=document.getElementsByTagName("canvas")[0],s=!a,l=(a||((a=document.createElement("canvas")).style.display="none",document.body.appendChild(a)),a.getContext("2d"));l&&(n=l.createImageData(this.width,this.height)),s&&document.body.removeChild(a)}this.infos.push(t={index:0,imageData:n})}return l=t.index,t.index+=e,n._dirty=!0,{imageData:n,index:l}}}]),e}();function h(e,t,n,r,o){var i=e.imageData.data;e=4*e.index++,i[e++]=t,i[e++]=n,i[e++]=r,i[+e]=o}var p=Math.sqrt(3),f=function(){function e(t){l(this,e),this.font=t,this.strokeImageInfos=new d(64,64),this.colDimImageInfos=new d(64,64),this.rowDimImageInfos=new d(64,64),this.colCellImageInfos=new d(64,64),this.rowCellImageInfos=new d(64,64),this.glyphInfos={}}return u(e,[{key:"getGlyphInfo",value:function(e){var t=this.glyphInfos[e.index];if(!t){var n=e.getBoundingBox(),r=n.x1,o=n.y1,i=n.x2-r,s=n.y2-o,c=e.path.commands;if(0==i||0==s||!c.length)return this.glyphInfos[e.index]={};for(var d=[],f=[],m=[],g=8;0<=g;--g)m.push([]);for(g=8;0<=g;--g)f.push([]);var y,v,b,x,w=function(){function e(t,n,r,o){l(this,e),this.p0=t,this.c0=n,this.c1=r,this.p1=o}return u(e,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(t){var n=a.default.Vector.lerp(this.p0,this.c0,t),r=a.default.Vector.lerp(this.c0,this.c1,t),o=a.default.Vector.lerp(n,r,t);return this.c1=a.default.Vector.lerp(this.c1,this.p1,t),this.c0=a.default.Vector.lerp(r,this.c1,t),r=a.default.Vector.lerp(o,this.c0,t),t=new e(this.p0,n,o,r),this.p0=r,t}},{key:"splitInflections",value:function(){var e=a.default.Vector.sub(this.c0,this.p0),t=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),e),n=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),e),a.default.Vector.mult(t,2)),r=[],o=t.x*n.y-t.y*n.x;return 0!==o&&0<=(e=(n=e.x*n.y-e.y*n.x)*n-4*o*(e.x*t.y-e.y*t.x))&&(o<0&&(o=-o,n=-n),e=(-n+(t=Math.sqrt(e)))/(2*o),0<(n=(-n-t)/(2*o))&&n<1&&(r.push(this.split(n)),e=1-(1-e)/(1-n)),0<e&&e<1&&r.push(this.split(e))),r.push(this),r}}]),e}(),S=!0,_=!1,k=void 0;try{for(var T,E=c[Symbol.iterator]();!(S=(T=E.next()).done);S=!0){var C=T.value,I=(C.x-r)/i,j=(C.y-o)/s;if(!G(y,v,I,j)){switch(C.type){case"M":b=I,x=j;break;case"L":V(y,v,I,j);break;case"Q":var A=(C.x1-r)/i,O=(C.y1-o)/s;U([y,I,A],[v,j,O],{x:y,y:v,cx:A,cy:O});break;case"Z":G(y,v,b,x)?d.push({x:y,y:v}):(V(y,v,b,x),d.push({x:b,y:x}));break;case"C":for(var N=function(e,t,n,r,o,i,s,l){e=new w(new a.default.Vector(e,t),new a.default.Vector(n,r),new a.default.Vector(o,i),new a.default.Vector(s,l)).splitInflections();var c=[],u=30/p,d=!0;t=!1,n=void 0;try{for(var h,f=e[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){for(var m=h.value,g=[],y=void 0;!(.125<=(y=u/m.quadError()));){var v=Math.pow(y,1/3),b=m.split(v),x=m.split(1-v/(1-v));c.push(b),g.push(m),m=x}y<1&&c.push(m.split(.5)),c.push(m),Array.prototype.push.apply(c,g.reverse())}}catch(e){t=!0,n=e}finally{try{d||null==f.return||f.return()}finally{if(t)throw n}}return c}(y,v,(C.x1-r)/i,(C.y1-o)/s,(C.x2-r)/i,(C.y2-o)/s,I,j),R=0;R<N.length;R++){var P=N[R].toQuadratic();U([P.x,P.x1,P.cx],[P.y,P.y1,P.cy],P)}break;default:throw new Error("unknown command type: ".concat(C.type))}y=I,v=j}}}catch(e){_=!0,k=e}finally{try{S||null==E.return||E.return()}finally{if(_)throw k}}for(var M=d.length,D=this.strokeImageInfos.findImage(M),L=D.index,F=0;F<M;++F){var B=d[F];h(D,z(B.x),z(B.y),z(B.cx),z(B.cy))}(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[n.x1,-n.y1,n.x2,-n.y2],strokeImageInfo:D,strokes:d,colInfo:W(m,this.colDimImageInfos,this.colCellImageInfos),rowInfo:W(f,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset]}return t;function U(e,t,n){var r=d.length;function o(e,t,n){for(var r=e.length;0<r--;){var o=e[r];o<t&&(t=o),n<o&&(n=o)}return{min:t,max:n}}d.push(n),n=o(e,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var i=Math.min(Math.ceil(9*n.max+.5),9),a=e;a<i;++a)m[a].push(r);n=o(t,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var s=Math.min(Math.ceil(9*n.max+.5),9),l=e;l<s;++l)f[l].push(r)}function z(e){return(e*=255)<0?0:255<e?255:e}function V(e,t,n,r){U([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function G(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}function W(e,t,n){for(var r=e.length,o=t.findImage(r),i=(t=o.index,0),a=0;a<r;++a)i+=e[a].length;for(var s=n.findImage(i),l=0;l<r;++l){var c=e[l],u=c.length,d=s.index;h(o,d>>7,127&d,u>>7,127&u);for(var p=0;p<u;++p){var f=c[p]+L;h(s,f>>7,127&f,0,0)}}return{cellImageInfo:s,dimOffset:t,dimImageInfo:o}}}}]),e}();a.default.RendererGL.prototype._renderText=function(e,t,n,r,o){if(this._textFont&&"string"!=typeof this._textFont){if(!(o<=r)&&this._doFill){if(this._isOpenType()){e.push(),o=this._doStroke;var i=this.drawMode,l=(this._doStroke=!1,this.drawMode=s.TEXTURE,this._textFont.font),c=(c=this._textFont._fontInfo)||(this._textFont._fontInfo=new f(l)),u=(n=this._textFont._handleAlignment(this,t,n,r),r=this._textSize/l.unitsPerEm,this.translate(n.x,n.y,0),this.scale(r,r,1),this.GL),d=(n=!this._defaultFontShader,this._getFontShader()),h=(d.init(),d.bindShader(),n&&(d.setUniform("uGridImageSize",[64,64]),d.setUniform("uCellsImageSize",[64,64]),d.setUniform("uStrokeImageSize",[64,64]),d.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),p=(h||((r=this._textGeom=new a.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new a.default.Vector(t,e,0)),this.uvs.push(t,e)}))).computeFaces().computeNormals(),h=this.createBuffers("glyph",r)),!0);n=!1,r=void 0;try{for(var m,g=this.retainedMode.buffers.text[Symbol.iterator]();!(p=(m=g.next()).done);p=!0)m.value._prepareBuffer(h,d)}catch(e){n=!0,r=e}finally{try{p||null==g.return||g.return()}finally{if(n)throw r}}this._bindBuffer(h.indexBuffer,u.ELEMENT_ARRAY_BUFFER),d.setUniform("uMaterialColor",this.curFillColor),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var y=0,v=null,b=l.stringToGlyphs(t),x=!0,w=!1,S=void 0;try{for(var _,k=b[Symbol.iterator]();!(x=(_=k.next()).done);x=!0){var T,E,C=_.value,I=(v&&(y+=l.getKerningValue(v,C)),c.getGlyphInfo(C));I.uGlyphRect&&(T=I.rowInfo,E=I.colInfo,d.setUniform("uSamplerStrokes",I.strokeImageInfo.imageData),d.setUniform("uSamplerRowStrokes",T.cellImageInfo.imageData),d.setUniform("uSamplerRows",T.dimImageInfo.imageData),d.setUniform("uSamplerColStrokes",E.cellImageInfo.imageData),d.setUniform("uSamplerCols",E.dimImageInfo.imageData),d.setUniform("uGridOffset",I.uGridOffset),d.setUniform("uGlyphRect",I.uGlyphRect),d.setUniform("uGlyphOffset",y),d.bindTextures(),u.drawElements(u.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),y+=C.advanceWidth,v=C}}catch(e){w=!0,S=e}finally{try{x||null==k.return||k.return()}finally{if(w)throw S}}}finally{d.unbindShader(),this._doStroke=o,this.drawMode=i,u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":262,"../core/main":273,"./p5.RendererGL.Retained":327,"./p5.Shader":329,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}]},{},[257])(257)}))}).call(this,r(3))},function(e,t,n){"use strict";n.r(t),n.d(t,"p5Events",(function(){return h})),n.d(t,"default",(function(){return p}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}"undefined"!=typeof window&&(window.p5=a.a);var h=["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"],p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,e);var t,n,r=u(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).canvasParentRef=o.a.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.sketch=new a.a((function(t){t.setup=function(){e.props.setup(t,e.canvasParentRef.current)},h.forEach((function(n){e.props[n]&&(t[n]=function(){for(var r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=e.props)[n].apply(r,[t].concat(i))})}))}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5","data-testid":"react-p5",style:this.props.style||{}})}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]).default},t.exports=o(r(2483))},9009:(e,t,n)=>{"use strict";var r=n(2483),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},3146:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,o)&&!k.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+I(l,0):i,w(a)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),j(a,t,o,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+I(s=e[c],c);l+=j(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=j(s=s.value,t,o,u=i+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],o=0;return j(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},R={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},2483:(e,t,n)=>{"use strict";e.exports=n(3146)},6723:(e,t,n)=>{"use strict";e.exports=n(9009)},1691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,o=n(5752),i=(r=o)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,i.default)(e,(function(e,n){var r={};(0,i.default)(e,(function(e,t){var n=s[t];n?r=a({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},2237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2483),a=(r=i)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return i=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return a.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},a.default.createElement(e,o({},l.props,l.state)))},s(l,i)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=l},7501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2483),a=(r=i)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return i=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return a.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},a.default.createElement(e,o({},l.props,l.state)))},s(l,i)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=l},4106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(3724)),o=s(n(5752)),i=s(n(1986)),a=s(n(2051));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,i.default)(t)?(0,o.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},3242:(e,t,n)=>{"use strict";t.H8=void 0;var r=c(n(4106)),o=c(n(9304)),i=c(n(1691)),a=c(n(7501)),s=c(n(2237)),l=c(n(1370));function c(e){return e&&e.__esModule?e:{default:e}}a.default,t.H8=a.default,s.default,l.default;var u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),l=(0,o.default)(e,s);return(0,i.default)(l)};t.Ay=u},1370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},9304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(5752)),o=a(n(7538)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,o.default)(e.default)||{};return t.map((function(t){var o=e[t];return o&&(0,r.default)(o,(function(e,t){n[t]||(n[t]={}),n[t]=i({},n[t],o[t])})),t})),n};t.default=s},7122:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,R(S);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(E),E=-1),f=!0;var i=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!j());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),x(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,T=null,E=-1,C=5,I=-1;function j(){return!(t.unstable_now()-I<C)}function A(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?_():(k=!1,T=null)}}else k=!1}if("function"===typeof b)_=function(){b(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=A,_=function(){N.postMessage(null)}}else _=function(){y(A,0)};function R(e){T=e,k||(k=!0,_())}function P(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,P(w,i-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,R(S))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},3557:(e,t,n)=>{"use strict";e.exports=n(7122)},8046:(e,t,n)=>{var r=n(4287),o=n(2282),i=n(9976),a=n(306),s=n(8128),l=n(8670),c=n(798);c.alea=r,c.xor128=o,c.xorwow=i,c.xorshift7=a,c.xor4096=s,c.tychei=l,e.exports=c},4287:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},8670:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},2282:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},8128:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},306:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},9976:function(e,t,n){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},798:function(t,n,r){var o;!function(i,a,s){var l,c=256,u=s.pow(c,6),d=s.pow(2,52),h=2*d,p=c-1;function f(t,n,r){var o=[],p=v(y((n=1==n?{entropy:!0}:n||{}).entropy?[t,b(a)]:null==t?function(){try{var t;return l&&(t=l.randomBytes)?t=t(c):(t=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(t)),b(t)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,b(a)]}}():t,3),o),f=new m(o),x=function(){for(var e=f.g(6),t=u,n=0;e<d;)e=(e+n)*c,t*=c,n=f.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|f.g(4)},x.quick=function(){return f.g(4)/4294967296},x.double=x,v(b(f.S),a),(n.pass||r||function(e,t,n,r){return r&&(r.S&&g(r,f),e.state=function(){return g(f,{})}),n?(s.random=e,t):e})(x,p,"global"in n?n.global:this==s,n.state)}function m(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<c;)a[o]=o++;for(o=0;o<c;o++)a[o]=a[i=p&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=p&o+1],n=n*c+a[p&(a[o]=a[i=p&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(c)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function y(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(y(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(v(s.random(),a),t.exports){t.exports=f;try{l=r(1234)}catch(x){}}else void 0===(o=function(){return f}.call(n,r,n,t))||(t.exports=o)}("undefined"!==typeof self?self:this,[],Math)},9897:e=>{"use strict";var t;t=function(){var e={},t={};return e.on=function(e,n){var r={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(r),r},e.off=function(e){var n=t[e.name].indexOf(e);-1!==n&&t[e.name].splice(n,1)},e.trigger=function(e,n){var r,o=t[e];if(o)for(r=o.length;r--;)o[r].handler(n)},e},e.exports=t},9316:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(977),i=(r=o)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[i.default.ENDED,i.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[i.default.ENDED,i.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[i.default.ENDED,i.default.PLAYING,i.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},5734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(7829)),o=s(n(4250)),i=s(n(3984)),a=s(n(893));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,r.default)("youtube-player"),c={proxyEvents:function(e){var t={},n=function(n){var r="on"+n.slice(0,1).toUpperCase()+n.slice(1);t[r]=function(t){l('event "%s"',r,t),e.trigger(n,t)}},r=!0,o=!1,a=void 0;try{for(var s,c=i.default[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){n(s.value)}}catch(u){o=!0,a=u}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r=function(r){t&&a.default[r]?n[r]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.then((function(e){var t=a.default[r],o=e.getPlayerState(),i=e[r].apply(e,n);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(o)?new Promise((function(n){e.addEventListener("onStateChange",(function r(){var o=e.getPlayerState(),i=void 0;"number"===typeof t.timeout&&(i=setTimeout((function(){e.removeEventListener("onStateChange",r),n()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(o)&&(e.removeEventListener("onStateChange",r),clearTimeout(i),n())}))})).then((function(){return i})):i}))}:n[r]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.then((function(e){return e[r].apply(e,n)}))}},i=!0,s=!1,l=void 0;try{for(var c,u=o.default[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){r(c.value)}}catch(d){s=!0,l=d}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}return n}};t.default=c,e.exports=t.default},977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},3984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},4250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},8786:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=s(n(9897)),i=s(n(3463)),a=s(n(5734));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,o.default)();if(l||(l=(0,i.default)(s)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"===typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=a.default.proxyEvents(s);var c=new Promise((function(n){"object"===("undefined"===typeof e?"undefined":r(e))&&e.playVideo instanceof Function?n(e):l.then((function(r){var o=new r.Player(e,t);return s.on("ready",(function(){n(o)})),null}))})),u=a.default.promisifyPlayer(c,n);return u.on=s.on,u.off=s.off,u},e.exports=t.default},3463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5068),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var n="http:"===window.location.protocol?"http:":"https:";(0,i.default)(n+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){r&&r(),t(window.YT)}}}))},e.exports=t.default},7829:(t,n,r)=>{function o(){var t;try{t=n.storage.debug}catch(e){}return!t&&"undefined"!==typeof process&&"env"in process&&(t={NODE_ENV:"production",PUBLIC_URL:"/hologramassa",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ENDPOINT:"https://holograma-3.onrender.com"}.DEBUG),t}(n=t.exports=r(234)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}},n.load=o,n.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(o())},234:(e,t,n)=>{var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!==typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;l++;var o=t.formatters[r];if("function"===typeof o){var i=a[l];n=o.call(e,i),a.splice(l,1),l--}return n})),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"===typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2909),t.names=[],t.skips=[],t.formatters={}},2909:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,i=365.25*o;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var l,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return s.long?a(l=e,o,"day")||a(l,r,"hour")||a(l,n,"minute")||a(l,t,"second")||l+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},5817:()=>{},8590:()=>{},4530:()=>{},8108:()=>{},551:()=>{},1234:()=>{},4633:(e,t,n)=>{var r=n(3738).default;function o(){"use strict";e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof x?t:x,i=Object.create(o.prototype),a=new R(r||[]);return s(i,"_invoke",{value:j(e,n,a)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var m="suspendedStart",g="suspendedYield",y="executing",v="completed",b={};function x(){}function w(){}function S(){}var _={};h(_,c,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(P([])));T&&T!==i&&a.call(T,c)&&(_=T);var E=S.prototype=x.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,i,s,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var o;s(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function j(e,n,r){var o=m;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?v:g,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=S,s(E,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:w,configurable:!0}),w.displayName=h(S,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(E),e},n.awrap=function(e){return{__await:e}},C(I.prototype),h(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new I(p(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),h(E,d,"Generator"),h(E,c,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=P,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4756:(e,t,n)=>{var r=n(4633)();e.exports=r;try{regeneratorRuntime=r}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(i,a),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/hologramassa/",(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Hn,hasStandardBrowserEnv:()=>qn,hasStandardBrowserWebWorkerEnv:()=>Yn});var t={};r.r(t),r.d(t,{assertParamsValid:()=>tF,computeFlatOffset:()=>fF,computeOutShape:()=>rF,getNormalizedAxes:()=>sF,isSliceContinous:()=>pF,maskToAxes:()=>nF,parseSliceParams:()=>mF,sliceInfo:()=>gF,startForAxis:()=>dF,startIndicesWithElidedDims:()=>lF,stopForAxis:()=>hF,stopIndicesWithElidedDims:()=>cF,stridesForAxis:()=>uF,stridesWithElidedDims:()=>oF});var n={};r.r(n),r.d(n,{collectGatherOpShapeInfo:()=>RV,computeOutShape:()=>NV,segOpComputeOptimalWindowSize:()=>OV});var o={};r.r(o),r.d(o,{ERF_A1:()=>Kz,ERF_A2:()=>Zz,ERF_A3:()=>Qz,ERF_A4:()=>Jz,ERF_A5:()=>$z,ERF_P:()=>Yz,PARALLELIZE_THRESHOLD:()=>Pz,RowPartitionType:()=>jz,SELU_SCALE:()=>Xz,SELU_SCALEALPHA:()=>qz,applyActivation:()=>NU,assertAndGetBroadcastShape:()=>FL,assertAxesAreInnerMostDims:()=>TB,assertParamsConsistent:()=>Cz,assignToTypedArray:()=>iV,axesAreInnerMostDims:()=>wB,calculateShapes:()=>Hz,checkEinsumDimSizes:()=>fV,checkPadOnDimRoundingMode:()=>MF,combineLocations:()=>SB,combineRaggedTensorToTensorShapes:()=>Az,complexWithEvenIndex:()=>nV,complexWithOddIndex:()=>rV,computeConv2DInfo:()=>kF,computeConv3DInfo:()=>TF,computeDefaultPad:()=>EF,computeDilation2DInfo:()=>wF,computeOptimalWindowSize:()=>Mz,computeOutAndReduceShapes:()=>_B,computeOutShape:()=>Iz,computePool2DInfo:()=>SF,computePool3DInfo:()=>_F,convertConv2DDataFormat:()=>PF,decodeEinsumEquation:()=>hV,eitherStridesOrDilationsAreOne:()=>NF,expandShapeToKeepDim:()=>kB,exponent:()=>sV,exponents:()=>aV,fromStringArrayToUint8:()=>MV,fromUint8ToStringArray:()=>PV,getAxesPermutation:()=>EB,getBroadcastDims:()=>DL,getComplexWithIndex:()=>oV,getEinsumComputePath:()=>mV,getEinsumPermutation:()=>pV,getFusedBiasGradient:()=>OU,getFusedDyActivation:()=>AU,getImageCenter:()=>Dz,getInnerMostAxes:()=>IB,getPermuted:()=>Fz,getRaggedRank:()=>Nz,getReductionAxes:()=>LL,getReshaped:()=>Lz,getReshapedPermuted:()=>Bz,getRowPartitionTypesHelper:()=>Oz,getSliceBeginCoords:()=>Uz,getSliceSize:()=>zz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>bV,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>xV,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>wV,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>kV,getSparseReshapeInputOutputMismatchErrorMessage:()=>EV,getSparseReshapeInputOutputMultipleErrorMessage:()=>TV,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>SV,getSparseReshapeNegativeOutputDimErrorMessage:()=>_V,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>AV,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>CV,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>IV,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>jV,getUndoAxesPermutation:()=>CB,isIdentityPermutation:()=>gV,log:()=>GP,mergeRealAndImagArrays:()=>eV,prepareAndValidate:()=>Vz,prepareSplitSize:()=>vV,segment_util:()=>n,shouldFuse:()=>RU,slice_util:()=>t,splitRealAndImagArrays:()=>tV,stridesOrDilationsArePositive:()=>RF,tupleValuesAreOne:()=>OF,upcastType:()=>WM,validateDefaultValueShape:()=>Rz,validateInput:()=>Wz,validateUpdateShape:()=>Gz,warn:()=>VP});var i={};r.r(i),r.d(i,{addImpl:()=>RJ,bincountImpl:()=>T$,bincountReduceImpl:()=>E$,bitwiseAndImpl:()=>I$,castImpl:()=>IJ,ceilImpl:()=>O$,concatImpl:()=>L$,equalImpl:()=>w0,expImpl:()=>N0,expm1Impl:()=>L0,floorImpl:()=>e1,gatherNdImpl:()=>l1,gatherV2Impl:()=>u1,greaterEqualImpl:()=>m1,greaterImpl:()=>h1,lessEqualImpl:()=>I1,lessImpl:()=>T1,linSpaceImpl:()=>O1,logImpl:()=>R1,maxImpl:()=>Y1,maximumImpl:()=>Q1,minimumImpl:()=>s2,multiplyImpl:()=>p0,negImpl:()=>y2,notEqualImpl:()=>T2,prodImpl:()=>F2,raggedGatherImpl:()=>G2,raggedRangeImpl:()=>q2,raggedTensorToTensorImpl:()=>J2,rangeImpl:()=>e3,rsqrtImpl:()=>h3,scatterImpl:()=>m3,sigmoidImpl:()=>bJ,simpleAbsImpl:()=>VJ,sliceImpl:()=>w$,sparseFillEmptyRowsImpl:()=>M3,sparseReshapeImpl:()=>L3,sparseSegmentReductionImpl:()=>B3,sqrtImpl:()=>W3,staticRegexReplaceImpl:()=>Q3,stridedSliceImpl:()=>n4,stringNGramsImpl:()=>i4,stringSplitImpl:()=>l4,stringToHashBucketFastImpl:()=>u4,subImpl:()=>G0,tileImpl:()=>g4,topKImpl:()=>x4,transposeImpl:()=>KJ,uniqueImpl:()=>C4});var a={};r.r(a),r.d(a,{FILE:()=>Sae,HTML:()=>Tae,TEXT:()=>kae,URL:()=>_ae});var s,l=r(2483),c=r.t(l,2),u=r(9998),d=r.t(u,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const p="popstate";function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(pg){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t,n,r){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?b(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function v(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function b(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,l=s.Pop,c=null,u=d();function d(){return(a.state||{idx:null}).idx}function m(){l=s.Pop;let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:x.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:v(e);return f(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,a.replaceState(h({},a.state,{idx:u}),""));let x={get action(){return l},get location(){return e(o,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(p,m),c=e,()=>{o.removeEventListener(p,m),c=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=y(x.location,e,t);n&&n(r,e),u=d()+1;let h=g(r,u),p=x.createHref(r);try{a.pushState(h,"",p)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(p)}i&&c&&c({action:l,location:x.location,delta:1})},replace:function(e,t){l=s.Replace;let r=y(x.location,e,t);n&&n(r,e),u=d();let o=g(r,u),h=x.createHref(r);a.replaceState(o,"",h),i&&c&&c({action:l,location:x.location,delta:0})},go:e=>a.go(e)};return x}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function S(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?b(t):t).pathname||"/",n);if(null==r)return null;let o=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let a=0;null==i&&a<o.length;++a)i=R(o[a],M(r));return i}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(f(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=z([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),_(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:N(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of k(e.path))o(e,t,r);else o(e,t)})),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=k(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const T=/^:[\w-]+$/,E=3,C=2,I=1,j=10,A=-2,O=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(O)&&(r+=A),t&&(r+=C),n.filter((e=>!O(e))).reduce(((e,t)=>e+(T.test(t)?E:""===t?I:j)),r)}function R(e,t){let{routesMeta:n}=e,r={},o="/",i=[];for(let a=0;a<n.length;++a){let e=n[a],s=a===n.length-1,l="/"===o?t:t.slice(o.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;i.push({params:r,pathname:z([o,c.pathname]),pathnameBase:V(z([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=z([o,c.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return m(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function M(e){try{return decodeURI(e)}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function B(e,t){let n=F(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function U(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=b(e):(o=h({},e),f(!o.pathname||!o.pathname.includes("?"),L("?","pathname","search",o)),f(!o.pathname||!o.pathname.includes("#"),L("#","pathname","hash",o)),f(!o.search||!o.search.includes("#"),L("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?b(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:G(r),hash:W(o)}}(o,i),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],X=(new Set(q),["get",...q]);new Set(X),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const K=l.createContext(null);const Z=l.createContext(null);const Q=l.createContext(null);const J=l.createContext(null);const $=l.createContext({outlet:null,matches:[],isDataRoute:!1});const ee=l.createContext(null);function te(){return null!=l.useContext(J)}function ne(){return te()||f(!1),l.useContext(J).location}function re(e){l.useContext(Q).static||l.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=l.useContext($);return e?function(){let{router:e}=me(pe.UseNavigateStable),t=ye(fe.UseNavigateStable),n=l.useRef(!1);re((()=>{n.current=!0}));let r=l.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Y({fromRouteId:t},o)))}),[e,t]);return r}():function(){te()||f(!1);let e=l.useContext(K),{basename:t,future:n,navigator:r}=l.useContext(Q),{matches:o}=l.useContext($),{pathname:i}=ne(),a=JSON.stringify(B(o,n.v7_relativeSplatPath)),s=l.useRef(!1);re((()=>{s.current=!0}));let c=l.useCallback((function(n,o){if(void 0===o&&(o={}),!s.current)return;if("number"===typeof n)return void r.go(n);let l=U(n,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:z([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)}),[t,r,a,i,e]);return c}()}function ie(){let{matches:e}=l.useContext($),t=e[e.length-1];return t?t.params:{}}function ae(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=l.useContext(Q),{matches:o}=l.useContext($),{pathname:i}=ne(),a=JSON.stringify(B(o,r.v7_relativeSplatPath));return l.useMemo((()=>U(e,JSON.parse(a),i,"path"===n)),[e,a,i,n])}function se(e,t,n,r){te()||f(!1);let{navigator:o}=l.useContext(Q),{matches:i}=l.useContext($),a=i[i.length-1],c=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let d,h=ne();if(t){var p;let e="string"===typeof t?b(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||f(!1),d=e}else d=h;let m=d.pathname||"/",g=S(e,{pathname:"/"===u?m:m.slice(u.length)||"/"});let y=he(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,r);return t&&y?l.createElement(J.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:s.Pop}},y):y}function le(){let e=function(){var e;let t=l.useContext(ee),n=ge(fe.UseRouteError),r=ye(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:o},n):null,null)}const ce=l.createElement(le,null);class ue extends l.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?l.createElement($.Provider,{value:this.props.routeContext},l.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,o=l.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement($.Provider,{value:t},r)}function he(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}let a=e,s=null==(o=n)?void 0:o.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||f(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let l=0;l<a.length;l++){let e=a[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=l),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,o)=>{let i,d=!1,h=null,p=null;var f;n&&(i=s&&r.route.id?s[r.route.id]:void 0,h=r.route.errorElement||ce,c&&(u<0&&0===o?(f="route-fallback",!1||ve[f]||(ve[f]=!0),d=!0,p=null):u===o&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=i?h:d?p:r.route.Component?l.createElement(r.route.Component,null):r.route.element?r.route.element:e,l.createElement(de,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?l.createElement(ue,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function me(e){let t=l.useContext(K);return t||f(!1),t}function ge(e){let t=l.useContext(Z);return t||f(!1),t}function ye(e){let t=function(e){let t=l.useContext($);return t||f(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||f(!1),n.route.id}const ve={};c.startTransition;function be(e){let{to:t,replace:n,state:r,relative:o}=e;te()||f(!1);let{future:i,static:a}=l.useContext(Q),{matches:s}=l.useContext($),{pathname:c}=ne(),u=oe(),d=U(t,B(s,i.v7_relativeSplatPath),c,"path"===o),h=JSON.stringify(d);return l.useEffect((()=>u(JSON.parse(h),{replace:n,state:r,relative:o})),[u,h,o,n,r]),null}function xe(e){f(!1)}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:o=s.Pop,navigator:i,static:a=!1,future:c}=e;te()&&f(!1);let u=t.replace(/^\/*/,"/"),d=l.useMemo((()=>({basename:u,navigator:i,static:a,future:Y({v7_relativeSplatPath:!1},c)})),[u,c,i,a]);"string"===typeof r&&(r=b(r));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,v=l.useMemo((()=>{let e=D(h,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}}),[u,h,p,m,g,y,o]);return null==v?null:l.createElement(Q.Provider,{value:d},l.createElement(J.Provider,{children:n,value:v}))}function Se(e){let{children:t,location:n}=e;return se(_e(t),n)}new Promise((()=>{}));l.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return l.Children.forEach(e,((e,r)=>{if(!l.isValidElement(e))return;let o=[...t,r];if(e.type===l.Fragment)return void n.push.apply(n,_e(e.props.children,o));e.type!==xe&&f(!1),e.props.index&&e.props.children&&f(!1);let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=_e(e.props.children,o)),n.push(i)})),n}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Ce=c.startTransition;d.flushSync,c.useId;function Ie(e){let{basename:t,children:n,future:r,window:o}=e,i=l.useRef();var a;null==i.current&&(i.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),x((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return y("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:v(t)}),null,a)));let s=i.current,[c,u]=l.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},h=l.useCallback((e=>{d&&Ce?Ce((()=>u(e))):u(e)}),[u,d]);return l.useLayoutEffect((()=>s.listen(h)),[s,h]),l.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:s,future:r})}const je="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=l.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:i,replace:a,state:s,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,p=Te(e,Ee),{basename:m}=l.useContext(Q),g=!1;if("string"===typeof u&&Ae.test(u)&&(n=u,je))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(pg){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;te()||f(!1);let{basename:r,navigator:o}=l.useContext(Q),{hash:i,pathname:a,search:s}=ae(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:z([r,a])),o.createHref({pathname:c,search:s,hash:i})}(u,{relative:o}),b=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s}=void 0===t?{}:t,c=oe(),u=ne(),d=ae(e,{relative:a});return l.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:v(u)===v(d);c(e,{replace:n,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s})}}),[u,c,d,r,o,n,e,i,a,s])}(u,{replace:a,state:s,target:c,preventScrollReset:d,relative:o,unstable_viewTransition:h});return l.createElement("a",ke({},p,{href:n||y,onClick:g||i?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Ne,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));r(9316);Object.create(null);const Pe={};function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&Pe[t[0]]||("string"===typeof t[0]&&(Pe[t[0]]=new Date),function(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&(t[0]="react-i18next:: ".concat(t[0])),console.warn(...t)}}(...t))}const De=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}};function Le(e,t,n){e.loadNamespaces(t,De(e,n))}function Fe(e,t,n,r){"string"===typeof n&&(n=[n]),n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,De(e,r))}const Be=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ue={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},ze=e=>Ue[e];let Ve,Ge={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Be,ze)};const We={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ge={...Ge,...e}}(e.options.react),function(e){Ve=e}(e)}},He=(0,l.createContext)();class qe{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Xe=(e,t)=>{const n=(0,l.useRef)();return(0,l.useEffect)((()=>{n.current=t?n.current:e}),[e,t]),n.current};function Ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:r,defaultNS:o}=(0,l.useContext)(He)||{},i=n||r||Ve;if(i&&!i.reportNamespaces&&(i.reportNamespaces=new qe),!i){Me("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>"string"===typeof t?t:t&&"object"===typeof t&&"string"===typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}i.options.react&&void 0!==i.options.react.wait&&Me("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Ge,...i.options.react,...t},{useSuspense:s,keyPrefix:c}=a;let u=e||o||i.options&&i.options.defaultNS;u="string"===typeof u?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.languages[0],o=!!t.options&&t.options.fallbackLng,i=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;const a=(e,n)=>{const r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||!(t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages))||!(!a(r,e)||o&&!a(i,e)))}(e,t,n):(Me("i18n.languages were undefined or empty",t.languages),!0)}(e,i,a)));function h(){return i.getFixedT(t.lng||null,"fallback"===a.nsMode?u:u[0],c)}const[p,f]=(0,l.useState)(h);let m=u.join();t.lng&&(m="".concat(t.lng).concat(m));const g=Xe(m),y=(0,l.useRef)(!0);(0,l.useEffect)((()=>{const{bindI18n:e,bindI18nStore:n}=a;function r(){y.current&&f(h)}return y.current=!0,d||s||(t.lng?Fe(i,t.lng,u,(()=>{y.current&&f(h)})):Le(i,u,(()=>{y.current&&f(h)}))),d&&g&&g!==m&&y.current&&f(h),e&&i&&i.on(e,r),n&&i&&i.store.on(n,r),()=>{y.current=!1,e&&i&&e.split(" ").forEach((e=>i.off(e,r))),n&&i&&n.split(" ").forEach((e=>i.store.off(e,r)))}}),[i,m]);const v=(0,l.useRef)(!0);(0,l.useEffect)((()=>{y.current&&!v.current&&f(h),v.current=!1}),[i,c]);const b=[p,i,d];if(b.t=p,b.i18n=i,b.ready=d,d)return b;if(!d&&!s)return b;throw new Promise((e=>{t.lng?Fe(i,t.lng,u,(()=>e())):Le(i,u,(()=>e()))}))}function Ke(e){let{i18n:t,defaultNS:n,children:r}=e;const o=(0,l.useMemo)((()=>({i18n:t,defaultNS:n})),[t,n]);return(0,l.createElement)(He.Provider,{value:o},r)}r(3253);const Ze=r.p+"static/media/logoNegroHolo.107cac0cb621148c267a.PNG",Qe=r.p+"static/media/logoko.acfea23dc4eb08593580.PNG";var Je=r(6723);const $e=function(e){let{isLoggedIn:t,handleLogout:n}=e;const{t:r,i18n:o}=Ye(),[i,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)("en"),[u,d]=(0,l.useState)("/"),h=e=>{o.changeLanguage(e),c(e)},p=()=>{a(!1)};return(0,l.useEffect)((()=>{const e=e=>{const t=document.querySelector(".navbar");t&&!t.contains(e.target)&&p()};return i&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[i]),(0,Je.jsxs)("div",{className:"sidebar ".concat(i?"navbar-closed":""),children:[(0,Je.jsx)("div",{className:"logo-class ".concat(i?"logo-class-closed":""),children:(0,Je.jsx)(Oe,{className:"navbar-brand",children:i?(0,Je.jsx)("img",{className:"logo1",src:Qe,alt:""}):(0,Je.jsx)("img",{className:"logo2",src:Ze,alt:""})})}),(0,Je.jsx)("div",{className:"navbar-nav",children:(0,Je.jsx)("ul",{className:"navbar-nav",children:(0,Je.jsx)("li",{className:"nav-item",children:(0,Je.jsxs)("div",{className:"art-options ".concat(i?"art-options-closed":""),id:"artOptions",children:[(0,Je.jsx)(Oe,{to:"/hologramassa/",className:"nav-link ".concat("/hologramassa/"===u?"selected":""),onClick:()=>{p(),d("/hologramassa/")},children:r("home")}),!t&&(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Oe,{to:"/login",className:"nav-link ".concat("/login"===u?"selected":""),onClick:()=>{p(),d("/login")},children:r("signIn")}),(0,Je.jsx)(Oe,{to:"/register",className:"nav-link ".concat("/register"===u?"selected":""),onClick:()=>{p(),d("/register")},children:r("signUp")})]}),(0,Je.jsx)(Oe,{to:"/artists",className:"nav-link ".concat("/artists"===u?"selected":""),onClick:()=>{p(),d("/artists")},children:r("artists")}),(0,Je.jsx)(Oe,{to:"/movies",className:"nav-link ".concat("/movies"===u?"selected":""),onClick:()=>{p(),d("/movies")},children:r("movies")}),(0,Je.jsx)(Oe,{to:"/collection",className:"nav-link ".concat("/collection"===u?"selected":""),onClick:()=>{p(),d("/collection")},children:r("gallery")}),(0,Je.jsx)(Oe,{to:"/magazine",className:"nav-link ".concat("/magazine"===u?"selected":""),onClick:()=>{p(),d("/magazine")},children:r("magazine")}),(0,Je.jsx)(Oe,{to:"/SketchList",className:"nav-link ".concat("/SketchList"===u?"selected":""),onClick:()=>{p(),d("/SketchList")},children:r("SketchList")}),t&&(0,Je.jsx)(Oe,{to:"/profile",className:"nav-link",children:r("profile")}),t&&(0,Je.jsx)(Oe,{to:"/hologramassa/",className:"nav-link",onClick:n,children:r("logout")})]})})})}),(0,Je.jsxs)("div",{className:"class-lang ".concat(i?"class-lang-closed":""),children:[(0,Je.jsxs)("div",{className:"nav-lang",children:[(0,Je.jsx)("button",{className:"language-button ".concat("en"===s?"selected":""),onClick:()=>h("en"),children:"ENGLISH"}),(0,Je.jsx)("span",{className:"language-separator"}),(0,Je.jsx)("button",{className:"language-button ".concat("es"===s?"selected":""),onClick:()=>h("es"),children:"SPANISH"})]}),!i&&(0,Je.jsx)("button",{className:"open-button",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(!i)},children:"x"}),i&&(0,Je.jsx)("button",{className:"close-button",onClick:p,children:"="})]})]})},et={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class tt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||et,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:("string"===typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new tt(this.logger,{prefix:"".concat(this.prefix,":").concat(e,":"),...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new tt(this.logger,e)}}var nt=new tt;class rt{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]=this.observers[e]||[],this.observers[e].push(t)})),this}off(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((e=>e!==t)):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){[].concat(this.observers[e]).forEach((e=>{e(...n)}))}if(this.observers["*"]){[].concat(this.observers["*"]).forEach((t=>{t.apply(t,[e,...n])}))}}}function ot(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}function it(e){return null==e?"":""+e}function at(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"===typeof e}const i="string"!==typeof t?[].concat(t):t.split(".");for(;i.length>1;){if(o())return{};const t=r(i.shift());!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{}}return o()?{}:{obj:e,k:r(i.shift())}}function st(e,t,n){const{obj:r,k:o}=at(e,t,Object);r[o]=n}function lt(e,t){const{obj:n,k:r}=at(e,t);if(n)return n[r]}function ct(e,t,n){for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"===typeof e[r]||e[r]instanceof String||"string"===typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):ct(e[r],t[r],n):e[r]=t[r]);return e}function ut(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ht(e){return"string"===typeof e?e.replace(/[&<>"'\/]/g,(e=>dt[e])):e}const pt=[" ",",","?","!",";"];function ft(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let o=e;for(let i=0;i<r.length;++i){if(!o)return;if("string"===typeof o[r[i]]&&i+1<r.length)return;if(void 0===o[r[i]]){let e=2,a=r.slice(i,i+e).join(n),s=o[a];for(;void 0===s&&r.length>i+e;)e++,a=r.slice(i,i+e).join(n),s=o[a];if(void 0===s)return;if(null===s)return null;if(t.endsWith(a)){if("string"===typeof s)return s;if(a&&"string"===typeof s[a])return s[a]}const l=r.slice(i+e).join(n);return l?ft(s,l,n):void 0}o=o[r[i]]}return o}function mt(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class gt extends rt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a=[e,t];n&&"string"!==typeof n&&(a=a.concat(n)),n&&"string"===typeof n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(a=e.split("."));const s=lt(this.data,a);return s||!i||"string"!==typeof n?s:ft(this.data&&this.data[e]&&this.data[e][t],n,o)}addResource(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),st(this.data,a,r),o.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const o in n)"string"!==typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let s=lt(this.data,a)||{};r?ct(s,n,o):s={...s,...n},st(this.data,a,s),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var yt={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,o))})),t}};const vt={};class bt extends rt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,t,n){e.forEach((e=>{t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=nt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!function(e,t,n){t=t||"",n=n||"";const r=pt.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const o=new RegExp("(".concat(r.map((e=>"?"===e?"\\?":e)).join("|"),")"));let i=!o.test(e);if(!i){const t=e.indexOf(n);t>0&&!o.test(e.substring(0,t))&&(i=!0)}return i}(e,n,r);if(i&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:o};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(r)}return"string"===typeof o&&(o=[o]),{key:e,namespaces:o}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(e[e.length-1],t),s=a[a.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:"".concat(s).concat(e).concat(i),usedKey:i,exactUsedKey:i,usedLng:l,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:"".concat(s).concat(e).concat(i)}return r?{res:i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:i}const u=this.resolve(e,t);let d=u&&u.res;const h=u&&u.usedKey||i,p=u&&u.exactUsedKey||i,f=Object.prototype.toString.apply(d),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&d&&("string"!==typeof d&&"boolean"!==typeof d&&"number"!==typeof d)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!==typeof m||"[object Array]"!==f)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:a}):"key '".concat(i," (").concat(this.language,")' returned an object instead of string.");return r?(u.res=e,u.usedParams=this.getUsedParamsDetails(t),u):e}if(o){const e="[object Array]"===f,n=e?[]:{},r=e?p:h;for(const i in d)if(Object.prototype.hasOwnProperty.call(d,i)){const e="".concat(r).concat(o).concat(i);n[i]=this.translate(e,{...t,joinArrays:!1,ns:a}),n[i]===e&&(n[i]=d[i])}d=n}}else if(g&&"string"===typeof m&&"[object Array]"===f)d=d.join(m),d&&(d=this.extendTranslation(d,e,t,n));else{let r=!1,a=!1;const c=void 0!==t.count&&"string"!==typeof t.count,h=bt.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",m=t["defaultValue".concat(p)]||t["defaultValue".concat(f)]||t.defaultValue;!this.isValidLookup(d)&&h&&(r=!0,d=m),this.isValidLookup(d)||(a=!0,d=i);const g=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:d,y=h&&m!==d&&this.options.updateMissing;if(a||r||y){if(this.logger.log(y?"updateKey":"missingKey",l,s,i,y?m:d),o){const e=this.resolve(i,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const o=h&&r!==d?r:g;this.options.missingKeyHandler?this.options.missingKeyHandler(e,s,n,o,y,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,s,n,o,y,t),this.emit("missingKey",e,s,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{this.pluralResolver.getSuffixes(e,t).forEach((n=>{r([e],i+n,t["defaultValue".concat(n)]||m)}))})):r(e,i,m))}d=this.extendTranslation(d,e,t,u,n),a&&d===i&&this.options.appendNamespaceToMissingKey&&(d="".concat(s,":").concat(i)),(a||r)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(s,":").concat(i):i,r?d:void 0):this.options.parseMissingKeyHandler(d))}return r?(u.res=d,u.usedParams=this.getUsedParamsDetails(t),u):d}extendTranslation(e,t,n,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a="string"===typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(a){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let l=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),a){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o&&o[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):i.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,s="string"===typeof a?[a]:a;return void 0!==e&&null!==e&&s&&s.length&&!1!==n.applyPostProcessor&&(e=yt.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,a),l=s.key;n=l;let c=s.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==a.count&&"string"!==typeof a.count,d=u&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==a.context&&("string"===typeof a.context||"number"===typeof a.context)&&""!==a.context,p=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(i=e,!vt["".concat(p[0],"-").concat(e)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(i)&&(vt["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;o=n;const i=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(i,l,n,e,a);else{let e;u&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t="".concat(this.options.pluralSeparator,"zero"),r="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(u&&(i.push(l+e),a.ordinal&&0===e.indexOf(r)&&i.push(l+e.replace(r,this.options.pluralSeparator)),d&&i.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator).concat(a.context);i.push(n),u&&(i.push(n+e),a.ordinal&&0===e.indexOf(r)&&i.push(n+e.replace(r,this.options.pluralSeparator)),d&&i.push(n+t))}}let s;for(;s=i.pop();)this.isValidLookup(t)||(r=s,t=this.getResource(n,e,s,a))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&"string"!==typeof e.replace;let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}function xt(e){return e.charAt(0).toUpperCase()+e.slice(1)}class wt{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nt.create("languageUtils")}getScriptPartFromCode(e){if(!(e=mt(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=mt(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if("string"===typeof e&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=xt(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=xt(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=xt(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:0===e.indexOf(n)?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),"string"===typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"===typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"===typeof e&&o(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&o(this.formatLanguageCode(e))})),r}}let St=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_t={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};const kt=["v1","v2","v3"],Tt=["v4"],Et={zero:0,one:1,two:2,few:3,many:4,other:5};class Ct{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=nt.create("pluralResolver"),this.options.compatibilityJSON&&!Tt.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const e={};return St.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:_t[t.fc]}}))})),e}()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(mt(e),{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>"".concat(t).concat(e)))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>Et[e]-Et[t])).map((e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e))):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const o=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!kt.includes(this.options.compatibilityJSON)}}function It(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=function(e,t,n){const r=lt(e,n);return void 0!==r?r:lt(t,n)}(e,t,n);return!i&&o&&"string"===typeof n&&(i=ft(e,n,r),void 0===i&&(i=ft(t,n,r))),i}class jt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=nt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=void 0!==t.escape?t.escape:ht,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ut(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ut(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ut(t.nestingPrefix):t.nestingPrefixEscaped||ut("$t("),this.nestingSuffix=t.nestingSuffix?ut(t.nestingSuffix):t.nestingSuffixEscaped||ut(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");const t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");const n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}interpolate(e,t,n,r){let o,i,a;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}const c=e=>{if(e.indexOf(this.formatSeparator)<0){const o=It(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,n,{...r,...t,interpolationkey:e}):o}const o=e.split(this.formatSeparator),i=o.shift().trim(),a=o.join(this.formatSeparator).trim();return this.format(It(t,s,i,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...r,...t,interpolationkey:i})};this.resetRegExp();const u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>l(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?l(this.escape(e)):l(e)}].forEach((t=>{for(a=0;o=t.regex.exec(e);){const n=o[1].trim();if(i=c(n),void 0===i)if("function"===typeof u){const t=u(e,o,r);i="string"===typeof t?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))i="";else{if(d){i=o[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),i=""}else"string"===typeof i||this.useRawValueToEscape||(i=it(i));const s=t.safeValue(i);if(e=e.replace(o[0],s),d?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}})),e}nest(e,t){let n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function a(e,t){const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp("".concat(n,"[ ]*{")));let i="{".concat(r[1]);e=r[0],i=this.interpolate(i,o);const a=i.match(/'/g),s=i.match(/"/g);(a&&a.length%2===0&&!s||s.length%2!==0)&&(i=i.replace(/'/g,'"'));try{o=JSON.parse(i),t&&(o={...t,...o})}catch(pg){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),pg),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){let s=[];o={...i},o=o.replace&&"string"!==typeof o.replace?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),s=e,l=!0}if(r=t(a.call(this,n[1].trim(),o),o),r&&n[0]===e&&"string"!==typeof r)return r;"string"!==typeof r&&(r=it(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=s.reduce(((e,t)=>this.format(e,t,i.lng,{...i,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}function At(e){const t={};return function(n,r,o){const i=r+JSON.stringify(o);let a=t[i];return a||(a=e(mt(r),o),t[i]=a),a(n)}}class Ot{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=nt.create("formatter"),this.options=e,this.formats={number:At(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:At(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:At(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:At(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:At(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=At(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=t.split(this.formatSeparator).reduce(((e,t)=>{const{formatName:o,formatOptions:i}=function(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);"currency"===t&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach((e=>{if(!e)return;const[t,...r]=e.split(":"),o=r.join(":").trim().replace(/^'+|'+$/g,"");n[t.trim()]||(n[t.trim()]=o),"false"===o&&(n[t.trim()]=!1),"true"===o&&(n[t.trim()]=!0),isNaN(o)||(n[t.trim()]=parseInt(o,10))}))}return{formatName:t,formatOptions:n}}(t);if(this.formats[o]){let t=e;try{const a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},s=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[o](e,s,{...i,...r,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn("there was no format function for ".concat(o)),e}),e);return o}}class Nt extends rt{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=nt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const o={},i={},a={},s={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const a="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===i[a]&&(i[a]=!0):(this.state[a]=1,r=!1,void 0===i[a]&&(i[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===s[t]&&(s[t]=!0)))})),r||(a[e]=!0)})),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const r=e.split("|"),o=r[0],i=r[1];t&&this.emit("failedLoading",o,i,t),n&&this.store.addResourceBundle(o,i,n),this.state[e]=t?-1:2;const a={};this.queue.forEach((n=>{!function(e,t,n,r){const{obj:o,k:i}=at(e,t,Object);o[i]=o[i]||[],r&&(o[i]=o[i].concat(n)),r||o[i].push(n)}(n.loaded,[o],i),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:o,callback:i});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*o,i)}),o):i(a,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const n=s(e,t);n&&"function"===typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"===typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"===typeof t&&(t=[t]);const o=this.queueLoad(e,t,n,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],o=n[1];this.read(r,o,"read",void 0,void 0,((n,i)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(o," for language ").concat(r," failed"),n),!n&&i&&this.logger.log("".concat(t,"loaded namespace ").concat(o," for language ").concat(r),i),this.loaded(e,n,i)}))}saveMissing(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l={...i,isUpdate:o},c=this.backend.create.bind(this.backend);if(c.length<6)try{let o;o=5===c.length?c(e,t,n,r,l):c(e,t,n,r),o&&"function"===typeof o.then?o.then((e=>a(null,e))).catch(a):a(null,o)}catch(s){a(s)}else c(e,t,n,r,a,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}function Rt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"===typeof e[1]&&(t=e[1]),"string"===typeof e[1]&&(t.defaultValue=e[1]),"string"===typeof e[2]&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Pt(e){return"string"===typeof e.ns&&(e.ns=[e.ns]),"string"===typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"===typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Mt(){}class Dt extends rt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Pt(e),this.services={},this.logger=nt,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"===typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=Rt();function o(e){return e?"function"===typeof e?new e:e:null}if(this.options={...r,...this.options,...Pt(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){let t;this.modules.logger?nt.init(o(this.modules.logger),this.options):nt.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=Ot);const n=new wt(this.options);this.store=new gt(this.options.resources,this.options);const i=this.services;i.logger=nt,i.resourceStore=this.store,i.languageUtils=n,i.pluralResolver=new Ct(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(i.formatter=o(t),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new jt(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Nt(o(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit(t,...r)})),this.modules.languageDetector&&(i.languageDetector=o(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=o(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new bt(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=Mt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const i=ot(),a=()=>{const e=(e,t)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),i}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;const n="string"===typeof e?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=ot();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Mt),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&yt.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=ot();this.emit("languageChanging",e);const o=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(e,i)=>{i?(o(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const n="string"===typeof t?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||o(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{i(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const o=function(e,t){let i;if("object"!==typeof t){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([e,t].concat(s))}else i={...t};i.lng=i.lng||o.lng,i.lngs=i.lngs||o.lngs,i.ns=i.ns||o.ns,i.keyPrefix=i.keyPrefix||n||o.keyPrefix;const c=r.options.keySeparator||".";let u;return u=i.keyPrefix&&Array.isArray(e)?e.map((e=>"".concat(i.keyPrefix).concat(c).concat(e))):i.keyPrefix?"".concat(i.keyPrefix).concat(c).concat(e):e,r.t(u,i)};return"string"===typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,e)||r&&!i(o,e)))}loadNamespaces(e,t){const n=ot();return this.options.ns?("string"===typeof e&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=ot();"string"===typeof e&&(e=[e]);const r=this.options.preload||[],o=e.filter((e=>r.indexOf(e)<0));return o.length?(this.options.preload=r.concat(o),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new wt(Rt());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new Dt(r);void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e));return["store","services","language"].forEach((e=>{o[e]=this[e]})),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n&&(o.store=new gt(this.store.data,r),o.services.resourceStore=o.store),o.translator=new bt(o.services,r),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit(e,...n)})),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Lt=Dt.createInstance();Lt.createInstance=Dt.createInstance;Lt.createInstance,Lt.dir,Lt.init,Lt.loadResources,Lt.reloadResources,Lt.use,Lt.changeLanguage,Lt.getFixedT,Lt.t,Lt.exists,Lt.setDefaultNamespace,Lt.hasLoadedNamespace,Lt.loadNamespaces,Lt.loadLanguages;Lt.use(We).init({resources:{en:{translation:{home:"HOME",signUp:"SIGN UP",magazine:"MAGAZINE",gallery:"GALLERY",artists:"ARTISTS",apply:"APPLY",price:"PRICE",description:"DESCRIPTION",title:"TITLE",materials:"MATERIALS",selectArtist:"SELECT AN ARTIST",dimensions:"DIMENSIONS",upload:"UPLOAD AN IMAGE",createArt:"CREATE ARTWORK",SketchList:"SKETCH LIST",draw:"DRAW",movies:"MOVIES",sketchText:"STEP 1: PRESS U TO UPLOUD AN IMAGE     STEP 2: CLICK OVER THE SKETCH TO START DRAWING YOUR IMAGE",profile:"PROFILE",logout:"LOGOUT",signIn:"SIGN IN",password:"PASSWORD",username:"USERNAME"}},es:{translation:{home:"INICIO",signUp:"CREAR CUENTA",gallery:"GALERIA",artists:"ARTISTAS",apply:"APLICAR",price:"PRECIO",description:"DESCRIPCION",title:"TITULO",materials:"MATERIALES",selectArtist:"SELECCIONA UN ARTISTA",dimensions:"DIMENSIONES",upload:"CARGA UNA IMAGEN",createArt:"CREAR OBRA",creationDate:"FECHA DE CREACION",magazine:"REVISTA",SketchList:"BOCETOS",draw:"DIBUJAR",movies:"PELICULAS",sketchText:"PASO 1: APRIETA U PARA CARGAR UNA IMAGEN     PASO 2: PRESIONA EL CLICK ENCIMA DEL SKETCH Y DIBUJA TU IMAGEN",profile:"PERFIL",logout:"CERRAR SESION",signIn:"INICIAR SESION",password:"CONTRASE\xd1A",username:"NOMBRE DE USUARIO"}}},lng:"en",interpolation:{escapeValue:!1}});const Ft=Lt,Bt=async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/artists/artistDetail/").concat(e));if(t.ok){return await t.json()}return console.error("Error fetching artist details"),null}catch(t){return console.error("Error fetching artist details",t),null}},Ut=()=>{const{t:e}=Ye(),[t,n]=(0,l.useState)([]),[r,o]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/artists/artists"));return await e.json()}catch(e){return console.error("Error at getting artists"),[]}})();n(e),o(!1)}catch(e){console.error("Error fetching artists",e)}})()}),[]),(0,Je.jsxs)("main",{children:[(0,Je.jsxs)("div",{className:"buscador mt-5 mx-auto text-center",children:[(0,Je.jsx)("h1",{className:"title",children:e("artists")}),(0,Je.jsx)("br",{})]}),r?(0,Je.jsx)("div",{className:"loading",children:"Loading..."}):(0,Je.jsx)("div",{className:"artists-container",children:t.map((e=>(0,Je.jsx)("article",{className:"artist",children:(0,Je.jsxs)("div",{className:"image",children:[(0,Je.jsx)(Oe,{to:"/artist/".concat(e.ID),children:(0,Je.jsx)("img",{src:e.Image,alt:e.Name})},e.ID),(0,Je.jsx)("div",{className:"line"}),(0,Je.jsx)("div",{className:"detail",children:(0,Je.jsx)("p",{className:"name",children:e.Name})})]})},e.ID)))})]})},zt=async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/artworks/artworks"));return await e.json()}catch(e){return console.error("Error getting collection",e),[]}},Vt=async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/artists/artists"));return await e.json()}catch(e){return console.error("Error al obtener artistas:",e),[]}},Gt=e=>{let{artistArtworks:t}=e;const[n,r]=(0,l.useState)([]),[o,i]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{(async()=>{try{const e=t||await zt();r(e),i(!1)}catch(e){console.error("Error fetching artworks",e)}})()}),[t]),(0,Je.jsx)(Je.Fragment,{children:o?(0,Je.jsx)("p",{className:"loading",children:"Loading..."}):(0,Je.jsxs)("div",{className:"collection-container",children:[(0,Je.jsx)("br",{}),(0,Je.jsx)("h1",{className:"title",children:"COLLECTION"}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{className:"artworks",children:(0,Je.jsx)("div",{className:"columns-container",children:n&&Array.from({length:Math.ceil(n.length/3)}).map(((e,t)=>(0,Je.jsx)("div",{className:"column",children:n.filter(((e,n)=>n%3===t)).map((e=>(0,Je.jsx)(Oe,{to:"/artwork/".concat(e.ID),children:(0,Je.jsx)("div",{className:"artwork-container",children:(0,Je.jsx)("div",{className:"artwork",children:(0,Je.jsx)("img",{className:"artwork-image",src:e.Image,alt:e.Title})})},e.id)},e.ID)))},t)))})})]})})},Wt=()=>{const[e,t]=(0,l.useState)(null),{id:n}=ie(),[r,o]=(0,l.useState)([]),i=async e=>{try{const n=await Bt(e);t(n);const r=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/artworks/byArtist/").concat(e));return await t.json()}catch(t){return console.error("Error fetching artworks for artist with ID ".concat(e,":"),t),[]}})(e);o(r)}catch(n){console.error("Error fetching artist details",n)}};return(0,l.useEffect)((()=>{console.log("Fetching artist details and artworks..."),n&&i(n)}),[n]),(0,l.useEffect)((()=>{console.log("Artist artworks:",r)}),[r]),e?(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("div",{className:"artistDetailContainer",children:(0,Je.jsxs)("div",{className:"detailsContainer",children:[(0,Je.jsxs)("div",{className:"descriptionContainer",children:[(0,Je.jsx)("h1",{className:"artistName",children:e.Name}),(0,Je.jsx)("p",{className:"artistDescription",children:e.ArtistDescription}),e.User&&(0,Je.jsxs)("div",{className:"userData",children:[(0,Je.jsxs)("p",{children:["Username: ",e.User.Username]}),(0,Je.jsxs)("p",{children:["Email: ",e.User.Email]})]})]}),(0,Je.jsx)("div",{className:"containerImage",children:(0,Je.jsx)("img",{src:e.Image,className:"product1",alt:e.Name})})]})}),(0,Je.jsx)("div",{className:"artistDetailContainer",children:(0,Je.jsx)(Gt,{artistArtworks:r})})]}):(0,Je.jsx)("div",{className:"loading",children:"LOADING..."})},Ht=[{path:"/artists",element:(0,Je.jsx)(Ut,{})},{path:"/artist/:id",element:(0,Je.jsx)(Wt,{})}];function qt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xt}=Object.prototype,{getPrototypeOf:Yt}=Object,Kt=(e=>t=>{const n=Xt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zt=e=>(e=e.toLowerCase(),t=>Kt(t)===e),Qt=e=>t=>typeof t===e,{isArray:Jt}=Array,$t=Qt("undefined");const en=Zt("ArrayBuffer");const tn=Qt("string"),nn=Qt("function"),rn=Qt("number"),on=e=>null!==e&&"object"===typeof e,an=e=>{if("object"!==Kt(e))return!1;const t=Yt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sn=Zt("Date"),ln=Zt("File"),cn=Zt("Blob"),un=Zt("FileList"),dn=Zt("URLSearchParams");function hn(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Jt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function pn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const fn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,mn=e=>!$t(e)&&e!==fn;const gn=(yn="undefined"!==typeof Uint8Array&&Yt(Uint8Array),e=>yn&&e instanceof yn);var yn;const vn=Zt("HTMLFormElement"),bn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),xn=Zt("RegExp"),wn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};hn(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},Sn="abcdefghijklmnopqrstuvwxyz",_n="0123456789",kn={DIGIT:_n,ALPHA:Sn,ALPHA_DIGIT:Sn+Sn.toUpperCase()+_n};const Tn=Zt("AsyncFunction"),En={isArray:Jt,isArrayBuffer:en,isBuffer:function(e){return null!==e&&!$t(e)&&null!==e.constructor&&!$t(e.constructor)&&nn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||nn(e.append)&&("formdata"===(t=Kt(e))||"object"===t&&nn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&en(e.buffer),t},isString:tn,isNumber:rn,isBoolean:e=>!0===e||!1===e,isObject:on,isPlainObject:an,isUndefined:$t,isDate:sn,isFile:ln,isBlob:cn,isRegExp:xn,isFunction:nn,isStream:e=>on(e)&&nn(e.pipe),isURLSearchParams:dn,isTypedArray:gn,isFileList:un,forEach:hn,merge:function e(){const{caseless:t}=mn(this)&&this||{},n={},r=(r,o)=>{const i=t&&pn(n,o)||o;an(n[i])&&an(r)?n[i]=e(n[i],r):an(r)?n[i]=e({},r):Jt(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&hn(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return hn(t,((t,r)=>{n&&nn(t)?e[r]=qt(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Yt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Kt,kindOfTest:Zt,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Jt(e))return e;let t=e.length;if(!rn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:vn,hasOwnProperty:bn,hasOwnProp:bn,reduceDescriptors:wn,freezeMethods:e=>{wn(e,((t,n)=>{if(nn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];nn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Jt(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:pn,global:fn,isContextDefined:mn,ALPHABET:kn,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&nn(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(on(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Jt(e)?[]:{};return hn(e,((e,t)=>{const i=n(e,r+1);!$t(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:Tn,isThenable:e=>e&&(on(e)||nn(e))&&nn(e.then)&&nn(e.catch)};function Cn(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}En.inherits(Cn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:En.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const In=Cn.prototype,jn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{jn[e]={value:e}})),Object.defineProperties(Cn,jn),Object.defineProperty(In,"isAxiosError",{value:!0}),Cn.from=(e,t,n,r,o,i)=>{const a=Object.create(In);return En.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Cn.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const An=Cn;function On(e){return En.isPlainObject(e)||En.isArray(e)}function Nn(e){return En.endsWith(e,"[]")?e.slice(0,-2):e}function Rn(e,t,n){return e?e.concat(t).map((function(e,t){return e=Nn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Pn=En.toFlatObject(En,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Mn=function(e,t,n){if(!En.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=En.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!En.isUndefined(t[e])}))).metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&En.isSpecCompliantForm(t);if(!En.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(En.isDate(e))return e.toISOString();if(!s&&En.isBlob(e))throw new An("Blob is not supported. Use a Buffer instead.");return En.isArrayBuffer(e)||En.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,o){let s=e;if(e&&!o&&"object"===typeof e)if(En.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(En.isArray(e)&&function(e){return En.isArray(e)&&!e.some(On)}(e)||(En.isFileList(e)||En.endsWith(n,"[]"))&&(s=En.toArray(e)))return n=Nn(n),s.forEach((function(e,r){!En.isUndefined(e)&&null!==e&&t.append(!0===a?Rn([n],r,i):null===a?n:n+"[]",l(e))})),!1;return!!On(e)||(t.append(Rn(o,n,i),l(e)),!1)}const u=[],d=Object.assign(Pn,{defaultVisitor:c,convertValue:l,isVisitable:On});if(!En.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!En.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),En.forEach(n,(function(n,i){!0===(!(En.isUndefined(n)||null===n)&&o.call(t,n,En.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function Dn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ln(e,t){this._pairs=[],e&&Mn(e,this,t)}const Fn=Ln.prototype;Fn.append=function(e,t){this._pairs.push([e,t])},Fn.toString=function(e){const t=e?function(t){return e.call(this,t,Dn)}:Dn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Bn=Ln;function Un(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zn(e,t,n){if(!t)return e;const r=n&&n.encode||Un,o=n&&n.serialize;let i;if(i=o?o(t,n):En.isURLSearchParams(t)?t.toString():new Bn(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Vn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){En.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Gn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Bn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Hn="undefined"!==typeof window&&"undefined"!==typeof document,qn=(Xn="undefined"!==typeof navigator&&navigator.product,Hn&&["ReactNative","NativeScript","NS"].indexOf(Xn)<0);var Xn;const Yn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Kn={...e,...Wn};const Zn=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&En.isArray(r)?r.length:i,s)return En.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&En.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&En.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(En.isFormData(e)&&En.isFunction(e.entries)){const n={};return En.forEachEntry(e,((e,r)=>{t(function(e){return En.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Qn={transitional:Gn,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=En.isObject(e);o&&En.isHTMLForm(e)&&(e=new FormData(e));if(En.isFormData(e))return r&&r?JSON.stringify(Zn(e)):e;if(En.isArrayBuffer(e)||En.isBuffer(e)||En.isStream(e)||En.isFile(e)||En.isBlob(e))return e;if(En.isArrayBufferView(e))return e.buffer;if(En.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Mn(e,new Kn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Kn.isNode&&En.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=En.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Mn(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(En.isString(e))try{return(t||JSON.parse)(e),En.trim(e)}catch(pg){if("SyntaxError"!==pg.name)throw pg}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Qn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&En.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(pg){if(n){if("SyntaxError"===pg.name)throw An.from(pg,An.ERR_BAD_RESPONSE,this,null,this.response);throw pg}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kn.classes.FormData,Blob:Kn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};En.forEach(["delete","get","head","post","put","patch"],(e=>{Qn.headers[e]={}}));const Jn=Qn,$n=En.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),er=Symbol("internals");function tr(e){return e&&String(e).trim().toLowerCase()}function nr(e){return!1===e||null==e?e:En.isArray(e)?e.map(nr):String(e)}function rr(e,t,n,r,o){return En.isFunction(r)?r.call(this,t,n):(o&&(t=n),En.isString(t)?En.isString(r)?-1!==t.indexOf(r):En.isRegExp(r)?r.test(t):void 0:void 0)}class or{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=tr(t);if(!o)throw new Error("header name must be a non-empty string");const i=En.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=nr(e))}const i=(e,t)=>En.forEach(e,((e,n)=>o(e,n,t)));return En.isPlainObject(e)||e instanceof this.constructor?i(e,t):En.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&$n[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&o(t,e,n),this}get(e,t){if(e=tr(e)){const n=En.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(En.isFunction(t))return t.call(this,e,n);if(En.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=tr(e)){const n=En.findKey(this,e);return!(!n||void 0===this[n]||t&&!rr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=tr(e)){const o=En.findKey(n,e);!o||t&&!rr(0,n[o],o,t)||(delete n[o],r=!0)}}return En.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!rr(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return En.forEach(this,((r,o)=>{const i=En.findKey(n,o);if(i)return t[i]=nr(r),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();a!==o&&delete t[o],t[a]=nr(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return En.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&En.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[er]=this[er]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=tr(e);t[r]||(!function(e,t){const n=En.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return En.isArray(e)?e.forEach(r):r(e),this}}or.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),En.reduceDescriptors(or.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),En.freezeMethods(or);const ir=or;function ar(e,t){const n=this||Jn,r=t||n,o=ir.from(r.headers);let i=r.data;return En.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function sr(e){return!(!e||!e.__CANCEL__)}function lr(e,t,n){An.call(this,null==e?"canceled":e,An.ERR_CANCELED,t,n),this.name="CanceledError"}En.inherits(lr,An,{__CANCEL__:!0});const cr=lr;const ur=Kn.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];En.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),En.isString(r)&&a.push("path="+r),En.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function dr(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const hr=Kn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=En.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const pr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];o||(o=l),n[i]=s,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};function fr(e,t){let n=0;const r=pr(50,250);return o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-n,l=r(s);n=i;const c={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:o};c[t?"download":"upload"]=!0,e(c)}}const mr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const o=ir.from(e.headers).normalize();let i,a,{responseType:s,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(En.isFormData(r))if(Kn.hasStandardBrowserEnv||Kn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if(!1!==(a=o.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(t+":"+n))}const d=dr(e.baseURL,e.url);function h(){if(!u)return;const r=ir.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new An("Request failed with status code "+n.status,[An.ERR_BAD_REQUEST,An.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:s&&"text"!==s&&"json"!==s?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),zn(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new An("Request aborted",An.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new An("Network Error",An.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Gn;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new An(t,r.clarifyTimeoutError?An.ETIMEDOUT:An.ECONNABORTED,e,u)),u=null},Kn.hasStandardBrowserEnv&&(l&&En.isFunction(l)&&(l=l(e)),l||!1!==l&&hr(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ur.read(e.xsrfCookieName);t&&o.set(e.xsrfHeaderName,t)}void 0===r&&o.setContentType(null),"setRequestHeader"in u&&En.forEach(o.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),En.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&"json"!==s&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",fr(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",fr(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{u&&(n(!t||t.type?new cr(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);p&&-1===Kn.protocols.indexOf(p)?n(new An("Unsupported protocol "+p+":",An.ERR_BAD_REQUEST,e)):u.send(r||null)}))},gr={http:null,xhr:mr};En.forEach(gr,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(pg){}Object.defineProperty(e,"adapterName",{value:t})}}));const yr=e=>"- ".concat(e),vr=e=>En.isFunction(e)||null===e||!1===e,br=e=>{e=En.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!vr(n)&&(r=gr[(t=String(n)).toLowerCase()],void 0===r))throw new An("Unknown adapter '".concat(t,"'"));if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(yr).join("\n"):" "+yr(e[0]):"as no adapter specified";throw new An("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function xr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new cr(null,e)}function wr(e){xr(e),e.headers=ir.from(e.headers),e.data=ar.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return br(e.adapter||Jn.adapter)(e).then((function(t){return xr(e),t.data=ar.call(e,e.transformResponse,t),t.headers=ir.from(t.headers),t}),(function(t){return sr(t)||(xr(e),t&&t.response&&(t.response.data=ar.call(e,e.transformResponse,t.response),t.response.headers=ir.from(t.response.headers))),Promise.reject(t)}))}const Sr=e=>e instanceof ir?e.toJSON():e;function _r(e,t){t=t||{};const n={};function r(e,t,n){return En.isPlainObject(e)&&En.isPlainObject(t)?En.merge.call({caseless:n},e,t):En.isPlainObject(t)?En.merge({},t):En.isArray(t)?t.slice():t}function o(e,t,n){return En.isUndefined(t)?En.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!En.isUndefined(t))return r(void 0,t)}function a(e,t){return En.isUndefined(t)?En.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>o(Sr(e),Sr(t),!0)};return En.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=l[r]||o,a=i(e[r],t[r],r);En.isUndefined(a)&&i!==s||(n[r]=a)})),n}const kr="1.6.5",Tr={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Tr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Er={};Tr.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new An(r(o," has been removed"+(t?" in "+t:"")),An.ERR_DEPRECATED);return t&&!Er[o]&&(Er[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};const Cr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new An("options must be an object",An.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new An("option "+i+" must be "+n,An.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new An("Unknown option "+i,An.ERR_BAD_OPTION)}},validators:Tr},Ir=Cr.validators;class jr{constructor(e){this.defaults=e,this.interceptors={request:new Vn,response:new Vn}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=_r(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Cr.assertOptions(n,{silentJSONParsing:Ir.transitional(Ir.boolean),forcedJSONParsing:Ir.transitional(Ir.boolean),clarifyTimeoutError:Ir.transitional(Ir.boolean)},!1),null!=r&&(En.isFunction(r)?t.paramsSerializer={serialize:r}:Cr.assertOptions(r,{encode:Ir.function,serialize:Ir.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&En.merge(o.common,o[t.method]);o&&En.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=ir.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[wr.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=wr.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return zn(dr((e=_r(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}En.forEach(["delete","get","head","options"],(function(e){jr.prototype[e]=function(t,n){return this.request(_r(n||{},{method:e,url:t,data:(n||{}).data}))}})),En.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(_r(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}jr.prototype[e]=t(),jr.prototype[e+"Form"]=t(!0)}));const Ar=jr;class Or{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new cr(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new Or((function(t){e=t}));return{token:t,cancel:e}}}const Nr=Or;const Rr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rr).forEach((e=>{let[t,n]=e;Rr[n]=t}));const Pr=Rr;const Mr=function e(t){const n=new Ar(t),r=qt(Ar.prototype.request,n);return En.extend(r,Ar.prototype,n,{allOwnKeys:!0}),En.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(_r(t,n))},r}(Jn);Mr.Axios=Ar,Mr.CanceledError=cr,Mr.CancelToken=Nr,Mr.isCancel=sr,Mr.VERSION=kr,Mr.toFormData=Mn,Mr.AxiosError=An,Mr.Cancel=Mr.CanceledError,Mr.all=function(e){return Promise.all(e)},Mr.spread=function(e){return function(t){return e.apply(null,t)}},Mr.isAxiosError=function(e){return En.isObject(e)&&!0===e.isAxiosError},Mr.mergeConfig=_r,Mr.AxiosHeaders=ir,Mr.formToJSON=e=>Zn(En.isHTMLForm(e)?new FormData(e):e),Mr.getAdapter=br,Mr.HttpStatusCode=Pr,Mr.default=Mr;const Dr=Mr;var Lr=function(e,t){return Lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Lr(e,t)};function Fr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Lr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Br=function(){return Br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Br.apply(this,arguments)};function Ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function zr(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function Vr(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Gr,Wr;!function(e){e[e.Entering=0]="Entering",e[e.Present=1]="Present",e[e.Exiting=2]="Exiting"}(Gr||(Gr={})),function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}(Wr||(Wr={}));var Hr=function(){},qr=function(){};function Xr(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function Yr(e){return!!e.touches}var Kr={pageX:0,pageY:0};function Zr(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||Kr;return{x:n[t+"X"],y:n[t+"Y"]}}function Qr(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function Jr(e,t){return void 0===t&&(t="page"),{point:Yr(e)?Zr(e,t):Qr(e,t)}}var $r=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,Jr(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},eo=1/60*1e3,to="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},no="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(to())}),eo)};var ro=!0,oo=!1,io=!1,ao={delta:0,timestamp:0},so=["read","update","preRender","render","postRender"],lo=so.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,o=!1,i=new WeakSet,a={schedule:function(e,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var l=s&&o,c=l?t:n;return a&&i.add(e),-1===c.indexOf(e)&&(c.push(e),l&&o&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),i.delete(e)},process:function(s){var l;if(o=!0,t=(l=[n,t])[0],(n=l[1]).length=0,r=t.length)for(var c=0;c<r;c++){var u=t[c];u(s),i.has(u)&&(a.schedule(u),e())}o=!1}};return a}((function(){return oo=!0})),e}),{}),co=so.reduce((function(e,t){var n=lo[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),oo||mo(),n.schedule(e,t,r)},e}),{}),uo=so.reduce((function(e,t){return e[t]=lo[t].cancel,e}),{}),ho=so.reduce((function(e,t){return e[t]=function(){return lo[t].process(ao)},e}),{}),po=function(e){return lo[e].process(ao)},fo=function(e){oo=!1,ao.delta=ro?eo:Math.max(Math.min(e-ao.timestamp,40),1),ao.timestamp=e,io=!0,so.forEach(po),io=!1,oo&&(ro=!1,no(fo))},mo=function(){oo=!0,ro=!0,io||no(fo)},go=function(){return ao};const yo=co;var vo=function(e){return 1e3*e};function bo(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function xo(e,t,n,r){(0,l.useEffect)((function(){var o=e.current;if(n&&o)return bo(o,t,n,r)}),[e,t,n,r])}var wo="undefined"!==typeof window,So=function(){return wo&&null===window.onpointerdown},_o=function(){return wo&&null===window.ontouchstart},ko=function(){return wo&&null===window.onmousedown},To={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},Eo={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Co(e){return So()?e:_o()?Eo[e]:ko()?To[e]:e}function Io(e,t,n,r){return bo(e,Co(t),$r(n,"pointerdown"===t),r)}function jo(e,t,n,r){return xo(e,Co(t),n&&$r(n,"pointerdown"===t),r)}var Ao=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Oo=function(e){return Ao(e)&&e.hasOwnProperty("z")},No=function(e){return"number"===typeof e},Ro=function(e,t){return Math.abs(e-t)};function Po(e,t){if(No(e)&&No(t))return Ro(e,t);if(Ao(e)&&Ao(t)){var n=Ro(e.x,t.x),r=Ro(e.y,t.y),o=Oo(e)&&Oo(t)?Ro(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2))}}var Mo=function(e,t){return function(n){return t(e(n))}},Do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(Mo)},Lo=function(){function e(e,t,n){var r=this,o=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=Uo(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=Po(e.offset,{x:0,y:0})>=3;if(t||n){var o=e.point,i=go().timestamp;r.history.push(Br(Br({},o),{timestamp:i}));var a=r.handlers,s=a.onStart,l=a.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=Fo(t,r.transformPagePoint),Xr(e)&&0===e.buttons?r.handlePointerUp(e,t):yo.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,o=n.onEnd,i=n.onSessionEnd,a=Uo(Fo(t,r.transformPagePoint),r.history);r.startEvent&&o&&o(e,a),i&&i(e,a)},!(Yr(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=o;var i=Fo(Jr(e),this.transformPagePoint),a=i.point,s=go().timestamp;this.history=[Br(Br({},a),{timestamp:s})];var l=t.onSessionStart;l&&l(e,Uo(i,this.history)),this.removeListeners=Do(Io(window,"pointermove",this.handlePointerMove),Io(window,"pointerup",this.handlePointerUp),Io(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),uo.update(this.updatePoint)},e}();function Fo(e,t){return t?{point:t(e.point)}:e}function Bo(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Uo(e,t){var n=e.point;return{point:n,delta:Bo(n,Vo(t)),offset:Bo(n,zo(t)),velocity:Go(t,.1)}}function zo(e){return e[0]}function Vo(e){return e[e.length-1]}function Go(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,o=Vo(e);n>=0&&(r=e[n],!(o.timestamp-r.timestamp>vo(t)));)n--;if(!r)return{x:0,y:0};var i=(o.timestamp-r.timestamp)/1e3;if(0===i)return{x:0,y:0};var a={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Wo(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Ho=Wo("dragHorizontal"),qo=Wo("dragVertical");function Xo(e){var t=!1;if("y"===e)t=qo();else if("x"===e)t=Ho();else{var n=Ho(),r=qo();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function Yo(){var e=Xo(!0);return!e||(e(),!1)}function Ko(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Zo(e){return e}function Qo(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}var Jo={translate:0,scale:1,origin:0,originPoint:0};function $o(){return{x:Br({},Jo),y:Br({},Jo)}}function ei(e){return[e("x"),e("y")]}var ti=function(e,t,n){return-n*e+n*t+e};function ni(e,t,n){var r=t.min,o=t.max;return void 0!==r&&e<r?e=n?ti(r,e,n.min):Math.max(e,r):void 0!==o&&e>o&&(e=n?ti(o,e,n.max):Math.min(e,o)),e}function ri(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function oi(e,t){var n,r=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=zr([o,r],2))[0],o=n[1]),{min:e.min+r,max:e.min+o}}function ii(e,t,n){return{min:ai(e,t),max:ai(e,n)}}function ai(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function si(e,t){return Qo(function(e,t){var n=e.top,r=e.left,o=e.bottom,i=e.right;void 0===t&&(t=Zo);var a=t({x:r,y:n}),s=t({x:i,y:o});return{top:a.y,left:a.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}var li=function(e,t,n){return Math.min(Math.max(n,e),t)},ci=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r};function ui(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),Po(e,t)<n}function di(e){return e.max-e.min}function hi(e,t){var n=.5,r=di(e),o=di(t);return o>r?n=ci(t.min,t.max-r,e.min):r>o&&(n=ci(e.min,e.max-o,t.min)),function(e){return li(0,1,e)}(n)}function pi(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=ti(t.min,t.max,e.origin),e.scale=di(n)/di(t),ui(e.scale,1,1e-4)&&(e.scale=1),e.translate=ti(n.min,n.max,e.origin)-e.originPoint,ui(e.translate)&&(e.translate=0)}function fi(e,t,n,r){pi(e.x,t.x,n.x,mi(r.originX)),pi(e.y,t.y,n.y,mi(r.originY))}function mi(e){return"number"===typeof e?e:.5}function gi(e,t,n){e.min=n.min+t.min,e.max=e.min+di(t)}var yi=.001,vi=.01,bi=10,xi=.05,wi=1;function Si(e){var t,n,r=e.duration,o=void 0===r?800:r,i=e.bounce,a=void 0===i?.25:i,s=e.velocity,l=void 0===s?0:s,c=e.mass,u=void 0===c?1:c;Hr(o<=1e3*bi,"Spring duration must be 10 seconds or less");var d=1-a;d=li(xi,wi,d),o=li(vi,bi,o/1e3),d<1?(t=function(e){var t=e*d,n=t*o,r=t-l,i=ki(e,d),a=Math.exp(-n);return yi-r/i*a},n=function(e){var n=e*d*o,r=n*l+l,i=Math.pow(d,2)*Math.pow(e,2)*o,a=Math.exp(-n),s=ki(Math.pow(e,2),d);return(-t(e)+yi>0?-1:1)*((r-i)*a)/s}):(t=function(e){return Math.exp(-e*o)*((e-l)*o+1)-yi},n=function(e){return Math.exp(-e*o)*(o*o*(l-e))});var h=function(e,t,n){for(var r=n,o=1;o<_i;o++)r-=e(r)/t(r);return r}(t,n,5/o);if(o*=1e3,isNaN(h))return{stiffness:100,damping:10,duration:o};var p=Math.pow(h,2)*u;return{stiffness:p,damping:2*d*Math.sqrt(u*p),duration:o}}var _i=12;function ki(e,t){return e*Math.sqrt(1-t*t)}var Ti=["duration","bounce"],Ei=["stiffness","damping","mass"];function Ci(e,t){return t.some((function(t){return void 0!==e[t]}))}function Ii(e){var t=e.from,n=void 0===t?0:t,r=e.to,o=void 0===r?1:r,i=e.restSpeed,a=void 0===i?2:i,s=e.restDelta,l=Ur(e,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},u=function(e){var t=Br({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Ci(e,Ei)&&Ci(e,Ti)){var n=Si(e);(t=Br(Br(Br({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(l),d=u.stiffness,h=u.damping,p=u.mass,f=u.velocity,m=u.duration,g=u.isResolvedFromDuration,y=ji,v=ji;function b(){var e=f?-f/1e3:0,t=o-n,r=h/(2*Math.sqrt(d*p)),i=Math.sqrt(d/p)/1e3;if(null!==s&&void 0!==s||(s=Math.abs(o-n)<=1?.01:.4),r<1){var a=ki(i,r);y=function(n){var s=Math.exp(-r*i*n);return o-s*((e+r*i*t)/a*Math.sin(a*n)+t*Math.cos(a*n))},v=function(n){var o=Math.exp(-r*i*n);return r*i*o*(Math.sin(a*n)*(e+r*i*t)/a+t*Math.cos(a*n))-o*(Math.cos(a*n)*(e+r*i*t)-a*t*Math.sin(a*n))}}else if(1===r)y=function(n){return o-Math.exp(-i*n)*(t+(e+i*t)*n)};else{var l=i*Math.sqrt(r*r-1);y=function(n){var a=Math.exp(-r*i*n),s=Math.min(l*n,300);return o-a*((e+r*i*t)*Math.sinh(s)+l*t*Math.cosh(s))/l}}}return b(),{next:function(e){var t=y(e);if(g)c.done=e>=m;else{var n=1e3*v(e),r=Math.abs(n)<=a,i=Math.abs(o-t)<=s;c.done=r&&i}return c.value=c.done?o:t,c},flipTarget:function(){var e;f=-f,n=(e=[o,n])[0],o=e[1],b()}}}Ii.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var ji=function(e){return 0},Ai=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Oi=function(e){return e%1?Number(e.toFixed(5)):e},Ni=/(-)?([\d]*\.?[\d])+/g,Ri=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Pi=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Mi(e){return"string"===typeof e}var Di={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Li=Br(Br({},Di),{transform:Ai(0,1)}),Fi=Br(Br({},Di),{default:1}),Bi=function(e,t){return function(n){return Boolean(Mi(n)&&Pi.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},Ui=function(e,t,n){return function(r){var o;if(!Mi(r))return r;var i=r.match(Ni),a=i[0],s=i[1],l=i[2],c=i[3];return(o={})[e]=parseFloat(a),o[t]=parseFloat(s),o[n]=parseFloat(l),o.alpha=void 0!==c?parseFloat(c):1,o}},zi=Ai(0,255),Vi=Br(Br({},Di),{transform:function(e){return Math.round(zi(e))}}),Gi={test:Bi("rgb","red"),parse:Ui("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,o=e.alpha,i=void 0===o?1:o;return"rgba("+Vi.transform(t)+", "+Vi.transform(n)+", "+Vi.transform(r)+", "+Oi(Li.transform(i))+")"}};var Wi={test:Bi("#"),parse:function(e){var t="",n="",r="",o="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),o=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),o=e.substr(4,1),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}},transform:Gi.transform},Hi=function(e){return{test:function(t){return Mi(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},qi=Hi("deg"),Xi=Hi("%"),Yi=Hi("px"),Ki=Hi("vh"),Zi=Hi("vw"),Qi=Br(Br({},Xi),{parse:function(e){return Xi.parse(e)/100},transform:function(e){return Xi.transform(100*e)}}),Ji={test:Bi("hsl","hue"),parse:Ui("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,o=e.alpha,i=void 0===o?1:o;return"hsla("+Math.round(t)+", "+Xi.transform(Oi(n))+", "+Xi.transform(Oi(r))+", "+Oi(Li.transform(i))+")"}},$i=function(e,t,n){var r=e*e,o=t*t;return Math.sqrt(Math.max(0,n*(o-r)+r))},ea=[Wi,Gi,Ji],ta=function(e){return ea.find((function(t){return t.test(e)}))},na=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},ra=function(e,t){var n=ta(e),r=ta(t);qr(!!n,na(e)),qr(!!r,na(t)),qr(n.transform===r.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var o=n.parse(e),i=r.parse(t),a=Br({},o),s=n===Ji?ti:$i;return function(e){for(var t in a)"alpha"!==t&&(a[t]=s(o[t],i[t],e));return a.alpha=ti(o.alpha,i.alpha,e),n.transform(a)}},oa={test:function(e){return Gi.test(e)||Wi.test(e)||Ji.test(e)},parse:function(e){return Gi.test(e)?Gi.parse(e):Ji.test(e)?Ji.parse(e):Wi.parse(e)},transform:function(e){return Mi(e)?e:e.hasOwnProperty("red")?Gi.transform(e):Ji.transform(e)}},ia="${c}",aa="${n}";function sa(e){var t=[],n=0,r=e.match(Ri);r&&(n=r.length,e=e.replace(Ri,ia),t.push.apply(t,r.map(oa.parse)));var o=e.match(Ni);return o&&(e=e.replace(Ni,aa),t.push.apply(t,o.map(Di.parse))),{values:t,numColors:n,tokenised:e}}function la(e){return sa(e).values}function ca(e){var t=sa(e),n=t.values,r=t.numColors,o=t.tokenised,i=n.length;return function(e){for(var t=o,n=0;n<i;n++)t=t.replace(n<r?ia:aa,n<r?oa.transform(e[n]):Oi(e[n]));return t}}var ua=function(e){return"number"===typeof e?0:e};var da={test:function(e){var t,n,r,o;return isNaN(e)&&Mi(e)&&(null!==(n=null===(t=e.match(Ni))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(o=null===(r=e.match(Ri))||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0},parse:la,createTransformer:ca,getAnimatableNone:function(e){var t=la(e);return ca(e)(t.map(ua))}};function ha(e,t){return No(e)?function(n){return ti(e,t,n)}:oa.test(e)?ra(e,t):ga(e,t)}var pa=function(e,t){var n=Vr([],e),r=n.length,o=e.map((function(e,n){return ha(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=o[t](e);return n}},fa=function(e,t){var n=Br(Br({},e),t),r={};for(var o in n)void 0!==e[o]&&void 0!==t[o]&&(r[o]=ha(e[o],t[o]));return function(e){for(var t in r)n[t]=r[t](e);return n}};function ma(e){for(var t=da.parse(e),n=t.length,r=0,o=0,i=0,a=0;a<n;a++)r||"number"===typeof t[a]?r++:void 0!==t[a].hue?i++:o++;return{parsed:t,numNumbers:r,numRGB:o,numHSL:i}}var ga=function(e,t){var n=da.createTransformer(t),r=ma(e),o=ma(t);return qr(r.numHSL===o.numHSL&&r.numRGB===o.numRGB&&r.numNumbers>=o.numNumbers,"Complex values '"+e+"' and '"+t+"' too different to mix. Ensure all colors are of the same type."),Do(pa(r.parsed,o.parsed),n)},ya=function(e,t){return function(n){return ti(e,t,n)}};function va(e,t,n){for(var r=[],o=n||function(e){return"number"===typeof e?ya:"string"===typeof e?oa.test(e)?ra:ga:Array.isArray(e)?pa:"object"===typeof e?fa:void 0}(e[0]),i=e.length-1,a=0;a<i;a++){var s=o(e[a],e[a+1]);if(t){var l=Array.isArray(t)?t[a]:t;s=Do(l,s)}r.push(s)}return r}function ba(e,t,n){var r=void 0===n?{}:n,o=r.clamp,i=void 0===o||o,a=r.ease,s=r.mixer,l=e.length;qr(l===t.length,"Both input and output ranges must be the same length"),qr(!a||!Array.isArray(a)||a.length===l-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[l-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var c=va(t,a,s),u=2===l?function(e,t){var n=e[0],r=e[1],o=t[0];return function(e){return o(ci(n,r,e))}}(e,c):function(e,t){var n=e.length,r=n-1;return function(o){var i=0,a=!1;if(o<=e[0]?a=!0:o>=e[r]&&(i=r-1,a=!0),!a){for(var s=1;s<n&&!(e[s]>o||s===r);s++);i=s-1}var l=ci(e[i],e[i+1],o);return t[i](l)}}(e,c);return i?function(t){return u(li(e[0],e[l-1],t))}:u}var xa,wa=function(e){return function(t){return 1-e(1-t)}},Sa=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},_a=function(e){return function(t){return t*t*((e+1)*t-e)}},ka=function(e){return e},Ta=(xa=2,function(e){return Math.pow(e,xa)}),Ea=wa(Ta),Ca=Sa(Ta),Ia=function(e){return 1-Math.sin(Math.acos(e))},ja=wa(Ia),Aa=Sa(ja),Oa=_a(1.525),Na=wa(Oa),Ra=Sa(Oa),Pa=function(e){var t=_a(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),Ma=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},Da=wa(Ma);function La(e,t){return e.map((function(){return t||Ca})).splice(0,e.length-1)}function Fa(e){var t=e.from,n=void 0===t?0:t,r=e.to,o=void 0===r?1:r,i=e.ease,a=e.offset,s=e.duration,l=void 0===s?300:s,c={done:!1,value:n},u=Array.isArray(o)?o:[n,o],d=function(e,t){return e.map((function(e){return e*t}))}(a&&a.length===u.length?a:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(u),l);function h(){return ba(d,u,{ease:Array.isArray(i)?i:La(u,i)})}var p=h();return{next:function(e){return c.value=p(e),c.done=e>=l,c},flipTarget:function(){u.reverse(),p=h()}}}var Ba={keyframes:Fa,spring:Ii,decay:function(e){var t=e.velocity,n=void 0===t?0:t,r=e.from,o=void 0===r?0:r,i=e.power,a=void 0===i?.8:i,s=e.timeConstant,l=void 0===s?350:s,c=e.restDelta,u=void 0===c?.5:c,d=e.modifyTarget,h={done:!1,value:o},p=a*n,f=o+p,m=void 0===d?f:d(f);return m!==f&&(p=m-o),{next:function(e){var t=-p*Math.exp(-e/l);return h.done=!(t>u||t<-u),h.value=h.done?m:m+t,h},flipTarget:function(){}}}};function Ua(e,t,n){return void 0===n&&(n=0),e-t-n}var za=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return yo.update(t,!0)},stop:function(){return uo.update(t)}}};function Va(e){var t,n,r,o,i,a=e.from,s=e.autoplay,l=void 0===s||s,c=e.driver,u=void 0===c?za:c,d=e.elapsed,h=void 0===d?0:d,p=e.repeat,f=void 0===p?0:p,m=e.repeatType,g=void 0===m?"loop":m,y=e.repeatDelay,v=void 0===y?0:y,b=e.onPlay,x=e.onStop,w=e.onComplete,S=e.onRepeat,_=e.onUpdate,k=Ur(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),T=k.to,E=0,C=k.duration,I=!1,j=!0,A=function(e){if(Array.isArray(e.to))return Fa;if(Ba[e.type])return Ba[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?Fa:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Ii:Fa}(k);(null===(n=(t=A).needsInterpolation)||void 0===n?void 0:n.call(t,a,T))&&(i=ba([0,100],[a,T],{clamp:!1}),a=0,T=100);var O=A(Br(Br({},k),{from:a,to:T}));function N(){E++,"reverse"===g?h=function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?Ua(t+-e,t,n):t-(e-t)+n}(h,C,v,j=E%2===0):(h=Ua(h,C,v),"mirror"===g&&O.flipTarget()),I=!1,S&&S()}function R(e){if(j||(e=-e),h+=e,!I){var t=O.next(Math.max(0,h));o=t.value,i&&(o=i(o)),I=j?t.done:h<=0}null===_||void 0===_||_(o),I&&(0===E&&(null!==C&&void 0!==C||(C=h)),E<f?function(e,t,n,r){return r?e>=t+n:e<=-n}(h,C,v,j)&&N():(r.stop(),w&&w()))}return l&&(null===b||void 0===b||b(),(r=u(R)).start()),{stop:function(){null===x||void 0===x||x(),r.stop()}}}function Ga(e,t){return t?e*(1e3/t):0}var Wa=function(e,t){return 1-3*t+3*e},Ha=function(e,t){return 3*t-6*e},qa=function(e){return 3*e},Xa=function(e,t,n){return((Wa(t,n)*e+Ha(t,n))*e+qa(t))*e},Ya=function(e,t,n){return 3*Wa(t,n)*e*e+2*Ha(t,n)*e+qa(t)},Ka=1e-7,Za=10;var Qa=8;var Ja=.1;function $a(e,t,n,r){if(e===t&&n===r)return ka;for(var o=new Float32Array(11),i=0;i<11;++i)o[i]=Xa(i*Ja,e,n);function a(t){for(var r=0,i=1;10!==i&&o[i]<=t;++i)r+=Ja;--i;var a=r+(t-o[i])/(o[i+1]-o[i])*Ja,s=Ya(a,e,n);return s>=.001?function(e,t,n,r){for(var o=0;o<Qa;++o){var i=Ya(t,n,r);if(0===i)return t;t-=(Xa(t,n,r)-e)/i}return t}(t,a,e,n):0===s?a:function(e,t,n,r,o){var i,a,s=0;do{(i=Xa(a=t+(n-t)/2,r,o)-e)>0?n=a:t=a}while(Math.abs(i)>Ka&&++s<Za);return a}(t,r,r+Ja,e,n)}return function(e){return 0===e||1===e?e:Xa(a(e),t,r)}}var es={linear:ka,easeIn:Ta,easeInOut:Ca,easeOut:Ea,circIn:Ia,circInOut:Aa,circOut:ja,backIn:Oa,backInOut:Ra,backOut:Na,anticipate:Pa,bounceIn:Da,bounceInOut:function(e){return e<.5?.5*(1-Ma(1-2*e)):.5*Ma(2*e-1)+.5},bounceOut:Ma},ts=function(e){if(Array.isArray(e)){qr(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=zr(e,4);return $a(t[0],t[1],t[2],t[3])}return"string"===typeof e?(qr(void 0!==es[e],"Invalid easing type '"+e+"'"),es[e]):e},ns=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},rs=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!da.test(t)||t.startsWith("url(")))},os=function(e){return Array.isArray(e)},is=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},as=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},ss=function(){return{type:"keyframes",ease:"linear",duration:.3}},ls=function(e){return{type:"keyframes",duration:.8,values:e}},cs={x:is,y:is,z:is,rotate:is,rotateX:is,rotateY:is,rotateZ:is,scaleX:as,scaleY:as,scale:as,opacity:ss,backgroundColor:ss,color:ss,default:as},us=function(e,t){var n;return n=os(t)?ls:cs[e]||cs.default,Br({to:t},n(t))},ds=new Set(["brightness","contrast","saturate","opacity"]);function hs(e){var t=e.slice(0,-1).split("("),n=t[0],r=t[1];if("drop-shadow"===n)return e;var o=(r.match(Ni)||[])[0];if(!o)return e;var i=r.replace(o,""),a=ds.has(n)?1:0;return o!==r&&(a*=100),n+"("+a+i+")"}var ps=/([a-z-]*)\(.*?\)/g,fs=Br(Br({},da),{getAnimatableNone:function(e){var t=e.match(ps);return t?t.map(hs).join(" "):e}}),ms=Br(Br({},Di),{transform:Math.round}),gs={borderWidth:Yi,borderTopWidth:Yi,borderRightWidth:Yi,borderBottomWidth:Yi,borderLeftWidth:Yi,borderRadius:Yi,radius:Yi,borderTopLeftRadius:Yi,borderTopRightRadius:Yi,borderBottomRightRadius:Yi,borderBottomLeftRadius:Yi,width:Yi,maxWidth:Yi,height:Yi,maxHeight:Yi,size:Yi,top:Yi,right:Yi,bottom:Yi,left:Yi,padding:Yi,paddingTop:Yi,paddingRight:Yi,paddingBottom:Yi,paddingLeft:Yi,margin:Yi,marginTop:Yi,marginRight:Yi,marginBottom:Yi,marginLeft:Yi,rotate:qi,rotateX:qi,rotateY:qi,rotateZ:qi,scale:Fi,scaleX:Fi,scaleY:Fi,scaleZ:Fi,skew:qi,skewX:qi,skewY:qi,distance:Yi,translateX:Yi,translateY:Yi,translateZ:Yi,x:Yi,y:Yi,z:Yi,perspective:Yi,transformPerspective:Yi,opacity:Li,originX:Qi,originY:Qi,originZ:Yi,zIndex:ms,fillOpacity:Li,strokeOpacity:Li,numOctaves:ms},ys=Br(Br({},gs),{color:oa,backgroundColor:oa,outlineColor:oa,fill:oa,stroke:oa,borderColor:oa,borderTopColor:oa,borderRightColor:oa,borderBottomColor:oa,borderLeftColor:oa,filter:fs,WebkitFilter:fs}),vs=function(e){return ys[e]};function bs(e,t){var n,r=vs(e);return r!==fs&&(r=da),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var xs,ws=!1;function Ss(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Vr([],zr(e.to)),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=Ur(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=Br(Br({},e),us(n,t.to))),Br(Br({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,o=e.flip,i=e.loop,a=Ur(e,["ease","times","yoyo","flip","loop"]),s=Br({},a);return n&&(s.offset=n),a.duration&&(s.duration=vo(a.duration)),a.repeatDelay&&(s.repeatDelay=vo(a.repeatDelay)),t&&(s.ease=ns(t)?t.map(ts):ts(t)),"tween"===a.type&&(s.type="keyframes"),(r||i||o)&&(Hr(!ws,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),ws=!0,r?s.repeatType="reverse":i?s.repeatType="loop":o&&(s.repeatType="mirror"),s.repeat=i||r||o||a.repeat),"spring"!==a.type&&(s.type="keyframes"),s}(e))}function _s(e,t,n,r,o){var i,a=Es(r,e),s=null!==(i=a.from)&&void 0!==i?i:t.get(),l=rs(e,n);"none"===s&&l&&"string"===typeof n?s=bs(e,n):ks(s)&&"string"===typeof n?s=Ts(n):!Array.isArray(n)&&ks(n)&&"string"===typeof s&&(n=Ts(s));var c=rs(e,s);return Hr(c===l,"You are trying to animate "+e+' from "'+s+'" to "'+n+'". '+s+" is not an animatable value - to enable this animation set "+s+" to a value animatable to "+n+" via the `style` property."),c&&l&&!1!==a.type?function(){var r={from:s,to:n,velocity:t.getVelocity(),onComplete:o,onUpdate:function(e){return t.set(e)}};return"inertia"===a.type||"decay"===a.type?function(e){var t,n=e.from,r=void 0===n?0:n,o=e.velocity,i=void 0===o?0:o,a=e.min,s=e.max,l=e.power,c=void 0===l?.8:l,u=e.timeConstant,d=void 0===u?750:u,h=e.bounceStiffness,p=void 0===h?500:h,f=e.bounceDamping,m=void 0===f?10:f,g=e.restDelta,y=void 0===g?1:g,v=e.modifyTarget,b=e.driver,x=e.onUpdate,w=e.onComplete;function S(e){return void 0!==a&&e<a||void 0!==s&&e>s}function _(e){return void 0===a?s:void 0===s||Math.abs(a-e)<Math.abs(s-e)?a:s}function k(e){null===t||void 0===t||t.stop(),t=Va(Br(Br({},e),{driver:b,onUpdate:function(t){var n;null===x||void 0===x||x(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:w}))}function T(e){k(Br({type:"spring",stiffness:p,damping:m,restDelta:y},e))}if(S(r))T({from:r,velocity:i,to:_(r)});else{var E=c*i+r;"undefined"!==typeof v&&(E=v(E));var C,I,j=_(E),A=j===a?-1:1;k({type:"decay",from:r,velocity:i,timeConstant:d,power:c,restDelta:y,modifyTarget:v,onUpdate:S(E)?function(e){C=I,I=e,i=Ga(e-C,go().delta),(1===A&&e>j||-1===A&&e<j)&&T({from:e,to:j,velocity:i})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}(Br(Br({},r),a)):Va(Br(Br({},Ss(a,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=a.onUpdate)||void 0===t||t.call(a,e)},onComplete:function(){var e;r.onComplete(),null===(e=a.onComplete)||void 0===e||e.call(a)}}))}:function(){var e;return t.set(n),o(),null===(e=null===a||void 0===a?void 0:a.onComplete)||void 0===e||e.call(a),{stop:function(){}}}}function ks(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function Ts(e){return"number"===typeof e?0:bs("",e)}function Es(e,t){return e[t]||e.default||e}function Cs(e,t,n,r){return void 0===r&&(r={}),t.start((function(o){var i,a,s=_s(e,t,n,r,o),l=function(e,t){var n;return null!==(n=(Es(e,t)||{}).delay)&&void 0!==n?n:0}(r,e),c=function(){return a=s()};return l?i=setTimeout(c,vo(l)):c(),function(){clearTimeout(i),null===a||void 0===a||a.stop()}}))}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.Exit="exit"}(xs||(xs={}));var Is=function(e,t){return e.depth-t.depth};function js(e){return e.projection.isEnabled||e.shouldResetTransform()}function As(e,t){void 0===t&&(t=[]);var n=e.parent;return n&&As(n,t),js(e)&&t.push(e),t}function Os(e){if(!e.shouldResetTransform()){var t,n=e.getLayoutState();e.notifyBeforeLayoutMeasure(n.layout),n.isHydrated=!0,n.layout=e.measureViewportBox(),n.layoutCorrected=(t=n.layout,{x:Br({},t.x),y:Br({},t.y)}),e.notifyLayoutMeasure(n.layout,e.prevViewportBox||n.layout),yo.update((function(){return e.rebaseProjectionTarget()}))}}function Ns(e){e.shouldResetTransform()||(e.prevViewportBox=e.measureViewportBox(!1),e.rebaseProjectionTarget(!1,e.prevViewportBox))}function Rs(e,t){return{min:t.min-e.min,max:t.max-e.min}}function Ps(e,t){return{x:Rs(e.x,t.x),y:Rs(e.y,t.y)}}function Ms(e){var t=e.getProps(),n=t.drag,r=t._dragX;return n&&!r}function Ds(e,t){e.min=t.min,e.max=t.max}function Ls(e,t,n){return n+t*(e-n)}function Fs(e,t,n,r,o){return void 0!==o&&(e=Ls(e,o,r)),Ls(e,n,r)+t}function Bs(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),e.min=Fs(e.min,t,n,r,o),e.max=Fs(e.max,t,n,r,o)}function Us(e,t){var n=t.x,r=t.y;Bs(e.x,n.translate,n.scale,n.originPoint),Bs(e.y,r.translate,r.scale,r.originPoint)}function zs(e,t,n,r){var o=zr(r,3),i=o[0],a=o[1],s=o[2];e.min=t.min,e.max=t.max;var l=void 0!==n[s]?n[s]:.5,c=ti(t.min,t.max,l);Bs(e,n[i],n[a],c,n.scale)}var Vs=["x","scaleX","originX"],Gs=["y","scaleY","originY"];function Ws(e,t,n){zs(e.x,t.x,n,Vs),zs(e.y,t.y,n,Gs)}function Hs(e,t,n,r,o){return e=Ls(e-=t,1/n,r),void 0!==o&&(e=Ls(e,1/o,r)),e}function qs(e,t,n){var r=zr(n,3),o=r[0],i=r[1],a=r[2];!function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5);var i=ti(e.min,e.max,r)-t;e.min=Hs(e.min,t,n,i,o),e.max=Hs(e.max,t,n,i,o)}(e,t[o],t[i],t[a],t.scale)}function Xs(e,t){qs(e.x,t,Vs),qs(e.y,t,Gs)}var Ys=new Set;function Ks(e,t,n){e[n]||(e[n]=[]),e[n].push(t)}function Zs(e){return Ys.add(e),function(){return Ys.delete(e)}}function Qs(){if(Ys.size){var e=0,t=[[]],n=[],r=function(n){return Ks(t,n,e)},o=function(t){Ks(n,t,e),e++};Ys.forEach((function(t){t(r,o),e=0})),Ys.clear();for(var i=n.length,a=0;a<=i;a++)t[a]&&t[a].forEach($s),n[a]&&n[a].forEach($s)}}var Js,$s=function(e){return e()},el=new WeakMap,tl=function(){function e(e){var t=e.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic={x:{min:0,max:1},y:{min:0,max:1}},this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=t,this.visualElement.enableLayoutProjection(),el.set(t,this)}return e.prototype.start=function(e,t){var n=this,r=void 0===t?{}:t,o=r.snapToCursor,i=void 0!==o&&o,a=r.cursorProgress,s=this.props.transformPagePoint;this.panSession=new Lo(e,{onSessionStart:function(e){var t;n.stopMotion();var r=function(e){return Jr(e,"client")}(e).point;null===(t=n.cancelLayout)||void 0===t||t.call(n),n.cancelLayout=Zs((function(e,t){var o=As(n.visualElement),s=function(e){var t=[],n=function(e){js(e)&&t.push(e),e.children.forEach(n)};return e.children.forEach(n),t.sort(Is)}(n.visualElement),l=Vr(Vr([],zr(o)),zr(s)),c=!1;n.isLayoutDrag()&&n.visualElement.lockProjectionTarget(),t((function(){l.forEach((function(e){return e.resetTransform()}))})),e((function(){Os(n.visualElement),s.forEach(Os)})),t((function(){l.forEach((function(e){return e.restoreTransform()})),i&&(c=n.snapToCursor(r))})),e((function(){Boolean(n.getAxisMotionValue("x")&&!n.isExternalDrag())||n.visualElement.rebaseProjectionTarget(!0,n.visualElement.measureViewportBox(!1)),n.visualElement.scheduleUpdateLayoutProjection();var e=n.visualElement.projection;ei((function(t){if(!c){var o=e.target[t],i=o.min,s=o.max;n.cursorProgress[t]=a?a[t]:ci(i,s,r[t])}var l=n.getAxisMotionValue(t);l&&(n.originPoint[t]=l.get())}))})),t((function(){ho.update(),ho.preRender(),ho.render(),ho.postRender()})),e((function(){return n.resolveDragConstraints()}))}))},onStart:function(e,t){var r,o,i,a=n.props,s=a.drag,l=a.dragPropagation;(!s||l||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Xo(s),n.openGlobalLock))&&(Qs(),n.isDragging=!0,n.currentDirection=null,null===(o=(r=n.props).onDragStart)||void 0===o||o.call(r,e,t),null===(i=n.visualElement.animationState)||void 0===i||i.setActive(xs.Drag,!0))},onMove:function(e,t){var r,o,i,a,s=n.props,l=s.dragPropagation,c=s.dragDirectionLock;if(l||n.openGlobalLock){var u=t.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(u),void(null!==n.currentDirection&&(null===(o=(r=n.props).onDirectionLock)||void 0===o||o.call(r,n.currentDirection)));n.updateAxis("x",t.point,u),n.updateAxis("y",t.point,u),null===(a=(i=n.props).onDrag)||void 0===a||a.call(i,e,t),Js=e}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:s})},e.prototype.resolveDragConstraints=function(){var e=this,t=this.props,n=t.dragConstraints,r=t.dragElastic,o=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(Ko(n)?this.resolveRefConstraints(o,n):function(e,t){var n=t.top,r=t.left,o=t.bottom,i=t.right;return{x:ri(e.x,r,i),y:ri(e.y,n,o)}}(o,n)),this.elastic=function(e){return!1===e?e=0:!0===e&&(e=.35),{x:ii(e,"left","right"),y:ii(e,"top","bottom")}}(r),this.constraints&&!this.hasMutatedConstraints&&ei((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(o[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(e,t){var n=this.props,r=n.onMeasureDragConstraints,o=n.transformPagePoint,i=t.current;qr(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop."),this.constraintsBox=si(i,o);var a=function(e,t){return{x:oi(e.x,t.x),y:oi(e.y,t.y)}}(e,this.constraintsBox);if(r){var s=r(function(e){var t=e.x,n=e.y;return{top:n.min,bottom:n.max,left:t.min,right:t.max}}(a));this.hasMutatedConstraints=!!s,s&&(a=Qo(s))}return a},e.prototype.cancelDrag=function(){var e,t;this.visualElement.unlockProjectionTarget(),null===(e=this.cancelLayout)||void 0===e||e.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(xs.Drag,!1)},e.prototype.stop=function(e,t){var n,r,o;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var i=this.isDragging;if(this.cancelDrag(),i){var a=t.velocity;this.animateDragEnd(a),null===(o=(r=this.props).onDragEnd)||void 0===o||o.call(r,e,t)}},e.prototype.snapToCursor=function(e){var t=this;return ei((function(n){if(nl(n,t.props.drag,t.currentDirection)){var r=t.getAxisMotionValue(n);if(!r)return t.cursorProgress[n]=.5,!0;var o=t.visualElement.getLayoutState().layout,i=o[n].max-o[n].min,a=o[n].min+i/2,s=e[n]-a;t.originPoint[n]=e[n],r.set(s)}})).includes(!0)},e.prototype.updateAxis=function(e,t,n){if(nl(e,this.props.drag,this.currentDirection))return this.getAxisMotionValue(e)?this.updateAxisMotionValue(e,n):this.updateVisualElementAxis(e,t)},e.prototype.updateAxisMotionValue=function(e,t){var n=this.getAxisMotionValue(e);if(t&&n){var r=this.originPoint[e]+t[e],o=this.constraints?ni(r,this.constraints[e],this.elastic[e]):r;n.set(o)}},e.prototype.updateVisualElementAxis=function(e,t){var n,r=this.visualElement.getLayoutState().layout[e],o=r.max-r.min,i=this.cursorProgress[e],a=function(e,t,n,r,o){var i=e-t*n;return r?ni(i,r,o):i}(t[e],o,i,null===(n=this.constraints)||void 0===n?void 0:n[e],this.elastic[e]);this.visualElement.setProjectionTargetAxis(e,a,a+o)},e.prototype.setProps=function(e){var t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,o=void 0!==r&&r,i=e.dragPropagation,a=void 0!==i&&i,s=e.dragConstraints,l=void 0!==s&&s,c=e.dragElastic,u=void 0===c?.35:c,d=e.dragMomentum,h=void 0===d||d,p=Ur(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=Br({drag:n,dragDirectionLock:o,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:h},p)},e.prototype.getAxisMotionValue=function(e){var t=this.props,n=t.layout,r=t.layoutId,o="_drag"+e.toUpperCase();return this.props[o]?this.props[o]:n||void 0!==r?void 0:this.visualElement.getValue(e,0)},e.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},e.prototype.isExternalDrag=function(){var e=this.props,t=e._dragX,n=e._dragY;return t||n},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,o=n.dragMomentum,i=n.dragElastic,a=n.dragTransition,s=function(e,t){void 0===t&&(t=!0);var n,r=e.getProjectionParent();return!!r&&(t?Xs(n=Ps(r.projection.target,e.projection.target),r.getLatestValues()):n=Ps(r.getLayoutState().layout,e.getLayoutState().layout),ei((function(t){return e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),l=this.constraints||{};if(s&&Object.keys(l).length&&this.isLayoutDrag()){var c=this.visualElement.getProjectionParent();if(c){var u=Ps(c.projection.targetFinal,l);ei((function(e){var t=u[e],n=t.min,r=t.max;l[e]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var d=ei((function(n){var c;if(nl(n,r,t.currentDirection)){var u=null!==(c=null===l||void 0===l?void 0:l[n])&&void 0!==c?c:{},d=i?200:1e6,h=i?40:1e7,p=Br(Br({type:"inertia",velocity:o?e[n]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},a),u);return t.getAxisMotionValue(n)?t.startAxisValueAnimation(n,p):t.visualElement.startLayoutAnimation(n,p,s)}}));return Promise.all(d).then((function(){var e,n;null===(n=(e=t.props).onDragTransitionEnd)||void 0===n||n.call(e)}))},e.prototype.stopMotion=function(){var e=this;ei((function(t){var n=e.getAxisMotionValue(t);n?n.stop():e.visualElement.stopLayoutAnimation()}))},e.prototype.startAxisValueAnimation=function(e,t){var n=this.getAxisMotionValue(e);if(n){var r=n.get();return n.set(r),n.set(r),Cs(e,n,0,t)}},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.drag;if(Ko(t.dragConstraints)&&this.constraintsBox){this.stopMotion();var r={x:0,y:0};ei((function(t){r[t]=hi(e.visualElement.projection.target[t],e.constraintsBox[t])})),this.updateConstraints((function(){ei((function(t){if(nl(t,n,null)){var o=function(e,t,n){var r=e.max-e.min,o=ti(t.min,t.max-r,n);return{min:o,max:o+r}}(e.visualElement.projection.target[t],e.constraintsBox[t],r[t]),i=o.min,a=o.max;e.visualElement.setProjectionTargetAxis(t,i,a)}}))})),setTimeout(Qs,1)}},e.prototype.updateConstraints=function(e){var t=this;this.cancelLayout=Zs((function(n,r){var o=As(t.visualElement);r((function(){return o.forEach((function(e){return e.resetTransform()}))})),n((function(){return Os(t.visualElement)})),r((function(){return o.forEach((function(e){return e.restoreTransform()}))})),n((function(){t.resolveDragConstraints()})),e&&r(e)}))},e.prototype.mount=function(e){var t=this,n=Io(e.getInstance(),"pointerdown",(function(e){var n=t.props,r=n.drag,o=n.dragListener;r&&(void 0===o||o)&&t.start(e)})),r=bo(window,"resize",(function(){t.scalePoint()})),o=e.onLayoutUpdate((function(){t.isDragging&&t.resolveDragConstraints()})),i=e.prevDragCursor;return i&&this.start(Js,{cursorProgress:i}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===o||void 0===o||o(),t.cancelDrag()}},e}();function nl(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}function rl(e,t){-1===e.indexOf(t)&&e.push(t)}function ol(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var il=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return rl(this.subscriptions,e),function(){return ol(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var o=0;o<r;o++){var i=this.subscriptions[o];i&&i(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),al=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new il,this.velocityUpdateSubscribers=new il,this.renderSubscribers=new il,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=go(),o=r.delta,i=r.timestamp;n.lastUpdated!==i&&(n.timeDelta=o,n.lastUpdated=i,yo.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return yo.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?Ga(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function sl(e){return new al(e)}var ll=function(e){return null!==e&&"object"===typeof e&&e.getVelocity};function cl(){var e=sl(1),t={lead:void 0,follow:void 0,crossfadeOpacity:!1,preserveFollowOpacity:!1},n=Br({},t),r={},o={},i=!1,a=null,s=0;function l(n,r){var o=t.lead,s=t.follow;i=!0,a=null;var l=!1,c=function(){l=!0,o&&o.scheduleRender(),s&&s.scheduleRender()},u=function(){i=!1,a=go().timestamp};return r=r&&Es(r,"crossfade"),function(e,t,n){void 0===n&&(n={});var r=ll(e)?e:sl(e);return Cs("",r,t,n),{stop:function(){return r.stop()}}}(e,n,Br(Br({},r),{onUpdate:c,onComplete:function(){l?u():(e.set(n),yo.read(u)),c()}}))}function c(){var n,i,a=go().timestamp,l=t.lead,c=t.follow;if(a!==s&&l){s=a;var u=l.getLatestValues();Object.assign(r,u);var d=c?c.getLatestValues():t.prevValues;Object.assign(o,d);var h=e.get(),p=null!==(n=u.opacity)&&void 0!==n?n:1,f=null!==(i=null===d||void 0===d?void 0:d.opacity)&&void 0!==i?i:1;t.crossfadeOpacity&&c?(r.opacity=ti(!1!==c.isVisible?0:f,p,ul(h)),o.opacity=t.preserveFollowOpacity?f:ti(f,0,dl(h))):c||(r.opacity=ti(f,p,h)),function(e,t,n,r,o,i){for(var a=0;a<fl;a++){var s="border"+pl[a]+"Radius",l=ml(r,s),c=ml(n,s);if((void 0!==l||void 0!==c)&&(l||(l=0),c||(c=0),"number"===typeof l&&"number"===typeof c)){var u=Math.max(ti(l,c,i),0);e[s]=t[s]=u}}if(r.rotate||n.rotate){var d=ti(r.rotate||0,n.rotate||0,i);e.rotate=t.rotate=d}!o&&n.backgroundColor&&r.backgroundColor&&(e.backgroundColor=t.backgroundColor=ra(r.backgroundColor,n.backgroundColor)(i))}(r,o,u,d||{},Boolean(c),h)}}return{isActive:function(){return r&&(i||go().timestamp===a)},fromLead:function(e){return l(0,e)},toLead:function(r){var o=0;return t.prevValues||t.follow?n.lead===t.follow&&n.follow===t.lead&&(o=1-e.get()):o=1,e.set(o),l(1,r)},reset:function(){return e.set(1)},stop:function(){return e.stop()},getCrossfadeState:function(e){return c(),e===t.lead?r:e===t.follow?o:void 0},setOptions:function(e){n=t,t=e,r={},o={}},getLatestValues:function(){return r}}}var ul=hl(0,.5,ja),dl=hl(.5,.95,ka);function hl(e,t,n){return function(r){return r<e?0:r>t?1:n(ci(e,t,r))}}var pl=["TopLeft","TopRight","BottomLeft","BottomRight"],fl=pl.length;function ml(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}function gl(){var e,t,n,r=new Set,o={leadIsExiting:!1},i=Br({},o),a=cl(),s=!1;return{add:function(e){e.setCrossfader(a),r.add(e),n&&(e.prevDragCursor=n),o.lead||(o.lead=e)},remove:function(e){r.delete(e)},getLead:function(){return o.lead},updateSnapshot:function(){if(o.lead){e=a.isActive()?a.getLatestValues():o.lead.getLatestValues(),t=o.lead.prevViewportBox;var r=el.get(o.lead);r&&r.isDragging&&(n=r.cursorProgress)}},clearSnapshot:function(){n=t=void 0},updateLeadAndFollow:function(){var t,n,l;i=Br({},o);for(var c=Array.from(r),u=c.length;u--;u>=0){var d=c[u];if(n&&(null!==l&&void 0!==l||(l=d)),null!==n&&void 0!==n||(n=d),n&&l)break}o.lead=n,o.follow=l,o.leadIsExiting=(null===(t=o.lead)||void 0===t?void 0:t.presence)===Gr.Exiting,a.setOptions({lead:n,follow:l,prevValues:e,crossfadeOpacity:(null===l||void 0===l?void 0:l.isPresenceRoot)||(null===n||void 0===n?void 0:n.isPresenceRoot)}),o.lead===i.follow||i.lead===o.lead&&i.leadIsExiting===o.leadIsExiting||(s=!0)},animate:function(e,n){var r;if(void 0===n&&(n=!1),e===o.lead){n?e.pointTo(o.lead):e.setVisibility(!0);var i={},l=null===(r=o.follow)||void 0===r?void 0:r.getProjectionParent();if(l&&(i.prevParent=l),e.presence===Gr.Entering?i.originBox=o.follow?o.follow.prevViewportBox:t:e.presence===Gr.Exiting&&(i.targetBox=function(){var e;return null===(e=o.follow)||void 0===e?void 0:e.getLayoutState().layout}()),s){s=!1;var c=e.getDefaultTransition();e.presence===Gr.Entering?a.toLead(c):a.fromLead(c)}e.notifyLayoutReady(i)}else n?o.lead&&e.pointTo(o.lead):e.setVisibility(!1)}}}var yl={layoutReady:function(e){return e.notifyLayoutReady()}};function vl(){var e=new Set;return{add:function(t){return e.add(t)},flush:function(t){var n=void 0===t?yl:t,r=n.layoutReady,o=n.parent;Zs((function(t,n){var i=Array.from(e).sort(Is),a=o?As(o):[];n((function(){Vr(Vr([],zr(a)),zr(i)).forEach((function(e){return e.resetTransform()}))})),t((function(){i.forEach(Os)})),n((function(){a.forEach((function(e){return e.restoreTransform()})),i.forEach(r)})),t((function(){i.forEach((function(e){e.isPresent&&(e.presence=Gr.Present)}))})),n((function(){ho.preRender(),ho.render()})),t((function(){yo.postRender((function(){return i.forEach(bl)})),e.clear()}))})),Qs()}}}function bl(e){e.prevViewportBox=e.projection.target}var xl=(0,l.createContext)(vl()),wl=(0,l.createContext)(vl());function Sl(e){return!!e.forceUpdate}var _l=(0,l.createContext)({});var kl=["","X","Y","Z"],Tl=["transformPerspective","x","y","z"];function El(e,t){return Tl.indexOf(e)-Tl.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return kl.forEach((function(t){return Tl.push(e+t)}))}));var Cl=new Set(Tl);function Il(e){return Cl.has(e)}var jl=new Set(["originX","originY","originZ"]);function Al(e){return jl.has(e)}var Ol=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=new Set,t.stacks=new Map,t.hasMounted=!1,t.updateScheduled=!1,t.renderScheduled=!1,t.syncContext=Br(Br({},vl()),{syncUpdate:function(e){return t.scheduleUpdate(e)},forceUpdate:function(){t.syncContext=Br({},t.syncContext),t.scheduleUpdate(!0)},register:function(e){return t.addChild(e)},remove:function(e){return t.removeChild(e)}}),t}return Fr(t,e),t.prototype.componentDidMount=function(){this.hasMounted=!0},t.prototype.componentDidUpdate=function(){this.startLayoutAnimation()},t.prototype.shouldComponentUpdate=function(){return this.renderScheduled=!0,!0},t.prototype.startLayoutAnimation=function(){var e=this;this.renderScheduled=this.updateScheduled=!1;var t=this.props.type;this.children.forEach((function(e){e.isPresent?e.presence!==Gr.Entering&&(e.presence=e.presence===Gr.Exiting?Gr.Entering:Gr.Present):e.presence=Gr.Exiting})),this.updateStacks();var n={layoutReady:function(n){void 0!==n.getLayoutId()?e.getStack(n).animate(n,"crossfade"===t):n.notifyLayoutReady()},parent:this.context.visualElement};this.children.forEach((function(t){return e.syncContext.add(t)})),this.syncContext.flush(n),this.stacks.forEach((function(e){return e.clearSnapshot()}))},t.prototype.updateStacks=function(){this.stacks.forEach((function(e){return e.updateLeadAndFollow()}))},t.prototype.scheduleUpdate=function(e){void 0===e&&(e=!1),!e&&this.updateScheduled||(this.updateScheduled=!0,this.children.forEach((function(e){!function(e){for(var t=!1,n={},r=0;r<kl.length;r++){var o="rotate"+kl[r];e.hasValue(o)&&0!==e.getStaticValue(o)&&(t=!0,n[o]=e.getStaticValue(o),e.setStaticValue(o,0))}if(t){for(var o in e.syncRender(),n)e.setStaticValue(o,n[o]);e.scheduleRender()}}(e),e.shouldResetTransform()&&e.resetTransform()})),this.children.forEach(Ns),this.stacks.forEach((function(e){return e.updateSnapshot()})),!e&&this.renderScheduled||(this.renderScheduled=!0,this.forceUpdate()))},t.prototype.addChild=function(e){this.children.add(e),this.addToStack(e),e.presence=this.hasMounted?Gr.Entering:Gr.Present},t.prototype.removeChild=function(e){this.scheduleUpdate(),this.children.delete(e),this.removeFromStack(e)},t.prototype.addToStack=function(e){var t=this.getStack(e);null===t||void 0===t||t.add(e)},t.prototype.removeFromStack=function(e){var t=this.getStack(e);null===t||void 0===t||t.remove(e)},t.prototype.getStack=function(e){var t=e.getLayoutId();if(void 0!==t)return!this.stacks.has(t)&&this.stacks.set(t,gl()),this.stacks.get(t)},t.prototype.render=function(){return l.createElement(xl.Provider,{value:this.syncContext},this.props.children)},t.contextType=_l,t}(l.Component);function Nl(e){return(0,l.useEffect)((function(){return function(){return e()}}),[])}var Rl=(0,l.createContext)(null);function Pl(e){var t=(0,l.useRef)(null);return null===t.current&&(t.current=e()),t.current}var Ml=0;function Dl(){var e=Ml;return Ml++,e}var Ll=function(e){var t=e.children,n=e.initial,r=e.isPresent,o=e.onExitComplete,i=e.custom,a=e.presenceAffectsLayout,s=Pl(Fl),c=Pl(Dl),u=(0,l.useMemo)((function(){return{id:c,initial:n,isPresent:r,custom:i,onExitComplete:function(e){s.set(e,!0);var t=!0;s.forEach((function(e){e||(t=!1)})),t&&(null===o||void 0===o||o())},register:function(e){return s.set(e,!1),function(){return s.delete(e)}}}}),a?void 0:[r]);return(0,l.useMemo)((function(){s.forEach((function(e,t){return s.set(t,!1)}))}),[r]),l.useEffect((function(){!r&&!s.size&&(null===o||void 0===o||o())}),[r]),l.createElement(Rl.Provider,{value:u},t)};function Fl(){return new Map}function Bl(e){return e.key||""}var Ul=function(e){var t=e.children,n=e.custom,r=e.initial,o=void 0===r||r,i=e.onExitComplete,a=e.exitBeforeEnter,s=e.presenceAffectsLayout,c=void 0===s||s,u=function(){var e=(0,l.useRef)(!1),t=zr((0,l.useState)(0),2),n=t[0],r=t[1];return Nl((function(){return e.current=!0})),(0,l.useCallback)((function(){!e.current&&r(n+1)}),[n])}(),d=(0,l.useContext)(xl);Sl(d)&&(u=d.forceUpdate);var h=(0,l.useRef)(!0),p=function(e){var t=[];return l.Children.forEach(e,(function(e){(0,l.isValidElement)(e)&&t.push(e)})),t}(t),f=(0,l.useRef)(p),m=(0,l.useRef)(new Map).current,g=(0,l.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var n=Bl(e);t.set(n,e)}))}(p,m),h.current)return h.current=!1,l.createElement(l.Fragment,null,p.map((function(e){return l.createElement(Ll,{key:Bl(e),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:c},e)})));for(var y=Vr([],zr(p)),v=f.current.map(Bl),b=p.map(Bl),x=v.length,w=0;w<x;w++){var S=v[w];-1===b.indexOf(S)?g.add(S):g.delete(S)}return a&&g.size&&(y=[]),g.forEach((function(e){if(-1===b.indexOf(e)){var t=m.get(e);if(t){var r=v.indexOf(e);y.splice(r,0,l.createElement(Ll,{key:Bl(t),isPresent:!1,onExitComplete:function(){m.delete(e),g.delete(e);var t=f.current.findIndex((function(t){return t.key===e}));f.current.splice(t,1),g.size||(f.current=p,u(),i&&i())},custom:n,presenceAffectsLayout:c},t))}}})),y=y.map((function(e){var t=e.key;return g.has(t)?e:l.createElement(Ll,{key:Bl(e),isPresent:!0,presenceAffectsLayout:c},e)})),f.current=y,l.createElement(l.Fragment,null,g.size?y:y.map((function(e){return(0,l.cloneElement)(e)})))},zl=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Vl={measureLayout:zl(["layout","layoutId","drag","_layoutResetTransform"]),animation:zl(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:zl(["exit"]),drag:zl(["drag","dragControls"]),focus:zl(["whileFocus"]),hover:zl(["whileHover","onHoverStart","onHoverEnd"]),tap:zl(["whileTap","onTap","onTapStart","onTapCancel"]),pan:zl(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:zl(["layout","layoutId"])};var Gl=(0,l.createContext)({strict:!1}),Wl=Object.keys(Vl),Hl=Wl.length;var ql=(0,l.createContext)({transformPagePoint:function(e){return e},isStatic:!1});function Xl(){var e=(0,l.useContext)(Rl);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,r=e.register,o=Ql();(0,l.useEffect)((function(){return r(o)}),[]);return!t&&n?[!1,function(){return null===n||void 0===n?void 0:n(o)}]:[!0]}function Yl(e){return null===e||e.isPresent}var Kl=0,Zl=function(){return Kl++},Ql=function(){return Pl(Zl)},Jl=(0,l.createContext)(null),$l=wo?l.useLayoutEffect:l.useEffect;function ec(e,t,n,r){var o=(0,l.useContext)(ql),i=(0,l.useContext)(Gl),a=(0,l.useContext)(_l).visualElement,s=(0,l.useContext)(Rl),c=function(e){var t=e.layoutId,n=(0,l.useContext)(Jl);return n&&void 0!==t?n+"-"+t:t}(n),u=(0,l.useRef)(void 0);r||(r=i.renderer),!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:Br(Br({},n),{layoutId:c}),presenceId:null===s||void 0===s?void 0:s.id,blockInitialAnimation:!1===(null===s||void 0===s?void 0:s.initial)}));var d=u.current;return $l((function(){d&&(d.setProps(Br(Br(Br({},o),n),{layoutId:c})),d.isPresent=Yl(s),d.isPresenceRoot=!a||a.presenceId!==(null===s||void 0===s?void 0:s.id),d.syncRender())})),(0,l.useEffect)((function(){var e;d&&(null===(e=d.animationState)||void 0===e||e.animateChanges())})),$l((function(){return function(){return null===d||void 0===d?void 0:d.notifyUnmount()}}),[]),d}function tc(e){return Array.isArray(e)}function nc(e){return"string"===typeof e||tc(e)}function rc(e,t,n,r,o){var i;return void 0===r&&(r={}),void 0===o&&(o={}),"string"===typeof t&&(t=null===(i=e.variants)||void 0===i?void 0:i[t]),"function"===typeof t?t(null!==n&&void 0!==n?n:e.custom,r,o):t}function oc(e,t,n){var r=e.getProps();return rc(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function ic(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||nc(e.initial)||nc(e.animate)||nc(e.whileHover)||nc(e.whileDrag)||nc(e.whileTap)||nc(e.whileFocus)||nc(e.exit)}function ac(e){return Boolean(ic(e)||e.variants)}function sc(e,t){var n=function(e,t){if(ic(e)){var n=e.initial,r=e.animate;return{initial:!1===n||nc(n)?n:void 0,animate:nc(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,l.useContext)(_l)),r=n.initial,o=n.animate;return(0,l.useMemo)((function(){return{initial:r,animate:o}}),t?[lc(r),lc(o)]:[])}function lc(e){return Array.isArray(e)?e.join(" "):e}function cc(e){var t=e.preloadedFeatures,n=e.createVisualElement,r=e.useRender,o=e.useVisualState,i=e.Component;return t&&function(e){for(var t in e){var n=e[t];null!==n&&(Vl[t].Component=n)}}(t),(0,l.forwardRef)((function(e,t){var a=(0,l.useContext)(ql).isStatic,s=null,c=sc(e,a),u=o(e,a);return!a&&wo&&(c.visualElement=ec(i,u,e,n),s=function(e,t,n){var r=[];if((0,l.useContext)(Gl),!t)return null;for(var o=0;o<Hl;o++){var i=Wl[o],a=Vl[i],s=a.isEnabled,c=a.Component;s(e)&&c&&r.push(l.createElement(c,Br({key:i},e,{visualElement:t})))}return r}(e,c.visualElement)),l.createElement(l.Fragment,null,l.createElement(_l.Provider,{value:c},r(i,e,function(e,t,n){return(0,l.useCallback)((function(r){var o;r&&(null===(o=e.mount)||void 0===o||o.call(e,r)),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):Ko(n)&&(n.current=r))}),[t])}(u,c.visualElement,t),u,a)),s)}))}function uc(e){function t(t,n){return void 0===n&&(n={}),cc(e(t,n))}var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var dc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function hc(e){return"string"===typeof e&&!e.includes("-")&&!!(dc.indexOf(e)>-1||/[A-Z]/.test(e))}var pc={};function fc(e,t){var n=t.layout,r=t.layoutId;return Il(e)||Al(e)||(n||void 0!==r)&&(!!pc[e]||"opacity"===e)}var mc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function gc(e){return e.startsWith("--")}var yc=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function vc(e,t,n,r,o,i,a,s){var l,c=e.style,u=e.vars,d=e.transform,h=e.transformKeys,p=e.transformOrigin;h.length=0;var f=!1,m=!1,g=!0;for(var y in t){var v=t[y];if(gc(y))u[y]=v;else{var b=gs[y],x=yc(v,b);if(Il(y)){if(f=!0,d[y]=x,h.push(y),!g)continue;v!==(null!==(l=b.default)&&void 0!==l?l:0)&&(g=!1)}else if(Al(y))p[y]=x,m=!0;else if((null===n||void 0===n?void 0:n.isHydrated)&&(null===r||void 0===r?void 0:r.isHydrated)&&pc[y]){var w=pc[y].process(v,r,n),S=pc[y].applyTo;if(S)for(var _=S.length,k=0;k<_;k++)c[S[k]]=w;else c[y]=w}else c[y]=x}}r&&n&&a&&s?(c.transform=a(r.deltaFinal,r.treeScale,f?d:void 0),i&&(c.transform=i(d,c.transform)),c.transformOrigin=s(r)):(f&&(c.transform=function(e,t,n,r){var o=e.transform,i=e.transformKeys,a=t.enableHardwareAcceleration,s=void 0===a||a,l=t.allowTransformNone,c=void 0===l||l,u="";i.sort(El);for(var d=!1,h=i.length,p=0;p<h;p++){var f=i[p];u+=(mc[f]||f)+"("+o[f]+") ","z"===f&&(d=!0)}return!d&&s?u+="translateZ(0)":u=u.trim(),r?u=r(o,n?"":u):c&&n&&(u="none"),u}(e,o,g,i)),m&&(c.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,o=void 0===r?"50%":r,i=e.originZ;return n+" "+o+" "+(void 0===i?0:i)}(p)))}var bc=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function xc(e,t,n){for(var r in t)ll(t[r])||fc(r,n)||(e[r]=t[r])}function wc(e,t,n){var r={};return xc(r,e.style||{},e),Object.assign(r,function(e,t,n){var r=e.transformTemplate;return(0,l.useMemo)((function(){var e=bc();vc(e,t,void 0,void 0,{enableHardwareAcceleration:!n},r);var o=e.vars,i=e.style;return Br(Br({},o),i)}),[t])}(e,t,n)),e.transformValues&&(r=e.transformValues(r)),r}function Sc(e,t,n){var r={},o=wc(e,t,n);return Boolean(e.drag)&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),r.style=o,r}var _c=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function kc(e){return _c.has(e)}var Tc=function(e){return!kc(e)};try{var Ec=r(4405).A;Tc=function(e){return e.startsWith("on")?!kc(e):Ec(e)}}catch(Kae){}function Cc(e,t,n){return"string"===typeof e?e:Yi.transform(t+n*e)}var Ic=function(e,t){return Yi.transform(e*t)},jc={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ac={offset:"strokeDashoffset",array:"strokeDasharray"};function Oc(e,t,n,r,o,i,a,s){var l=t.attrX,c=t.attrY,u=t.originX,d=t.originY,h=t.pathLength,p=t.pathSpacing,f=void 0===p?1:p,m=t.pathOffset,g=void 0===m?0:m;vc(e,Ur(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r,o,i,a,s),e.attrs=e.style,e.style={};var y=e.attrs,v=e.style,b=e.dimensions,x=e.totalPathLength;y.transform&&(b&&(v.transform=y.transform),delete y.transform),b&&(void 0!==u||void 0!==d||v.transform)&&(v.transformOrigin=function(e,t,n){return Cc(t,e.x,e.width)+" "+Cc(n,e.y,e.height)}(b,void 0!==u?u:.5,void 0!==d?d:.5)),void 0!==l&&(y.x=l),void 0!==c&&(y.y=c),void 0!==x&&void 0!==h&&function(e,t,n,r,o,i){void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=!0);var a=i?jc:Ac;e[a.offset]=Ic(-o,t);var s=Ic(n,t),l=Ic(r,t);e[a.array]=s+" "+l}(y,x,h,f,g,!1)}var Nc=function(){return Br(Br({},bc()),{attrs:{}})};function Rc(e,t){var n=(0,l.useMemo)((function(){var n=Nc();return Oc(n,t,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),Br(Br({},n.attrs),{style:Br({},n.style)})}),[t]);if(e.style){var r={};xc(r,e.style,e),n.style=Br(Br({},r),n.style)}return n}function Pc(e){void 0===e&&(e=!1);return function(t,n,r,o,i){var a=o.latestValues,s=(hc(t)?Rc:Sc)(n,a,i),c=function(e,t,n){var r={};for(var o in e)(Tc(o)||!0===n&&kc(o)||!t&&!kc(o))&&(r[o]=e[o]);return r}(n,"string"===typeof t,e),u=Br(Br(Br({},c),s),{ref:r});return(0,l.createElement)(t,u)}}var Mc=/([a-z])([A-Z])/g,Dc=function(e){return e.replace(Mc,"$1-$2").toLowerCase()};function Lc(e,t){var n=t.style,r=t.vars;for(var o in Object.assign(e.style,n),r)e.style.setProperty(o,r[o])}var Fc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform"]);function Bc(e,t){for(var n in Lc(e,t),t.attrs)e.setAttribute(Fc.has(n)?n:Dc(n),t.attrs[n])}function Uc(e){var t=e.style,n={};for(var r in t)(ll(t[r])||fc(r,e))&&(n[r]=t[r]);return n}function zc(e){var t=Uc(e);for(var n in e){if(ll(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function Vc(e){return"object"===typeof e&&"function"===typeof e.start}var Gc=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},Wc=function(e){return os(e)?e[e.length-1]||0:e};function Hc(e){var t=ll(e)?e.get():e;return Gc(t)?t.toValue():t}function qc(e,t,n,r){var o=e.scrapeMotionValuesFromProps,i=e.createRenderState,a=e.onMount,s={latestValues:Yc(t,n,r,o),renderState:i()};return a&&(s.mount=function(e){return a(t,e,s)}),s}var Xc=function(e){return function(t,n){var r=(0,l.useContext)(_l),o=(0,l.useContext)(Rl);return n?qc(e,t,r,o):Pl((function(){return qc(e,t,r,o)}))}};function Yc(e,t,n,r){var o={},i=!1===(null===n||void 0===n?void 0:n.initial),a=r(e);for(var s in a)o[s]=Hc(a[s]);var l=e.initial,c=e.animate,u=ic(e),d=ac(e);t&&d&&!u&&!1!==e.inherit&&(null!==l&&void 0!==l||(l=t.initial),null!==c&&void 0!==c||(c=t.animate));var h=i||!1===l?c:l;h&&"boolean"!==typeof h&&!Vc(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=rc(e,t);if(n){var r=n.transitionEnd;n.transition;var i=Ur(n,["transitionEnd","transition"]);for(var a in i)o[a]=i[a];for(var a in r)o[a]=r[a]}}));return o}var Kc={useVisualState:Xc({scrapeMotionValuesFromProps:zc,createRenderState:Nc,onMount:function(e,t,n){var r=n.renderState,o=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(pg){r.dimensions={x:0,y:0,width:0,height:0}}"path"===t.tagName&&(r.totalPathLength=t.getTotalLength()),Oc(r,o,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),Bc(t,r)}})};var Zc={useVisualState:Xc({scrapeMotionValuesFromProps:Uc,createRenderState:bc})};function Qc(e,t,n){return function(r,o){var i;Xr(r)&&!Yo()&&(null===n||void 0===n||n(r,o),null===(i=e.animationState)||void 0===i||i.setActive(xs.Hover,t))}}var Jc=function(e,t){return!!t&&(e===t||Jc(e,t.parentElement))};var $c=function(e){return function(t){return e(t),null}},eu={tap:$c((function(e){var t=e.onTap,n=e.onTapStart,r=e.onTapCancel,o=e.whileTap,i=e.visualElement,a=t||n||r||o,s=(0,l.useRef)(!1),c=(0,l.useRef)(null);function u(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function d(){var e;return u(),s.current=!1,null===(e=i.animationState)||void 0===e||e.setActive(xs.Tap,!1),!Yo()}function h(e,n){d()&&(Jc(i.getInstance(),e.target)?null===t||void 0===t||t(e,n):null===r||void 0===r||r(e,n))}function p(e,t){d()&&(null===r||void 0===r||r(e,t))}jo(i,"pointerdown",a?function(e,t){var r;u(),s.current||(s.current=!0,c.current=Do(Io(window,"pointerup",h),Io(window,"pointercancel",p)),null===n||void 0===n||n(e,t),null===(r=i.animationState)||void 0===r||r.setActive(xs.Tap,!0))}:void 0),Nl(u)})),focus:$c((function(e){var t=e.whileFocus,n=e.visualElement;xo(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(xs.Focus,!0)}:void 0),xo(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(xs.Focus,!1)}:void 0)})),hover:$c((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,o=e.visualElement;jo(o,"pointerenter",t||r?Qc(o,!0,t):void 0),jo(o,"pointerleave",n||r?Qc(o,!1,n):void 0)}))};function tu(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var nu=function(e){return/^\-?\d*\.?\d+$/.test(e)},ru=function(e){return function(t){return t.test(e)}},ou=[Di,Yi,Xi,qi,Zi,Ki,{test:function(e){return"auto"===e},parse:function(e){return e}}],iu=function(e){return ou.find(ru(e))},au=Vr(Vr([],zr(ou)),[oa,da]),su=function(e){return au.find(ru(e))};function lu(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,sl(n))}function cu(e,t){var n=oc(e,t),r=n?e.makeTargetAnimatable(n,!1):{},o=r.transitionEnd,i=void 0===o?{}:o;r.transition;var a=Ur(r,["transitionEnd","transition"]);for(var s in a=Br(Br({},a),i)){lu(e,s,Wc(a[s]))}}function uu(e,t){if(t)return(t[e]||t.default||t).from}function du(e,t,n){var r;void 0===n&&(n={});var o=oc(e,t,n.custom),i=(o||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(a=n.transitionOverride);var s=o?function(){return hu(e,o,n)}:function(){return Promise.resolve()},l=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var o=a.delayChildren,i=void 0===o?0:o,s=a.staggerChildren,l=a.staggerDirection;return function(e,t,n,r,o,i){void 0===n&&(n=0);void 0===r&&(r=0);void 0===o&&(o=1);var a=[],s=(e.variantChildren.size-1)*r,l=1===o?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),s-e*r};return Array.from(e.variantChildren).sort(pu).forEach((function(e,r){a.push(du(e,t,Br(Br({},i),{delay:n+l(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(a)}(e,t,i+r,s,l,n)}:function(){return Promise.resolve()},c=a.when;if(c){var u=zr("beforeChildren"===c?[s,l]:[l,s],2),d=u[0],h=u[1];return d().then(h)}return Promise.all([s(),l(n.delay)])}function hu(e,t,n){var r,o=void 0===n?{}:n,i=o.delay,a=void 0===i?0:i,s=o.transitionOverride,l=o.type,c=e.makeTargetAnimatable(t),u=c.transition,d=void 0===u?e.getDefaultTransition():u,h=c.transitionEnd,p=Ur(c,["transition","transitionEnd"]);s&&(d=s);var f=[],m=l&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[l]);for(var g in p){var y=e.getValue(g),v=p[g];if(!(!y||void 0===v||m&&fu(m,g))){var b=Cs(g,y,v,Br({delay:a},d));f.push(b)}}return Promise.all(f).then((function(){h&&cu(e,h)}))}function pu(e,t){return e.sortNodePosition(t)}function fu(e,t){var n=e.protectedKeys,r=e.needsAnimating,o=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,o}var mu=[xs.Animate,xs.Hover,xs.Tap,xs.Drag,xs.Focus,xs.Exit],gu=Vr([],zr(mu)).reverse(),yu=mu.length;function vu(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(),Array.isArray(t)){var o=t.map((function(t){return du(e,t,n)}));r=Promise.all(o)}else if("string"===typeof t)r=du(e,t,n);else{var i="function"===typeof t?oc(e,t,n.custom):t;r=hu(e,i,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function bu(e){var t=vu(e),n=function(){var e;return(e={})[xs.Animate]=xu(!0),e[xs.Hover]=xu(),e[xs.Tap]=xu(),e[xs.Drag]=xu(),e[xs.Focus]=xu(),e[xs.Exit]=xu(),e}(),r={},o=!0,i=function(t,n){var r=oc(e,n);if(r){r.transition;var o=r.transitionEnd,i=Ur(r,["transition","transitionEnd"]);t=Br(Br(Br({},t),i),o)}return t};function a(a,s){for(var l,c=e.getProps(),u=e.getVariantContext(!0)||{},d=[],h=new Set,p={},f=1/0,m=function(t){var r=gu[t],m=n[r],g=null!==(l=c[r])&&void 0!==l?l:u[r],y=nc(g),v=r===s?m.isActive:null;!1===v&&(f=t);var b=g===u[r]&&g!==c[r]&&y;if(b&&o&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys=Br({},p),!m.isActive&&null===v||!g&&!m.prevProp||Vc(g)||"boolean"===typeof g)return"continue";var x=function(e,t){if("string"===typeof t)return t!==e;if(tc(t))return!tu(t,e);return!1}(m.prevProp,g)||r===s&&m.isActive&&!b&&y||t>f&&y,w=Array.isArray(g)?g:[g],S=w.reduce(i,{});!1===v&&(S={});var _=m.prevResolvedValues,k=void 0===_?{}:_,T=Br(Br({},k),S),E=function(e){x=!0,h.delete(e),m.needsAnimating[e]=!0};for(var C in T){var I=S[C],j=k[C];p.hasOwnProperty(C)||(I!==j?os(I)&&os(j)?tu(I,j)?m.protectedKeys[C]=!0:E(C):void 0!==I?E(C):h.add(C):void 0!==I&&h.has(C)?E(C):m.protectedKeys[C]=!0)}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(p=Br(Br({},p),S)),o&&e.blockInitialAnimation&&(x=!1),x&&!b&&d.push.apply(d,Vr([],zr(w.map((function(e){return{animation:e,options:Br({type:r},a)}})))))},g=0;g<yu;g++)m(g);if(r=Br({},p),h.size){var y={};h.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(y[t]=n)})),d.push({animation:y})}var v=Boolean(d.length);return o&&!1===c.initial&&!e.manuallyAnimateOnMount&&(v=!1),o=!1,v?t(d):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:a,setActive:function(t,r,o){var i;return n[t].isActive===r?Promise.resolve():(null===(i=e.variantChildren)||void 0===i||i.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,a(o,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function xu(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var wu={animation:$c((function(e){var t=e.visualElement,n=e.animate;t.animationState||(t.animationState=bu(t)),Vc(n)&&(0,l.useEffect)((function(){return n.subscribe(t)}),[n])})),exit:$c((function(e){var t=e.custom,n=e.visualElement,r=zr(Xl(),2),o=r[0],i=r[1],a=(0,l.useContext)(Rl);(0,l.useEffect)((function(){var e,r,s=null===(e=n.animationState)||void 0===e?void 0:e.setActive(xs.Exit,!o,{custom:null!==(r=null===a||void 0===a?void 0:a.custom)&&void 0!==r?r:t});!o&&(null===s||void 0===s||s.then(i))}),[o])}))};var Su={pan:$c((function(e){var t=e.onPan,n=e.onPanStart,r=e.onPanEnd,o=e.onPanSessionStart,i=e.visualElement,a=t||n||r||o,s=(0,l.useRef)(null),c=(0,l.useContext)(ql).transformPagePoint,u={onSessionStart:o,onStart:n,onMove:t,onEnd:function(e,t){s.current=null,r&&r(e,t)}};(0,l.useEffect)((function(){null!==s.current&&s.current.updateHandlers(u)})),jo(i,"pointerdown",a&&function(e){s.current=new Lo(e,u,{transformPagePoint:c})}),Nl((function(){return s.current&&s.current.end()}))})),drag:$c((function(e){var t=e.dragControls,n=e.visualElement,r=(0,l.useContext)(ql).transformPagePoint,o=Pl((function(){return new tl({visualElement:n})}));o.setProps(Br(Br({},e),{transformPagePoint:r})),(0,l.useEffect)((function(){return t&&t.subscribe(o)}),[o]),(0,l.useEffect)((function(){return o.mount(n)}),[])}))};function _u(e){return"string"===typeof e&&e.startsWith("var(--")}var ku=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var Tu=4;function Eu(e,t,n){void 0===n&&(n=1),qr(n<=Tu,'Max CSS variable fallback depth detected in property "'+e+'". This may indicate a circular fallback dependency.');var r=zr(function(e){var t=ku.exec(e);if(!t)return[,];var n=zr(t,3);return[n[1],n[2]]}(e),2),o=r[0],i=r[1];if(o){var a=window.getComputedStyle(t).getPropertyValue(o);return a?a.trim():_u(i)?Eu(i,t,n+1):i}}function Cu(e,t){return e/(t.max-t.min)*100}var Iu="_$css";var ju={process:function(e,t,n){var r=n.target;if("string"===typeof e){if(!Yi.test(e))return e;e=parseFloat(e)}return Cu(e,r.x)+"% "+Cu(e,r.y)+"%"}},Au={borderRadius:Br(Br({},ju),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ju,borderTopRightRadius:ju,borderBottomLeftRadius:ju,borderBottomRightRadius:ju,boxShadow:{process:function(e,t){var n=t.delta,r=t.treeScale,o=e,i=e.includes("var("),a=[];i&&(e=e.replace(ku,(function(e){return a.push(e),Iu})));var s=da.parse(e);if(s.length>5)return o;var l=da.createTransformer(e),c="number"!==typeof s[0]?1:0,u=n.x.scale*r.x,d=n.y.scale*r.y;s[0+c]/=u,s[1+c]/=d;var h=ti(u,d,.5);"number"===typeof s[2+c]&&(s[2+c]/=h),"number"===typeof s[3+c]&&(s[3+c]/=h);var p=l(s);if(i){var f=0;p=p.replace(Iu,(function(){var e=a[f];return f++,e}))}return p}}},Ou=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameTarget={x:{min:0,max:1},y:{min:0,max:1}},t.currentAnimationTarget={x:{min:0,max:1},y:{min:0,max:1}},t.isAnimating={x:!1,y:!1},t.stopAxisAnimation={x:void 0,y:void 0},t.isAnimatingTree=!1,t.animate=function(e,n,r){void 0===r&&(r={});var o=r.originBox,i=r.targetBox,a=r.visibilityAction,s=r.shouldStackAnimate,l=r.onComplete,c=r.prevParent,u=Ur(r,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),d=t.props,h=d.visualElement,p=d.layout;if(!1===s)return t.isAnimatingTree=!1,t.safeToRemove();if(!t.isAnimatingTree||!0===s){s&&(t.isAnimatingTree=!0),n=o||n,e=i||e;var f=!1,m=h.getProjectionParent();if(m){var g=m.prevViewportBox,y=m.getLayoutState().layout;c&&(i&&(y=c.getLayoutState().layout),o&&!function(e,t){var n=e.getLayoutId(),r=t.getLayoutId();return n!==r||void 0===r&&e!==t}(c,m)&&c.prevViewportBox&&(g=c.prevViewportBox)),g&&function(e,t,n){return e||!e&&!(t||n)}(c,o,i)&&(f=!0,n=Ps(g,n),e=Ps(y,e))}var v=function(e,t){return!Ru(e)&&!Ru(t)&&(!Pu(e.x,t.x)||!Pu(e.y,t.y))}(n,e),b=ei((function(r){var o,i;if("position"===p){var s=e[r].max-e[r].min;n[r].max=n[r].min+s}if(!h.projection.isTargetLocked)return void 0===a?v?t.animateAxis(r,e[r],n[r],Br(Br({},u),{isRelative:f})):(null===(i=(o=t.stopAxisAnimation)[r])||void 0===i||i.call(o),h.setProjectionTargetAxis(r,e[r].min,e[r].max,f)):void h.setVisibility(a===Wr.Show)}));return h.syncRender(),Promise.all(b).then((function(){t.isAnimatingTree=!1,l&&l(),h.notifyLayoutAnimationComplete()}))}},t}return Fr(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.visualElement;t.animateMotionValue=Cs,t.enableLayoutProjection(),this.unsubLayoutReady=t.onLayoutUpdate(this.animate),t.layoutSafeToRemove=function(){return e.safeToRemove()},function(e){for(var t in e)pc[t]=e[t]}(Au)},t.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),ei((function(t){var n,r;return null===(r=(n=e.stopAxisAnimation)[t])||void 0===r?void 0:r.call(n)}))},t.prototype.animateAxis=function(e,t,n,r){var o,i,a=this,s=void 0===r?{}:r,l=s.transition,c=s.isRelative;if(!this.isAnimating[e]||!Pu(t,this.currentAnimationTarget[e])){null===(i=(o=this.stopAxisAnimation)[e])||void 0===i||i.call(o),this.isAnimating[e]=!0;var u=this.props.visualElement,d=this.frameTarget[e],h=u.getProjectionAnimationProgress()[e];h.clearListeners(),h.set(0),h.set(0);var p=function(){var r=h.get()/1e3;!function(e,t,n,r){e.min=ti(t.min,n.min,r),e.max=ti(t.max,n.max,r)}(d,n,t,r),u.setProjectionTargetAxis(e,d.min,d.max,c)};p();var f=h.onChange(p);this.stopAxisAnimation[e]=function(){a.isAnimating[e]=!1,h.stop(),f()},this.currentAnimationTarget[e]=t;var m=l||u.getDefaultTransition()||Mu;return Cs("x"===e?"layoutX":"layoutY",h,1e3,m&&Es(m,"layout")).then(this.stopAxisAnimation[e])}},t.prototype.safeToRemove=function(){var e,t;null===(t=(e=this.props).safeToRemove)||void 0===t||t.call(e)},t.prototype.render=function(){return null},t}(l.Component);var Nu={min:0,max:0};function Ru(e){return Pu(e.x,Nu)&&Pu(e.y,Nu)}function Pu(e,t){return e.min===t.min&&e.max===t.max}var Mu={duration:.45,ease:[.4,0,.1,1]};var Du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fr(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.syncLayout,n=e.framerSyncLayout,r=e.visualElement;Sl(t)&&t.register(r),Sl(n)&&n.register(r),r.onUnmount((function(){Sl(t)&&t.remove(r),Sl(n)&&n.remove(r)}))},t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;return Sl(t)?t.syncUpdate():(Ns(n),t.add(n)),null},t.prototype.componentDidUpdate=function(){var e=this.props.syncLayout;Sl(e)||e.flush()},t.prototype.render=function(){return null},t}(l.Component);var Lu={measureLayout:function(e){var t=(0,l.useContext)(xl),n=(0,l.useContext)(wl);return l.createElement(Du,Br({},e,{syncLayout:t,framerSyncLayout:n}))},layoutAnimation:function(e){var t=zr(Xl(),2)[1];return l.createElement(Ou,Br({},e,{safeToRemove:t}))}};function Fu(){return{isHydrated:!1,layout:{x:{min:0,max:1},y:{min:0,max:1}},layoutCorrected:{x:{min:0,max:1},y:{min:0,max:1}},treeScale:{x:1,y:1},delta:$o(),deltaFinal:$o(),deltaTransform:""}}var Bu=Fu();function Uu(e,t,n){var r=e.x,o=e.y,i="translate3d("+r.translate/t.x+"px, "+o.translate/t.y+"px, 0) ";if(n){var a=n.rotate,s=n.rotateX,l=n.rotateY;a&&(i+="rotate("+a+") "),s&&(i+="rotateX("+s+") "),l&&(i+="rotateY("+l+") ")}return i+="scale("+r.scale+", "+o.scale+")",n||i!==Vu?i:""}function zu(e){var t=e.deltaFinal;return 100*t.x.origin+"% "+100*t.y.origin+"% 0"}var Vu=Uu(Bu.delta,Bu.treeScale,{x:1,y:1}),Gu=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];function Wu(e,t,n,r){var o,i,a=e.delta,s=e.layout,l=e.layoutCorrected,c=e.treeScale,u=t.target;i=s,Ds((o=l).x,i.x),Ds(o.y,i.y),function(e,t,n){var r=n.length;if(r){var o,i;t.x=t.y=1;for(var a=0;a<r;a++)i=(o=n[a]).getLayoutState().delta,t.x*=i.x.scale,t.y*=i.y.scale,Us(e,i),Ms(o)&&Ws(e,e,o.getLatestValues())}}(l,c,n),fi(a,l,u,r)}var Hu=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){rl(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){ol(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(Is),this.isDirty=!1,this.children.forEach(e)},e}();var qu=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,o=e.getBaseTarget,i=e.makeTargetAnimatable,a=e.measureViewportBox,s=e.render,l=e.readValueFromInstance,c=e.resetTransform,u=e.restoreTransform,d=e.removeValueFromRenderState,h=e.sortNodePosition,p=e.scrapeMotionValuesFromProps;return function(e,t){var f=e.parent,m=e.props,g=e.presenceId,y=e.blockInitialAnimation,v=e.visualState;void 0===t&&(t={});var b,x,w,S,_,k,T=v.latestValues,E=v.renderState,C=function(){var e=Gu.map((function(){return new il})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){return Gu.forEach((function(r){var o;null===(o=t[r])||void 0===o||o.call(t);var i="on"+r,a=e[i];a&&(t[r]=n[i](a))}))}};return e.forEach((function(e,t){n["on"+Gu[t]]=function(t){return e.add(t)},n["notify"+Gu[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,Vr([],zr(t)))}})),n}(),I={isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:{x:{min:0,max:1},y:{min:0,max:1}},targetFinal:{x:{min:0,max:1},y:{min:0,max:1}}},j=I,A=T,O=Fu(),N=!1,R=new Map,P=new Map,M={},D=Br({},T);function L(){b&&(q.isProjectionReady()&&(Ws(j.targetFinal,j.target,A),fi(O.deltaFinal,O.layoutCorrected,j.targetFinal,T)),F(),s(b,E))}function F(){var e=T;if(S&&S.isActive()){var n=S.getCrossfadeState(q);n&&(e=n)}r(q,E,e,j,O,t,m)}function B(){C.notifyUpdate(T)}function U(){q.layoutTree.forEach(Yu)}var z=p(m);for(var V in z){var G=z[V];void 0!==T[V]&&ll(G)&&G.set(T[V],!1)}var W=ic(m),H=ac(m),q=Br(Br({treeType:n,current:null,depth:f?f.depth+1:0,parent:f,children:new Set,path:f?Vr(Vr([],zr(f.path)),[f]):[],layoutTree:f?f.layoutTree:new Hu,presenceId:g,projection:I,variantChildren:H?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===f||void 0===f?void 0:f.isMounted()),blockInitialAnimation:y,isMounted:function(){return Boolean(b)},mount:function(e){b=q.current=e,q.pointTo(q),H&&f&&!W&&(k=null===f||void 0===f?void 0:f.addVariantChild(q)),null===f||void 0===f||f.children.add(q)},unmount:function(){uo.update(B),uo.render(L),uo.preRender(q.updateLayoutProjection),P.forEach((function(e){return e()})),q.stopLayoutAnimation(),q.layoutTree.remove(q),null===k||void 0===k||k(),null===f||void 0===f||f.children.delete(q),null===w||void 0===w||w(),C.clearAllListeners()},addVariantChild:function(e){var t,n=q.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return h&&n===e.treeType?h(q.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return H?q:null===f||void 0===f?void 0:f.getClosestVariantNode()},scheduleUpdateLayoutProjection:f?f.scheduleUpdateLayoutProjection:function(){return yo.preRender(q.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return m.layoutId},getInstance:function(){return b},getStaticValue:function(e){return T[e]},setStaticValue:function(e,t){return T[e]=t},getLatestValues:function(){return T},setVisibility:function(e){q.isVisible!==e&&(q.isVisible=e,q.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),i(q,e,m,t)},addValue:function(e,t){q.hasValue(e)&&q.removeValue(e),R.set(e,t),T[e]=t.get(),function(e,t){var n=t.onChange((function(t){T[e]=t,m.onUpdate&&yo.update(B,!1,!0)})),r=t.onRenderRequest(q.scheduleRender);P.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;R.delete(e),null===(t=P.get(e))||void 0===t||t(),P.delete(e),delete T[e],d(e,E)},hasValue:function(e){return R.has(e)},getValue:function(e,t){var n=R.get(e);return void 0===n&&void 0!==t&&(n=sl(t),q.addValue(e,n)),n},forEachValue:function(e){return R.forEach(e)},readValue:function(e){var n;return null!==(n=T[e])&&void 0!==n?n:l(b,e,t)},setBaseTarget:function(e,t){D[e]=t},getBaseTarget:function(e){if(o){var t=o(m,e);if(void 0!==t&&!ll(t))return t}return D[e]}},C),{build:function(){return F(),E},scheduleRender:function(){yo.render(L,!1,!0)},syncRender:L,setProps:function(e){m=e,C.updatePropListeners(e),M=function(e,t,n){var r;for(var o in t){var i=t[o],a=n[o];if(ll(i))e.addValue(o,i);else if(ll(a))e.addValue(o,sl(i));else if(a!==i)if(e.hasValue(o)){var s=e.getValue(o);!s.hasAnimated&&s.set(i)}else e.addValue(o,sl(null!==(r=e.getStaticValue(o))&&void 0!==r?r:i))}for(var o in n)void 0===t[o]&&e.removeValue(o);return t}(q,p(m),M)},getProps:function(){return m},getVariant:function(e){var t;return null===(t=m.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return m.transition},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===f||void 0===f?void 0:f.getVariantContext();if(!W){var t=(null===f||void 0===f?void 0:f.getVariantContext())||{};return void 0!==m.initial&&(t.initial=m.initial),t}for(var n={},r=0;r<Qu;r++){var o=Zu[r],i=m[o];(nc(i)||!1===i)&&(n[o]=i)}return n},enableLayoutProjection:function(){I.isEnabled=!0,q.layoutTree.add(q)},lockProjectionTarget:function(){I.isTargetLocked=!0},unlockProjectionTarget:function(){q.stopLayoutAnimation(),I.isTargetLocked=!1},getLayoutState:function(){return O},setCrossfader:function(e){S=e},isProjectionReady:function(){return I.isEnabled&&I.isHydrated&&O.isHydrated},startLayoutAnimation:function(e,t,n){void 0===n&&(n=!1);var r=q.getProjectionAnimationProgress()[e],o=n?I.relativeTarget[e]:I.target[e],i=o.min,a=o.max-i;return r.clearListeners(),r.set(i),r.set(i),r.onChange((function(t){q.setProjectionTargetAxis(e,t,t+a,n)})),q.animateMotionValue(e,r,0,t)},stopLayoutAnimation:function(){ei((function(e){return q.getProjectionAnimationProgress()[e].stop()}))},measureViewportBox:function(e){void 0===e&&(e=!0);var n=a(b,t);return e||Xs(n,T),n},getProjectionAnimationProgress:function(){return _||(_={x:sl(0),y:sl(0)}),_},setProjectionTargetAxis:function(e,t,n,r){var o;void 0===r&&(r=!1),r?(I.relativeTarget||(I.relativeTarget={x:{min:0,max:1},y:{min:0,max:1}}),o=I.relativeTarget[e]):(I.relativeTarget=void 0,o=I.target[e]),I.isHydrated=!0,o.min=t,o.max=n,N=!0,C.notifySetAxisTarget()},rebaseProjectionTarget:function(e,t){void 0===t&&(t=O.layout);var n=q.getProjectionAnimationProgress(),r=n.x,o=n.y,i=!I.relativeTarget&&!I.isTargetLocked&&!r.isAnimating()&&!o.isAnimating();(e||i)&&ei((function(e){var n=t[e],r=n.min,o=n.max;q.setProjectionTargetAxis(e,r,o)}))},notifyLayoutReady:function(e){!function(e){var t=e.getProjectionParent();if(t){var n=Ps(t.getLayoutState().layout,e.getLayoutState().layout);ei((function(t){e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)}))}else e.rebaseProjectionTarget()}(q),q.notifyLayoutUpdate(O.layout,q.prevViewportBox||O.layout,e)},resetTransform:function(){return c(q,b,m)},restoreTransform:function(){return u(b,E)},updateLayoutProjection:function(){if(q.isProjectionReady()){var e=O.delta,t=O.treeScale,n=t.x,r=t.y,o=O.deltaTransform;Wu(O,j,q.path,T),N&&q.notifyViewportBoxUpdate(j.target,e),N=!1;var i=Uu(e,t);i===o&&n===t.x&&r===t.y||q.scheduleRender(),O.deltaTransform=i}},updateTreeLayoutProjection:function(){q.layoutTree.forEach(Xu),yo.preRender(U,!1,!0)},getProjectionParent:function(){if(void 0===x){for(var e=!1,t=q.path.length-1;t>=0;t--){var n=q.path[t];if(n.projection.isEnabled){e=n;break}}x=e}return x},resolveRelativeTargetBox:function(){var e=q.getProjectionParent();if(I.relativeTarget&&e&&(function(e,t){gi(e.target.x,e.relativeTarget.x,t.target.x),gi(e.target.y,e.relativeTarget.y,t.target.y)}(I,e.projection),Ms(e))){var t=I.target;Ws(t,t,e.getLatestValues())}},shouldResetTransform:function(){return Boolean(m._layoutResetTransform)},pointTo:function(e){j=e.projection,A=e.getLatestValues(),null===w||void 0===w||w(),w=Do(e.onSetAxisTarget(q.scheduleUpdateLayoutProjection),e.onLayoutAnimationComplete((function(){var e;q.isPresent?q.presence=Gr.Present:null===(e=q.layoutSafeToRemove)||void 0===e||e.call(q)})))},isPresent:!0,presence:Gr.Entering});return q}};function Xu(e){e.resolveRelativeTargetBox()}function Yu(e){e.updateLayoutProjection()}var Ku,Zu=Vr(["initial"],zr(mu)),Qu=Zu.length,Ju=new Set(["width","height","top","left","right","bottom","x","y"]),$u=function(e){return Ju.has(e)},ed=function(e,t){e.set(t,!1),e.set(t)},td=function(e){return e===Di||e===Yi};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(Ku||(Ku={}));var nd=function(e,t){return parseFloat(e.split(", ")[t])},rd=function(e,t){return function(n,r){var o=r.transform;if("none"===o||!o)return 0;var i=o.match(/^matrix3d\((.+)\)$/);if(i)return nd(i[1],t);var a=o.match(/^matrix\((.+)\)$/);return a?nd(a[1],e):0}},od=new Set(["x","y","z"]),id=Tl.filter((function(e){return!od.has(e)}));var ad={width:function(e){var t=e.x;return t.max-t.min},height:function(e){var t=e.y;return t.max-t.min},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:rd(4,13),y:rd(5,14)},sd=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=Br({},t),r=Br({},r);var o=Object.keys(t).filter($u),i=[],a=!1,s=[];if(o.forEach((function(o){var l=e.getValue(o);if(e.hasValue(o)){var c,u=n[o],d=t[o],h=iu(u);if(os(d))for(var p=d.length,f=null===d[0]?1:0;f<p;f++)c?qr(iu(d[f])===c,"All keyframes must be of the same type"):(c=iu(d[f]),qr(c===h||td(h)&&td(c),"Keyframes must be of the same dimension as the current value"));else c=iu(d);if(h!==c)if(td(h)&&td(c)){var m=l.get();"string"===typeof m&&l.set(parseFloat(m)),"string"===typeof d?t[o]=parseFloat(d):Array.isArray(d)&&c===Yi&&(t[o]=d.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===u||0===d)?0===u?l.set(c.transform(u)):t[o]=h.transform(d):(a||(i=function(e){var t=[];return id.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),a=!0),s.push(o),r[o]=void 0!==r[o]?r[o]:t[o],ed(l,d))}})),s.length){var l=function(e,t,n){var r=t.measureViewportBox(),o=t.getInstance(),i=getComputedStyle(o),a=i.display,s={top:i.top,left:i.left,bottom:i.bottom,right:i.right,transform:i.transform};"none"===a&&t.setStaticValue("display",e.display||"block"),t.syncRender();var l=t.measureViewportBox();return n.forEach((function(n){var o=t.getValue(n);ed(o,ad[n](r,s)),e[n]=ad[n](l,i)})),e}(t,e,s);return i.length&&i.forEach((function(t){var n=zr(t,2),r=n[0],o=n[1];e.getValue(r).set(o)})),e.syncRender(),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function ld(e,t,n,r){return function(e){return Object.keys(e).some($u)}(t)?sd(e,t,n,r):{target:t,transitionEnd:r}}var cd=function(e,t,n,r){var o=function(e,t,n){var r,o=Ur(t,[]),i=e.getInstance();if(!(i instanceof HTMLElement))return{target:o,transitionEnd:n};for(var a in n&&(n=Br({},n)),e.forEachValue((function(e){var t=e.get();if(_u(t)){var n=Eu(t,i);n&&e.set(n)}})),o){var s=o[a];if(_u(s)){var l=Eu(s,i);l&&(o[a]=l,n&&(null!==(r=n[a])&&void 0!==r||(n[a]=s)))}}return{target:o,transitionEnd:n}}(e,t,r);return ld(e,t=o.target,n,r=o.transitionEnd)};var ud={treeType:"dom",readValueFromInstance:function(e,t){if(Il(t)){var n=vs(t);return n&&n.default||0}var r,o=(r=e,window.getComputedStyle(r));return(gc(t)?o.getPropertyValue(t):o[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return si(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var o=n.transformValues;void 0===r&&(r=!0);var i=t.transition,a=t.transitionEnd,s=Ur(t,["transition","transitionEnd"]),l=function(e,t,n){var r,o,i={};for(var a in e)i[a]=null!==(r=uu(a,t))&&void 0!==r?r:null===(o=n.getValue(a))||void 0===o?void 0:o.get();return i}(s,i||{},e);if(o&&(a&&(a=o(a)),s&&(s=o(s)),l&&(l=o(l))),r){!function(e,t,n){var r,o,i,a,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=s.length;if(l)for(var c=0;c<l;c++){var u=s[c],d=t[u],h=null;Array.isArray(d)&&(h=d[0]),null===h&&(h=null!==(o=null!==(r=n[u])&&void 0!==r?r:e.readValue(u))&&void 0!==o?o:t[u]),void 0!==h&&null!==h&&("string"===typeof h&&nu(h)?h=parseFloat(h):!su(h)&&da.test(d)&&(h=bs(u,d)),e.addValue(u,sl(h)),null!==(i=(a=n)[u])&&void 0!==i||(a[u]=h),e.setBaseTarget(u,h))}}(e,s,l);var c=cd(e,s,l,a);a=c.transitionEnd,s=c.target}return Br({transition:i,transitionEnd:a},s)},scrapeMotionValuesFromProps:Uc,build:function(e,t,n,r,o,i,a){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden");var s=r.isEnabled&&o.isHydrated;vc(t,n,r,o,i,a.transformTemplate,s?Uu:void 0,s?zu:void 0)},render:Lc},dd=qu(ud),hd=qu(Br(Br({},ud),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Il(t)?(null===(n=vs(t))||void 0===n?void 0:n.default)||0:(t=Fc.has(t)?t:Dc(t),e.getAttribute(t))},scrapeMotionValuesFromProps:zc,build:function(e,t,n,r,o,i,a){var s=r.isEnabled&&o.isHydrated;Oc(t,n,r,o,i,a.transformTemplate,s?Uu:void 0,s?zu:void 0)},render:Bc})),pd=function(e,t){return hc(e)?hd(t,{enableHardwareAcceleration:!1}):dd(t,{enableHardwareAcceleration:!0})},fd=Br(Br(Br(Br({},wu),eu),Su),Lu),md=uc((function(e,t){return function(e,t,n,r){var o=t.forwardMotionProps,i=void 0!==o&&o,a=hc(e)?Kc:Zc;return Br(Br({},a),{preloadedFeatures:n,useRender:Pc(i),createVisualElement:r,Component:e})}(e,t,fd,pd)}));var gd=r(6405),yd=r.n(gd),vd=["color","size","title"];function bd(){return bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(this,arguments)}function xd(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wd=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=xd(e,vd);return l.createElement("svg",bd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),l.createElement("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),l.createElement("path",{fillRule:"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"}))}));wd.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},wd.defaultProps={color:"currentColor",size:"1em",title:null};const Sd=wd;var _d=["color","size","title"];function kd(){return kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kd.apply(this,arguments)}function Td(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ed=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Td(e,_d);return l.createElement("svg",kd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),l.createElement("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),l.createElement("path",{fillRule:"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"}))}));Ed.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},Ed.defaultProps={color:"currentColor",size:"1em",title:null};const Cd=Ed;var Id=["color","size","title"];function jd(){return jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(this,arguments)}function Ad(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Od=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Ad(e,Id);return l.createElement("svg",jd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}),l.createElement("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"}))}));Od.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},Od.defaultProps={color:"currentColor",size:"1em",title:null};const Nd=Od;var Rd=["color","size","title"];function Pd(){return Pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pd.apply(this,arguments)}function Md(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Dd=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Md(e,Rd);return l.createElement("svg",Pd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"}))}));Dd.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},Dd.defaultProps={color:"currentColor",size:"1em",title:null};const Ld=Dd;var Fd=["color","size","title"];function Bd(){return Bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}function Ud(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var zd=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Ud(e,Fd);return l.createElement("svg",Bd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"}))}));zd.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},zd.defaultProps={color:"currentColor",size:"1em",title:null};const Vd=zd;var Gd=["color","size","title"];function Wd(){return Wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wd.apply(this,arguments)}function Hd(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var qd=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Hd(e,Gd);return l.createElement("svg",Wd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),l.createElement("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"}))}));qd.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},qd.defaultProps={color:"currentColor",size:"1em",title:null};const Xd=qd;var Yd=["color","size","title"];function Kd(){return Kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kd.apply(this,arguments)}function Zd(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Qd=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=Zd(e,Yd);return l.createElement("svg",Kd({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"}))}));Qd.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},Qd.defaultProps={color:"currentColor",size:"1em",title:null};const Jd=Qd;var $d=["color","size","title"];function eh(){return eh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eh.apply(this,arguments)}function th(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var nh=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=th(e,$d);return l.createElement("svg",eh({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}))}));nh.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},nh.defaultProps={color:"currentColor",size:"1em",title:null};const rh=nh;var oh=["color","size","title"];function ih(){return ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ih.apply(this,arguments)}function ah(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var sh=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=ah(e,oh);return l.createElement("svg",ih({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"}))}));sh.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},sh.defaultProps={color:"currentColor",size:"1em",title:null};const lh=sh;var ch=["color","size","title"];function uh(){return uh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uh.apply(this,arguments)}function dh(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var hh=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=dh(e,ch);return l.createElement("svg",uh({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"}))}));hh.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},hh.defaultProps={color:"currentColor",size:"1em",title:null};const ph=hh;var fh=["color","size","title"];function mh(){return mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mh.apply(this,arguments)}function gh(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yh=(0,l.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,i=gh(e,fh);return l.createElement("svg",mh({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"}))}));yh.propTypes={color:yd().string,size:yd().oneOfType([yd().string,yd().number]),title:yd().string},yh.defaultProps={color:"currentColor",size:"1em",title:null};const vh=yh;var bh=r(5022),xh=r.n(bh),wh=r(445),Sh=r.n(wh),_h=function(e,t){return _h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},_h(e,t)};var kh=function(){return kh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kh.apply(this,arguments)};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".magnifier {\n  position: relative;\n  display: inline-block;\n  line-height: 0; }\n\n.magnifier-image {\n  cursor: none; }\n\n.magnifying-glass {\n  position: absolute;\n  z-index: 1;\n  background: #e5e5e5 no-repeat;\n  border: solid #ebebeb;\n  box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3);\n  opacity: 0;\n  transition: opacity 0.3s;\n  pointer-events: none; }\n  .magnifying-glass.circle {\n    border-radius: 50%; }\n  .magnifying-glass.visible {\n    opacity: 1; }\n");var Th=function(e){function t(t){var n=e.call(this,t)||this;return n.state={showZoom:!1,mgOffsetX:0,mgOffsetY:0,relX:0,relY:0},n.componentDidMount=function(){n.img.addEventListener("mouseenter",n.onMouseEnter,{passive:!1}),n.img.addEventListener("mousemove",n.onMouseMove,{passive:!1}),n.img.addEventListener("mouseout",n.onMouseOut,{passive:!1}),n.img.addEventListener("touchstart",n.onTouchStart,{passive:!1}),n.img.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.img.addEventListener("touchend",n.onTouchEnd,{passive:!1}),window.addEventListener("resize",n.calcImgBoundsDebounced),window.addEventListener("scroll",n.calcImgBoundsDebounced,!0)},n.componentWillUnmount=function(){n.img.removeEventListener("mouseenter",n.onMouseEnter),n.img.removeEventListener("mousemove",n.onMouseMove),n.img.removeEventListener("mouseout",n.onMouseOut),n.img.removeEventListener("touchstart",n.onTouchStart),n.img.removeEventListener("touchmove",n.onTouchMove),n.img.removeEventListener("touchend",n.onTouchEnd),window.removeEventListener("resize",n.calcImgBoundsDebounced),window.removeEventListener("scroll",n.calcImgBoundsDebounced,!0)},n.onMouseEnter=function(){n.calcImgBounds()},n.onMouseMove=function(e){var t=n.props,r=t.mgMouseOffsetX,o=t.mgMouseOffsetY;if(n.imgBounds){var i=e.target,a=(e.clientX-n.imgBounds.left)/i.clientWidth,s=(e.clientY-n.imgBounds.top)/i.clientHeight;n.setState({mgOffsetX:r,mgOffsetY:o,relX:a,relY:s,showZoom:!0})}},n.onMouseOut=function(){n.setState({showZoom:!1})},n.onTouchStart=function(e){e.preventDefault(),n.calcImgBounds()},n.onTouchMove=function(e){if(e.preventDefault(),n.imgBounds){var t=e.target,r=n.props,o=r.mgTouchOffsetX,i=r.mgTouchOffsetY,a=(e.targetTouches[0].clientX-n.imgBounds.left)/t.clientWidth,s=(e.targetTouches[0].clientY-n.imgBounds.top)/t.clientHeight;a>=0&&s>=0&&a<=1&&s<=1?n.setState({mgOffsetX:o,mgOffsetY:i,relX:a,relY:s,showZoom:!0}):n.setState({showZoom:!1})}},n.onTouchEnd=function(){n.setState({showZoom:!1})},n.calcImgBounds=function(){n.img&&(n.imgBounds=n.img.getBoundingClientRect())},n.render=function(){var e=n.props,t=e.src,r=e.width,o=e.height,i=e.className,a=e.zoomImgSrc,s=e.zoomFactor,c=e.mgHeight,u=e.mgWidth,d=e.mgBorderWidth,h=(e.mgMouseOffsetX,e.mgMouseOffsetY,e.mgTouchOffsetX,e.mgTouchOffsetY,e.mgShape),p=e.mgShowOverflow,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["src","width","height","className","zoomImgSrc","zoomFactor","mgHeight","mgWidth","mgBorderWidth","mgMouseOffsetX","mgMouseOffsetY","mgTouchOffsetX","mgTouchOffsetY","mgShape","mgShowOverflow"]),m=n.state,g=m.mgOffsetX,y=m.mgOffsetY,v=m.relX,b=m.relY,x="magnifying-glass";return m.showZoom&&(x+=" visible"),"circle"===h&&(x+=" circle"),l.createElement("div",{className:"magnifier "+i,style:{width:r,height:o,overflow:p?"visible":"hidden"}},l.createElement("img",kh({className:"magnifier-image",src:t,width:"100%",height:"100%"},f,{onLoad:function(){n.calcImgBounds()},ref:function(e){n.img=e}})),n.imgBounds&&l.createElement("div",{className:x,style:{width:u,height:c,left:"calc("+100*v+"% - "+u/2+"px + "+g+"px - "+d+"px)",top:"calc("+100*b+"% - "+c/2+"px + "+y+"px - "+d+"px)",backgroundImage:'url("'+(a||t)+'")',backgroundPosition:"calc("+100*v+"% + "+u/2+"px - "+v*u+"px) calc("+100*b+"% + "+c/2+"px - "+b*u+"px)",backgroundSize:s*n.imgBounds.width+"% "+s*n.imgBounds.height+"%",borderWidth:d}}))},n.onMouseMove=Sh()(n.onMouseMove.bind(n),20,{trailing:!1}),n.onTouchMove=Sh()(n.onTouchMove.bind(n),20,{trailing:!1}),n.calcImgBoundsDebounced=xh()(n.calcImgBounds,200),n}return function(e,t){function n(){this.constructor=e}_h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.defaultProps={width:"100%",height:"auto",className:"",zoomImgSrc:"",zoomFactor:1.5,mgWidth:150,mgHeight:150,mgBorderWidth:2,mgShape:"circle",mgShowOverflow:!0,mgMouseOffsetX:0,mgMouseOffsetY:0,mgTouchOffsetX:-50,mgTouchOffsetY:-50},t}(l.PureComponent);const Eh=Th;var Ch=!("undefined"===typeof window||!window.document||!window.document.createElement),Ih=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var jh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ih(t,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return Ch?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),u.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),t}(l.Component);jh.propTypes={children:yd().node.isRequired,node:yd().any};const Ah=jh;var Oh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Nh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Oh(t,[{key:"componentDidMount",value:function(){this.renderPortal()}},{key:"componentDidUpdate",value:function(e){this.renderPortal()}},{key:"componentWillUnmount",value:function(){u.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null,this.portal=null}},{key:"renderPortal",value:function(e){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var t=this.props.children;"function"===typeof this.props.children.type&&(t=l.cloneElement(this.props.children)),this.portal=u.unstable_renderSubtreeIntoContainer(this,t,this.props.node||this.defaultNode)}},{key:"render",value:function(){return null}}]),t}(l.Component);const Rh=Nh;Nh.propTypes={children:yd().node.isRequired,node:yd().any};const Ph=u.createPortal?Ah:Rh;var Mh=function(e,t){return Number(e.toFixed(t))},Dh=function(e,t,n){n&&"function"===typeof n&&n(e,t)},Lh={easeOut:function(e){return-Math.cos(e*Math.PI)/2+.5},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},Fh=function(e){"number"===typeof e&&cancelAnimationFrame(e)},Bh=function(e){e.mounted&&(Fh(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function Uh(e,t,n,r){if(e.mounted){var o=(new Date).getTime();Bh(e),e.animation=function(){if(!e.mounted)return Fh(e.animation);var i=(new Date).getTime()-o,a=i/n,s=(0,Lh[t])(a);i>=n?(r(1),e.animation=null):e.animation&&(r(s),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function zh(e,t,n,r){var o=function(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}(t);if(e.mounted&&o){var i=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY,u=t.scale-s,d=t.positionX-l,h=t.positionY-c;0===n?i(t.scale,t.positionX,t.positionY):Uh(e,r,n,(function(e){i(s+u*e,l+d*e,c+h*e)}))}}var Vh=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,o=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var i=function(e,t,n){var r=e.offsetWidth,o=e.offsetHeight,i=t.offsetWidth*n,a=t.offsetHeight*n;return{wrapperWidth:r,wrapperHeight:o,newContentWidth:i,newDiffWidth:r-i,newContentHeight:a,newDiffHeight:o-a}}(n,r,t),a=i.wrapperWidth,s=i.wrapperHeight,l=function(e,t,n,r,o,i,a){var s=e>t?n*(a?1:.5):0,l=r>o?i*(a?1:.5):0;return{minPositionX:e-t-s,maxPositionX:s,minPositionY:r-o-l,maxPositionY:l}}(a,i.newContentWidth,i.newDiffWidth,s,i.newContentHeight,i.newDiffHeight,Boolean(o));return l},Gh=function(e,t,n,r){return Mh(r?e<t?t:e>n?n:e:e,2)},Wh=function(e,t){var n=Vh(e,t);return e.bounds=n,n};function Hh(e,t,n,r,o,i,a){var s=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,h=0;return a&&(d=o,h=i),{x:Gh(e,s-d,c+d,r),y:Gh(t,l-h,u+h,r)}}function qh(e,t,n,r,o,i){var a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY,u=r-s;return"number"!==typeof t||"number"!==typeof n?(console.error("Mouse X and Y position were not provided!"),{x:l,y:c}):Hh(l-t*u,c-n*u,o,i,0,0,null)}function Xh(e,t,n,r,o){var i=t-(o?r:0);return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=i?i:e}var Yh=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,o=e.wrapperComponent,i=t.target,a=null===o||void 0===o?void 0:o.contains(i);return!!(r&&i&&a)&&!Ep(i,n)},Kh=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup.panning.disabled;return!(!t||!n||r)};var Zh=function(e,t){var n=e.setup,r=e.transformState.scale,o=n.minScale,i=n.disablePadding;return t>0&&r>=o&&!i?t:0},Qh=function(e){var t=e.mounted,n=e.setup,r=n.disabled,o=n.velocityAnimation,i=e.transformState.scale;return!(o.disabled&&!(i>1)&&r&&!t)},Jh=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,o=e.setup,i=o.disabled,a=o.velocityAnimation,s=e.transformState.scale;return!(a.disabled&&!(s>1)&&i&&!t)&&!(!n||!r)};function $h(e,t,n,r,o,i,a,s,l,c){if(o){var u;if(t>a&&n>a)return(u=a+(e-a)*c)>l?l:u<a?a:u;if(t<i&&n<i)return(u=i+(e-i)*c)<s?s:u>i?i:u}return r?t:Gh(e,i,a,o)}function ep(e,t){if(Qh(e)){var n=e.lastMousePosition,r=e.velocityTime,o=e.setup,i=e.wrapperComponent,a=o.velocityAnimation.equalToMove,s=Date.now();if(n&&r&&i){var l=function(e,t){return t?Math.min(1,e.offsetWidth/window.innerWidth):1}(i,a),c=t.x-n.x,u=t.y-n.y,d=c/l,h=u/l,p=s-r,f=c*c+u*u,m=Math.sqrt(f)/p;e.velocity={velocityX:d,velocityY:h,total:m}}e.lastMousePosition=t,e.velocityTime=s}}function tp(e,t){var n=e.transformState.scale;Bh(e),Wh(e,n),void 0!==window.TouchEvent&&t instanceof TouchEvent?function(e,t){var n=t.touches,r=e.transformState,o=r.positionX,i=r.positionY;if(e.isPanning=!0,1===n.length){var a=n[0].clientX,s=n[0].clientY;e.startCoords={x:a-o,y:s-i}}}(e,t):function(e,t){var n=e.transformState,r=n.positionX,o=n.positionY;e.isPanning=!0;var i=t.clientX,a=t.clientY;e.startCoords={x:i-r,y:a-o}}(e,t)}function np(e){var t=e.transformState.scale,n=e.setup,r=n.minScale,o=n.alignmentAnimation,i=o.disabled,a=o.sizeX,s=o.sizeY,l=o.animationTime,c=o.animationType;if(!(i||t<r||!a&&!s)){var u=function(e){var t=e.transformState,n=t.positionX,r=t.positionY,o=t.scale,i=e.setup,a=i.disabled,s=i.limitToBounds,l=i.centerZoomedOut,c=e.wrapperComponent;if(!a&&c&&e.bounds){var u=e.bounds,d=u.maxPositionX,h=u.minPositionX,p=u.maxPositionY,f=u.minPositionY,m=n>d||n<h,g=r>p||r<f,y=qh(e,n>d?c.offsetWidth:e.setup.minPositionX||0,r>p?c.offsetHeight:e.setup.minPositionY||0,o,e.bounds,s||l),v=y.x,b=y.y;return{scale:o,positionX:m?v:n,positionY:g?b:r}}}(e);u&&zh(e,u,l,c)}}function rp(e,t,n){var r=e.startCoords,o=e.setup.alignmentAnimation,i=o.sizeX,a=o.sizeY;if(r){var s=function(e,t,n){var r=e.startCoords,o=e.transformState,i=e.setup.panning,a=i.lockAxisX,s=i.lockAxisY,l=o.positionX,c=o.positionY;if(!r)return{x:l,y:c};var u=t-r.x,d=n-r.y;return{x:a?l:u,y:s?c:d}}(e,t,n),l=s.x,c=s.y,u=Zh(e,i),d=Zh(e,a);ep(e,{x:l,y:c}),function(e,t,n,r,o){var i=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(null!==a&&null!==s&&(t!==u||n!==d)){var h=Hh(t,n,s,i,r,o,a),p=h.x,f=h.y;e.setTransformState(c,p,f)}}(e,l,c,u,d)}}function op(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,o=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var i=null===r||void 0===r?void 0:r.getBoundingClientRect(),a=null===o||void 0===o?void 0:o.getBoundingClientRect(),s=(null===i||void 0===i?void 0:i.width)||0,l=(null===i||void 0===i?void 0:i.height)||0,c=(null===a||void 0===a?void 0:a.width)||0,u=(null===a||void 0===a?void 0:a.height)||0,d=s<c||l<u;!t&&n&&(null===n||void 0===n?void 0:n.total)>.1&&d?function(e){var t=e.velocity,n=e.bounds,r=e.setup,o=e.wrapperComponent;if(Jh(e)&&t&&n&&o){var i=t.velocityX,a=t.velocityY,s=t.total,l=n.maxPositionX,c=n.minPositionX,u=n.maxPositionY,d=n.minPositionY,h=r.limitToBounds,p=r.alignmentAnimation,f=r.zoomAnimation,m=r.panning,g=m.lockAxisY,y=m.lockAxisX,v=f.animationType,b=p.sizeX,x=p.sizeY,w=p.velocityAlignmentTime,S=function(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,o=n.animationTime,i=n.sensitivity;return r?o*t*i:o}(e,s),_=Math.max(S,w),k=Zh(e,b),T=Zh(e,x),E=k*o.offsetWidth/100,C=T*o.offsetHeight/100,I=l+E,j=c-E,A=u+C,O=d-C,N=e.transformState,R=(new Date).getTime();Uh(e,v,_,(function(t){var n=e.transformState,r=n.scale,o=n.positionX,s=n.positionY,f=((new Date).getTime()-R)/w,m=1-(0,Lh[p.animationType])(Math.min(1,f)),v=1-t,b=o+i*v,x=s+a*v,S=$h(b,N.positionX,o,y,h,c,l,j,I,m),_=$h(x,N.positionY,s,g,h,d,u,O,A,m);o===b&&s===x||e.setTransformState(r,S,_)}))}}(e):np(e)}}function ip(e,t,n,r){var o=e.setup,i=o.minScale,a=o.maxScale,s=o.limitToBounds,l=Xh(Mh(t,2),i,a,0,!1),c=qh(e,n,r,l,Wh(e,l),s);return{scale:l,positionX:c.x,positionY:c.y}}function ap(e,t,n){var r=e.transformState.scale,o=e.wrapperComponent,i=e.setup,a=i.minScale,s=i.limitToBounds,l=i.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,h=c||r>=a;if((r>=1||s)&&np(e),!h&&o&&e.mounted){var p=ip(e,a,t||o.offsetWidth/2,n||o.offsetHeight/2);p&&zh(e,p,u,d)}}var sp=function(){return sp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sp.apply(this,arguments)};function lp(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var cp=1,up=0,dp=0,hp={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,wheel:{step:.2,disabled:!1,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},pp=function(e){var t,n,r,o;return{previousScale:null!==(t=e.initialScale)&&void 0!==t?t:cp,scale:null!==(n=e.initialScale)&&void 0!==n?n:cp,positionX:null!==(r=e.initialPositionX)&&void 0!==r?r:up,positionY:null!==(o=e.initialPositionY)&&void 0!==o?o:dp}},fp=function(e){var t=sp({},hp);return Object.keys(e).forEach((function(n){var r="undefined"!==typeof e[n];if("undefined"!==typeof hp[n]&&r){var o=Object.prototype.toString.call(hp[n]),i="[object Object]"===o,a="[object Array]"===o;t[n]=i?sp(sp({},hp[n]),e[n]):a?lp(lp([],hp[n],!0),e[n],!0):e[n]}})),t},mp=function(e,t,n){var r=e.transformState.scale,o=e.wrapperComponent,i=e.setup,a=i.maxScale,s=i.minScale,l=i.zoomAnimation.size;if(!o)throw new Error("Wrapper is not mounted");var c=r*Math.exp(t*n);return Xh(Mh(c,3),s,a,l,!1)};function gp(e,t,n,r,o){var i=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY;if(!i)return console.error("No WrapperComponent found");var u=(i.offsetWidth/2-l)/s,d=(i.offsetHeight/2-c)/s,h=ip(e,mp(e,t,n),u,d);if(!h)return console.error("Error during zoom event. New transformation state was not calculated.");zh(e,h,r,o)}function yp(e,t,n,r){var o=e.setup,i=e.wrapperComponent,a=o.limitToBounds,s=pp(e.props),l=e.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(i){var h=Vh(e,s.scale),p=Hh(s.positionX,s.positionY,h,a,0,0,i),f={scale:s.scale,positionX:p.x,positionY:p.y};c===s.scale&&u===s.positionX&&d===s.positionY||(null===r||void 0===r||r(),zh(e,f,t,n))}}var vp=function(e){return function(t,n,r){void 0===t&&(t=.5),void 0===n&&(n=300),void 0===r&&(r="easeOut"),gp(e,1,t,n,r)}},bp=function(e){return function(t,n,r){void 0===t&&(t=.5),void 0===n&&(n=300),void 0===r&&(r="easeOut"),gp(e,-1,t,n,r)}},xp=function(e){return function(t,n,r,o,i){void 0===o&&(o=300),void 0===i&&(i="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,c=a.scale,u=e.wrapperComponent,d=e.contentComponent;if(!e.setup.disabled&&u&&d){var h={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};zh(e,h,o,i)}}},wp=function(e){return function(t,n){void 0===t&&(t=200),void 0===n&&(n="easeOut"),yp(e,t,n)}},Sp=function(e){return function(t,n,r){void 0===n&&(n=200),void 0===r&&(r="easeOut");var o=e.transformState,i=e.wrapperComponent,a=e.contentComponent;if(i&&a){var s=Ip(t||o.scale,i,a);zh(e,s,n,r)}}},_p=function(e){return function(t,n,r,o){void 0===r&&(r=600),void 0===o&&(o="easeOut"),Bh(e);var i=e.wrapperComponent,a="string"===typeof t?document.getElementById(t):t;if(i&&a&&i.contains(a)){var s=function(e,t,n){var r=e.wrapperComponent,o=e.contentComponent,i=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,c=a.maxScale;if(!r||!o)return i;var u=r.getBoundingClientRect(),d=t.getBoundingClientRect(),h=function(e,t,n,r){var o=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=n.getBoundingClientRect(),s=i.x*r.scale,l=i.y*r.scale;return{x:(o.x-a.x+s)/r.scale,y:(o.y-a.y+l)/r.scale}}(t,r,o,i),p=h.x,f=h.y,m=d.width/i.scale,g=d.height/i.scale,y=r.offsetWidth/m,v=r.offsetHeight/g,b=Xh(n||Math.min(y,v),l,c,0,!1),x=(u.width-m*b)/2,w=(u.height-g*b)/2,S=Hh((u.left-p)*b+x,(u.top-f)*b+w,Vh(e,b),s,0,0,r);return{positionX:S.x,positionY:S.y,scale:b}}(e,a,n);zh(e,s,r,o)}}},kp=function(e){return{instance:e,state:e.transformState,zoomIn:vp(e),zoomOut:bp(e),setTransform:xp(e),resetTransform:wp(e),centerView:Sp(e),zoomToElement:_p(e)}};function Tp(){try{return{get passive(){return!0,!1}}}catch(e){return!1}}var Ep=function(e,t){var n=e.tagName.toUpperCase();return!!t.find((function(e){return e.toUpperCase()===n}))||!!t.find((function(t){return e.classList.contains(t)}))},Cp=function(e){e&&clearTimeout(e)},Ip=function(e,t,n){var r=n.offsetWidth*e,o=n.offsetHeight*e;return{scale:e,positionX:(t.offsetWidth-r)/2,positionY:(t.offsetHeight-o)/2}};function jp(e,t,n){var r=t.getBoundingClientRect(),o=0,i=0;if("clientX"in e)o=(e.clientX-r.left)/n,i=(e.clientY-r.top)/n;else{var a=e.touches[0];o=(a.clientX-r.left)/n,i=(a.clientY-r.top)/n}return(Number.isNaN(o)||Number.isNaN(i))&&console.error("No mouse or touch offset found"),{x:o,y:i}}var Ap=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},Op=function(e,t){var n=e.props,r=n.onWheel,o=n.onZoom,i=e.contentComponent,a=e.setup,s=e.transformState.scale,l=a.limitToBounds,c=a.centerZoomedOut,u=a.zoomAnimation,d=a.wheel,h=a.disablePadding,p=u.size,f=u.disabled,m=d.step;if(!i)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var g=function(e,t){var n,r,o=function(e){return e?e.deltaY<0?1:-1:0}(e);return r=o,"number"===typeof(n=t)?n:r}(t,null),y=function(e,t,n,r,o){var i=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,c=s.minScale,u=s.zoomAnimation,d=s.disablePadding,h=u.size,p=u.disabled;if(!a)throw new Error("Wrapper is not mounted");var f=i+t*(i-i*n)*n;if(o)return f;var m=!r&&!p;return Xh(Mh(f,3),c,l,h,m&&!d)}(e,g,m,!t.ctrlKey);if(s!==y){var v=Wh(e,y),b=jp(t,i,s),x=l&&(f||0===p||c||h),w=qh(e,b.x,b.y,y,v,x),S=w.x,_=w.y;e.previousWheelEvent=t,e.setTransformState(y,S,_),Dh(kp(e),t,r),Dh(kp(e),t,o)}},Np=function(e,t){var n=e.props,r=n.onWheelStop,o=n.onZoomStop;Cp(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout((function(){e.mounted&&(ap(e,t.x,t.y),e.wheelAnimationTimer=null)}),100);var i=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,o=e.setup,i=o.maxScale,a=o.minScale;return!!n&&(r<i||r>a||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY))}(e,t);i&&(Cp(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout((function(){e.mounted&&(e.wheelStopEventTimer=null,Dh(kp(e),t,r),Dh(kp(e),t,o))}),160))},Rp=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,o=e.transformState.scale,i=e.setup,a=i.limitToBounds,s=i.centerZoomedOut,l=i.zoomAnimation,c=l.disabled,u=l.size;if(null!==r&&n){var d=function(e,t,n){var r=n.getBoundingClientRect(),o=e.touches,i=Mh(o[0].clientX-r.left,5),a=Mh(o[0].clientY-r.top,5);return{x:(i+Mh(o[1].clientX-r.left,5))/2/t,y:(a+Mh(o[1].clientY-r.top,5))/2/t}}(t,o,n);if(Number.isFinite(d.x)&&Number.isFinite(d.y)){var h=Ap(t),p=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,o=e.setup,i=o.maxScale,a=o.minScale,s=o.zoomAnimation,l=o.disablePadding,c=s.size,u=s.disabled;if(!n||null===r||!t)throw new Error("Pinch touches distance was not provided");return t<0?e.transformState.scale:Xh(Mh(t/r*n,2),a,i,c,!u&&!l)}(e,h);if(p!==o){var f=Wh(e,p),m=a&&(c||0===u||s),g=qh(e,d.x,d.y,p,f,m),y=g.x,v=g.y;e.pinchMidpoint=d,e.lastDistance=h,e.setTransformState(p,y,v)}}}},Pp=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;Cp(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout((function(){e.doubleClickStopEventTimer=null,Dh(kp(e),t,n)}),r)};function Mp(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,o=e.transformState,i=e.contentComponent,a=o.scale,s=e.props,l=s.onZoomStart,c=s.onZoom,u=n.doubleClick,d=u.disabled,h=u.mode,p=u.step,f=u.animationTime,m=u.animationType;if(!d&&!r){if("reset"===h)return function(e,t){var n=e.props,r=n.onZoomStart,o=n.onZoom,i=e.setup.doubleClick,a=i.animationTime,s=i.animationType;Dh(kp(e),t,r),yp(e,a,s,(function(){return Dh(kp(e),t,o)})),Pp(e,t)}(e,t);if(!i)return console.error("No ContentComponent found");var g=mp(e,"zoomOut"===h?-1:1,p);if(a!==g){Dh(kp(e),t,l);var y=jp(t,i,a),v=ip(e,g,y.x,y.y);if(!v)return console.error("Error during zoom event. New transformation state was not calculated.");Dh(kp(e),t,c),zh(e,v,f,m),Pp(e,t)}}}var Dp=function(e){var t=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(e){Wh(t,t.transformState.scale),t.setup=fp(e)},this.initializeWindowEvents=function(){var e,n=Tp(),r=null===(e=t.wrapperComponent)||void 0===e?void 0:e.ownerDocument,o=null===r||void 0===r?void 0:r.defaultView;null===o||void 0===o||o.addEventListener("mousedown",t.onPanningStart,n),null===o||void 0===o||o.addEventListener("mousemove",t.onPanning,n),null===o||void 0===o||o.addEventListener("mouseup",t.onPanningStop,n),null===r||void 0===r||r.addEventListener("mouseleave",t.clearPanning,n),null===o||void 0===o||o.addEventListener("keyup",t.setKeyUnPressed,n),null===o||void 0===o||o.addEventListener("keydown",t.setKeyPressed,n)},this.cleanupWindowEvents=function(){var e,n,r=Tp(),o=null===(e=t.wrapperComponent)||void 0===e?void 0:e.ownerDocument,i=null===o||void 0===o?void 0:o.defaultView;null===i||void 0===i||i.removeEventListener("mousedown",t.onPanningStart,r),null===i||void 0===i||i.removeEventListener("mousemove",t.onPanning,r),null===i||void 0===i||i.removeEventListener("mouseup",t.onPanningStop,r),null===o||void 0===o||o.removeEventListener("mouseleave",t.clearPanning,r),null===i||void 0===i||i.removeEventListener("keyup",t.setKeyUnPressed,r),null===i||void 0===i||i.removeEventListener("keydown",t.setKeyPressed,r),document.removeEventListener("mouseleave",t.clearPanning,r),Bh(t),null===(n=t.observer)||void 0===n||n.disconnect()},this.handleInitializeWrapperEvents=function(e){var n=Tp();e.addEventListener("wheel",t.onWheelZoom,n),e.addEventListener("dblclick",t.onDoubleClick,n),e.addEventListener("touchstart",t.onTouchPanningStart,n),e.addEventListener("touchmove",t.onTouchPanning,n),e.addEventListener("touchend",t.onTouchPanningStop,n)},this.handleInitialize=function(e){var n=t.setup.centerOnInit;t.applyTransformation(),n&&(t.setCenter(),t.observer=new ResizeObserver((function(){var e;t.setCenter(),null===(e=t.observer)||void 0===e||e.disconnect()})),t.observer.observe(e))},this.onWheelZoom=function(e){if(!t.setup.disabled){var n=function(e,t){var n=e.setup.wheel,r=n.disabled,o=n.wheelDisabled,i=n.touchPadDisabled,a=n.excluded,s=e.isInitialized,l=e.isPanning,c=t.target;return!(!s||l||r||!c)&&!(o&&!t.ctrlKey)&&(!i||!t.ctrlKey)&&!Ep(c,a)}(t,e);n&&t.isPressingKeys(t.setup.wheel.activationKeys)&&(function(e,t){var n=e.props,r=n.onWheelStart,o=n.onZoomStart;e.wheelStopEventTimer||(Bh(e),Dh(kp(e),t,r),Dh(kp(e),t,o))}(t,e),Op(t,e),Np(t,e))}},this.onPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;n||Yh(t,e)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(e.preventDefault(),e.stopPropagation(),Bh(t),tp(t,e),Dh(kp(t),e,r))},this.onPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;n||Kh(t)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(e.preventDefault(),e.stopPropagation(),rp(t,e.clientX,e.clientY),Dh(kp(t),e,r))},this.onPanningStop=function(e){var n=t.props.onPanningStop;t.isPanning&&(op(t),Dh(kp(t),e,n))},this.onPinchStart=function(e){var n=t.setup.disabled,r=t.props,o=r.onPinchingStart,i=r.onZoomStart;if(!n){var a=function(e,t){var n=e.setup.pinch,r=n.disabled,o=n.excluded,i=e.isInitialized,a=t.target;return!(!i||r||!a)&&!Ep(a,o)}(t,e);a&&(function(e,t){var n=Ap(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,Bh(e)}(t,e),Bh(t),Dh(kp(t),e,o),Dh(kp(t),e,i))}},this.onPinch=function(e){var n=t.setup.disabled,r=t.props,o=r.onPinching,i=r.onZoom;if(!n){var a=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance;return!(!n||t||!r)}(t);a&&(e.preventDefault(),e.stopPropagation(),Rp(t,e),Dh(kp(t),e,o),Dh(kp(t),e,i))}},this.onPinchStop=function(e){var n=t.props,r=n.onPinchingStop,o=n.onZoomStop;t.pinchStartScale&&(function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,ap(e,null===t||void 0===t?void 0:t.x,null===t||void 0===t?void 0:t.y)}(t),Dh(kp(t),e,r),Dh(kp(t),e,o))},this.onTouchPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;if(!n&&Yh(t,e))if(t.lastTouch&&+new Date-t.lastTouch<200&&1===e.touches.length)t.onDoubleClick(e);else{t.lastTouch=+new Date,Bh(t);var o=e.touches,i=1===o.length,a=2===o.length;i&&(Bh(t),tp(t,e),Dh(kp(t),e,r)),a&&t.onPinchStart(e)}},this.onTouchPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;if(t.isPanning&&1===e.touches.length){if(n)return;if(!Kh(t))return;e.preventDefault(),e.stopPropagation();var o=e.touches[0];rp(t,o.clientX,o.clientY),Dh(kp(t),e,r)}else e.touches.length>1&&t.onPinch(e)},this.onTouchPanningStop=function(e){t.onPanningStop(e),t.onPinchStop(e)},this.onDoubleClick=function(e){if(!t.setup.disabled){var n=function(e,t){var n=e.isInitialized,r=e.setup,o=e.wrapperComponent,i=r.doubleClick,a=i.disabled,s=i.excluded,l=t.target,c=null===o||void 0===o?void 0:o.contains(l);return!(!(n&&l&&c)||a)&&!Ep(l,s)}(t,e);n&&Mp(t,e)}},this.clearPanning=function(e){t.isPanning&&t.onPanningStop(e)},this.setKeyPressed=function(e){t.pressedKeys[e.key]=!0},this.setKeyUnPressed=function(e){t.pressedKeys[e.key]=!1},this.isPressingKeys=function(e){return!e.length||Boolean(e.find((function(e){return t.pressedKeys[e]})))},this.setTransformState=function(e,n,r){var o=t.props.onTransformed;if(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))console.error("Detected NaN set state values");else{e!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=e),t.transformState.positionX=n,t.transformState.positionY=r;var i=kp(t);t.onChangeCallbacks.forEach((function(e){return e(i)})),Dh(i,{scale:e,positionX:n,positionY:r},o),t.applyTransformation()}},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var e=Ip(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(e.scale,e.positionX,e.positionY)}},this.handleTransformStyles=function(e,n,r){return t.props.customTransform?t.props.customTransform(e,n,r):function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")}(e,n,r)},this.applyTransformation=function(){if(t.mounted&&t.contentComponent){var e=t.transformState,n=e.scale,r=e.positionX,o=e.positionY,i=t.handleTransformStyles(r,o,n);t.contentComponent.style.transform=i}},this.getContext=function(){return kp(t)},this.onChange=function(e){return t.onChangeCallbacks.has(e)||t.onChangeCallbacks.add(e),function(){t.onChangeCallbacks.delete(e)}},this.init=function(e,n){t.cleanupWindowEvents(),t.wrapperComponent=e,t.contentComponent=n,Wh(t,t.transformState.scale),t.handleInitializeWrapperEvents(e),t.handleInitialize(n),t.initializeWindowEvents(),t.isInitialized=!0,Dh(kp(t),void 0,t.props.onInit)},this.props=e,this.setup=fp(this.props),this.transformState=pp(this.props)},Lp=l.createContext(null),Fp=l.forwardRef((function(e,t){var n=(0,l.useState)(0)[1],r=e.children,o=(0,l.useRef)(new Dp(e)).current,i=function(e,t){return"function"===typeof e?e(t):e}(e.children,kp(o)),a=(0,l.useCallback)((function(){"function"===typeof r&&n((function(e){return e+1}))}),[r]);return(0,l.useImperativeHandle)(t,(function(){return kp(o)}),[o]),(0,l.useEffect)((function(){o.update(e)}),[o,e]),(0,l.useEffect)((function(){return o.onChange(a)}),[o,e,a]),l.createElement(Lp.Provider,{value:o},i)}));var Bp="transform-component-module_wrapper__7HFJe",Up="transform-component-module_content__uCDPE";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".transform-component-module_wrapper__7HFJe {\n  position: relative;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  overflow: hidden;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none;\n  margin: 0;\n  padding: 0;\n}\n.transform-component-module_content__uCDPE {\n  display: flex;\n  flex-wrap: wrap;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  margin: 0;\n  padding: 0;\n  transform-origin: 0% 0%;\n}\n.transform-component-module_content__uCDPE img {\n  pointer-events: none;\n}\n");var zp=function(e){var t=e.children,n=e.wrapperClass,r=void 0===n?"":n,o=e.contentClass,i=void 0===o?"":o,a=e.wrapperStyle,s=e.contentStyle,c=e.wrapperProps,u=void 0===c?{}:c,d=e.contentProps,h=void 0===d?{}:d,p=(0,l.useContext)(Lp).init,f=(0,l.useRef)(null),m=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e=f.current,t=m.current;null!==e&&null!==t&&p&&p(e,t)}),[]),l.createElement("div",sp({},u,{ref:f,className:"react-transform-wrapper ".concat(Bp," ").concat(r),style:a}),l.createElement("div",sp({},h,{ref:m,className:"react-transform-component ".concat(Up," ").concat(i),style:s}),t))},Vp=(l.forwardRef((function(e,t){var n,r=(0,l.useRef)(null),o=(0,l.useContext)(Lp);return(0,l.useEffect)((function(){return o.onChange((function(e){if(r.current){r.current.style.transform=o.handleTransformStyles(0,0,1/e.state.scale)}}))}),[o]),l.createElement("div",sp({},e,{ref:(n=[r,t],function(e){n.forEach((function(t){"function"===typeof t?t(e):null!=t&&(t.current=e)}))})}))})),r(1250)),Gp=function(){return Gp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gp.apply(this,arguments)},Wp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Hp=!1,qp=(0,l.forwardRef)((function(e,t){var n=e.style,r=Wp(e,["style"]),o=function(){var e=(0,l.useState)(Yp),t=e[0],n=e[1],r=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1];return(0,l.useEffect)((function(){Kp()&&n(!0)}),[]),t}();return(0,l.useEffect)((function(){if(r)return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)};function e(){var e=Yp();n(e)}}),[r]),r?t:null}();!Hp&&(null===n||void 0===n?void 0:n.height)&&(Hp=!0,console.warn("<Div100vh /> overrides the height property of the style prop"));var i=Gp(Gp({},n),{height:o?o+"px":"100vh"});return l.createElement("div",Gp({ref:t,style:i},r))}));qp.displayName="Div100vh";const Xp=qp;function Yp(){return Kp()?window.innerHeight:null}function Kp(){return"undefined"!==typeof window&&"undefined"!==typeof document}var Zp=r(7316),Qp="keydown",Jp="keypress",$p="keyup",ef={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function nf(e,t){return Array.isArray(e)?e.includes(t):e===t}function rf(e,t){var n=t.keyCode,r=t.keyValue,o=t.code;if(!of(r)&&nf(r,af(e)))return!0;if(!of(o)&&nf(o,e.code))return!0;if(!of(n)&&nf(n,e.keyCode||e.which))return!0;return!1}function of(e){return void 0===e||null===e}function af(e){var t=e.key,n=e.keyCode,r=e.type;if(t){var o=ef[t]||t;if("Unidentified"!==o)return o}if(r===Jp){var i=function(e){var t=e.charCode,n=e.keyCode;if("charCode"in e){if(0===t&&13===n)return 13}else t=n;if(t>=32||13===t)return t;return 0}(e);return 13===i?"Enter":String.fromCharCode(i)}return r===Qp||r===$p?tf[String(n)]||"Unidentified":""}var sf=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},lf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uf=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},df=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},hf=function(e){function t(e){sf(this,t);var n=df(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKey=function(e){var t=n.props,r=t.keyValue,o=t.keyCode,i=t.code,a=t.onKeyHandle;if(a){var s=e.target;s instanceof window.HTMLElement&&function(e){if(!e)return!1;var t=e.tagName,n=function(e){return"function"===typeof e.getAttribute&&!!e.getAttribute("contenteditable")}(e);return"INPUT"===t||"TEXTAREA"===t||n}(s)||rf(e,{keyValue:r,keyCode:o,code:i})&&a(e)}},e.keyCode&&console.warn("Warning: Deprecated propType: `keyCode` is deprecated in favour of `code` for `KeyHandler`."),e.keyValue||e.keyCode||e.code||console.error("Warning: Failed propType: Missing prop `code`, `keyValue` or `keyCode` for `KeyHandler`."),n}return uf(t,e),lf(t,[{key:"shouldComponentUpdate",value:function(){return!1}}]),lf(t,[{key:"componentDidMount",value:function(){Zp.canUseDOM&&window.document.addEventListener(this.props.keyEventName,this.handleKey)}},{key:"componentWillUnmount",value:function(){Zp.canUseDOM&&window.document.removeEventListener(this.props.keyEventName,this.handleKey)}},{key:"render",value:function(){return null}}]),t}(l.Component);function pf(e){return function(t){var n=t||{},r=n.keyValue,o=n.keyCode,i=n.code,a=n.keyEventName;return function(t){return function(n){function s(){var t,n,r;sf(this,s);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=df(this,(t=s.__proto__||Object.getPrototypeOf(s)).call.apply(t,[this].concat(i))),r.state={keyCode:null,keyValue:null,code:null},r.handleKey=function(t){e&&e(t,r.state)?r.setState({keyValue:null,keyCode:null}):r.setState({keyValue:af(t),keyCode:t.keyCode})},df(r,n)}return uf(s,n),lf(s,[{key:"render",value:function(){return l.createElement(l.Fragment,null,l.createElement(hf,{keyValue:r,keyCode:o,code:i,keyEventName:a,onKeyHandle:this.handleKey}),l.createElement(t,cf({},this.props,this.state)))}}]),s}(l.Component)}}}hf.propTypes={keyValue:yd().oneOfType([yd().string,yd().arrayOf(yd().string)]),keyCode:yd().oneOfType([yd().number,yd().arrayOf(yd().number)]),code:yd().oneOfType([yd().string,yd().arrayOf(yd().string)]),keyEventName:yd().oneOf([Qp,Jp,$p]),onKeyHandle:yd().func},hf.defaultProps={keyEventName:$p};pf(),pf(rf);const ff=hf;const mf="undefined"!==typeof window?l.useLayoutEffect:l.useEffect;function gf(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function yf(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every((n=>{const r=e[n],o=t[n];return"function"===typeof r?"".concat(r)==="".concat(o):gf(r)&&gf(o)?yf(r,o):r===o}))}function vf(e){return e.concat().sort(((e,t)=>e.name>t.name?1:-1)).map((e=>e.options))}function bf(e){return"number"===typeof e}function xf(e){return"string"===typeof e}function wf(e){return"boolean"===typeof e}function Sf(e){return"[object Object]"===Object.prototype.toString.call(e)}function _f(e){return Math.abs(e)}function kf(e){return Math.sign(e)}function Tf(e,t){return _f(e-t)}function Ef(e){return Of(e).map(Number)}function Cf(e){return e[If(e)]}function If(e){return Math.max(0,e.length-1)}function jf(e,t){return t===If(e)}function Af(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from(Array(e),((e,n)=>t+n))}function Of(e){return Object.keys(e)}function Nf(e,t){return[e,t].reduce(((e,t)=>(Of(t).forEach((n=>{const r=e[n],o=t[n],i=Sf(r)&&Sf(o);e[n]=i?Nf(r,o):o})),e)),{})}function Rf(e,t){return"undefined"!==typeof t.MouseEvent&&e instanceof t.MouseEvent}function Pf(){let e=[];const t={add:function(n,r,o){let i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};if("addEventListener"in n)n.addEventListener(r,o,a),i=()=>n.removeEventListener(r,o,a);else{const e=n;e.addListener(o),i=()=>e.removeListener(o)}return e.push(i),t},clear:function(){e=e.filter((e=>e()))}};return t}function Mf(e,t,n,r){const o=Pf(),i=1e3/60;let a=null,s=0,l=0;function c(e){a||(a=e);const o=e-a;for(a=e,s+=o;s>=i;)n(),s-=i;const u=_f(s/i);r(u),l&&t.requestAnimationFrame(c)}function u(){t.cancelAnimationFrame(l),a=null,s=0,l=0}return{init:function(){o.add(e,"visibilitychange",(()=>{e.hidden&&(a=null,s=0)}))},destroy:function(){u(),o.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:u,update:n,render:r}}function Df(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=_f(e-t);function r(t){return t<e}function o(e){return e>t}function i(e){return r(e)||o(e)}const a={length:n,max:t,min:e,constrain:function(n){return i(n)?r(n)?e:t:n},reachedAny:i,reachedMax:o,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return a}function Lf(e,t,n){const{constrain:r}=Df(0,e),o=e+1;let i=a(t);function a(e){return n?_f((o+e)%o):r(e)}function s(){return i}function l(){return Lf(e,s(),n)}const c={get:s,set:function(e){return i=a(e),c},add:function(e){return l().set(s()+e)},clone:l};return c}function Ff(e,t,n,r,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b){const{cross:x}=e,w=["INPUT","SELECT","TEXTAREA"],S={passive:!1},_=Pf(),k=Pf(),T=Df(50,225).constrain(f.measure(20)),E={mouse:300,touch:400},C={mouse:500,touch:600},I=m?43:25;let j=!1,A=0,O=0,N=!1,R=!1,P=!1,M=!1;function D(e){const n=a.readPoint(e),r=a.readPoint(e,x),o=Tf(n,A),s=Tf(r,O);if(!R&&!M){if(!e.cancelable)return L(e);if(R=o>s,!R)return L(e)}const c=a.pointerMove(e);o>g&&(P=!0),u.useFriction(.3).useDuration(1),l.start(),i.add(t.apply(c)),e.preventDefault()}function L(e){const n=d.byDistance(0,!1).index!==h.get(),r=a.pointerUp(e)*(m?C:E)[M?"mouse":"touch"],o=function(e,t){const n=h.add(-1*kf(e)),r=d.byDistance(e,!m).distance;return m||_f(e)<T?r:y&&t?.5*r:d.byIndex(n.get(),0).distance}(t.apply(r),n),i=function(e,t){if(0===e||0===t)return 0;if(_f(e)<=_f(t))return 0;const n=Tf(_f(e),_f(t));return _f(n/e)}(r,o),s=I-10*i,l=v+i/50;R=!1,N=!1,k.clear(),u.useDuration(s).useFriction(l),c.distance(o,!m),M=!1,p.emit("pointerUp")}function F(e){P&&(e.stopPropagation(),e.preventDefault())}return{init:function(e){if(!b)return;function t(t){(wf(b)||b(e,t))&&function(e){const t=Rf(e,o);if(M=t,t&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;P=m&&t&&!e.buttons&&j,j=Tf(i.get(),s.get())>=2,N=!0,a.pointerDown(e),u.useFriction(0).useDuration(0),i.set(s),function(){const e=M?r:n;k.add(e,"touchmove",D,S).add(e,"touchend",L).add(e,"mousemove",D,S).add(e,"mouseup",L)}(),A=a.readPoint(e),O=a.readPoint(e,x),p.emit("pointerDown")}(t)}const l=n;_.add(l,"dragstart",(e=>e.preventDefault()),S).add(l,"touchmove",(()=>{}),S).add(l,"touchend",(()=>{})).add(l,"touchstart",t).add(l,"mousedown",t).add(l,"touchcancel",L).add(l,"contextmenu",L).add(l,"click",F,!0)},pointerDown:function(){return N},destroy:function(){_.clear(),k.clear()}}}function Bf(e,t){let n,r;function o(e){return e.timeStamp}function i(n,r){const o=r||e.scroll,i="client".concat("x"===o?"X":"Y");return(Rf(n,t)?n:n.touches[0])[i]}return{pointerDown:function(e){return n=e,r=e,i(e)},pointerMove:function(e){const t=i(e)-i(r),a=o(e)-o(n)>170;return r=e,a&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=i(r)-i(n),a=o(e)-o(n),s=o(e)-o(r)>170,l=t/a;return a&&!s&&_f(l)>.1?l:0},readPoint:i}}function Uf(e,t,n,r,o,i,a){let s,l,c=[],u=!1;function d(e){return o.measureSize(a.measure(e))}return{init:function(o){if(!i)return;l=d(e),c=r.map(d),s=new ResizeObserver((a=>{u||(wf(i)||i(o,a))&&function(i){for(const a of i){const i=a.target===e,s=r.indexOf(a.target),u=i?l:c[s];if(_f(d(i?e:r[s])-u)>=.5){n.requestAnimationFrame((()=>{o.reInit(),t.emit("resize")}));break}}}(a)})),[e].concat(r).forEach((e=>s.observe(e)))},destroy:function(){s&&s.disconnect(),u=!0}}}function zf(e,t,n,r,o){const i=o.measure(10),a=o.measure(50),s=Df(.1,.99);let l=!1;return{constrain:function(o){if(l||!e.reachedAny(n.get())||!e.reachedAny(t.get()))return;const c=e.reachedMin(t.get())?"min":"max",u=_f(e[c]-t.get()),d=n.get()-t.get(),h=s.constrain(u/a);n.subtract(d*h),!o&&_f(d)<i&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function Vf(e,t,n,r){const o=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:s}=Df(o,i);const l={loop:function(t){if(!function(e){return 1===e?s(n.get()):-1===e&&a(n.get())}(t))return;const o=e*(-1*t);r.forEach((e=>e.add(o)))}};return l}function Gf(e,t,n,r,o){const{reachedAny:i,removeOffset:a,constrain:s}=r;function l(e){return e.concat().sort(((e,t)=>_f(e)-_f(t)))[0]}function c(t,r){const o=[t,t+n,t-n];if(!e)return o[0];if(!r)return l(o);const i=o.filter((e=>kf(e)===r));return i.length?l(i):Cf(o)-n}const u={byDistance:function(n,r){const l=o.get()+n,{index:u,distance:d}=function(n){const r=e?a(n):s(n),o=t.map((e=>e-r)).map((e=>c(e,0))).map(((e,t)=>({diff:e,index:t}))).sort(((e,t)=>_f(e.diff)-_f(t.diff))),{index:i}=o[0];return{index:i,distance:r}}(l),h=!e&&i(l);return!r||h?{index:u,distance:n}:{index:u,distance:n+c(t[u]-d,0)}},byIndex:function(e,n){return{index:e,distance:c(t[e]-o.get(),n)}},shortcut:c};return u}function Wf(e){let t=e;function n(e){return bf(e)?e:e.get()}const r={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return r}function Hf(e,t,n){const r="x"===e.scroll?function(e){return"translate3d(".concat(e,"px,0px,0px)")}:function(e){return"translate3d(0px,".concat(e,"px,0px)")},o=n.style;let i=!1;return{clear:function(){i||(o.transform="",n.getAttribute("style")||n.removeAttribute("style"))},to:function(e){i||(o.transform=r(t.apply(e)))},toggleActive:function(e){i=!e}}}function qf(e,t,n,r,o,i,a,s,l,c){const u=.5,d=Ef(i),h=Ef(i).reverse(),p=function(){const e=s[0];return g(m(h,e),r,!1)}().concat(function(){const e=n-s[0]-1;return g(m(d,e),-r,!0)}());function f(e,t){return e.reduce(((e,t)=>e-i[t]),t)}function m(e,t){return e.reduce(((e,n)=>f(e,t)>0?e.concat([n]):e),[])}function g(i,s,d){const h=function(e){return a.map(((t,r)=>({start:t-o[r]+u+e,end:t+n-u+e})))}(s);return i.map((n=>{const o=d?0:-r,i=d?r:0,a=d?"end":"start",s=h[n][a];return{index:n,loopPoint:s,slideLocation:Wf(-1),translate:Hf(e,t,c[n]),target:()=>l.get()>s?o:i}}))}const y={canLoop:function(){return p.every((e=>{let{index:t}=e;const r=d.filter((e=>e!==t));return f(r,n)<=.1}))},clear:function(){p.forEach((e=>e.translate.clear()))},loop:function(){p.forEach((e=>{const{target:t,translate:n,slideLocation:r}=e,o=t();o!==r.get()&&(n.to(o),r.set(o))}))},loopPoints:p};return y}function Xf(e,t,n){let r,o=!1;return{init:function(i){n&&(r=new MutationObserver((e=>{o||(wf(n)||n(i,e))&&function(e){for(const n of e)if("childList"===n.type){i.reInit(),t.emit("slidesChanged");break}}(e)})),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),o=!0}}}function Yf(e,t,n,r){const o={};let i,a=null,s=null,l=!1;const c={init:function(){i=new IntersectionObserver((e=>{l||(e.forEach((e=>{const n=t.indexOf(e.target);o[n]=e})),a=null,s=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:r}),t.forEach((e=>i.observe(e)))},destroy:function(){i&&i.disconnect(),l=!0},get:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&a)return a;if(!e&&s)return s;const t=function(e){return Of(o).reduce(((t,n)=>{const r=parseInt(n),{isIntersecting:i}=o[r];return(e&&i||!e&&!i)&&t.push(r),t}),[])}(e);return e&&(a=t),e||(s=t),t}};return c}function Kf(e,t,n,r,o,i,a,s,l,c){const{startEdge:u,endEdge:d}=e,h=bf(r);const p={groupSlides:function(e){return h?function(e,t){return Ef(e).filter((e=>e%t===0)).map((n=>e.slice(n,n+t)))}(e,r):function(e){return e.length?Ef(e).reduce(((r,h)=>{const p=Cf(r)||0,f=0===p,m=h===If(e),g=i[u]-a[p][u],y=i[u]-a[h][d],v=!o&&f?t.apply(s):0;return _f(y-(!o&&m?t.apply(l):0)-(g+v))>n+c&&r.push(h),m&&r.push(e.length),r}),[]).map(((t,n,r)=>{const o=Math.max(r[n-1]||0);return e.slice(o,t)})):[]}(e)}};return p}function Zf(e,t,n,r,o,i,a){const{align:s,axis:l,direction:c,startIndex:u,loop:d,duration:h,dragFree:p,dragThreshold:f,inViewThreshold:m,slidesToScroll:g,skipSnaps:y,containScroll:v,watchResize:b,watchSlides:x,watchDrag:w}=i,S={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:o}=e;return{top:t,right:n+r,bottom:t+o,left:n,width:r,height:o}}},_=S.measure(t),k=n.map(S.measure),T=function(e){const t="rtl"===e?-1:1,n={apply:function(e){return e*t}};return n}(c),E=function(e,t){const n="y"===e?"y":"x";return{scroll:n,cross:"y"===e?"x":"y",startEdge:"y"===n?"top":"rtl"===t?"right":"left",endEdge:"y"===n?"bottom":"rtl"===t?"left":"right",measureSize:function(e){const{width:t,height:r}=e;return"x"===n?t:r}}}(l,c),C=E.measureSize(_),I=function(e){const t={measure:function(t){return e*(t/100)}};return t}(C),j=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}const o={measure:function(r,o){return xf(e)?n[e](r):e(t,r,o)}};return o}(s,C),A=!d&&!!v,O=d||!!v,{slideSizes:N,slideSizesWithGaps:R,startGap:P,endGap:M}=function(e,t,n,r,o,i){const{measureSize:a,startEdge:s,endEdge:l}=e,c=n[0]&&o,u=function(){if(!c)return 0;const e=n[0];return _f(t[s]-e[s])}(),d=function(){if(!c)return 0;const e=i.getComputedStyle(Cf(r));return parseFloat(e.getPropertyValue("margin-".concat(l)))}(),h=n.map(a),p=n.map(((e,t,n)=>{const r=!t,o=jf(n,t);return r?h[t]+u:o?h[t]+d:n[t+1][s]-e[s]})).map(_f);return{slideSizes:h,slideSizesWithGaps:p,startGap:u,endGap:d}}(E,_,k,n,O,o),D=Kf(E,T,C,g,d,_,k,P,M,2),{snaps:L,snapsAligned:F}=function(e,t,n,r,o){const{startEdge:i,endEdge:a}=e,{groupSlides:s}=o,l=s(r).map((e=>Cf(e)[a]-e[0][i])).map(_f).map(t.measure),c=r.map((e=>n[i]-e[i])).map((e=>-_f(e))),u=s(c).map((e=>e[0])).map(((e,t)=>e+l[t]));return{snaps:c,snapsAligned:u}}(E,j,_,k,D),B=-Cf(L)+Cf(R),{snapsContained:U,scrollContainLimit:z}=function(e,t,n,r,o){const i=Df(-t+e,0),a=n.map(((e,t)=>{const r=!t,o=jf(n,t);return r?i.max:o?i.min:i.constrain(e)})).map((e=>parseFloat(e.toFixed(3)))),s=function(){const e=a[0],t=Cf(a);return Df(a.lastIndexOf(e),a.indexOf(t)+1)}(),l=function(){if(t<=e+o)return[i.max];if("keepSnaps"===r)return a;const{min:n,max:l}=s;return a.slice(n,l)}();return{snapsContained:l,scrollContainLimit:s}}(C,B,F,v,2),V=A?U:F,{limit:G}=function(e,t,n){const r=t[0];return{limit:Df(n?r-e:Cf(t),r)}}(B,V,d),W=Lf(If(V),u,d),H=W.clone(),q=Ef(n),X=Mf(r,o,(()=>(e=>{let{dragHandler:t,scrollBody:n,scrollBounds:r,options:{loop:o}}=e;o||r.constrain(t.pointerDown()),n.seek()})(ae)),(e=>((e,t)=>{let{scrollBody:n,translate:r,location:o,offsetLocation:i,scrollLooper:a,slideLooper:s,dragHandler:l,animation:c,eventHandler:u,options:{loop:d}}=e;const h=n.velocity(),p=n.settled();p&&!l.pointerDown()&&(c.stop(),u.emit("settle")),p||u.emit("scroll"),i.set(o.get()-h+h*t),d&&(a.loop(n.direction()),s.loop()),r.to(i.get())})(ae,e))),Y=V[W.get()],K=Wf(Y),Z=Wf(Y),Q=Wf(Y),J=function(e,t,n,r,o){let i=0,a=0,s=r,l=o,c=e.get(),u=0;function d(e){return s=e,p}function h(e){return l=e,p}const p={direction:function(){return a},duration:function(){return s},velocity:function(){return i},seek:function(){const t=n.get()-e.get();let r=0;return s?(i+=t/s,i*=l,c+=i,e.add(i),r=c-u):(i=0,e.set(n),r=t),a=kf(r),u=c,p},settled:function(){return _f(n.get()-t.get())<.001},useBaseFriction:function(){return h(o)},useBaseDuration:function(){return d(r)},useFriction:h,useDuration:d};return p}(K,Z,Q,h,.68),$=Gf(d,V,B,G,Q),ee=function(e,t,n,r,o,i,a){function s(o){const s=o.distance,l=o.index!==t.get();i.add(s),s&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(o.index),a.emit("select"))}const l={distance:function(e,t){s(o.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);s(o.byIndex(r.get(),n))}};return l}(X,W,H,J,$,Q,a),te=function(e){const{max:t,length:n}=e,r={get:function(e){return n?(e-t)/-n:0}};return r}(G),ne=Pf(),re=Yf(t,n,a,m),{slideRegistry:oe}=function(e,t,n,r,o,i){const{groupSlides:a}=o,{min:s,max:l}=r;return{slideRegistry:function(){const r=a(i),o=!e||"keepSnaps"===t;return 1===n.length?[i]:o?r:r.slice(s,l).map(((e,t,n)=>{const r=!t,o=jf(n,t);return r?Af(Cf(n[0])+1):o?Af(If(i)-Cf(n)[0]+1,Cf(n)[0]):e}))}()}}(A,v,V,z,D,q),ie=function(e,t,n,r,o,i){let a=0;function s(e){"Tab"===e.code&&(a=(new Date).getTime())}function l(s){i.add(s,"focus",(()=>{if((new Date).getTime()-a>10)return;e.scrollLeft=0;const i=t.indexOf(s),l=n.findIndex((e=>e.includes(i)));bf(l)&&(o.useDuration(0),r.index(l,0))}),{passive:!0,capture:!0})}return{init:function(){i.add(document,"keydown",s,!1),t.forEach(l)}}}(e,n,oe,ee,J,ne),ae={ownerDocument:r,ownerWindow:o,eventHandler:a,containerRect:_,slideRects:k,animation:X,axis:E,direction:T,dragHandler:Ff(E,T,e,r,o,Q,Bf(E,o),K,X,ee,J,$,W,a,I,p,f,y,.68,w),eventStore:ne,percentOfView:I,index:W,indexPrevious:H,limit:G,location:K,offsetLocation:Z,options:i,resizeHandler:Uf(t,a,o,n,E,b,S),scrollBody:J,scrollBounds:zf(G,K,Q,J,I),scrollLooper:Vf(B,G,Z,[K,Z,Q]),scrollProgress:te,scrollSnapList:V.map(te.get),scrollSnaps:V,scrollTarget:$,scrollTo:ee,slideLooper:qf(E,T,C,B,N,R,L,V,Z,n),slideFocus:ie,slidesHandler:Xf(t,a,x),slidesInView:re,slideIndexes:q,slideRegistry:oe,slidesToScroll:D,target:Q,translate:Hf(E,T,t)};return ae}const Qf={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function Jf(e){function t(e,t){return Nf(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},o=Of(r).filter((t=>e.matchMedia(t).matches)).map((e=>r[e])).reduce(((e,n)=>t(e,n)),{});return t(n,o)},optionsMediaQueries:function(t){return t.map((e=>Of(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function $f(e,t,n){const r=e.ownerDocument,o=r.defaultView,i=Jf(o),a=function(e){let t=[];const n={init:function(n,r){return t=r.filter((t=>{let{options:n}=t;return!1!==e.optionsAtMedia(n).active})),t.forEach((t=>t.init(n,e))),r.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}};return n}(i),s=Pf(),l=function(){const e={};let t;function n(t){return e[t]||[]}const r={init:function(e){t=e},emit:function(e){return n(e).forEach((n=>n(t,e))),r},off:function(t,o){return e[t]=n(t).filter((e=>e!==o)),r},on:function(t,o){return e[t]=n(t).concat([o]),r}};return r}(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=i,{on:h,off:p,emit:f}=l,m=E;let g,y,v,b,x=!1,w=c(Qf,$f.globalOptions),S=c(w),_=[];function k(t){const n=Zf(e,v,b,r,o,t,l);if(t.loop&&!n.slideLooper.canLoop()){return k(Object.assign({},t,{loop:!1}))}return n}function T(t,n){x||(w=c(w,t),S=u(w),_=n||_,function(){const{container:t,slides:n}=S,r=xf(t)?e.querySelector(t):t;v=r||e.children[0];const o=xf(n)?v.querySelectorAll(n):n;b=[].slice.call(o||v.children)}(),g=k(S),d([w,..._.map((e=>{let{options:t}=e;return t}))]).forEach((e=>s.add(e,"change",E))),S.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(),g.eventHandler.init(A),g.resizeHandler.init(A),g.slidesHandler.init(A),g.options.loop&&g.slideLooper.loop(),v.offsetParent&&b.length&&g.dragHandler.init(A),y=a.init(A,_)))}function E(e,t){const n=j();C(),T(c({startIndex:n},e),t),l.emit("reInit")}function C(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),a.destroy(),s.clear()}function I(e,t,n){S.active&&!x&&(g.scrollBody.useBaseFriction().useDuration(!0===t?0:S.duration),g.scrollTo.index(e,n||0))}function j(){return g.index.get()}const A={canScrollNext:function(){return g.index.add(1).get()!==j()},canScrollPrev:function(){return g.index.add(-1).get()!==j()},containerNode:function(){return v},internalEngine:function(){return g},destroy:function(){x||(x=!0,s.clear(),C(),l.emit("destroy"))},off:p,on:h,emit:f,plugins:function(){return y},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:m,rootNode:function(){return e},scrollNext:function(e){I(g.index.add(1).get(),e,-1)},scrollPrev:function(e){I(g.index.add(-1).get(),e,1)},scrollProgress:function(){return g.scrollProgress.get(g.location.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:I,selectedScrollSnap:j,slideNodes:function(){return b},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return T(t,n),setTimeout((()=>l.emit("init")),0),A}function em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,l.useRef)(e),r=(0,l.useRef)(t),[o,i]=(0,l.useState)(),[a,s]=(0,l.useState)(),c=(0,l.useCallback)((()=>{o&&o.reInit(n.current,r.current)}),[o]);return(0,l.useEffect)((()=>{if("undefined"!==typeof window&&window.document&&window.document.createElement&&a){$f.globalOptions=em.globalOptions;const e=$f(a,n.current,r.current);return i(e),()=>e.destroy()}i(void 0)}),[a,i]),(0,l.useEffect)((()=>{yf(n.current,e)||(n.current=e,c())}),[e,c]),(0,l.useEffect)((()=>{(function(e,t){if(e.length!==t.length)return!1;const n=vf(e),r=vf(t);return n.every(((e,t)=>yf(e,r[t])))})(r.current,t)||(r.current=t,c())}),[t,c]),[s,o]}$f.globalOptions=void 0,em.globalOptions=void 0;var tm=r(1882),nm=r.n(tm),rm=r(8786),om=r.n(rm),im=Object.defineProperty,am=Object.defineProperties,sm=Object.getOwnPropertyDescriptors,lm=Object.getOwnPropertySymbols,cm=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,dm=(e,t,n)=>t in e?im(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hm=(e,t)=>{for(var n in t||(t={}))cm.call(t,n)&&dm(e,n,t[n]);if(lm)for(var n of lm(t))um.call(t,n)&&dm(e,n,t[n]);return e},pm=(e,t)=>am(e,sm(t));function fm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pm(hm({},e),{height:0,width:0,playerVars:pm(hm({},e.playerVars),{autoplay:0,start:0,end:0})})}var mm={videoId:yd().string,id:yd().string,className:yd().string,iframeClassName:yd().string,style:yd().object,title:yd().string,loading:yd().oneOf(["lazy","eager"]),opts:yd().objectOf(yd().any),onReady:yd().func,onError:yd().func,onPlay:yd().func,onPause:yd().func,onEnd:yd().func,onStateChange:yd().func,onPlaybackRateChange:yd().func,onPlaybackQualityChange:yd().func},gm=class extends l.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,n;return null==(n=(t=this.props).onReady)?void 0:n.call(t,e)},this.onPlayerError=e=>{var t,n;return null==(n=(t=this.props).onError)?void 0:n.call(t,e)},this.onPlayerStateChange=e=>{var t,n,r,o,i,a,s,l;switch(null==(n=(t=this.props).onStateChange)||n.call(t,e),e.data){case gm.PlayerState.ENDED:null==(o=(r=this.props).onEnd)||o.call(r,e);break;case gm.PlayerState.PLAYING:null==(a=(i=this.props).onPlay)||a.call(i,e);break;case gm.PlayerState.PAUSED:null==(l=(s=this.props).onPause)||l.call(s,e)}},this.onPlayerPlaybackRateChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackRateChange)?void 0:n.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackQualityChange)?void 0:n.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then((()=>this.destroyPlayerPromise=void 0)),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"===typeof document)return;if(this.destroyPlayerPromise)return void this.destroyPlayerPromise.then(this.createPlayer);const e=pm(hm({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=om()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then((e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)}))},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then((e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")}))},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,n,r;if("undefined"===typeof this.props.videoId||null===this.props.videoId)return void(null==(e=this.internalPlayer)||e.stopVideo());let o=!1;const i={videoId:this.props.videoId};(null==(t=this.props.opts)?void 0:t.playerVars)&&(o=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(i.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(i.endSeconds=this.props.opts.playerVars.end)),o?null==(n=this.internalPlayer)||n.loadVideoById(i):null==(r=this.internalPlayer)||r.cueVideoById(i)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return((e,t,n)=>new Promise(((r,o)=>{var i=e=>{try{s(n.next(e))}catch(pg){o(pg)}},a=e=>{try{s(n.throw(e))}catch(pg){o(pg)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);s((n=n.apply(e,t)).next())})))(this,null,(function*(){(function(e,t){var n,r,o,i;return e.id!==t.id||e.className!==t.className||(null==(n=e.opts)?void 0:n.width)!==(null==(r=t.opts)?void 0:r.width)||(null==(o=e.opts)?void 0:o.height)!==(null==(i=t.opts)?void 0:i.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title})(e,this.props)&&this.updatePlayer(),function(e,t){return e.videoId!==t.videoId||!nm()(fm(e.opts),fm(t.opts))}(e,this.props)&&(yield this.resetPlayer()),function(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const o=(null==(n=e.opts)?void 0:n.playerVars)||{},i=(null==(r=t.opts)?void 0:r.playerVars)||{};return o.start!==i.start||o.end!==i.end}(e,this.props)&&this.updateVideo()}))}componentWillUnmount(){this.destroyPlayer()}render(){return l.createElement("div",{className:this.props.className,style:this.props.style},l.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},ym=gm;ym.propTypes=mm,ym.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},ym.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var vm,bm=ym,xm=[],wm="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(vm||(vm={}));var Sm,_m=function(e){return Object.freeze(e)},km=function(e,t){this.inlineSize=e,this.blockSize=t,_m(this)},Tm=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,_m(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Em=function(e){return e instanceof SVGElement&&"getBBox"in e},Cm=function(e){if(Em(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},Im=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null===e||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},jm="undefined"!==typeof window?window:{},Am=new WeakMap,Om=/auto|scroll/,Nm=/^tb|vertical/,Rm=/msie|trident/i.test(jm.navigator&&jm.navigator.userAgent),Pm=function(e){return parseFloat(e||"0")},Mm=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new km((n?t:e)||0,(n?e:t)||0)},Dm=_m({devicePixelContentBoxSize:Mm(),borderBoxSize:Mm(),contentBoxSize:Mm(),contentRect:new Tm(0,0,0,0)}),Lm=function(e,t){if(void 0===t&&(t=!1),Am.has(e)&&!t)return Am.get(e);if(Cm(e))return Am.set(e,Dm),Dm;var n=getComputedStyle(e),r=Em(e)&&e.ownerSVGElement&&e.getBBox(),o=!Rm&&"border-box"===n.boxSizing,i=Nm.test(n.writingMode||""),a=!r&&Om.test(n.overflowY||""),s=!r&&Om.test(n.overflowX||""),l=r?0:Pm(n.paddingTop),c=r?0:Pm(n.paddingRight),u=r?0:Pm(n.paddingBottom),d=r?0:Pm(n.paddingLeft),h=r?0:Pm(n.borderTopWidth),p=r?0:Pm(n.borderRightWidth),f=r?0:Pm(n.borderBottomWidth),m=d+c,g=l+u,y=(r?0:Pm(n.borderLeftWidth))+p,v=h+f,b=s?e.offsetHeight-v-e.clientHeight:0,x=a?e.offsetWidth-y-e.clientWidth:0,w=o?m+y:0,S=o?g+v:0,_=r?r.width:Pm(n.width)-w-x,k=r?r.height:Pm(n.height)-S-b,T=_+m+x+y,E=k+g+b+v,C=_m({devicePixelContentBoxSize:Mm(Math.round(_*devicePixelRatio),Math.round(k*devicePixelRatio),i),borderBoxSize:Mm(T,E,i),contentBoxSize:Mm(_,k,i),contentRect:new Tm(d,l,_,k)});return Am.set(e,C),C},Fm=function(e,t,n){var r=Lm(e,n),o=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case vm.DEVICE_PIXEL_CONTENT_BOX:return a;case vm.BORDER_BOX:return o;default:return i}},Bm=function(e){var t=Lm(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=_m([t.borderBoxSize]),this.contentBoxSize=_m([t.contentBoxSize]),this.devicePixelContentBoxSize=_m([t.devicePixelContentBoxSize])},Um=function(e){if(Cm(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},zm=function(){var e=1/0,t=[];xm.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new Bm(t.target),o=Um(t.target);r.push(n),t.lastReportedSize=Fm(t.target,t.observedBox),o<e&&(e=o)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},Vm=function(e){xm.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(Um(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Gm=function(){var e=0;for(Vm(e);xm.some((function(e){return e.activeTargets.length>0}));)e=zm(),Vm(e);return xm.some((function(e){return e.skippedTargets.length>0}))&&function(){var e;"function"===typeof ErrorEvent?e=new ErrorEvent("error",{message:wm}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=wm),window.dispatchEvent(e)}(),e>0},Wm=[],Hm=function(e){if(!Sm){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Wm.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),Sm=function(){n.textContent="".concat(t?t--:t++)}}Wm.push(e),Sm()},qm=0,Xm={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ym=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Km=function(e){return void 0===e&&(e=0),Date.now()+e},Zm=!1,Qm=function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Zm){Zm=!0;var n=Km(e);!function(e){Hm((function(){requestAnimationFrame(e)}))}((function(){var r=!1;try{r=Gm()}finally{if(Zm=!1,e=n-Km(),!qm)return;r?t.run(1e3):e>0?t.run(e):t.start()}}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Xm)};document.body?t():jm.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ym.forEach((function(t){return jm.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Ym.forEach((function(t){return jm.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}(),Jm=new Qm,$m=function(e){!qm&&e>0&&Jm.start(),!(qm+=e)&&Jm.stop()},eg=function(){function e(e,t){this.target=e,this.observedBox=t||vm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Fm(this.target,this.observedBox,!0);return e=this.target,Em(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),tg=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},ng=new WeakMap,rg=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},og=function(){function e(){}return e.connect=function(e,t){var n=new tg(e,t);ng.set(e,n)},e.observe=function(e,t,n){var r=ng.get(e),o=0===r.observationTargets.length;rg(r.observationTargets,t)<0&&(o&&xm.push(r),r.observationTargets.push(new eg(t,n&&n.box)),$m(1),Jm.schedule())},e.unobserve=function(e,t){var n=ng.get(e),r=rg(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&xm.splice(xm.indexOf(n),1),n.observationTargets.splice(r,1),$m(-1))},e.disconnect=function(e){var t=this,n=ng.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),ig=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!==typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");og.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Im(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");og.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Im(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");og.unobserve(this,e)},e.prototype.disconnect=function(){og.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const ag=l["undefined"!==typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"],sg=e=>{const t=l.useRef(e);return l.useEffect((()=>{t.current=e})),t},lg="undefined"!==typeof window&&"ResizeObserver"in window?window.ResizeObserver:ig;function cg(){}let ug;const dg=()=>ug||(ug=function(){let e=!1,t=[];const n=new Map,r=new lg(((r,o)=>{t=t.concat(r),e||window.requestAnimationFrame((function(){const r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);const i=n.get(t[e].target);null===i||void 0===i||i.forEach((n=>n(t[e],o)))}t=[],e=!1})),e=!0}));return{observer:r,subscribe(e,t){var o;r.observe(e);const i=null!==(o=n.get(e))&&void 0!==o?o:[];i.push(t),n.set(e,i)},unsubscribe(e,t){var o;const i=null!==(o=n.get(e))&&void 0!==o?o:[];if(1===i.length)return r.unobserve(e),void n.delete(e);const a=i.indexOf(t);-1!==a&&i.splice(a,1),n.set(e,i)}}}()),hg=function(e,t){const n=dg(),r=sg(t);return ag((()=>{let t=!1;const o=e&&"current"in e?e.current:e;if(!o)return cg;function i(e,n){t||r.current(e,n)}return n.subscribe(o,i),()=>{t=!0,n.unsubscribe(o,i)}}),[e,n,r]),n.observer};var pg="undefined"!=typeof self?self:global;const fg="undefined"!=typeof navigator,mg=fg&&"undefined"==typeof HTMLImageElement,gg=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),yg=pg.Buffer,vg=pg.BigInt,bg=!!yg,xg=e=>e;function wg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xg;if(gg)try{return"function"==typeof require?Promise.resolve(t(require(e))):import(e).then(t)}catch(t){console.warn("Couldn't load ".concat(e))}}let Sg=pg.fetch;if(!pg.fetch){const e=wg("http",(e=>e)),t=wg("https",(e=>e)),n=function(r){let{headers:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((async(i,a)=>{let{port:s,hostname:l,pathname:c,protocol:u,search:d}=new URL(r);const h={method:"GET",hostname:l,path:encodeURI(c)+d,headers:o};""!==s&&(h.port=Number(s));const p=("https:"===u?await t:await e).request(h,(e=>{if(301===e.statusCode||302===e.statusCode){let t=new URL(e.headers.location,r).toString();return n(t,{headers:o}).then(i).catch(a)}i({status:e.statusCode,arrayBuffer:()=>new Promise((t=>{let n=[];e.on("data",(e=>n.push(e))),e.on("end",(()=>t(Buffer.concat(n))))}))})}));p.on("error",a),p.end()}))};(e=>{Sg=e})(n)}function _g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const kg=e=>Eg(e)?void 0:e,Tg=e=>void 0!==e;function Eg(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(Tg).length)}function Cg(e){let t=new Error(e);throw delete t.stack,t}function Ig(e){return""===(e=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(e).trim())?void 0:e}function jg(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Ag=e=>String.fromCharCode.apply(null,e),Og="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function Ng(e){return Og?Og.decode(e):bg?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Ag(e)))}class Rg{static from(e,t){return e instanceof this&&e.le===t?e:new Rg(e,void 0,void 0,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("boolean"==typeof r&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===n&&(n=e.byteLength-t);let r=new DataView(e,t,n);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Rg){void 0===n&&(n=e.byteLength-t),(t+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Cg("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,n);this._swapDataView(r)}else if("number"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else Cg("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rg;return e instanceof DataView||e instanceof Rg?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Cg("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Rg(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return Ng(this.getUint8Array(e,t))}getLatin1String(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return Ag(n)}getUnicodeString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;const n=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return Ag(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}getInt32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}getUint16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}getUint32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}getFloat32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}getFloat64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}getFloat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}getDouble(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Pg(e,t){Cg("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}class Mg extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Pg(this.kind,e),t&&(e in t||function(e,t){Cg("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||Pg(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Dg=new Mg("file parser"),Lg=new Mg("segment parser"),Fg=new Mg("file reader");function Bg(e,t){return"string"==typeof e?Ug(e,t):fg&&!mg&&e instanceof HTMLImageElement?Ug(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Rg(e):fg&&e instanceof Blob?zg(e,t,"blob",Wg):void Cg("Invalid input argument")}function Ug(e,t){return(n=e).startsWith("data:")||n.length>1e4?Vg(e,t,"base64"):gg&&e.includes("://")?zg(e,t,"url",Gg):gg?Vg(e,t,"fs"):fg?zg(e,t,"url",Gg):void Cg("Invalid input argument");var n}async function zg(e,t,n,r){return Fg.has(n)?Vg(e,t,n):r?async function(e,t){let n=await t(e);return new Rg(n)}(e,r):void Cg("Parser ".concat(n," is not loaded"))}async function Vg(e,t,n){let r=new(Fg.get(n))(e,t);return await r.read(),r}const Gg=e=>Sg(e).then((e=>e.arrayBuffer())),Wg=e=>new Promise(((t,n)=>{let r=new FileReader;r.onloadend=()=>t(r.result||new ArrayBuffer),r.onerror=n,r.readAsArrayBuffer(e)}));class Hg extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function qg(e,t,n){let r=new Hg;for(let[o,i]of n)r.set(o,i);if(Array.isArray(t))for(let o of t)e.set(o,r);else e.set(t,r);return r}function Xg(e,t,n){let r,o=e.get(t);for(r of n)o.set(r[0],r[1])}const Yg=new Map,Kg=new Map,Zg=new Map,Qg=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Jg=["jfif","xmp","icc","iptc","ihdr"],$g=["tiff",...Jg],ey=["ifd0","ifd1","exif","gps","interop"],ty=[...$g,...ey],ny=["makerNote","userComment"],ry=["translateKeys","translateValues","reviveValues","multiSegment"],oy=[...ry,"sanitize","mergeOutput","silentErrors"];class iy{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class ay extends iy{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,r){if(super(),_g(this,"enabled",!1),_g(this,"skip",new Set),_g(this,"pick",new Set),_g(this,"deps",new Set),_g(this,"translateKeys",!1),_g(this,"translateValues",!1),_g(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=ey.includes(e),this.canBeFiltered&&(this.dict=Yg.get(e)),void 0!==n)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if("object"==typeof n){if(this.enabled=!0,this.parse=!1!==n.parse,this.canBeFiltered){let{pick:e,skip:t}=n;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(n)}else!0===n||!1===n?this.parse=this.enabled=n:Cg("Invalid options argument: ".concat(n))}applyInheritables(e){let t,n;for(t of ry)n=e[t],void 0!==n&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,r,{tagKeys:o,tagValues:i}=this.dict;for(n of e)"string"==typeof n?(r=i.indexOf(n),-1===r&&(r=o.indexOf(Number(n))),-1!==r&&t.add(Number(o[r]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,hy(this.pick,this.deps)):this.enabled&&this.pick.size>0&&hy(this.pick,this.deps)}}var sy={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},ly=new Map;class cy extends iy{static useCached(e){let t=ly.get(e);return void 0!==t||(t=new this(e),ly.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):Cg("Invalid options argument ".concat(e)),void 0===this.firstChunkSize&&(this.firstChunkSize=fg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Qg)this[e]=sy[e];for(e of oy)this[e]=sy[e];for(e of ny)this[e]=sy[e];for(e of ty)this[e]=new ay(e,sy[e],void 0,this)}setupFromTrue(){let e;for(e of Qg)this[e]=sy[e];for(e of oy)this[e]=sy[e];for(e of ny)this[e]=!0;for(e of ty)this[e]=new ay(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Qg)this[t]=sy[t];for(t of oy)this[t]=sy[t];for(t of ny)this[t]=sy[t];for(t of ty)this[t]=new ay(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ey)}setupFromObject(e){let t;for(t of(ey.ifd0=ey.ifd0||ey.image,ey.ifd1=ey.ifd1||ey.thumbnail,Object.assign(this,e),Qg))this[t]=dy(e[t],sy[t]);for(t of oy)this[t]=dy(e[t],sy[t]);for(t of ny)this[t]=dy(e[t],sy[t]);for(t of $g)this[t]=new ay(t,sy[t],e[t],this);for(t of ey)this[t]=new ay(t,sy[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ey,ty),!0===e.tiff?this.batchEnableWithBool(ey,!0):!1===e.tiff?this.batchEnableWithUserValue(ey,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ey):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ey)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let e=t[n];this[n].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){for(let e of r)this[e].enabled=!1;let t=uy(e,n);for(let[e,n]of t)hy(this[e].pick,n),this[e].enabled=!0}else if(t&&t.length){let e=uy(t,n);for(let[t,n]of e)hy(this[t].skip,n)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:r,icc:o}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),o.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ey.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let o of ey)this[o].finalizeFilters()}get onlyTiff(){return!Jg.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of $g)this[e].enabled&&!Lg.has(e)&&Pg("segment parser",e)}}function uy(e,t){let n,r,o,i,a=[];for(o of t){for(i of(n=Yg.get(o),r=[],n))(e.includes(i[0])||e.includes(i[1]))&&r.push(i[0]);r.length&&a.push([o,r])}return a}function dy(e,t){return void 0!==e?e:void 0!==t?t:void 0}function hy(e,t){for(let n of t)e.add(n)}_g(cy,"default",sy);class py{constructor(e){_g(this,"parsers",{}),_g(this,"output",{}),_g(this,"errors",[]),_g(this,"pushToErrors",(e=>this.errors.push(e))),this.options=cy.useCached(e)}async read(e){this.file=await Bg(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,r]of Dg)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Cg("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),kg(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let n=await t.parse();t.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=Lg.get("tiff",e);var r;if(t.tiff?r={start:0,type:"tiff"}:t.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),void 0===r)return;let o=await this.fileParser.ensureSegmentChunk(r),i=this.parsers.tiff=new n(o,e,t),a=await i.extractThumbnail();return t.close&&t.close(),a}}async function fy(e,t){let n=new py(t);return await n.read(e),n.parse()}var my=Object.freeze({__proto__:null,parse:fy,Exifr:py,fileParsers:Dg,segmentParsers:Lg,fileReaders:Fg,tagKeys:Yg,tagValues:Kg,tagRevivers:Zg,createDictionary:qg,extendDictionary:Xg,fetchUrlAsArrayBuffer:Gg,readBlobAsArrayBuffer:Wg,chunkedProps:Qg,otherSegments:Jg,segments:$g,tiffBlocks:ey,segmentsAndBlocks:ty,tiffExtractables:ny,inheritables:ry,allFormatters:oy,Options:cy});class gy{constructor(e,t,n){_g(this,"errors",[]),_g(this,"ensureSegmentChunk",(async e=>{let t=e.start,n=e.size||65536;if(this.file.chunked)if(this.file.available(t,n))e.chunk=this.file.subarray(t,n);else try{e.chunk=await this.file.readChunk(t,n)}catch(t){Cg("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))}else this.file.byteLength>t+n?e.chunk=this.file.subarray(t,n):void 0===e.size?e.chunk=this.file.subarray(t):Cg("Segment unreachable: "+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new(Lg.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:e,chunk:n}=t,r=this.options[e];if(r&&r.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class yy{static findPosition(e,t){let n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,o=t+r,i=n-r;return{offset:t,length:n,headerLength:r,start:o,size:i,end:o+i}}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new cy({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Rg?e:new Rg(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;_g(this,"errors",[]),_g(this,"raw",new Map),_g(this,"handleError",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=Zg.get(t),r=Kg.get(t),o=Yg.get(t),i=this.options[t],a=i.reviveValues&&!!n,s=i.translateValues&&!!r,l=i.translateKeys&&!!o,c={};for(let[u,d]of e)a&&n.has(u)?d=n.get(u)(d):s&&r.has(u)&&(d=this.translateValue(d,r.get(u))),l&&o.has(u)&&(u=o.get(u)||u),c[u]=d;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}function vy(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function by(e){return e>=224&&e<=239}function xy(e,t,n){for(let[r,o]of Lg)if(o.canHandle(e,t,n))return r}_g(yy,"headerLength",4),_g(yy,"type",void 0),_g(yy,"multiSegment",!1),_g(yy,"canHandle",(()=>!1));class wy extends gy{constructor(){super(...arguments),_g(this,"appSegments",[]),_g(this,"jpegSegments",[]),_g(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(Lg.keyList())):(e=void 0===e?Lg.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&Lg.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.setupSegmentFinderArgs(t);let{file:n,findAll:r,wanted:o,remaining:i}=this;if(!r&&this.file.chunked&&(r=Array.from(o).some((e=>{let t=Lg.get(e),n=this.options[e];return t.multiSegment&&n.multiSegment})),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let t=!1;for(;i.size>0&&!t&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:r}=n,o=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>r&&!o?!await n.readNextChunk(e):!await n.readNextChunk(r),void 0===(e=this.findAppSegmentsInRange(e,n.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let n,r,o,i,a,s,{file:l,findAll:c,wanted:u,remaining:d,options:h}=this;for(;e<t;e++)if(255===l.getUint8(e))if(n=l.getUint8(e+1),by(n)){if(r=l.getUint16(e+2),o=xy(l,e,r),o&&u.has(o)&&(i=Lg.get(o),a=i.findPosition(l,e),s=h[o],a.type=o,this.appSegments.push(a),!c&&(i.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||d.delete(o)):d.delete(o),0===d.size)))break;h.recordUnknownSegments&&(a=yy.findPosition(l,e),a.marker=n,this.unknownSegments.push(a)),e+=r+1}else if(vy(n)){if(r=l.getUint16(e+2),218===n&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e,t){let n,r,o,i=new Map;for(let a=0;a<e.length;a++)n=e[a],r=n.type,i.has(r)?o=i.get(r):i.set(r,o=[]),o.push(n);return Array.from(i)}(this.appSegments);this.mergedAppSegments=e.map((e=>{let[t,n]=e,r=Lg.get(t,this.options);return r.handleMultiSegments?{type:t,chunk:r.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}_g(wy,"type","jpeg"),Dg.set("jpeg",wy);const Sy=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class _y extends yy{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,{pick:r,skip:o}=this.options[t];r=new Set(r);let i=r.size>0,a=0===o.size,s=this.chunk.getUint16(e);e+=2;for(let l=0;l<s;l++){let s=this.chunk.getUint16(e);if(i){if(r.has(s)&&(n.set(s,this.parseTag(e,s,t)),r.delete(s),0===r.size))break}else!a&&o.has(s)||n.set(s,this.parseTag(e,s,t));e+=12}return n}parseTag(e,t,n){let{chunk:r}=this,o=r.getUint16(e+2),i=r.getUint32(e+4),a=Sy[o];if(a*i<=4?e+=8:e=r.getUint32(e+8),(o<1||o>13)&&Cg("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(o,", offset ").concat(e)),e>r.byteLength&&Cg("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(o,", offset ").concat(e," is outside of chunk size ").concat(r.byteLength)),1===o)return r.getUint8Array(e,i);if(2===o)return Ig(r.getString(e,i));if(7===o)return r.getUint8Array(e,i);if(1===i)return this.parseTagValue(o,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(o))(i),n=a;for(let r=0;r<i;r++)t[r]=this.parseTagValue(o,e),e+=n;return t}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:Cg("Invalid tiff type ".concat(e))}}}class ky extends _y{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Cg("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Cg("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(this.ifd0Offset,", file.byteLength: ").concat(e.byteLength)),e.tiff&&await e.ensureChunk(this.ifd0Offset,jg(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,jg(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&1===n.length&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Ty(...e.get(2),e.get(1))),e.set("longitude",Ty(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,r={};for(t of ey)if(e=this[t],!Eg(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,r]of Object.entries(t))this.assignObjectToOutput(e,n,r)}}function Ty(e,t,n,r){var o=e+t/60+n/3600;return"S"!==r&&"W"!==r||(o*=-1),o}_g(ky,"type","tiff"),_g(ky,"headerLength",10),Lg.set("tiff",ky);var Ey=Object.freeze({__proto__:null,default:my,Exifr:py,fileParsers:Dg,segmentParsers:Lg,fileReaders:Fg,tagKeys:Yg,tagValues:Kg,tagRevivers:Zg,createDictionary:qg,extendDictionary:Xg,fetchUrlAsArrayBuffer:Gg,readBlobAsArrayBuffer:Wg,chunkedProps:Qg,otherSegments:Jg,segments:$g,tiffBlocks:ey,segmentsAndBlocks:ty,tiffExtractables:ny,inheritables:ry,allFormatters:oy,Options:cy,parse:fy});const Cy={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Iy=Object.assign({},Cy,{firstChunkSize:4e4,gps:[1,2,3,4]});async function jy(e){let t=new py(Iy);await t.read(e);let n=await t.parse();if(n&&n.gps){let{latitude:e,longitude:t}=n.gps;return{latitude:e,longitude:t}}}const Ay=Object.assign({},Cy,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Oy(e){let t=new py(Ay);await t.read(e);let n=await t.extractThumbnail();return n&&bg?yg.from(n):n}async function Ny(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const Ry=Object.assign({},Cy,{firstChunkSize:4e4,ifd0:[274]});async function Py(e){let t=new py(Ry);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}const My=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Dy=!0,Ly=!0;if("object"==typeof navigator){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,e,n]=t,r=Number(e)+.1*Number(n);Dy=r<13.4,Ly=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Dy=Ly=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Dy=Ly=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Dy=Ly=Number(t)<77}}async function Fy(e){let t=await Py(e);return Object.assign({canvas:Dy,css:Ly},My[t])}class By extends Rg{constructor(){super(...arguments),_g(this,"ranges",new Uy),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(0===e&&0===this.byteLength&&n){let e=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(e)}else{let n=e+t;if(n>this.byteLength){let{dataView:e}=this._extend(n);this._swapDataView(e)}}}_extend(e){let t;t=bg?yg.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Uy{constructor(){_g(this,"list",[])}get length(){return this.list.length}add(e,t){let n=e+t,r=this.list.filter((t=>zy(e,t.offset,n)||zy(e,t.end,n)));if(r.length>0){e=Math.min(e,...r.map((e=>e.offset))),n=Math.max(n,...r.map((e=>e.end))),t=n-e;let o=r.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter((e=>!r.includes(e)))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let n=e+t;return this.list.some((t=>t.offset<=e&&n<=t.end))}}function zy(e,t,n){return e<=t&&t<=n}class Vy extends By{constructor(e,t){super(0),_g(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nextChunkOffset;if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Fg.set("blob",class extends Vy{async readWhole(){this.chunked=!1;let e=await Wg(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,r=this.input.slice(e,n),o=await Wg(r);return this.set(o,e,!0)}});var Gy=Object.freeze({__proto__:null,default:Ey,Exifr:py,fileParsers:Dg,segmentParsers:Lg,fileReaders:Fg,tagKeys:Yg,tagValues:Kg,tagRevivers:Zg,createDictionary:qg,extendDictionary:Xg,fetchUrlAsArrayBuffer:Gg,readBlobAsArrayBuffer:Wg,chunkedProps:Qg,otherSegments:Jg,segments:$g,tiffBlocks:ey,segmentsAndBlocks:ty,tiffExtractables:ny,inheritables:ry,allFormatters:oy,Options:cy,parse:fy,gpsOnlyOptions:Iy,gps:jy,thumbnailOnlyOptions:Ay,thumbnail:Oy,thumbnailUrl:Ny,orientationOnlyOptions:Ry,orientation:Py,rotations:My,get rotateCanvas(){return Dy},get rotateCss(){return Ly},rotation:Fy});Fg.set("url",class extends Vy{async readWhole(){this.chunked=!1;let e=await Gg(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let n=t?e+t-1:void 0,r=this.options.httpHeaders||{};(e||n)&&(r.range="bytes=".concat([e,n].join("-")));let o=await Sg(this.input,{headers:r}),i=await o.arrayBuffer(),a=i.byteLength;if(416!==o.status)return a!==t&&(this.size=e+a),this.set(i,e,!0)}}),Rg.prototype.getUint64=function(e){let t=this.getUint32(e),n=this.getUint32(e+4);return t<1048575?t<<32|n:void 0!==typeof vg?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),vg(t)<<vg(32)|vg(n)):void Cg("Trying to read 64b value but JS can only handle 53b numbers.")};class Wy extends gy{parseBoxes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(t.push(n),0===n.length)break;e+=n.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find((e=>e.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),n=this.file.getString(e+4,4),r=e+8;return 1===t&&(t=this.file.getUint64(e+8),r+=8),{offset:e,length:t,kind:n,start:r}}parseBoxFullHead(e){if(void 0!==e.version)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class Hy extends Wy{static canHandle(e,t){if(0!==t)return!1;let n=e.getUint16(2);if(n>50)return!1;let r=16,o=[];for(;r<n;)o.push(e.getString(r,4)),r+=4;return o.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;"meta"!==t.kind;)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,n){await this.file.ensureChunk(t,n);let r=this.file.subarray(t,n);this.createParser(e,r)}async findIcc(e){let t=this.findBox(e,"iprp");if(void 0===t)return;let n=this.findBox(t,"ipco");if(void 0===n)return;let r=this.findBox(n,"colr");void 0!==r&&await this.registerSegment("icc",r.offset+12,r.length)}async findExif(e){let t=this.findBox(e,"iinf");if(void 0===t)return;let n=this.findBox(e,"iloc");if(void 0===n)return;let r=this.findExifLocIdInIinf(t),o=this.findExtentInIloc(n,r);if(void 0===o)return;let[i,a]=o;await this.file.ensureChunk(i,a);let s=4+this.file.getUint32(i);i+=s,a-=s,await this.registerSegment("tiff",i,a)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,n,r,o,i=e.start,a=this.file.getUint16(i);for(i+=2;a--;){if(t=this.parseBoxHead(i),this.parseBoxFullHead(t),n=t.start,t.version>=2&&(r=3===t.version?4:2,o=this.file.getString(n+r+2,4),"Exif"===o))return this.file.getUintBytes(n,r);i+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let n=e.start,[r,o]=this.get8bits(n++),[i,a]=this.get8bits(n++),s=2===e.version?4:2,l=1===e.version||2===e.version?2:0,c=a+r+o,u=2===e.version?4:2,d=this.file.getUintBytes(n,u);for(n+=u;d--;){let e=this.file.getUintBytes(n,s);n+=s+l+2+i;let u=this.file.getUint16(n);if(n+=2,e===t)return u>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(n+a,r),this.file.getUintBytes(n+a+r,o)];n+=u*c}}}class qy extends Hy{}_g(qy,"type","heic");class Xy extends Hy{}_g(Xy,"type","avif"),Dg.set("heic",qy),Dg.set("avif",Xy),qg(Yg,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),qg(Yg,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),qg(Yg,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),qg(Kg,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Yy=qg(Kg,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Ky={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Yy.set(37392,Ky),Yy.set(41488,Ky);const Zy={0:"Normal",1:"Low",2:"High"};function Qy(e){return"object"==typeof e&&void 0!==e.length?e[0]:e}function Jy(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map((e=>String.fromCharCode(e)))),"0"!==t[2]&&0!==t[2]||t.pop(),t.join(".")}function $y(e){if("string"==typeof e){var[t,n,r,o,i,a]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,n-1,r);return Number.isNaN(o)||Number.isNaN(i)||Number.isNaN(a)||(s.setHours(o),s.setMinutes(i),s.setSeconds(a)),Number.isNaN(+s)?e:s}}function ev(e){if("string"==typeof e)return e;let t=[];if(0===e[1]&&0===e[e.length-1])for(let n=0;n<e.length;n+=2)t.push(tv(e[n+1],e[n]));else for(let n=0;n<e.length;n+=2)t.push(tv(e[n],e[n+1]));return Ig(String.fromCodePoint(...t))}function tv(e,t){return e<<8|t}Yy.set(41992,Zy),Yy.set(41993,Zy),Yy.set(41994,Zy),qg(Zg,["ifd0","ifd1"],[[50827,function(e){return"string"!=typeof e?Ng(e):e}],[306,$y],[40091,ev],[40092,ev],[40093,ev],[40094,ev],[40095,ev]]),qg(Zg,"exif",[[40960,Jy],[36864,Jy],[36867,$y],[36868,$y],[40962,Qy],[40963,Qy]]),qg(Zg,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class nv extends yy{static canHandle(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&"http://ns.adobe.com/"===e.getString(t+4,20)}static headerLength(e,t){return"http://ns.adobe.com/xmp/extension/"===e.getString(t+4,34)?79:33}static findPosition(e,t){let n=super.findPosition(e,t);return n.multiSegment=n.extended=79===n.headerLength,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((e=>e.chunk.getString())).join("")}normalizeInput(e){return"string"==typeof e?e:Rg.from(e).getString()}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chunk;if(!this.localOptions.parse)return e;e=function(e){let t={},n={};for(let r of dv)t[r]=[],n[r]=0;return e.replace(hv,((e,r,o)=>{if("<"===r){let r=++n[o];return t[o].push(r),"".concat(e,"#").concat(r)}return"".concat(e,"#").concat(t[o].pop())}))}(e);let t=ov.findAll(e,"rdf","Description");0===t.length&&t.push(new ov("rdf","Description",void 0,e));let n,r={};for(let o of t)for(let e of o.properties)n=lv(e.ns,r),iv(e,n);return function(e){let t;for(let n in e)t=e[n]=kg(e[n]),void 0===t&&delete e[n];return kg(e)}(r)}assignToOutput(e,t){if(this.localOptions.parse)for(let[n,r]of Object.entries(t))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",r);break;case"exif":this.assignObjectToOutput(e,"exif",r);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,r)}else e.xmp=t}}_g(nv,"type","xmp"),_g(nv,"multiSegment",!0),Lg.set("xmp",nv);class rv{static findAll(e){return cv(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(rv.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],r=e[3].slice(1,-1);return r=uv(r),new rv(t,n,r)}constructor(e,t,n){this.ns=e,this.name=t,this.value=n}serialize(){return this.value}}class ov{static findAll(e,t,n){if(void 0!==t||void 0!==n){t=t||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var r=new RegExp("<(".concat(t,"):(").concat(n,")(#\\d+)?((\\s+?[\\w\\d-:]+=(\"[^\"]*\"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)"),"gm")}else r=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return cv(e,r).map(ov.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],r=e[4],o=e[8];return new ov(t,n,r,o)}constructor(e,t,n,r){this.ns=e,this.name=t,this.attrString=n,this.innerXml=r,this.attrs=rv.findAll(n),this.children=ov.findAll(r),this.value=0===this.children.length?uv(r):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return sv(this.children.map(av));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let e={};for(let t of this.properties)iv(t,e);return void 0!==this.value&&(e.value=this.value),kg(e)}}function iv(e,t){let n=e.serialize();void 0!==n&&(t[e.name]=n)}var av=e=>e.serialize(),sv=e=>1===e.length?e[0]:e,lv=(e,t)=>t[e]?t[e]:t[e]={};function cv(e,t){let n,r=[];if(!e)return r;for(;null!==(n=t.exec(e));)r.push(n);return r}function uv(e){if(function(e){return null==e||"null"===e||"undefined"===e||""===e||""===e.trim()}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let n=e.toLowerCase();return"true"===n||"false"!==n&&e.trim()}const dv=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],hv=new RegExp("(<|\\/)(".concat(dv.join("|"),")"),"g");var pv=Object.freeze({__proto__:null,default:Gy,Exifr:py,fileParsers:Dg,segmentParsers:Lg,fileReaders:Fg,tagKeys:Yg,tagValues:Kg,tagRevivers:Zg,createDictionary:qg,extendDictionary:Xg,fetchUrlAsArrayBuffer:Gg,readBlobAsArrayBuffer:Wg,chunkedProps:Qg,otherSegments:Jg,segments:$g,tiffBlocks:ey,segmentsAndBlocks:ty,tiffExtractables:ny,inheritables:ry,allFormatters:oy,Options:cy,parse:fy,gpsOnlyOptions:Iy,gps:jy,thumbnailOnlyOptions:Ay,thumbnail:Oy,thumbnailUrl:Ny,orientationOnlyOptions:Ry,orientation:Py,rotations:My,get rotateCanvas(){return Dy},get rotateCss(){return Ly},rotation:Fy});let fv=wg("fs",(e=>e.promises));Fg.set("fs",class extends Vy{async readWhole(){this.chunked=!1,this.fs=await fv;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await fv,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){void 0===this.fh&&await this.open(),e+t>this.size&&(t=this.size-e);var n=this.subarray(e,t,!0);return await this.fh.read(n.dataView,0,t,e),n}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}}),Fg.set("base64",class extends Vy{constructor(){super(...arguments),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let n,r,o=this.input;void 0===e?(e=0,n=0,r=0):(n=4*Math.floor(e/3),r=e-n/4*3),void 0===t&&(t=this.size);let i=e+t,a=n+4*Math.ceil(i/3);o=o.slice(n,a);let s=Math.min(t,this.size-e);if(bg){let t=yg.from(o,"base64").slice(r,r+s);return this.set(t,e,!0)}{let t=this.subarray(e,s,!0),n=atob(o),i=t.toUint8();for(let e=0;e<s;e++)i[e]=n.charCodeAt(r+e);return t}}});class mv extends gy{static canHandle(e,t){return 18761===t||19789===t}extendOptions(e){let{ifd0:t,xmp:n,iptc:r,icc:o}=e;n.enabled&&t.deps.add(700),r.enabled&&t.deps.add(33723),o.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:n,icc:r}=this.options;if(e.enabled||t.enabled||n.enabled||r.enabled){let e=Math.max(jg(this.options),this.options.chunkSize);await this.file.ensureChunk(0,e),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}_g(mv,"type","tiff"),Dg.set("tiff",mv);let gv=wg("zlib");const yv=["ihdr","iccp","text","itxt","exif"];class vv extends gy{constructor(){super(...arguments),_g(this,"catchError",(e=>this.errors.push(e))),_g(this,"metaChunks",[]),_g(this,"unknownChunks",[])}static canHandle(e,t){return 35152===t&&2303741511===e.getUint32(0)&&218765834===e.getUint32(4)}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:n}=this;for(;e<t;){let t=n.getUint32(e),r=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),i=t+4+4+4,a={type:o,offset:e,length:i,start:e+4+4,size:t,marker:r};yv.includes(o)?this.metaChunks.push(a):this.unknownChunks.push(a),e+=i}}parseTextChunks(){let e=this.metaChunks.filter((e=>"text"===e.type));for(let t of e){let[e,n]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(e,n)}}injectKeyValToIhdr(e,t){let n=this.parsers.ihdr;n&&n.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((e=>"ihdr"===e.type));e&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((e=>"exif"===e.type));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((e=>"itxt"===e.type));for(let t of e)"XML:com.adobe.xmp"===t.chunk.getString(0,17)&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((e=>"iccp"===e.type));if(!e)return;let{chunk:t}=e,n=t.getUint8Array(0,81),r=0;for(;r<80&&0!==n[r];)r++;let o=r+2,i=t.getString(0,r);if(this.injectKeyValToIhdr("ProfileName",i),gg){let e=await gv,n=t.getUint8Array(o);n=e.inflateSync(n),this.injectSegment("icc",n)}}}_g(vv,"type","png"),Dg.set("png",vv),qg(Yg,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Xg(Yg,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let bv=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Xg(Yg,"ifd0",bv),Xg(Yg,"exif",bv),qg(Kg,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class xv extends yy{static canHandle(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}_g(xv,"type","jfif"),_g(xv,"headerLength",9),Lg.set("jfif",xv),qg(Yg,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class wv extends yy{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}_g(wv,"type","ihdr"),Lg.set("ihdr",wv),qg(Yg,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),qg(Kg,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Sv extends yy{static canHandle(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}static findPosition(e,t){let n=super.findPosition(e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return function(e){let t=function(e){let t=e[0].constructor,n=0;for(let i of e)n+=i.length;let r=new t(n),o=0;for(let i of e)r.set(i,o),o+=i.length;return r}(e.map((e=>e.chunk.toUint8())));return new Rg(t)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Cg("ICC header is too short");for(let[t,n]of Object.entries(_v)){t=parseInt(t,10);let r=n(this.chunk,t);"\0\0\0\0"!==r&&e.set(t,r)}}parseTags(){let e,t,n,r,o,{raw:i}=this,a=this.chunk.getUint32(128),s=132,l=this.chunk.byteLength;for(;a--;){if(e=this.chunk.getString(s,4),t=this.chunk.getUint32(s+4),n=this.chunk.getUint32(s+8),r=this.chunk.getString(t,4),t+n>l)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");o=this.parseTag(r,t,n),void 0!==o&&"\0\0\0\0"!==o&&i.set(e,o),s+=12}}parseTag(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n>this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return Ig(this.chunk.getString(e+12,t))}parseText(e,t){return Ig(this.chunk.getString(e+8,t-8))}parseSig(e){return Ig(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,n=t.getUint32(e+8),r=t.getUint32(e+12),o=e+16,i=[];for(let a=0;a<n;a++){let n=t.getString(o+0,2),a=t.getString(o+2,2),s=t.getUint32(o+4),l=t.getUint32(o+8)+e,c=Ig(t.getUnicodeString(l,s));i.push({lang:n,country:a,text:c}),o+=r}return 1===n?i[0].text:i}translateValue(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}_g(Sv,"type","icc"),_g(Sv,"multiSegment",!0),_g(Sv,"headerLength",18);const _v={4:kv,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map((e=>e.toString(10))).join(".")},12:kv,16:kv,20:kv,24:function(e,t){const n=e.getUint16(t),r=e.getUint16(t+2)-1,o=e.getUint16(t+4),i=e.getUint16(t+6),a=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(n,r,o,i,a,s))},36:kv,40:kv,48:kv,52:kv,64:(e,t)=>e.getUint32(t),80:kv};function kv(e,t){return Ig(e.getString(t,4))}Lg.set("icc",Sv),qg(Yg,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Tv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ev={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};qg(Kg,"icc",[[4,Tv],[12,Ev],[40,Object.assign({},Tv,Ev)],[48,Tv],[80,Tv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Cv extends yy{static canHandle(e,t,n){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)&&void 0!==this.containsIptc8bim(e,t,n)}static headerLength(e,t,n){let r,o=this.containsIptc8bim(e,t,n);if(void 0!==o)return r=e.getUint8(t+o+7),r%2!=0&&(r+=1),0===r&&(r=4),o+8+r}static containsIptc8bim(e,t,n){for(let r=0;r<n;r++)if(this.isIptcSegmentHead(e,t+r))return r}static isIptcSegmentHead(e,t){return 56===e.getUint8(t)&&943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,n=!1;for(let r=0;r<t;r++)if(28===this.chunk.getUint8(r)&&2===this.chunk.getUint8(r+1)){n=!0;let t=this.chunk.getUint16(r+3),o=this.chunk.getUint8(r+2),i=this.chunk.getLatin1String(r+5,t);e.set(o,this.pluralizeValue(e.get(o),i)),r+=4+t}else if(n)break;return this.translate(),this.output}pluralizeValue(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}_g(Cv,"type","iptc"),_g(Cv,"translateValues",!1),_g(Cv,"reviveValues",!1),Lg.set("iptc",Cv),qg(Yg,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),qg(Kg,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Iv=pv;function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jv.apply(this,arguments)}var Av={lightboxjs:"_30i9K",slideshowContainer:"_3kSzL",slideshowBtn:"_tCjNO",closeIcon:"_2IJEr",iconsHeader:"_2Yv4j",prev1:"_1lgEi",next1:"_DDceb",icon:"_2Vept",prevIcon:"_2gxOL",nextIcon:"_3gp2w",show:"_2crlL",displayHidden:"_34QvR",thumbnail:"_1R214",hoverShadow:"_3EuZy",thumbnails:"_3pfLz",thumbnailsWithCaption:"_Fp_rP",navigationDots:"_1jASN",imageSlide:"_22ETc",thumbnailsOuterContainer:"_-wN_b",videoThumbnailsOuterContainer:"_KbOLW",imgTitleContainer:"_1j-pZ",thumbnailsOuterContainer_metadata:"_1Odla",thumbnailsAndCaption:"_1nxK_",htmlVideoOuterContainer:"_z-jNd",caption:"_2jJU2",galleryImg:"_lY1R_",slideshowAnimContainer:"_wTR3b",fullScreenContainer:"_11N04",imageInnerContainer:"_20Hp6",magnifyWrapper:"_3PObS",slideshowInnerContainer:"_1JRT_",slideshowInnerContainer_imgMetadata:"_29Kdn",slideshowInnerVideoContainer:"_1ni2w",slideshowInnerContainerThumbnails:"_GV0NM",lightboxContainer:"_3BNPD",slideshowAnimImg:"_j1nqC",controls:"_ABXHD",ytVideo:"_2eq8V",videoOuterContainer:"_1P3Wc",customVideoContainer:"_Aq8HC",customEmbedContainer:"_w68I8",videoIconsHeader:"_qtY0U",lightbox:"_3cxVN",imgTitle:"_2pA2G",lightbox_img:"_3A0RO",slideshow_img_fullscreen:"_2yYOi",slideshowInnerContainerFullScreen:"_hWNoE",fullScreenLightboxImg:"_1ek8k","opacity-fade":"_2P48G",imageSliderThumbnails:"_1xBL9",slideshow_img_metadata:"_15MH_",prev1_metadata:"_3JYCS",slideshow_img:"_1yWyS",light_icon:"_1kIQ4",dark_icon:"_1qbJe",light_header_icon:"_3DIHj",dark_header_icon:"_11aT5","magnifier-image":"_mdJQi",active:"_3sodH",inactiveThumbnailBorder:"_3bkUp",embla_thumbs:"_32vVi",htmlVideo:"_sqvn-","react-transform-component":"_3Id1-",loader:"_3qqrl",rotation:"_1hUzk",day_loader:"_1itZw",night_loader:"_2TI_i",closeButton:"_2kumA",slideImageAndCaption:"_238y5",roundedBorder:"_2FvXV",maxWidthFull:"_oa5b0",maxWidthWithoutMagnifier:"_z-bHV",lightboxVideo:"_hGbhv","navigation-wrapper":"_1dVqh",dots:"_3MuXE",dot:"_3U2py",arrow:"_35l6Q",leftArrow:"_1I4Zg",rightArrow:"_1lqBv","arrow--disabled":"_37Xda",navDotsMargin:"_1LtID",inactiveThumbnailBorderImgSlider:"_2y9OU",ytVideoImgSlider:"_2oAIc",outerYTVideoImgSlider:"_2-c5L",imgSliderArrow:"_1Bey-",cursorPointer:"_3xuz3",lightboxjs_icon:"_1fpgA",embla:"_1cifY",embla__viewport:"_1mBUR",embla__container:"_Bqct9",embla__container_imgMetadata:"_39UN-",embla__slide:"_1eJNe",embla_thumbs__viewport:"_1tmVU",embla_thumbs__container:"_3-Y1e",embla_thumbs__slide:"_jp0uN",embla_thumbs__slide__img:"_3S-ie",mlAuto:"_1afvv",metadata:"_1HGLk",embla__slide_grid:"_1TshF",metadataPanel:"_U_FmQ",metadataInnerContainer:"_1Y4P9",imgMetadataCloseBtn:"_1vmhr",react_transform_wrapper:"_3djxx",react_transform_component:"_2UUxD",navigationDot:"_gMqOZ",navigationDotContainer:"_1KxdK"},Ov=function(e,t,n){if(e==t)return e;var r=t-e;return((n-e)%r+r)%r+e},Nv=function(e){return("yt"!=e.type||1==e.autoPlay||"true"==e.autoPlay)&&(0!=e.autoPlay&&"false"!=e.autoPlay)},Rv=function(e){return e.videoHeight?e.videoHeight:"200"},Pv=function(e){return e.videoWidth?e.videoWidth:"900"},Mv={visible:{opacity:1,y:0},hidden:{opacity:0,y:100}},Dv={day:{background:"white",iconColor:"black",thumbnailBorder:"solid transparent 2px",textColor:"black",metadataTextColor:"black"},night:{background:"#151515",iconColor:"#626b77",thumbnailBorder:"solid rgb(107, 133, 206)  2px",textColor:"#626b77",metadataTextColor:"white"},lightbox:{background:"rgba(12, 12, 12, 0.93)",iconColor:"#626b77",thumbnailBorder:"solid rgb(107, 133, 206) 2px",textColor:"silver",metadataTextColor:"white"}},Lv="night",Fv=function(e){var t=(0,l.useRef)();return(0,l.useEffect)((function(){t.current=e})),t.current},Bv=(0,l.forwardRef)((function(e,t){(0,l.useImperativeHandle)(t,(function(){return{reset:function(){Hn(!0,!0)}}}));var n=(0,l.useState)([0,0]),r=n[0],o=r[0],i=r[1],a=n[1],s=(0,l.useState)(!1),c=s[0],u=s[1],d=(0,l.useState)(e.slideDuration?e.slideDuration:25)[0],h=(0,l.useState)(!1),p=h[0],f=h[1],m=(0,l.useState)(!1),g=m[0],y=m[1],v=(0,l.useState)([]),b=v[0],x=v[1],w=(0,l.useState)([]),S=w[0],_=w[1],k=Ov(0,b.length,o),T=(0,l.useState)({loop:!0,startIndex:0,active:!0,duration:d,dragThreshold:2}),E=T[0],C=T[1],I=(0,l.useState)(0),j=I[0],A=I[1],O=j<=768,N=(0,l.useState)({startIndex:0,containScroll:"keepSnaps",dragFree:!0}),R=N[0],P=N[1],M=(0,l.useState)(!1),D=M[0],L=M[1],F=(0,l.useState)(!1),B=F[0],U=F[1],z=(0,l.useState)(!1)[1],V=(0,l.useState)(!1),G=V[0],W=V[1],H=(0,l.useState)(null),q=H[0],X=H[1],Y=(0,l.useState)(!1),K=Y[0],Z=Y[1],Q=(0,l.useState)(!!e.magnifyingGlass&&e.magnifyingGlass)[0],J=(0,l.useState)(!!e.disableImageZoom&&e.disableImageZoom),$=J[0],ee=J[1],te=(0,l.useState)(e.slideshowInterval?e.slideshowInterval:1700)[0],ne=(0,l.useState)(e.rightArrowStyle?e.rightArrowStyle:{})[0],re=(0,l.useState)(e.leftArrowStyle?e.leftArrowStyle:{})[0],oe=(0,l.useState)(e.maxZoomScale?function(e,t){return e<1?1:e>t?t:e}(e.maxZoomScale,24):8),ie=oe[0],ae=(0,l.useState)(!!e.roundedImages&&e.roundedImages),se=ae[0],le=ae[1],ce=(0,l.useState)(!e.showControls||e.showControls),ue=ce[0],de=ce[1],he=(0,l.useState)(!e.showFullScreenIcon||e.showFullScreenIcon),pe=he[0],fe=he[1],me=(0,l.useState)(!e.showThumbnailIcon||e.showThumbnailIcon),ge=me[0],ye=me[1],ve=(0,l.useState)(!e.showSlideshowIcon||e.showSlideshowIcon)[1],be=(0,l.useState)(!e.showMagnificationIcons||e.showMagnificationIcons),xe=be[0],we=be[1],Se=(0,l.useState)(e.nextArrow?e.nextArrow:null)[0],_e=(0,l.useState)(e.imageComponent?e.imageComponent:null)[0],ke=(0,l.useState)(e.prevArrow?e.prevArrow:null)[0],Te=(0,l.useState)(e.modalClose?e.modalClose:"default")[0],Ee=(0,l.useState)(!!e.downloadImages&&e.downloadImages)[0],Ce=(0,l.useState)(!!e.showNavigationDots&&e.showNavigationDots)[0],Ie=(0,l.useState)(e.metadataTimeLocale?e.metadataTimeLocale:"en-US")[0],je=(0,l.useState)(!!e.rtl&&e.rtl)[0],Ae=(0,l.useState)(e.framework?e.framework:"")[0],Oe=(0,l.useState)(!!e.lightboxIdentifier&&e.lightboxIdentifier)[0],Ne=(0,l.useState)(!!e.fullScreen&&e.fullScreen)[0],Re=((0,l.useState)(e.licenseKey?e.licenseKey:""),(0,l.useState)(!!e.showLoader&&e.showLoader)),Pe=Re[0],Me=Re[1],De=(0,l.useState)(!!e.controlComponent&&e.controlComponent)[0],Le=(0,l.useState)(e.startingSlideIndex?e.startingSlideIndex:0)[1],Fe=(0,l.useState)(e.backgroundColor?e.backgroundColor:Dv[Lv].background),Be=Fe[0],Ue=Fe[1],ze=(0,l.useState)(e.iconColor?e.iconColor:null),Ve=ze[0],Ge=ze[1],We=(0,l.useState)(e.textColor?e.textColor:Dv[Lv].textColor),He=We[0],qe=We[1],Xe=(0,l.useState)(!!e.useCoverMode&&e.useCoverMode)[0],Ye=(0,l.useState)(!!e.displayMetadata&&e.displayMetadata)[0],Ke=(0,l.useState)(!1),Ze=Ke[0],Qe=Ke[1],Je=(0,l.useState)({}),$e=Je[0],et=Je[1],tt=(0,l.useState)(!!e.showThumbnails&&e.showThumbnails),nt=tt[0],rt=tt[1],ot=(0,l.useState)(!e.animateThumbnails||e.animateThumbnails)[0],it=(0,l.useState)(e.imgAnimation?e.imgAnimation:"imgDrag")[1],at=(0,l.useState)(e.arrowStyle?e.arrowStyle:"dark")[0],st=(0,l.useState)(!1)[1],lt=(0,l.useState)(!1),ct=lt[0],ut=lt[1],dt=(0,l.useState)(!1),ht=dt[0],pt=dt[1],ft=(0,l.useState)(!1),mt=ft[0],gt=ft[1],yt=(0,l.useRef)(null),vt=(0,l.useState)(0),bt=vt[0],xt=vt[1],wt=(0,l.useState)(500),St=wt[0],_t=wt[1],kt=(0,l.useState)(426),Tt=kt[0],Et=kt[1],Ct=(0,l.useState)(!1),It=Ct[0],jt=Ct[1],At=e.open,Ot=(Fv({open:At}),(0,l.useRef)([])),Nt=(0,l.useRef)({}),Rt=((0,l.useRef)(null),(0,l.useState)({})),Pt=Rt[0],Mt=Rt[1],Dt=(0,l.useState)(!0),Lt=Dt[0],Ft=Dt[1],Bt=(0,l.useState)(e.thumbnailBorder?function(){if(e.thumbnailBorder)return"solid "+e.thumbnailBorder+" 2px"}():Dv[Lv].thumbnailBorder)[0],Ut=em(E),zt=Ut[0],Vt=Ut[1],Gt=em(R),Wt=Gt[0],Ht=Gt[1],qt=(0,l.useCallback)((function(){Vt&&Vt.scrollPrev()}),[Vt]),Xt=(0,l.useCallback)((function(){Vt&&Vt.scrollNext()}),[Vt]),Yt=function(){var t;if(e.images&&e.images.length>0&&(null!==(t=e.images[k])&&void 0!==t&&t.caption))return!0;return!1};function Kt(){A(window.innerWidth)}var Zt=function(){var e={};return se&&(e.borderRadius="20px"),"clickOutside"==Te&&(e.pointerEvents="auto"),_e&&0==nt&&!O&&(e.height="85vh"),e},Qt=function(e){rn(e),sn(e)},Jt=function(e,t){return 0==t?e-1:t==e-1?0:e-t-1},$t=function(){var e=document.getElementById("slideshowAnim");Vn(e),ut(!0),Fn()},en=function(){document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?ut(!0):(ct&&Gn(document),Bn(),ut(!1))},tn=function(){Gn(document),Bn(),ut(!1)},nn=function(e){je?qt():Xt(),a([o+e,e]),xt(je?bt-1<0?b.length-1:bt-1:bt+1>=b.length?0:bt+1)},rn=function(t){e.showLoader&&e.images&&(An(t)||1==b[t].loaded?e.showLoader&&e.images&&b[t].loaded&&Me(!1):Me(!0))},on=function(){return"dark"==at?Av.dark_icon:"light"==at?Av.light_icon:void 0},an=function(){return"dark"==at?Av.dark_header_icon:"light"==at?Av.light_header_icon:void 0},sn=function(e){var t;t=e>o?1:-1,xt(e),a([e,t]),Vt&&Vt.scrollTo(e)},ln=function(t){e.onNext&&e.onNext(t,b[t])},cn=function(t){e.onPrev&&e.onPrev(t,b[t])},un=function(){xt(0),ct&&tn(),p&&f(!1),u(!1),W(!1),L(!1),y(!1),q&&(null===q||void 0===q||q.focus())},dn=function(e){Vt&&(Vt.reInit(),Ht&&(null===Ht||void 0===Ht||Ht.scrollTo(Vt.selectedScrollSnap()))),a([e,1]),u(!0),W(!0)},hn=function(t){e.images&&x((function(e){return e.map((function(e,n){return t===n?jv({},e,{loaded:!0}):e}))}))},pn=function(e){x((function(t){return t.map((function(t,n){return e===n?jv({},t,{loaded:!0}):t}))}))},fn=function(e){a([e,1]);var t=Ov(0,b.length,e);xt(t),rn(t),Ye&&(O&&Ze&&Qe(!1),$e[t]||Ft(!0))},mn=function(){Xt(),fn(o+1)},gn=function(){qt(),fn(o-1)},yn=function(e){var t=E;t.startIndex=e,C(t),function(e){var t=R;t.startIndex=e,P(t)}(e),xt(e),dn(e)},vn=function(){pt(!1),nn(je?-1:1),f(!0)},bn=function(){f(!1)},xn=function(t){if(e.images){var n=e.images[t];if(n)if("htmlVideo"==n.type)Nt.current[t].pause();else if("yt"==n.type)Pt[t]&&Pt[t].target.pauseVideo();else if("customVideoEmbed"==n.type){var r=document.getElementById("lightboxContainer"),o=null===r||void 0===r?void 0:r.querySelectorAll("iframe");if(o){var i=function(t,n){if(e.images){for(var r=0,o=0;o<e.images.length;o++){var i=e.images[o];if("customVideoEmbed"==i.type||"yt"==i.type){if(o==t){r++;break}r++}}return r-1}}(t);if(void 0!=i&&i>=0){var a=o[i],s=a.src;a.src=s}}}}},wn=function(e){return(0,l.createElement)("button",{style:k===e?{backgroundColor:"cornflowerblue"}:{},className:Av.navigationDot+" imageModal",onClick:function(){Qt(e)}})},Sn=function(t,n,r){return(0,l.createElement)("div",{key:"thumbnail_slide_"+n,className:""+Av.embla_thumbs__slide},(0,l.createElement)("img",{className:(e.thumbnailImgClass?e.thumbnailImgClass:"")+" "+Av.thumbnail+" imageModal ",src:1==r?Tn(t,n):kn(t,n),alt:t.alt,onLoad:function(){return gt(!0)},style:k===n?{border:Bt}:{border:"solid transparent 2px"},key:"thumbnail_"+n,onClick:function(){Qt(n)}}))},_n=function(){ht?Dn():null!=Ot.current[bt]&&Ot.current[bt].resetTransform()},kn=function(t,n){return e.images&&e.images.length>0&&e.images[n].thumbnailSrc?e.images[n].thumbnailSrc:An(n)&&t.thumbnail?t.thumbnail:t.src},Tn=function(e,t){if(e.thumbnailSrc)return e.thumbnailSrc;if(An(t))return e.thumbnail;var n=e.src;return"object"!==typeof n||Array.isArray(n)||null===n?n:n.src},En=function(){e.theme&&Dv[e.theme]&&(Ue(Dv[e.theme].background),qe(Dv[e.theme].textColor)),e.fullScreen&&1==e.fullScreen&&(it("fade"),le(!1))},Cn=function(e){if(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n<=9?"0"+n:n)+"-"+(t<=9?"0"+t:t)+" "+e.toLocaleTimeString(Ie)}return""},In=function(t){if(jn(t))return Rn(t);if(An(t))return Nn(t);if(On(t)){var n=e.images[t].picture;return(0,l.createElement)("picture",{className:"imageModal \n      "+(e.fullScreen?Av.fullScreenLightboxImg:Av.lightbox_img)+" \n      "+(ht?Av.maxWidthFull:Av.maxWidthWithoutMagnifier)+" "},Object.keys(n).map((function(e){return(0,l.createElement)("source",{type:e,key:e,srcSet:n[e].srcSet})})),(0,l.createElement)("img",{src:n.fallback}))}return b&&e.render||"next"==Ae?function(t){var n;if(e.images)if(e.images&&e.render)n=e.render.imgSlide(e.images[t]);else{var r,o;e.images&&("object"!==typeof b[t].src||Array.isArray(b[t].src)||null===b[t].src?(e.coverImageInLightbox,r=b[t].src):r=null===(o=b[t].src)||void 0===o?void 0:o.src),n=(0,l.createElement)("img",{className:"imageModal "+Av.embla__slide__img+"\n        "+(e.fullScreen?Av.fullScreenLightboxImg:Av.lightbox_img)+" \n        "+(ht?Av.maxWidthFull:Av.maxWidthWithoutMagnifier)+" ",ref:yt,loading:"lazy",style:Zt(),src:b[t].original?b[t].original:r,onLoad:function(n){t==k&&Me(!1),e.images?hn(t):pn(t)},id:"img"})}else n=(0,l.createElement)("img",{className:"imageModal "+Av.embla__slide__img+"\n        "+(e.fullScreen?Av.fullScreenLightboxImg:Av.lightbox_img)+" \n        "+(ht?Av.maxWidthFull:Av.maxWidthWithoutMagnifier)+" ",style:Zt(),ref:yt,loading:"lazy",src:b[t].original?b[t].original:b[t].src,onLoad:function(n){t==k&&Me(!1),e.images?hn(t):pn(t)},id:"img"});return n}(t):(0,l.createElement)("img",{className:"imageModal "+Av.embla__slide__img+"\n          "+(e.fullScreen?Av.fullScreenLightboxImg:Av.lightbox_img)+" \n          "+(ht?Av.maxWidthFull:Av.maxWidthWithoutMagnifier)+" ",ref:yt,key:t,loading:"lazy",style:Zt(),src:b&&b[t].original?b[t].original:b[t].src,onLoad:function(n){if(Ye&&n){var r=n.target,o={},i=function(e){var t=e.split("/");return t[t.length-1]}(r.src);o.name=i,Iv.parse(r,!0).then((function(e){if(e){for(var n=["isoData","createDate","height","width","shutterSpeed","fNumber"],r=0;r<n.length;r++){switch(n[r]){case"isoData":e.ISO&&(o.isoData=e.ISO);break;case"createDate":e.CreateDate&&(o.createDate=Cn(e.CreateDate));break;case"height":e.ExifImageHeight&&(o.height=e.ExifImageHeight);break;case"width":e.ExifImageWidth&&(o.width=e.ExifImageWidth);break;case"fNumber":e.fNumber&&(o.fNumber=e.fNumber);break;case"shutterSpeed":e.ShutterSpeedValue&&(o.shutterSpeed=e.ShutterSpeedValue)}}var i=$e;i[t]=o,et(i),t==k&&Ft(!1)}}))}t==k&&Me(!1),e.images?hn(t):pn(t)},id:"img"})},jn=function(t){if(e.images){var n=e.images[t];if(n&&"customEmbed"==n.type)return!0}return!1},An=function(t){if(e.images){var n=e.images[t];if(n&&("yt"==n.type||"htmlVideo"==n.type||"customVideoEmbed"==n.type))return!0}return!1},On=function(t){if(e.images){var n=e.images[t];if(n&&n.picture)return!0}return!1};(0,l.useEffect)((function(){}),[D,Vt]);var Nn=function(t){var n,r=e.images[t];return"yt"==r.type?n=(0,l.createElement)("div",{className:Av.videoOuterContainer+" imageModal"},(0,l.createElement)(bm,{videoId:r.videoID,ref:function(e){return Nt.current[t]=e},iframeClassName:""+Av.ytVideo,title:"YouTube video player",opts:{height:Rv(r),width:Pv(r),playerVars:{autoplay:Nv(r)?1:0}},onReady:function(e){var n=Pt;n[t]=e,Mt(n),t==k&&Me(!1),hn(t)},onPlay:function(e){st(!0)},onPause:function(e){st(!1)},onEnd:function(e){st(!1)},onError:function(e){},onStateChange:function(e){},onPlaybackRateChange:function(e){},onPlaybackQualityChange:function(e){}})):"htmlVideo"==r.type?n=(0,l.createElement)("div",{className:Av.htmlVideo+" "+Av.htmlVideoOuterContainer+" imageModal"},(0,l.createElement)("video",{className:Av.cursorPointer+" "+Av.lightboxVideo,width:Pv(r),ref:function(e){return Nt.current[t]=e},onPlay:function(){},height:Rv(r),autoPlay:t==o&&Nv(r),controls:!0},(0,l.createElement)("source",{src:r.videoSrc,type:"video/mp4",onLoad:function(){hn(t)}}))):"customVideoEmbed"==r.type&&(n=(0,l.createElement)("div",{className:Av.customVideoContainer+" imageModal"},r.embed)),n},Rn=function(t){var n,r=e.images[t];return"customEmbed"==r.type&&(n=(0,l.createElement)("div",{className:Av.customEmbedContainer+" imageModal"},r.embed)),n},Pn=function(e){e.state.scale<=1.65?U(!1):U(!0)},Mn=Array.apply(null,Array(b.length)).map((function(t,n){return(0,l.createElement)("div",{key:n},1==ht?(0,l.createElement)(Eh,{src:b[n].src,className:Av.magnifyWrapper+" "+Av.lightbox_img,height:St,width:Tt,mgShowOverflow:!1}):(0,l.createElement)("div",{className:""+(Ye?Av.embla__slide_grid:Av.embla__slide)},(0,l.createElement)(Fp,{ref:function(e){return Ot.current[n]=e},onWheel:function(e,t){Pn(e)},disabled:$,panning:{disabled:!(!O||0!=B)},key:n,onZoom:function(e,t){Pn(e)},onZoomStop:function(e,t){Pn(e)},onTransformed:function(e,t){Pn(e)},onPinchingStop:function(e,t){Pn(e)},centerZoomedOut:!0,initialScale:1,maxScale:ie,alignmentAnimation:{sizeX:0,sizeY:0}},(0,l.createElement)(zp,{wrapperClass:Av.react_transform_wrapper,contentClass:Av.react_transform_component,wrapperStyle:{maxWidth:"100vw",height:"100vh",margin:"auto"},contentStyle:e.fullScreen?{maxWidth:"100vw",height:"100vh",marginLeft:"auto",marginRight:"auto"}:{maxWidth:"100vw",height:"100vh",margin:"auto",display:"grid"},key:n},(0,l.createElement)("div",{className:(e.fullScreen?Av.slideshow_img_fullscreen:Av.slideshow_img)+" "+(e.lightboxImgClass?e.lightboxImgClass:"")+"\n                      "+(Ye?Av.slideshow_img_metadata:"")+"\n                      "},In(n))))))})),Dn=function(){ht?it("imgDrag"):Ln(),pt(!ht)},Ln=function(){var e,t=(e=0==o||o%b.length==0?document.getElementById("img"):yt.current).naturalWidth/e.naturalHeight,n=e.height*t,r=e.height;n>e.width&&(n=e.width,r=e.width/t),_t(r),Et(n)},Fn=function(){document.addEventListener("fullscreenchange",en),document.addEventListener("webkitfullscreenchange",en),document.addEventListener("MSFullscreenChange",en),document.addEventListener("mozfullscreenchange",en)},Bn=function(){document.removeEventListener("fullscreenchange",en),document.removeEventListener("webkitfullscreenchange",en),document.removeEventListener("MSFullscreenChange",en),document.removeEventListener("mozfullscreenchange",en)},Un=function(){var e="";return Wn()&&((e=window.matchMedia("(prefers-reduced-motion: reduce)"))&&!e.matches||it("fade"),e.addEventListener("change",void(e.matches&&it("fade")))),e},zn=function(){void 0!=e.showControls&&(de(e.showControls),0==e.showControls&&we(!1)),void 0!=e.showFullScreenIcon&&fe(e.showFullScreenIcon),void 0!=e.showThumbnailIcon&&ye(e.showThumbnailIcon),void 0!=e.showSlideshowIcon&&ve(e.showSlideshowIcon),void 0!=e.showMagnificationIcons&&we(e.showMagnificationIcons),e.disableImageZoom&&ee(e.disableImageZoom),Wn()&&A(window.innerWidth),window.innerWidth<=768&&it("fade")};!function(e,t){const n=(0,l.useRef)(e);mf((()=>{n.current=e}),[e]),(0,l.useEffect)((()=>{if(!t&&0!==t)return;const e=setInterval((()=>n.current()),t);return()=>clearInterval(e)}),[t])}((function(){nn(je?-1:1)}),p?te:null);var Vn=function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},Gn=function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()},Wn=function(){return"undefined"!==typeof window},Hn=function(t,n){if(Xe&&e.images)if(0==e.coverImageInLightbox){var r=e.images.filter((function(e){return 1!=e.cover}));x(r)}else x(e.images);if(n||!It){if(Oe&&e.children){var o=document.querySelectorAll("[data-lightboxjs="+Oe+"]"),i=!1,a=[];if(o.length>0){for(var s=function(n){var r=o[n];if(r.getAttribute("data-lightboxjs")==Oe){r.addEventListener("click",(function(){var e;e=je?Jt(o.length,n):n;var r=E;r.startIndex=e,t&&C(r),xt(e),dn(e)}),!1),r.classList.add("cursor-pointer");var s=r.getAttribute("data-lightboxjs-original");if(s)a.push({src:s,alt:r.alt,loaded:!1}),i=!0;else if(r.src)a.push({src:r.src,alt:r.alt,loaded:!1});else if("DIV"==r.tagName){var l=e.images[n],c=l.src,u=l.alt;a.push({src:c,alt:u,loaded:!1})}}},l=0;l<=o.length-1;l++)s(l);t&&!Xe&&(i||1!=e.showAllImages&&"next"!=e.framework?x(a):(e.framework,x(e.images)))}else e.images&&x(e.images)}else if(Oe&&e.images&&!e.children)x(e.images);else if(Oe||!e.images||e.children)if(e.render)t&&x(e.images);else{var c=[];Array.isArray(e.children)?c=e.children:c.push(e.children);for(var u=[],d=0;d<c.length;d++){var h=c[d],p={src:h.props.src,alt:h.props.alt,loaded:!1};u.push(p)}je&&u.reverse(),t&&x(u),_(c)}else x(e.images);t&&jt(!0)}},qn=(0,l.useCallback)((function(){if(Vt){var e,t,n=Vt.selectedScrollSnap(),r=Vt.previousScrollSnap();n!=r&&(fn(n),xn(r),_n(),t=r,0==(e=n)&&t==b.length-1?ln(e):e==b.length-1&&0==t?cn(e):e>t?ln(e):e<t&&cn(e)),Ht&&Ht.scrollTo(Vt.selectedScrollSnap())}}),[Vt,Ht]),Xn=(0,l.useCallback)((function(){Vt&&y(!0)}),[Vt,g]),Yn=(null===Vt||void 0===Vt?void 0:Vt.rootNode())||null;hg(Yn,(function(e){null===Vt||void 0===Vt||Vt.reInit()}));var Kn=(0,l.useCallback)((function(){Vt&&Vt.off("select",qn)}),[Vt,qn]);(0,l.useEffect)((function(){Vt&&(B?Vt.reInit({watchDrag:!1}):Vt.reInit({watchDrag:!0}))}),[B]),(0,l.useEffect)((function(){Ye&&Qe(0==j||!O)}),[j]),(0,l.useEffect)((function(){Vt&&c&&Vt.reInit()}),[c,Vt]),(0,l.useEffect)((function(){Vt&&Vt.on("select",qn)}),[Vt,qn]),(0,l.useEffect)((function(){Vt&&Vt.on("reInit",Xn)}),[Vt,Xn]),(0,l.useEffect)((function(){En(),e.iconColor&&Ge(e.iconColor),e.backgroundColor&&Ue(e.backgroundColor)}),[e.theme,e.iconColor,e.backgroundColor]),(0,l.useEffect)((function(){Hn(!0,!0)}),[e.images,e.displayedImages]);var Zn,Qn=Fv(At),Jn=Fv(b),$n=function e(t,n){return"object"===typeof t&&null!=t&&"object"===typeof n&&null!=n&&Object.keys(t).length>0?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((function(r){return e(t[r],n[r])})):t===n};return(0,l.useEffect)((function(){var t=0;e.startingSlideIndex&&(t=Ov(0,b.length,e.startingSlideIndex),Le(t)),1==e.open&&0==function(e){if(e&&Jn){if((e&&(null===e||void 0===e?void 0:e.length))!=(Jn&&(null===Jn||void 0===Jn?void 0:Jn.length)))return!1;var t;t=e.length>Jn?e:Jn;for(var n=0;n<t.length;n++){var r=e.slice(0),o=Jn.slice(0),i=r[n],a=o[n];if(i.loaded&&delete i.loaded,a.loaded&&delete a.loaded,!$n(i,a))return!1}}return!0}(b)&&e.startingSlideIndex?(e.images&&x(e.images),yn(t)):e.open&&1!=Qn?(e.images&&x(e.images),z(!0),yn(t)):0==e.open&&(z(!1),un())}),[e.open,e.startingSlideIndex,b]),(0,l.useEffect)((function(){1==G?e.onOpen&&e.onOpen(k,b[k]):e.onClose&&e.onClose(k)}),[G]),(0,l.useEffect)((function(){e.render&&(e.images||console.error("Array of images must be passed to `SlideshowLightbox` (with the `images` prop) if using custom render method. "));var t=!0;if(t&&zn(),Xe&&e.images)if(0==e.coverImageInLightbox){var n=e.images.filter((function(e){return 1!=e.cover}));x(n)}else x(e.images);t&&Wn()&&window.addEventListener("resize",Kt);var r=Un();return Ye&&it("fade"),It||(Hn(t,!1),e.images&&1==je&&function(){var t=e.images;if(t.reverse(),x(t),b.length>0){var n=b;n.reverse(),x(n)}}()),t&&En(),function(){t=!1,Kn(),Wn()&&window.removeEventListener("resize",Kt),r.removeEventListener("change",r)}}),[]),(0,l.createElement)("div",null,(0,l.createElement)("div",{className:""+function(){var t="";return b&&1==b.length?e.imgWrapperClassName&&(t+=e.imgWrapperClassName+" "):e.className&&(t+=e.className+" "),t+=""+Av.lightboxjs}()},e.images&&e.children&&0==Oe?e.children:null,e.images&&0==Oe?e.images.map((function(t,n){return(0,l.createElement)("img",{className:(e.imgClassName?e.imgClassName:"")+" "+Av.cursorPointer,src:An(n)?t.thumbnail:t.src,onClick:function(){var t;t=je?Jt(e.images.length,n):n,yn(t)},key:n})})):null,0!=Oe&&e.children&&0==Xe?e.children:null,0==Oe&&e.images||1==Xe?null:S.filter((function(e){return"img"==e.type})).map((function(e,t){return(0,l.createElement)("img",Object.assign({},e.props,{className:(e.props.className?e.props.className:"")+" "+Av.cursorPointer,onClick:function(){var e;e=je?Jt(S.length,t):t,yn(e)},key:t}))})),!!Xe&&e.children,(0,l.createElement)(Ol,{type:"crossfade"},(0,l.createElement)(Ul,{initial:!1,exitBeforeEnter:!0},!1!==c&&(0,l.createElement)(Ph,null,(0,l.createElement)(Xp,null,(0,l.createElement)(md.div,{className:""+Av.slideshowAnimContainer,key:"slideshowAnimContainer",id:"slideshowAnim",style:{backgroundColor:Be},initial:"inactive",variants:{active:{opacity:1},inactive:{opacity:0}},animate:c?"active":"inactive",exit:"inactive",transition:{duration:"0.3"},onAnimationComplete:function(){var e=!K;if(Z(e),1==e){var t,n=document.activeElement;X(n),null===(t=document.getElementById("lightboxContainer"))||void 0===t||t.focus()}else null===q||void 0===q||q.focus();Vt&&Vt.reInit()}},(0,l.createElement)("div",{className:""+Av.lightboxContainer,id:"lightboxContainer",tabIndex:-1,role:"dialog",onClick:function(e){"clickOutside"==Te&&function(e){for(var t=document.getElementsByClassName("imageModal"),n=Array.from(t),r=0;r<n.length;r++)if(n[r].contains(e.target))return;un()}(e)}},(0,l.createElement)("section",{className:Av.iconsHeader+" "+(Ve?"":an())+" imageModal",style:{color:Ve}},(0,l.createElement)(ff,{keyValue:"ArrowLeft",code:"37",onKeyHandle:function(){gn()}}),(0,l.createElement)(ff,{keyValue:"ArrowRight",code:"39",onKeyHandle:function(){mn()}}),(0,l.createElement)(ff,{keyValue:"Escape",code:"27",onKeyHandle:function(e){e.preventDefault(),e.stopPropagation(),ct||un()}}),(0,l.createElement)(ff,{keyValue:"Left",code:"37",onKeyHandle:function(){gn()}}),(0,l.createElement)(ff,{keyValue:"Right",code:"39",onKeyHandle:function(){mn()}}),(0,l.createElement)(ff,{keyValue:"Esc",code:"27",onKeyHandle:function(e){e.preventDefault(),e.stopPropagation(),ct||un()}}),1==ue&&(0,l.createElement)("div",{className:""+Av.controls},$||0==xe?null:(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){ht&&Dn(),null!=Ot.current[bt]&&Ot.current[bt].zoomIn(),U(!0)}},(0,l.createElement)(Sd,{size:24,color:Ve||void 0,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{}}))),$||0==xe?null:(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){Ot.current[bt].zoomOut();var e=Ot.current[bt].state.scale;1!=e&&1.65!=e||U(!1)}},(0,l.createElement)(Cd,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))),!An(k)&&Ee?(0,l.createElement)("button",{onClick:function(){e.images.length>0?e.images[k].original?(0,Vp.saveAs)(e.images[k].original,"image.jpg"):(0,Vp.saveAs)(e.images[k].src,"image.jpg"):b[k].src&&(0,Vp.saveAs)(b[k].src,"image.jpeg")}},(0,l.createElement)(Nd,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0})):null,pe?ct?(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){ct?tn():$t()}},(0,l.createElement)(Ld,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))):(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){ct?tn():$t()}},(0,l.createElement)(Vd,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))):null,O&&Ye?(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){Qe(!Ze),Me(!1)}},(0,l.createElement)(Xd,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))):null,ge?(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){rt(!nt)}},(0,l.createElement)(Jd,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))):null,An(k)||1==O||1==Ne||1!=Q?null:(0,l.createElement)(md.div,null,(0,l.createElement)("button",{onClick:function(){return Dn()}},(0,l.createElement)(rh,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))),function(){if(void 0!=e.showSlideshowIcon)return e.showSlideshowIcon;if(b){if(1==b.length)return!1}else if(e.images&&1==e.images.length)return!1;return!0}()?(0,l.createElement)(md.div,{className:Av.slideshowPlayBtn},p?(0,l.createElement)("button",{onClick:function(){p?bn():vn()}},(0,l.createElement)(lh,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0})):(0,l.createElement)("button",{onClick:function(){p?bn():vn()}},(0,l.createElement)(ph,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),style:Ve?{color:Ve}:{},color:Ve||void 0}))):null,De?(0,l.createElement)(md.div,null,De):null),(0,l.createElement)(md.div,{className:Av.closeIcon+" "+(0==e.showControls?Av.mlAuto:"")},(0,l.createElement)("button",{id:"closeBtn",className:Av.closeButton,onClick:function(){un()}},(0,l.createElement)(vh,{id:"closeIcon",size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),color:Ve||void 0,style:Ve?{color:Ve}:{}})))),function(){if(0==e.showArrows)return!1;if(e.images){if(1==e.images.length)return!1}else if(1==b.length)return!1;return!0}()?(0,l.createElement)("div",null,(0,l.createElement)("div",{className:ne?Av.next1+" "+on()+" imageModal":"imageModal",style:ne,onClick:function(){mn()}},Se||(0,l.createElement)("span",{className:""+(e.rightArrowClassname?e.rightArrowClassname:"")},"\u276f")),(0,l.createElement)("div",{className:re?Av.prev1+" "+on()+" imageModal "+(Ye?Av.prev1_metadata:""):"imageModal",style:re,onClick:function(){gn()}},ke||(0,l.createElement)("span",{className:""+(e.leftArrowClassname?e.leftArrowClassname:"")},"\u276e"))):null,(0,l.createElement)(Ul,{initial:!1,custom:i},(0,l.createElement)("div",{className:Av.slideshowInnerContainerThumbnails+" "+Av.embla+" "+(Yt()?Av.slideImageAndCaption:"")+" \n                          "+(e.fullScreen?Av.slideshowInnerContainerFullScreen:Av.slideshowInnerContainer)+" "+(Ye?Av.slideshowInnerContainer_imgMetadata:"")+"  "},(O?Ze:Ye)?(0,l.createElement)("div",{className:Av.metadata,style:function(){var t={};return O&&Ze&&(t={height:"100vh"}),t.color=e.theme?Dv[e.theme]?Dv[e.theme].metadataTextColor:void 0:Dv[Lv].metadataTextColor,t}()},Lt?null:(0,l.createElement)("div",{className:Av.metadataInnerContainer},function(){var e=$e[k];if(e)return(0,l.createElement)("div",{className:Av.metadataPanel},(0,l.createElement)("b",null,"Filename"),e.name?(0,l.createElement)("p",null,e.name):null,e.createDate?(0,l.createElement)("div",null,(0,l.createElement)("b",null,"Captured Time"),(0,l.createElement)("p",null,e.createDate.toString())):null,e.width&&e.height?(0,l.createElement)("div",null,(0,l.createElement)("b",null,"Resolution"),(0,l.createElement)("p",null,e.width,"*",e.height)):null,e.isoData||e.fNumber||e.shutterSpeed?(0,l.createElement)("div",null,(0,l.createElement)("b",null,"Image Details"),e.isoData?(0,l.createElement)("span",null,"ISO ",e.isoData):null,e.fNumber?(0,l.createElement)("span",null,"f",e.fNumber):null,e.shutterSpeed?(0,l.createElement)("span",null,"Shutter speed: ",e.shutterSpeed):null):null)}(),O&&Ze?(0,l.createElement)("button",{className:Av.imgMetadataCloseBtn,onClick:function(){Qe(!1)}},(0,l.createElement)(vh,{size:24,className:Av.lightboxjs_icon+" "+(Ve?"":an()),color:Ve||void 0,style:Ve?{color:Ve}:{}})):null)):null,(0,l.createElement)("div",{className:Av.embla__viewport+" \n                            "+(Ye?Av.embla__container_imgMetadata:""),ref:c?zt:null},(0,l.createElement)("div",{className:Av.embla__container+" \n                            "+(Ye?Av.embla__container_imgMetadata:"")},Mn))),1!=Pe||(Zn=k,e.images&&e.images&&"htmlVideo"==e.images[Zn].type)?null:(0,l.createElement)("span",{key:"loader",className:Av.loader+" "+function(){if(e.theme){if("night"==e.theme||"lightbox"==e.theme)return Av.night_loader;if("day"==e.theme)return Av.day_loader}return Av.night_loader}()})),(0,l.createElement)("div",{className:Av.thumbnailsOuterContainer+" "+(Yt()?Av.thumbnailsAndCaption:"")+"\n                      "+(Ye?Av.thumbnailsOuterContainer_metadata:"")+" ",style:Yt()?{backgroundColor:Be}:{}},Yt()?(0,l.createElement)("div",{className:Av.imgTitleContainer+" imageModal"},(0,l.createElement)("p",{className:""+Av.imgTitle,key:"imgCaption"+k,style:e.captionStyle?e.captionStyle:{color:He}},e.images&&e.images.length>0?e.images[k].caption:"")):null,(0,l.createElement)(Ul,{initial:ot},!1!==nt&&!0!==Ce&&(0,l.createElement)(md.div,{initial:"hidden",exit:"hidden",animate:"visible",style:mt?{}:{display:"displayHidden"},transition:{type:"spring",duration:.75},variants:Mv,className:Av.thumbnails+" "+(Yt()?Av.thumbnailsWithCaption:"")},(0,l.createElement)("div",{className:Av.embla_thumbs+" "+Av.thumbnails},(0,l.createElement)("div",{className:Av.embla_thumbs__viewport,ref:Wt},(0,l.createElement)("div",{className:Av.embla_thumbs__container},"next"==Ae&&e.images?e.images.map((function(e,t){return Sn(e,t,!0)})):b.map((function(e,t){return Sn(e,t,!1)})))))),!0!==nt&&!1!==Ce&&(0,l.createElement)(md.div,{initial:"hidden",exit:"hidden",animate:"visible",style:mt?{}:{display:"displayHidden"},transition:{type:"spring",duration:.75},variants:Mv,className:Av.thumbnails+" "+(Yt()?Av.thumbnailsWithCaption:"")},(0,l.createElement)("div",{className:Av.embla_thumbs+" "+Av.thumbnails},(0,l.createElement)("div",{className:Av.embla_thumbs__viewport,ref:Wt},(0,l.createElement)("div",{className:Av.navigationDots+" "+Av.embla_thumbs__container+" imageModal\n                                "},"next"==Ae&&e.images?e.images.map((function(e,t){return wn(t)})):b.map((function(e,t){return wn(t)}))))))))))))))))}));const Uv=()=>{const{id:e}=ie(),{t:t}=Ye(),[n,r]=(0,l.useState)(null),[o,i]=(0,l.useState)("");return(0,l.useEffect)((()=>{!function(e,t){var n={license_key:e,plan_type:t};Dr.post("https://lightboxjs-server.herokuapp.com/license",n).then((function(e){e.data.license_valid||console.warn("Lightbox.js: Invalid license key specified, a valid license key must be provided.")})).catch((function(e){console.log(e)}))}("Insert your License Key here","Insert plan type here")}),[]),(0,l.useEffect)((()=>{(async()=>{try{const t=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/artworks/artworks/").concat(e));return await t.json()}catch(t){return console.error("Error fetching artwork with ID ".concat(e,":"),t),null}})(e);if(r(t),t&&t.ArtistID){const e=await Bt(t.ArtistID);i(e?e.Name:"")}}catch(t){console.error("Error fetching artwork details",t)}})()}),[e]),(0,Je.jsx)("div",{children:n?(0,Je.jsxs)("div",{className:"artworkContent",children:[(0,Je.jsxs)("div",{className:"image-content",children:[(0,Je.jsx)(Oe,{to:"/artist/".concat(n.ArtistID),className:"artist-name",children:o}),(0,Je.jsx)("div",{className:"artworkImage",children:(0,Je.jsx)(Bv,{className:"container grid grid-cols-3 gap-2 mx-auto",children:(0,Je.jsx)("img",{className:"w-full",src:n.Image,alt:n.Name})})}),(0,Je.jsx)("br",{})]}),(0,Je.jsxs)("div",{className:"info",children:[(0,Je.jsx)("h1",{className:"title-art",children:n.Title}),(0,Je.jsxs)("p",{className:"price",children:[" ",t("price"),"  ",n.Price,"USD"]}),(0,Je.jsxs)("p",{className:"price",children:["  ",n.Description]}),(0,Je.jsxs)("p",{className:"price",children:["  ",n.Materials]})]})]}):(0,Je.jsx)("p",{className:"loading",children:"LOADING..."})})},zv=e=>{let{formData:t,handleChange:n,handleSubmit:r}=e;return(0,Je.jsxs)("div",{className:"my-container-apply",children:[(0,Je.jsx)("h3",{className:"form-title",children:"APPLY"}),(0,Je.jsx)("div",{className:"my-container-form",children:(0,Je.jsxs)("form",{onSubmit:r,encType:"multipart/form-data",children:[(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Name",className:"my-label-form",children:"Name"}),(0,Je.jsx)("input",{type:"text","aria-label":"First name",className:"my-input-form",name:"Name",value:t.Nombre,onChange:n})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Email",className:"my-label-form",children:"Email"}),(0,Je.jsx)("input",{type:"email","aria-label":"First name",className:"my-input-form",name:"Email",value:t.Email,onChange:n})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"ArtistDescription",className:"my-label-form",children:"Description"}),(0,Je.jsx)("input",{type:"text","aria-label":"First name",className:"my-input-form",name:"ArtistDescription",value:t.ArtistDescription,onChange:n})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Image",className:"my-label-form",children:"Images"}),(0,Je.jsx)("input",{type:"file",className:"my-input-form",id:"inputGroupFile01",name:"Image",onChange:n})]}),(0,Je.jsx)("input",{type:"submit",value:"Enviar",className:"my-button-form"})]})})]})},Vv=()=>{const[e,t]=(0,l.useState)({Name:"",Email:"",ArtistDetail:"",Image:null});return(0,Je.jsx)(zv,{formData:e,handleChange:e=>{const{name:n,value:r}=e.target;t("Image"===n?t=>({...t,[n]:e.target.files[0]}):e=>({...e,[n]:r}))},handleSubmit:async n=>{n.preventDefault();const r=await(async e=>{try{const t="".concat("https://holograma-3.onrender.com","/artists/artistRequest"),n=new FormData;for(const o in e)n.append(o,e[o]);const r=await fetch(t,{method:"POST",body:n});if(r.ok){const e=await r.json();return console.log("Solicitud creada:",e),{success:!0,data:e}}return console.error("Error al crear la solicitud"),{success:!1,error:"Error al crear la solicitud"}}catch(t){return console.error("Error en la solicitud:",t),{success:!1,error:"Error en la solicitud"}}})(e);r.success?(alert("Request sent correctly"),t({Name:"",Email:"",ArtistDetail:"",Image:null})):console.error(r.error)}})},Gv=()=>{const[e,t]=(0,l.useState)([]),{t:n}=Ye(),[r,o]=(0,l.useState)({ArtistID:"",Title:"",Description:"",Materials:"",Dimensions:"",CreationDate:"",Price:""});(0,l.useEffect)((()=>{(async()=>{const e=await Vt();t(e)})()}),[]);const i=e=>{o({...r,[e.target.name]:e.target.value})};return(0,Je.jsxs)("div",{className:"my-container-artwork",children:[(0,Je.jsx)("h3",{className:"form-title",children:"CREATE ARTWORK"}),(0,Je.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target);console.log([...t.entries()]);const n=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/artworks/createArtwork"),{method:"POST",body:e});return t.ok?{success:!0,message:(await t.json()).message}:{success:!1,error:(await t.json()).error}}catch(t){return console.error("Error al enviar la solicitud:",t),{success:!1,error:"Error al enviar la solicitud"}}})(t);n.success?(console.log(n.message),alert("Art Work created")):console.error("Error al crear la obra:",n.error)},encType:"multipart/form-data",className:"my-form",children:[(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Artist",className:"my-label-form",children:n("artists")}),(0,Je.jsxs)("select",{className:"my-select-form",name:"ArtistID",value:r.ArtistID,onChange:i,children:[(0,Je.jsx)("option",{value:"",disabled:!0,defaultValue:!0,children:n("selectArtist")}),e.map((e=>(0,Je.jsx)("option",{value:e.ID,children:e.Name},e.ID)))]})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Title",className:"my-label-form",children:n("title")}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Title",value:r.Title,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Materials",className:"my-label-form",children:n("materials")}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Materials",value:r.Materials,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Dimensions",className:"my-label-form",children:n("dimensions")}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Dimensions",value:r.Dimensions,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Description",className:"my-label-form",children:n("description")}),(0,Je.jsx)("textarea",{className:"my-textarea-form",rows:"3",name:"Description",value:r.Description,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"CreationDate",className:"my-label-form",children:n("creationDate")}),(0,Je.jsx)("input",{type:"date",className:"my-input-form",name:"CreationDate",value:r.CreationDate,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Price",className:"my-label-form",children:n("price")}),(0,Je.jsx)("input",{type:"number",className:"my-input-form",name:"Price",value:r.Price,onChange:i,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"inputGroupFile01",children:n("upload")}),(0,Je.jsx)("input",{type:"file",className:"my-input-form",name:"Image",multiple:!0})]}),(0,Je.jsx)("button",{type:"submit",className:"my-button-form",children:n("createArt")})]})]})};var Wv=Object.defineProperty,Hv={};((e,t)=>{for(var n in t)Wv(e,n,{get:t[n],enumerable:!0})})(Hv,{assign:()=>kb,colors:()=>wb,createStringInterpolator:()=>yb,skipAnimation:()=>Sb,to:()=>vb,willAdvance:()=>_b});var qv=lb(),Xv=e=>ob(e,qv),Yv=lb();Xv.write=e=>ob(e,Yv);var Kv=lb();Xv.onStart=e=>ob(e,Kv);var Zv=lb();Xv.onFrame=e=>ob(e,Zv);var Qv=lb();Xv.onFinish=e=>ob(e,Qv);var Jv=[];Xv.setTimeout=(e,t)=>{const n=Xv.now()+t,r=()=>{const e=Jv.findIndex((e=>e.cancel==r));~e&&Jv.splice(e,1),nb-=~e?1:0},o={time:n,handler:e,cancel:r};return Jv.splice($v(n),0,o),nb+=1,ib(),o};var $v=e=>~(~Jv.findIndex((t=>t.time>e))||~Jv.length);Xv.cancel=e=>{Kv.delete(e),Zv.delete(e),Qv.delete(e),qv.delete(e),Yv.delete(e)},Xv.sync=e=>{rb=!0,Xv.batchedUpdates(e),rb=!1},Xv.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];t=r,Xv.onStart(n)}return r.handler=e,r.cancel=()=>{Kv.delete(n),t=null},r};var eb="undefined"!=typeof window?window.requestAnimationFrame:()=>{};Xv.use=e=>eb=e,Xv.now="undefined"!=typeof performance?()=>performance.now():Date.now,Xv.batchedUpdates=e=>e(),Xv.catch=console.error,Xv.frameLoop="always",Xv.advance=()=>{"demand"!==Xv.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):sb()};var tb=-1,nb=0,rb=!1;function ob(e,t){rb?(t.delete(e),e(0)):(t.add(e),ib())}function ib(){tb<0&&(tb=0,"demand"!==Xv.frameLoop&&eb(ab))}function ab(){~tb&&(eb(ab),Xv.batchedUpdates(sb))}function sb(){const e=tb;tb=Xv.now();const t=$v(tb);t&&(cb(Jv.splice(0,t),(e=>e.handler())),nb-=t),nb?(Kv.flush(),qv.flush(e?Math.min(64,tb-e):16.667),Zv.flush(),Yv.flush(),Qv.flush()):tb=-1}function lb(){let e=new Set,t=e;return{add(n){nb+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(nb-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,nb-=t.size,cb(t,(t=>t(n)&&e.add(t))),nb+=e.size,t=e)}}}function cb(e,t){e.forEach((e=>{try{t(e)}catch(pg){Xv.catch(pg)}}))}function ub(){}var db={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function hb(e,t){if(db.arr(e)){if(!db.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var pb=(e,t)=>e.forEach(t);function fb(e,t,n){if(db.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],"".concat(r));else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var mb=e=>db.und(e)?[]:db.arr(e)?e:[e];function gb(e,t){if(e.size){const n=Array.from(e);e.clear(),pb(n,t)}}var yb,vb,bb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gb(e,(e=>e(...n)))},xb=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wb=null,Sb=!1,_b=ub,kb=e=>{e.to&&(vb=e.to),e.now&&(Xv.now=e.now),void 0!==e.colors&&(wb=e.colors),null!=e.skipAnimation&&(Sb=e.skipAnimation),e.createStringInterpolator&&(yb=e.createStringInterpolator),e.requestAnimationFrame&&Xv.use(e.requestAnimationFrame),e.batchedUpdates&&(Xv.batchedUpdates=e.batchedUpdates),e.willAdvance&&(_b=e.willAdvance),e.frameLoop&&(Xv.frameLoop=e.frameLoop)},Tb=new Set,Eb=[],Cb=[],Ib=0,jb={get idle(){return!Tb.size&&!Eb.length},start(e){Ib>e.priority?(Tb.add(e),Xv.onStart(Ab)):(Ob(e),Xv(Rb))},advance:Rb,sort(e){if(Ib)Xv.onFrame((()=>jb.sort(e)));else{const t=Eb.indexOf(e);~t&&(Eb.splice(t,1),Nb(e))}},clear(){Eb=[],Tb.clear()}};function Ab(){Tb.forEach(Ob),Tb.clear(),Xv(Rb)}function Ob(e){Eb.includes(e)||Nb(e)}function Nb(e){Eb.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(Eb,(t=>t.priority>e.priority)),0,e)}function Rb(e){const t=Cb;for(let n=0;n<Eb.length;n++){const r=Eb[n];Ib=r.priority,r.idle||(_b(r),r.advance(e),r.idle||t.push(r))}return Ib=0,(Cb=Eb).length=0,(Eb=t).length>0}var Pb="[-+]?\\d*\\.?\\d+",Mb=Pb+"%";function Db(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Lb=new RegExp("rgb"+Db(Pb,Pb,Pb)),Fb=new RegExp("rgba"+Db(Pb,Pb,Pb,Pb)),Bb=new RegExp("hsl"+Db(Pb,Mb,Mb)),Ub=new RegExp("hsla"+Db(Pb,Mb,Mb,Pb)),zb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Vb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gb=/^#([0-9a-fA-F]{6})$/,Wb=/^#([0-9a-fA-F]{8})$/;function Hb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function qb(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=Hb(o,r,e+1/3),a=Hb(o,r,e),s=Hb(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function Xb(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Yb(e){return(parseFloat(e)%360+360)%360/360}function Kb(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Zb(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Qb(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Gb.exec(e))?parseInt(t[1]+"ff",16)>>>0:wb&&void 0!==wb[e]?wb[e]:(t=Lb.exec(e))?(Xb(t[1])<<24|Xb(t[2])<<16|Xb(t[3])<<8|255)>>>0:(t=Fb.exec(e))?(Xb(t[1])<<24|Xb(t[2])<<16|Xb(t[3])<<8|Kb(t[4]))>>>0:(t=zb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Wb.exec(e))?parseInt(t[1],16)>>>0:(t=Vb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Bb.exec(e))?(255|qb(Yb(t[1]),Zb(t[2]),Zb(t[3])))>>>0:(t=Ub.exec(e))?(qb(Yb(t[1]),Zb(t[2]),Zb(t[3]))|Kb(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;const n=(16711680&t)>>>16,r=(65280&t)>>>8,o=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(o,")")}var Jb=(e,t,n)=>{if(db.fun(e))return e;if(db.arr(e))return Jb({range:e,output:t,extrapolate:n});if(db.str(e.output[0]))return yb(e);const r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,s,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=i(c),r===-1/0?c=-c:o===1/0?c+=r:c=c*(o-r)+r;return c}(e,i[t],i[t+1],o[t],o[t+1],l,a,s,r.map)}};var $b=1.70158,ex=1.525*$b,tx=$b+1,nx=2*Math.PI/3,rx=2*Math.PI/4.5,ox=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},ix={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>tx*e*e*e-$b*e*e,easeOutBack:e=>1+tx*Math.pow(e-1,3)+$b*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-ex)/2:(Math.pow(2*e-2,2)*((ex+1)*(2*e-2)+ex)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*nx),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*nx)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*rx)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*rx)/2+1,easeInBounce:e=>1-ox(1-e),easeOutBounce:ox,easeInOutBounce:e=>e<.5?(1-ox(1-2*e))/2:(1+ox(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return((e,t,n)=>Math.min(Math.max(n,e),t))(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}},ax=Symbol.for("FluidValue.get"),sx=Symbol.for("FluidValue.observers"),lx=e=>Boolean(e&&e[ax]),cx=e=>e&&e[ax]?e[ax]():e,ux=e=>e[sx]||null;function dx(e,t){const n=e[sx];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var hx=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");px(this,e)}},px=(e,t)=>yx(e,ax,t);function fx(e,t){if(e[ax]){let n=e[sx];n||yx(e,sx,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function mx(e,t){const n=e[sx];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[sx]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var gx,yx=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),vx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bx=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,xx=new RegExp("(".concat(vx.source,")(%|[a-z]+)"),"i"),wx=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Sx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,_x=e=>{const[t,n]=kx(e);if(!t||xb())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&Sx.test(n)?_x(n):n||e},kx=e=>{const t=Sx.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Tx=(e,t,n,r,o)=>"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(o,")"),Ex=e=>{gx||(gx=wb?new RegExp("(".concat(Object.keys(wb).join("|"),")(?!\\w)"),"g"):/^\b$/);const t=e.output.map((e=>cx(e).replace(Sx,_x).replace(bx,Qb).replace(gx,Qb))),n=t.map((e=>e.match(vx).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))),o=r.map((t=>Jb({...e,output:t})));return e=>{var n;const r=!xx.test(t[0])&&(null===(n=t.find((e=>xx.test(e))))||void 0===n?void 0:n.replace(vx,""));let i=0;return t[0].replace(vx,(()=>"".concat(o[i++](e)).concat(r||""))).replace(wx,Tx)}},Cx="react-spring: ",Ix=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError("".concat(Cx,"once requires a function parameter"));return function(){n||(t(...arguments),n=!0)}},jx=Ix(console.warn);var Ax=Ix(console.warn);function Ox(e){return db.str(e)&&("#"==e[0]||/\d/.test(e)||!xb()&&Sx.test(e)||e in(wb||{}))}var Nx=xb()?l.useEffect:l.useLayoutEffect,Rx=()=>{const e=(0,l.useRef)(!1);return Nx((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function Px(){const e=(0,l.useState)()[1],t=Rx();return()=>{t.current&&e(Math.random())}}var Mx=e=>(0,l.useEffect)(e,Dx),Dx=[];function Lx(e){const t=(0,l.useRef)();return(0,l.useEffect)((()=>{t.current=e})),t.current}var Fx=Symbol.for("Animated:node"),Bx=e=>e&&e[Fx],Ux=(e,t)=>{return n=e,r=Fx,o=t,Object.defineProperty(n,r,{value:o,writable:!0,configurable:!0});var n,r,o},zx=e=>e&&e[Fx]&&e[Fx].getPayload(),Vx=class{constructor(){Ux(this,this)}getPayload(){return this.payload||[]}},Gx=class extends Vx{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,db.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Gx(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return db.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,db.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Wx=class extends Gx{constructor(e){super(0),this._string=null,this._toString=Jb({output:[e,e]})}static create(e){return new Wx(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(db.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Jb({output:[this.getValue(),e]})),this._value=0,super.reset()}},Hx={dependencies:null},qx=class extends Vx{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return fb(this.source,((n,r)=>{var o;(o=n)&&o[Fx]===o?t[r]=n.getValue(e):lx(n)?t[r]=cx(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&pb(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return fb(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Hx.dependencies&&lx(e)&&Hx.dependencies.add(e);const t=zx(e);t&&pb(t,(e=>this.add(e)))}},Xx=class extends qx{constructor(e){super(e)}static create(e){return new Xx(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(Yx)),!0)}};function Yx(e){return(Ox(e)?Wx:Gx).create(e)}function Kx(e){const t=Bx(e);return t?t.constructor:db.arr(e)?Xx:Ox(e)?Wx:Gx}var Zx=(e,t)=>{const n=!db.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,l.forwardRef)(((r,o)=>{const i=(0,l.useRef)(null),a=n&&(0,l.useCallback)((e=>{i.current=function(e,t){e&&(db.fun(e)?e(t):e.current=t);return t}(o,e)}),[o]),[s,c]=function(e,t){const n=new Set;Hx.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new qx(e),Hx.dependencies=null,[e,n]}(r,t),u=Px(),d=()=>{const e=i.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&u()},h=new Qx(d,c),p=(0,l.useRef)();Nx((()=>(p.current=h,pb(c,(e=>fx(e,h))),()=>{p.current&&(pb(p.current.deps,(e=>mx(e,p.current))),Xv.cancel(p.current.update))}))),(0,l.useEffect)(d,[]),Mx((()=>()=>{const e=p.current;pb(e.deps,(t=>mx(t,e)))}));const f=t.getComponentProps(s.getValue());return l.createElement(e,{...f,ref:a})}))},Qx=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&Xv.write(this.update)}};var Jx=Symbol.for("AnimatedComponent"),$x=e=>db.str(e)?e:e&&db.str(e.displayName)?e.displayName:db.fun(e)&&e.name||null;function ew(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return db.fun(e)?e(...n):e}var tw=(e,t)=>!0===e||!!(t&&e&&(db.fun(e)?e(t):mb(e).includes(t))),nw=(e,t)=>db.obj(e)?t&&e[t]:e,rw=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,ow=e=>e,iw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ow,n=aw;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const o of n){const n=t(e[o],o);db.und(n)||(r[o]=n)}return r},aw=["config","onProps","onStart","onChange","onPause","onResume","onRest"],sw={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function lw(e){const t=function(e){const t={};let n=0;if(fb(e,((e,r)=>{sw[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return fb(e,((e,r)=>r in t||(n[r]=e))),n}return{...e}}function cw(e){return e=cx(e),db.arr(e)?e.map(cw):Ox(e)?Hv.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function uw(e){for(const t in e)return!0;return!1}function dw(e){return db.fun(e)||db.arr(e)&&db.obj(e[0])}function hw(e,t){var n;null===(n=e.ref)||void 0===n||n.delete(e),null===t||void 0===t||t.delete(e)}function pw(e,t){var n;t&&e.ref!==t&&(null===(n=e.ref)||void 0===n||n.delete(e),t.add(e),e.ref=t)}var fw={tension:170,friction:26,mass:1,damping:1,easing:ix.linear,clamp:!1},mw=class{constructor(){this.velocity=0,Object.assign(this,fw)}};function gw(e,t){if(db.und(t.decay)){const n=!db.und(t.tension)||!db.und(t.friction);!n&&db.und(t.frequency)&&db.und(t.damping)&&db.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var yw=[],vw=class{constructor(){this.changed=!1,this.values=yw,this.toValues=null,this.fromValues=yw,this.config=new mw,this.immediate=!1}};function bw(e,t){let{key:n,props:r,defaultProps:o,state:i,actions:a}=t;return new Promise(((t,s)=>{var l;let c,u,d=tw(null!==(l=r.cancel)&&void 0!==l?l:null===o||void 0===o?void 0:o.cancel,n);if(d)f();else{db.und(r.pause)||(i.paused=tw(r.pause,n));let e=null===o||void 0===o?void 0:o.pause;!0!==e&&(e=i.paused||tw(e,n)),c=ew(r.delay||0,n),e?(i.resumeQueue.add(p),a.pause()):(a.resume(),p())}function h(){i.resumeQueue.add(p),i.timeouts.delete(u),u.cancel(),c=u.time-Xv.now()}function p(){c>0&&!Hv.skipAnimation?(i.delayed=!0,u=Xv.setTimeout(f,c),i.pauseQueue.add(h),i.timeouts.add(u)):f()}function f(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(u),e<=(i.cancelId||0)&&(d=!0);try{a.start({...r,callId:e,cancel:d},t)}catch(n){s(n)}}}))}var xw=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?_w(e.get()):t.every((e=>e.noop))?ww(e.get()):Sw(e.get(),t.every((e=>e.finished))),ww=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Sw=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},_w=e=>({value:e,cancelled:!0,finished:!1});function kw(e,t,n,r){const{callId:o,parentId:i,onRest:a}=t,{asyncTo:s,promise:l}=n;return i||e!==s||t.reset?n.promise=(async()=>{n.asyncId=o,n.asyncTo=e;const c=iw(t,((e,t)=>"onRest"===t?void 0:e));let u,d;const h=new Promise(((e,t)=>(u=e,d=t))),p=e=>{const t=o<=(n.cancelId||0)&&_w(r)||o!==n.asyncId&&Sw(r,!1);if(t)throw e.result=t,d(e),e},f=(e,t)=>{const i=new Ew,a=new Cw;return(async()=>{if(Hv.skipAnimation)throw Tw(n),a.result=Sw(r,!1),d(a),a;p(i);const s=db.obj(e)?{...e}:{...t,to:e};s.parentId=o,fb(c,((e,t)=>{db.und(s[t])&&(s[t]=e)}));const l=await r.start(s);return p(i),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let m;if(Hv.skipAnimation)return Tw(n),Sw(r,!1);try{let t;t=db.arr(e)?(async e=>{for(const t of e)await f(t)})(e):Promise.resolve(e(f,r.stop.bind(r))),await Promise.all([t.then(u),h]),m=Sw(r.get(),!0,!1)}catch(g){if(g instanceof Ew)m=g.result;else{if(!(g instanceof Cw))throw g;m=g.result}}finally{o==n.asyncId&&(n.asyncId=i,n.asyncTo=i?s:void 0,n.promise=i?l:void 0)}return db.fun(a)&&Xv.batchedUpdates((()=>{a(m,r,r.item)})),m})():l}function Tw(e,t){gb(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Ew=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Cw=class extends Error{constructor(){super("SkipAnimationSignal")}},Iw=e=>e instanceof Aw,jw=1,Aw=class extends hx{constructor(){super(...arguments),this.id=jw++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Bx(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hv.to(this,t)}interpolate(){jx("".concat(Cx,'The "interpolate" function is deprecated in v9 (use "to" instead)'));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hv.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){dx(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||jb.sort(this),dx(this,{type:"priority",parent:this,priority:e})}},Ow=Symbol.for("SpringPhase"),Nw=e=>(1&e[Ow])>0,Rw=e=>(2&e[Ow])>0,Pw=e=>(4&e[Ow])>0,Mw=(e,t)=>t?e[Ow]|=3:e[Ow]&=-3,Dw=(e,t)=>t?e[Ow]|=4:e[Ow]&=-5,Lw=class extends Aw{constructor(e,t){if(super(),this.animation=new vw,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!db.und(e)||!db.und(t)){const n=db.obj(e)?{...e}:{...t,from:e};db.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Rw(this)||this._state.asyncTo)||Pw(this)}get goal(){return cx(this.animation.to)}get velocity(){const e=Bx(this);return e instanceof Gx?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return Nw(this)}get isAnimating(){return Rw(this)}get isPaused(){return Pw(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:i}=r,a=zx(r.to);!a&&lx(r.to)&&(o=mb(cx(r.to))),r.values.forEach(((s,l)=>{if(s.done)return;const c=s.constructor==Wx?1:a?a[l].lastPosition:o[l];let u=r.immediate,d=c;if(!u){if(d=s.lastPosition,i.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const n=r.fromValues[l],o=null!=s.v0?s.v0:s.v0=db.arr(i.velocity)?i.velocity[l]:i.velocity;let a;const h=i.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(db.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);d=n+o/(1-e)*(1-r),u=Math.abs(s.lastPosition-d)<=h,a=o*r}else{a=null==s.lastVelocity?o:s.lastVelocity;const t=i.restVelocity||h/10,r=i.clamp?0:i.bounce,l=!db.und(r),p=n==c?s.v0>0:n<c;let f,m=!1;const g=1,y=Math.ceil(e/g);for(let e=0;e<y&&(f=Math.abs(a)>t,f||(u=Math.abs(c-d)<=h,!u));++e){l&&(m=d==c||d>c==p,m&&(a=-a*r,d=c));a+=(1e-6*-i.tension*(d-c)+.001*-i.friction*a)/i.mass*g,d+=a*g}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,t=s.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,s.durationProgress=r),d=n+i.easing(r)*(c-n),a=(d-s.lastPosition)/e,u=1==r}s.lastVelocity=a,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),u=!0)}a&&!a[l].done&&(u=!1),u?s.done=!0:t=!1,s.setValue(d,i.round)&&(n=!0)}));const s=Bx(this),l=s.getValue();if(t){const e=cx(r.to);l===e&&!n||i.decay?n&&i.decay&&this._onChange(l):(s.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return Xv.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rw(this)){const{to:e,config:t}=this.animation;Xv.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return db.und(e)?(n=this.queue||[],this.queue=[]):n=[db.obj(e)?e:{...t,to:e}],Promise.all(n.map((e=>this._update(e)))).then((e=>xw(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Tw(this._state,e&&this._lastCallId),Xv.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=db.obj(n)?n[t]:n,(null==n||dw(n))&&(n=void 0),r=db.obj(r)?r[t]:r,null==r&&(r=void 0);const o={to:n,from:r};return Nw(this)||(e.reverse&&([n,r]=[r,n]),r=cx(r),db.und(r)?Bx(this)||this._set(n):this._set(r)),o}_update(e,t){let{...n}=e;const{key:r,defaultProps:o}=this;n.default&&Object.assign(o,iw(n,((e,t)=>/^on/.test(t)?nw(e,r):e))),Ww(this,n,"onProps"),Hw(this,"onProps",n,this);const i=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return bw(++this._lastCallId,{key:r,props:n,defaultProps:o,state:a,actions:{pause:()=>{Pw(this)||(Dw(this,!0),bb(a.pauseQueue),Hw(this,"onPause",Sw(this,Fw(this,this.animation.to)),this))},resume:()=>{Pw(this)&&(Dw(this,!1),Rw(this)&&this._resume(),bb(a.resumeQueue),Hw(this,"onResume",Sw(this,Fw(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=Bw(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(_w(this));const r=!db.und(e.to),o=!db.und(e.from);if(r||o){if(!(t.callId>this._lastToId))return n(_w(this));this._lastToId=t.callId}const{key:i,defaultProps:a,animation:s}=this,{to:l,from:c}=s;let{to:u=l,from:d=c}=e;!o||r||t.default&&!db.und(u)||(u=d),t.reverse&&([u,d]=[d,u]);const h=!hb(d,c);h&&(s.from=d),d=cx(d);const p=!hb(u,l);p&&this._focus(u);const f=dw(t.to),{config:m}=s,{decay:g,velocity:y}=m;(r||o)&&(m.velocity=0),t.config&&!f&&function(e,t,n){n&&(gw(n={...n},t),t={...n,...t}),gw(e,t),Object.assign(e,t);for(const a in fw)null==e[a]&&(e[a]=fw[a]);let{frequency:r,damping:o}=e;const{mass:i}=e;db.und(r)||(r<.01&&(r=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*o*i/r)}(m,ew(t.config,i),t.config!==a.config?ew(a.config,i):void 0);let v=Bx(this);if(!v||db.und(u))return n(Sw(this,!0));const b=db.und(t.reset)?o&&!t.default:!db.und(d)&&tw(t.reset,i),x=b?d:this.get(),w=cw(u),S=db.num(w)||db.arr(w)||Ox(w),_=!f&&(!S||tw(a.immediate||t.immediate,i));if(p){const e=Kx(u);if(e!==v.constructor){if(!_)throw Error("Cannot animate between ".concat(v.constructor.name," and ").concat(e.name,', as the "to" prop suggests'));v=this._set(w)}}const k=v.constructor;let T=lx(u),E=!1;if(!T){const e=b||!Nw(this)&&h;(p||e)&&(E=hb(cw(x),w),T=!E),(hb(s.immediate,_)||_)&&hb(m.decay,g)&&hb(m.velocity,y)||(T=!0)}if(E&&Rw(this)&&(s.changed&&!b?T=!0:T||this._stop(l)),!f&&((T||lx(l))&&(s.values=v.getPayload(),s.toValues=lx(u)?null:k==Wx?[1]:mb(w)),s.immediate!=_&&(s.immediate=_,_||b||this._set(l)),T)){const{onRest:e}=s;pb(Gw,(e=>Ww(this,t,e)));const r=Sw(this,Fw(this,l));bb(this._pendingCalls,r),this._pendingCalls.add(n),s.changed&&Xv.batchedUpdates((()=>{var t;(s.changed=!b,null===e||void 0===e||e(r,this),b)?ew(a.onRest,r):null===(t=s.onStart)||void 0===t||t.call(s,r,this)}))}b&&this._set(x),f?n(kw(t.to,t,this._state,this)):T?this._start():Rw(this)&&!p?this._pendingCalls.add(n):n(ww(x))}_focus(e){const t=this.animation;e!==t.to&&(ux(this)&&this._detach(),t.to=e,ux(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;lx(t)&&(fx(t,this),Iw(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;lx(e)&&mx(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=cx(e);if(!db.und(n)){const e=Bx(this);if(!e||!hb(n,e.getValue())){const r=Kx(n);e&&e.constructor==r?e.setValue(n):Ux(this,r.create(n)),e&&Xv.batchedUpdates((()=>{this._onChange(n,t)}))}}return Bx(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Hw(this,"onStart",Sw(this,Fw(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ew(this.animation.onChange,e,this)),ew(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Bx(this).reset(cx(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),Rw(this)||(Mw(this,!0),Pw(this)||this._resume())}_resume(){Hv.skipAnimation?this.finish():jb.start(this)}_stop(e,t){if(Rw(this)){Mw(this,!1);const n=this.animation;pb(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),dx(this,{type:"idle",parent:this});const r=t?_w(this.get()):Sw(this.get(),Fw(this,null!==e&&void 0!==e?e:n.to));bb(this._pendingCalls,r),n.changed&&(n.changed=!1,Hw(this,"onRest",r,this))}}};function Fw(e,t){const n=cw(t);return hb(cw(e.get()),n)}function Bw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const r=ew(t);if(r){const o=!0!==r&&lw(r),i=(o||e).reverse,a=!o||o.reset;return Uw({...e,loop:t,default:!1,pause:void 0,to:!i||dw(n)?n:void 0,from:a?e.from:void 0,reset:a,...o})}}function Uw(e){const{to:t,from:n}=e=lw(e),r=new Set;return db.obj(t)&&Vw(t,r),db.obj(n)&&Vw(n,r),e.keys=r.size?Array.from(r):null,e}function zw(e){const t=Uw(e);return db.und(t.default)&&(t.default=iw(t)),t}function Vw(e,t){fb(e,((e,n)=>null!=e&&t.add(n)))}var Gw=["onStart","onRest","onChange","onPause","onResume"];function Ww(e,t,n){e.animation[n]=t[n]!==rw(t,n)?nw(t[n],e.key):void 0}function Hw(e,t){for(var n,r,o,i,a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];null===(n=(r=e.animation)[t])||void 0===n||n.call(r,...s),null===(o=(i=e.defaultProps)[t])||void 0===o||o.call(i,...s)}var qw=["onStart","onChange","onRest"],Xw=1,Yw=class{constructor(e,t){this.id=Xw++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];db.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Uw(e)),this}start(e){let{queue:t}=this;return e?t=mb(e).map(Uw):this.queue=[],this._flush?this._flush(this,t):(tS(this,t),Kw(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;pb(mb(t),(t=>n[t].stop(!!e)))}else Tw(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(db.und(e))this.start({pause:!0});else{const t=this.springs;pb(mb(e),(e=>t[e].pause()))}return this}resume(e){if(db.und(e))this.start({pause:!1});else{const t=this.springs;pb(mb(e),(e=>t[e].resume()))}return this}each(e){fb(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,gb(e,(e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)})));const i=!r&&this._started,a=o||i&&n.size?this.get():null;o&&t.size&&gb(t,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})),i&&(this._started=!1,gb(n,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}Xv.onFrame(this._onFrame)}};function Kw(e,t){return Promise.all(t.map((t=>Zw(e,t)))).then((t=>xw(e,t)))}async function Zw(e,t,n){const{keys:r,to:o,from:i,loop:a,onRest:s,onResolve:l}=t,c=db.obj(t.default)&&t.default;a&&(t.loop=!1),!1===o&&(t.to=null),!1===i&&(t.from=null);const u=db.arr(o)||db.fun(o)?o:void 0;u?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):pb(qw,(n=>{const r=t[n];if(db.fun(r)){const o=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const i=o.get(r);i?(t||(i.finished=!1),n&&(i.cancelled=!0)):o.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[n]=t[n])}}));const d=e._state;t.pause===!d.paused?(d.paused=t.pause,bb(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const h=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),p=!0===t.cancel||!0===rw(t,"cancel");(u||p&&d.asyncId)&&h.push(bw(++e._lastAsyncId,{props:t,state:d,actions:{pause:ub,resume:ub,start(t,n){p?(Tw(d,e._lastAsyncId),n(_w(e))):(t.onRest=s,n(kw(u,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));const f=xw(e,await Promise.all(h));if(a&&f.finished&&(!n||!f.noop)){const n=Bw(t,a,o);if(n)return tS(e,[n]),Zw(e,n,!0)}return l&&Xv.batchedUpdates((()=>l(f,e,e.item))),f}function Qw(e,t){const n={...e.springs};return t&&pb(mb(t),(e=>{db.und(e.keys)&&(e=Uw(e)),db.obj(e.to)||(e={...e,to:void 0}),eS(n,e,(e=>$w(e)))})),Jw(e,n),n}function Jw(e,t){fb(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,fx(t,e))}))}function $w(e,t){const n=new Lw;return n.key=e,t&&fx(n,t),n}function eS(e,t,n){t.keys&&pb(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function tS(e,t){pb(t,(t=>{eS(e.springs,t,(t=>$w(t,e)))}))}var nS=e=>{let{children:t,...n}=e;const r=(0,l.useContext)(rS),o=n.pause||!!r.pause,i=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,l.useState)((()=>({inputs:t,result:e()}))),r=(0,l.useRef)(),o=r.current;let i=o;if(i){const n=Boolean(t&&i.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,i.inputs));n||(i={inputs:t,result:e()})}else i=n;return(0,l.useEffect)((()=>{r.current=i,o==n&&(n.inputs=n.result=void 0)}),[i]),i.result}((()=>({pause:o,immediate:i})),[o,i]);const{Provider:a}=rS;return l.createElement(a,{value:n},t)},rS=function(e,t){return Object.assign(e,l.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(nS,{});nS.Provider=rS.Provider,nS.Consumer=rS.Consumer;var oS=()=>{const e=[],t=function(t){Ax("".concat(Cx,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));const r=[];return pb(e,((e,o)=>{if(db.und(t))r.push(e.start());else{const i=n(t,e,o);i&&r.push(e.start(i))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return pb(e,(e=>e.pause(...arguments))),this},t.resume=function(){return pb(e,(e=>e.resume(...arguments))),this},t.set=function(t){pb(e,((e,n)=>{const r=db.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){const n=[];return pb(e,((e,r)=>{if(db.und(t))n.push(e.start());else{const o=this._getProps(t,e,r);o&&n.push(e.start(o))}})),n},t.stop=function(){return pb(e,(e=>e.stop(...arguments))),this},t.update=function(t){return pb(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return db.fun(e)?e(n,t):e};return t._getProps=n,t};function iS(e,t,n){const r=db.fun(t)&&t;r&&!n&&(n=[]);const o=(0,l.useMemo)((()=>r||3==arguments.length?oS():void 0),[]),i=(0,l.useRef)(0),a=Px(),s=(0,l.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=Qw(e,t);return i.current>0&&!s.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?Kw(e,t):new Promise((r=>{Jw(e,n),s.queue.push((()=>{r(Kw(e,t))})),a()}))}})),[]),c=(0,l.useRef)([...s.ctrls]),u=[],d=Lx(e)||0;function h(e,n){for(let o=e;o<n;o++){const e=c.current[o]||(c.current[o]=new Yw(null,s.flush)),n=r?r(o,e):t[o];n&&(u[o]=zw(n))}}(0,l.useMemo)((()=>{pb(c.current.slice(e,d),(e=>{hw(e,o),e.stop(!0)})),c.current.length=e,h(d,e)}),[e]),(0,l.useMemo)((()=>{h(0,Math.min(d,e))}),n);const p=c.current.map(((e,t)=>Qw(e,u[t]))),f=(0,l.useContext)(nS),m=Lx(f),g=f!==m&&uw(f);Nx((()=>{i.current++,s.ctrls=c.current;const{queue:e}=s;e.length&&(s.queue=[],pb(e,(e=>e()))),pb(c.current,((e,t)=>{null===o||void 0===o||o.add(e),g&&e.start({default:f});const n=u[t];n&&(pw(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Mx((()=>()=>{pb(s.ctrls,(e=>e.stop(!0)))}));const y=p.map((e=>({...e})));return o?[y,o]:y}function aS(e,t){const n=db.fun(e),[[r],o]=iS(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,o]:r}var sS=class extends Aw{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Jb(...t);const n=this._get(),r=Kx(n);Ux(this,r.create(n))}advance(e){const t=this._get();hb(t,this.get())||(Bx(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&cS(this._active)&&uS(this)}_get(){const e=db.arr(this.source)?this.source.map(cx):mb(cx(this.source));return this.calc(...e)}_start(){this.idle&&!cS(this._active)&&(this.idle=!1,pb(zx(this),(e=>{e.done=!1})),Hv.skipAnimation?(Xv.batchedUpdates((()=>this.advance())),uS(this)):jb.start(this))}_attach(){let e=1;pb(mb(this.source),(t=>{lx(t)&&fx(t,this),Iw(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){pb(mb(this.source),(e=>{lx(e)&&mx(e,this)})),this._active.clear(),uS(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=mb(this.source).reduce(((e,t)=>Math.max(e,(Iw(t)?t.priority:0)+1)),0))}};function lS(e){return!1!==e.idle}function cS(e){return!e.size||Array.from(e).every(lS)}function uS(e){e.idle||(e.idle=!0,pb(zx(e),(e=>{e.done=!0})),dx(e,{type:"idle",parent:e}))}Hv.assign({createStringInterpolator:Ex,to:(e,t)=>new sS(e,t)});jb.advance;var dS=/^--/;function hS(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||dS.test(e)||fS.hasOwnProperty(e)&&fS[e]?(""+t).trim():t+"px"}var pS={};var fS={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mS=["Webkit","Ms","Moz","O"];fS=Object.keys(fS).reduce(((e,t)=>(mS.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),fS);var gS=/^(matrix|translate|scale|rotate|skew)/,yS=/^(translate)/,vS=/^(rotate|skew)/,bS=(e,t)=>db.num(e)&&0!==e?e+t:e,xS=(e,t)=>db.arr(e)?e.every((e=>xS(e,t))):db.num(e)?e===t:parseFloat(e)===t,wS=class extends qx{constructor(e){let{x:t,y:n,z:r,...o}=e;const i=[],a=[];(t||n||r)&&(i.push([t||0,n||0,r||0]),a.push((e=>["translate3d(".concat(e.map((e=>bS(e,"px"))).join(","),")"),xS(e,0)]))),fb(o,((e,t)=>{if("transform"===t)i.push([e||""]),a.push((e=>[e,""===e]));else if(gS.test(t)){if(delete o[t],db.und(e))return;const n=yS.test(t)?"px":vS.test(t)?"deg":"";i.push(mb(e)),a.push("rotate3d"===t?e=>{let[t,r,o,i]=e;return["rotate3d(".concat(t,",").concat(r,",").concat(o,",").concat(bS(i,n),")"),xS(i,0)]}:e=>["".concat(t,"(").concat(e.map((e=>bS(e,n))).join(","),")"),xS(e,t.startsWith("scale")?1:0)])}})),i.length&&(o.transform=new SS(i,a)),super(o)}},SS=class extends hx{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return pb(this.inputs,((n,r)=>{const o=cx(n[0]),[i,a]=this.transforms[r](db.arr(o)?o:n.map(cx));e+=" "+i,t=t&&a})),t?"none":e}observerAdded(e){1==e&&pb(this.inputs,(e=>pb(e,(e=>lx(e)&&fx(e,this)))))}observerRemoved(e){0==e&&pb(this.inputs,(e=>pb(e,(e=>lx(e)&&mx(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),dx(this,e)}};Hv.assign({batchedUpdates:u.unstable_batchedUpdates,createStringInterpolator:Ex,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var _S=function(e){let{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new qx(e)),getComponentProps:r=(e=>e)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=e=>{const t=$x(e)||"Anonymous";return(e=db.str(e)?i[e]||(i[e]=Zx(e,o)):e[Jx]||(e[Jx]=Zx(e,o))).displayName="Animated(".concat(t,")"),e};return fb(e,((t,n)=>{db.arr(e)&&(n=$x(t)),i[n]=i(t)})),{animated:i}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:r,children:o,scrollTop:i,scrollLeft:a,viewBox:s,...l}=t,c=Object.values(l),u=Object.keys(l).map((t=>n||e.hasAttribute(t)?t:pS[t]||(pS[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==o&&(e.textContent=o);for(const d in r)if(r.hasOwnProperty(d)){const t=hS(d,r[d]);dS.test(d)?e.style.setProperty(d,t):e.style[d]=t}u.forEach(((t,n)=>{e.setAttribute(t,c[n])})),void 0!==i&&(e.scrollTop=i),void 0!==a&&(e.scrollLeft=a),void 0!==s&&e.setAttribute("viewBox",s)},createAnimatedStyle:e=>new wS(e),getComponentProps:e=>{let{scrollTop:t,scrollLeft:n,...r}=e;return r}}),kS=_S.animated;const TS=function(e,t){var n=(0,l.useRef)((function(){}));(0,l.useEffect)((function(){n.current=e})),(0,l.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])},ES=(e,t)=>e.slice().sort((()=>Math.random()-.5)).slice(0,t).map((t=>e.indexOf(t))),CS=e=>{const t=[];for(let n=0;n<e;n++){let e,n;do{e=300*Math.random(),n=500*Math.random()}while(IS(t,e,n,200,200));t.push({left:"".concat(e,"px"),top:"".concat(n,"px")})}return t},IS=(e,t,n,r,o)=>{for(const i of e){const e=t<i.left+r+20&&t+r+20>i.left,a=n<i.top+o+20&&n+o+20>i.top;if(e&&a)return!0}return!1},jS=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)([]),[o,i]=(0,l.useState)([]),[a,s]=(0,l.useState)(0),[c,u]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(async()=>{try{const e=await zt();t(e);const n=ES(e,30);r(n);const o=CS(30);i(o),u(!1)}catch(e){console.error("Error fetching artworks",e)}})()}),[]);const d=()=>{const t=ES(e,30);r(t);const n=CS(30);i(n),s(t[0])},h=aS({opacity:1,from:{opacity:0},config:{duration:500},onRest:d});return TS(d,9e3),{props:h,indexes:n,positions:o,currentIndex:a,artworks:e,loading:c}},AS=()=>{const{props:e,positions:t,currentIndex:n,artworks:r,loading:o}=jS();return(0,Je.jsx)("div",{className:"images-content",style:{width:"500px",height:"700px",position:"relative",overflow:"hidden"},children:o?(0,Je.jsx)("div",{className:"loading",children:"Loading..."}):(0,Je.jsx)("div",{className:"animated-collection-container",children:r.length>0&&(0,Je.jsx)("div",{className:"animated-artwork-container",children:t.map(((t,o)=>(0,Je.jsx)(kS.div,{style:{...e,position:"absolute",left:t&&t.left,top:t&&t.top,width:"200px"},children:r[o]&&(0,Je.jsx)(Oe,{to:"/artwork/".concat(r[o].ID),children:(0,Je.jsx)("img",{className:"animated-artwork-image ".concat(o===n?"active":""),src:r[o].Image,alt:r[o].Title,style:{width:"100%",objectFit:"cover"}})},r[o].ID)},o)))})})})};var OS=r(2370),NS=r.n(OS);const RS=()=>{const[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(null),[o,i]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!0),[d,h]=(0,l.useState)(100),p=(0,l.useRef)(null),f=(0,l.useRef)([]),m=e=>{(e=>{switch(e){case"1":h(50);break;case"2":h(150);break;case"3":h(250);break;case"4":h(500);break;case"5":h(1050)}})(e.key),"U"!==e.key&&"u"!==e.key||document.getElementById("imageInput").click()};return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"draw-images",children:[(0,Je.jsx)("h4",{className:"title",children:" DRAW IMAGES "}),(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{className:"canvas-container",children:(0,Je.jsx)(NS(),{setup:(e,t)=>((e,t)=>{const n=Math.min(window.innerWidth,1024),r=n*(2/3),o=e.createCanvas(n,r);o.parent(t),o.style("display","block"),o.style("margin","auto"),o.style("user-select","none"),o.style("touch-action","none"),o.elt.addEventListener("touchstart",(e=>{e.preventDefault()}),{passive:!1}),e.background(255),e.frameRate(60)})(e,t),draw:t=>(t=>{if(t.background(255),c){if(t.frameCount%30<15){t.fill(0),t.textAlign(t.CENTER);const e=t.width<600?20:35;t.textSize(e),t.textFont("Array");const n="PRESS U TO DRAW YOUR IMAGES";t.text(n,t.width/2,t.height/2+e/2)}}else{for(let e=0;e<f.current.length;e++){const{img:n,x:r,y:o,width:i,height:a}=f.current[e];t.image(n,r-i/2,o-a/2,i,a)}if(e&&n&&o&&!a){const e={img:n,x:t.mouseX,y:t.mouseY,width:n.width*(d/n.width),height:n.height*(d/n.width)};f.current.push(e)}}})(t),keyTyped:e=>m(e),mousePressed:()=>(i(!0),void(o&&s(!a)))})}),(0,Je.jsx)("input",{type:"file",id:"imageInput",accept:"image/*",style:{display:"none"},onChange:e=>((e,n)=>{const o=n.target.files[0];if(o){const n=new FileReader;n.onloadend=()=>{const o=e.loadImage(n.result,(()=>{r(o),u(!1),t(!0)}));p.current=o},n.readAsDataURL(o)}})(new window.p5,e)}),(0,Je.jsxs)("div",{className:"sizes-instruction",children:[(0,Je.jsx)("button",{className:"input-draw-images",onClick:()=>{document.getElementById("imageInput").click()},children:"LOAD IMAGE"}),(0,Je.jsxs)("ul",{className:"intructions-list",children:["TO SELECT THE IMAGE SIZE PRESS",(0,Je.jsx)("li",{children:"KEY 1 = EXTRA SMALL 50PX"}),(0,Je.jsx)("li",{children:"KEY 2 = SMALL 150PX"}),(0,Je.jsx)("li",{children:"KEY 3 = MEDIUM 250PX"}),(0,Je.jsx)("li",{children:"KEY 4 = LARGE 500PX"}),(0,Je.jsx)("li",{children:"KEY 5 = EXTRA LARGE 1050PX"})]})]})]})]})})},PS=()=>{const{t:e}=Ye();return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("div",{className:"magazine",children:(0,Je.jsx)("h2",{className:"titleMagazine",children:e("magazine")})}),(0,Je.jsxs)("div",{className:"animated",children:[(0,Je.jsx)("div",{className:"text-animation",children:"Outlaw Man (\u30a2\u30a6\u30c8\u30ed\u30fc\u30fb\u30de\u30f3 Autor\u014d Man?, Sh\u014dnen Jump especial 1982) Mash\u014dnen B. T. (\u9b54\u5c11\u5e74\u30d3\u30fc\u30c6\u30a3\u30fc Mash\u014dnen b\u012bt\u012b?, Sh\u014dnen Jump semanal 1982\u20131983, 1 volumen 1984) Baoh (\u30d0\u30aa\u30fc\u6765\u8a2a\u8005 Ba\u014d Raoh\u014dsha?, Sh\u014dnen Jump semanal 1984\u20131985, 2 vol\xfamenes 1985) Gorgeous Irene (colecci\xf3n de one-shots, 1987) Bus\u014d Poker (\u6b66\u88c5\u30dd\u30fc\u30ab\u30fc Bus\u014d P\u014dk\u0101?, Sh\u014dnen Jump semanal 1980)"}),(0,Je.jsx)(AS,{})]}),(0,Je.jsx)(RS,{})]})},MS=[{path:"/collection",element:(0,Je.jsx)(Gt,{})},{path:"/artwork/:id",element:(0,Je.jsx)(Uv,{})},{path:"/apply",element:(0,Je.jsx)(Vv,{})},{path:"/createArt",element:(0,Je.jsx)(Gv,{})},{path:"/magazine",element:(0,Je.jsx)(PS,{})}],DS=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)({ArtistID:"",Title:"",Image:"",Instructions:"",Description:""});(0,l.useEffect)((()=>{(async()=>{const e=await Vt();t(e)})()}),[]);const o=e=>{"file"===e.target.type?r({...n,[e.target.name]:e.target.files[0]}):r({...n,[e.target.name]:e.target.value})};return(0,Je.jsxs)("div",{className:"my-container-register",children:[(0,Je.jsx)("h3",{className:"form-title",children:" CREATE SKETCH "}),(0,Je.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("formData before submission:",n);const t=new FormData;Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)}));const r=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/sketches/createSketch"),{method:"POST",body:e});return t.ok?{success:!0,message:(await t.json()).message}:{success:!1,error:(await t.json()).error}}catch(t){return console.error("Error al enviar la solicitud:",t),{success:!1,error:"Error al enviar la solicitud"}}})(t);r.success?(console.log(r.message),alert("Sketch created")):console.error("Error creating sketch:",r.error)},encType:"multipart/form-data",className:"my-form-form",children:[(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{htmlFor:"Artist",className:"my-label-form",children:"ARTIST"}),(0,Je.jsxs)("select",{className:"my-select-form",name:"ArtistID",value:n.ArtistID,onChange:o,children:[(0,Je.jsx)("option",{value:"",disabled:!0,defaultValue:!0,children:"SELECT AN ARTIST"}),e.map((e=>(0,Je.jsx)("option",{value:e.ID,children:e.Name},e.ID)))]})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{htmlFor:"Title",className:"my-label-form",children:"TITLE"}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Title",value:n.Title,onChange:o,required:!0})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{htmlFor:"Instructions",className:"my-label-form",children:"INSTRUCTIONS"}),(0,Je.jsx)("textarea",{className:"my-textarea-form",name:"Instructions",value:n.Instructions,onChange:o})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{htmlFor:"Description",className:"my-label-form",children:"DESCRIPTION"}),(0,Je.jsx)("textarea",{className:"my-textarea-form",name:"Description",value:n.Description,onChange:o})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"Image",children:"IMAGE"}),(0,Je.jsx)("input",{type:"file",className:"my-input-form",name:"Image",accept:"image/*",onChange:o})]}),(0,Je.jsx)("button",{type:"submit",className:"my-button-form",children:"CREATE SKETCH"})]})]})};var LS=r(3242),FS={},BS=function(e,t,n,r){var o=e+"-"+t+"-"+n+(r?"-server":"");if(FS[o])return FS[o];var i=function(e,t,n,r){if("undefined"===typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null}(e,t,n,r);return FS[o]=i,i},US=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zS=function(e){var t=e.white,n=e.grey,r=e.size,o=e.renderers,i=e.borderRadius,a=e.boxShadow,s=e.children,c=(0,LS.Ay)({default:{grid:{borderRadius:i,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+BS(t,n,r,o.canvas)+") center left"}}});return(0,l.isValidElement)(s)?l.cloneElement(s,US({},s.props,{style:US({},s.props.style,c.grid)})):l.createElement("div",{style:c.grid})};zS.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const VS=zS;var GS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WS=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function HS(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var qS=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=HS(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r,o){var i=o.clientWidth,a=o.clientHeight,s="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(o.getBoundingClientRect().left+window.pageXOffset),u=l-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var d=void 0;if(d=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var h=void 0;if(r!==(h=c<0?0:c>i?1:Math.round(100*c/i)/100))return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},HS(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),WS(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,LS.Ay)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:GS({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return l.createElement("div",{style:n.alpha},l.createElement("div",{style:n.checkboard},l.createElement(VS,{renderers:this.props.renderers})),l.createElement("div",{style:n.gradient}),l.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},l.createElement("div",{style:n.pointer},this.props.pointer?l.createElement(this.props.pointer,this.props):l.createElement("div",{style:n.slider}))))}}]),t}(l.PureComponent||l.Component);const XS=qS;var YS=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var KS=[38,40],ZS=1,QS=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,KS.indexOf(t)>-1)){var o=n.getArrowOffset(),i=38===e.keyCode?r+o:r-o;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+ZS++,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),YS(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,LS.Ay)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return l.createElement("div",{style:t.wrap},l.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?l.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(l.PureComponent||l.Component);const JS=QS;var $S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function e_(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var t_=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=e_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r){var o=r.clientWidth,i=r.clientHeight,a="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(u=c<0?359:c>i?0:360*(-100*c/i+100)/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var d=void 0;if(d=l<0?0:l>o?359:100*l/o*360/100,n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},e_(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),$S(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,LS.Ay)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return l.createElement("div",{style:r.hue},l.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},l.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),l.createElement("div",{style:r.pointer},this.props.pointer?l.createElement(this.props.pointer,this.props):l.createElement("div",{style:r.slider}))))}}]),t}(l.PureComponent||l.Component);const n_=t_;const r_=function(){this.__data__=[],this.size=0};const o_=function(e,t){return e===t||e!==e&&t!==t};const i_=function(e,t){for(var n=e.length;n--;)if(o_(e[n][0],t))return n;return-1};var a_=Array.prototype.splice;const s_=function(e){var t=this.__data__,n=i_(t,e);return!(n<0)&&(n==t.length-1?t.pop():a_.call(t,n,1),--this.size,!0)};const l_=function(e){var t=this.__data__,n=i_(t,e);return n<0?void 0:t[n][1]};const c_=function(e){return i_(this.__data__,e)>-1};const u_=function(e,t){var n=this.__data__,r=i_(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function d_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d_.prototype.clear=r_,d_.prototype.delete=s_,d_.prototype.get=l_,d_.prototype.has=c_,d_.prototype.set=u_;const h_=d_;const p_=function(){this.__data__=new h_,this.size=0};const f_=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const m_=function(e){return this.__data__.get(e)};const g_=function(e){return this.__data__.has(e)};const y_="object"==typeof global&&global&&global.Object===Object&&global;var v_="object"==typeof self&&self&&self.Object===Object&&self;const b_=y_||v_||Function("return this")();const x_=b_.Symbol;var w_=Object.prototype,S_=w_.hasOwnProperty,__=w_.toString,k_=x_?x_.toStringTag:void 0;const T_=function(e){var t=S_.call(e,k_),n=e[k_];try{e[k_]=void 0;var r=!0}catch(pg){}var o=__.call(e);return r&&(t?e[k_]=n:delete e[k_]),o};var E_=Object.prototype.toString;const C_=function(e){return E_.call(e)};var I_=x_?x_.toStringTag:void 0;const j_=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I_&&I_ in Object(e)?T_(e):C_(e)};const A_=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const O_=function(e){if(!A_(e))return!1;var t=j_(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const N_=b_["__core-js_shared__"];var R_=function(){var e=/[^.]+$/.exec(N_&&N_.keys&&N_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const P_=function(e){return!!R_&&R_ in e};var M_=Function.prototype.toString;const D_=function(e){if(null!=e){try{return M_.call(e)}catch(pg){}try{return e+""}catch(pg){}}return""};var L_=/^\[object .+?Constructor\]$/,F_=Function.prototype,B_=Object.prototype,U_=F_.toString,z_=B_.hasOwnProperty,V_=RegExp("^"+U_.call(z_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const G_=function(e){return!(!A_(e)||P_(e))&&(O_(e)?V_:L_).test(D_(e))};const W_=function(e,t){return null==e?void 0:e[t]};const H_=function(e,t){var n=W_(e,t);return G_(n)?n:void 0};const q_=H_(b_,"Map");const X_=H_(Object,"create");const Y_=function(){this.__data__=X_?X_(null):{},this.size=0};const K_=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Z_=Object.prototype.hasOwnProperty;const Q_=function(e){var t=this.__data__;if(X_){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Z_.call(t,e)?t[e]:void 0};var J_=Object.prototype.hasOwnProperty;const $_=function(e){var t=this.__data__;return X_?void 0!==t[e]:J_.call(t,e)};const ek=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X_&&void 0===t?"__lodash_hash_undefined__":t,this};function tk(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tk.prototype.clear=Y_,tk.prototype.delete=K_,tk.prototype.get=Q_,tk.prototype.has=$_,tk.prototype.set=ek;const nk=tk;const rk=function(){this.size=0,this.__data__={hash:new nk,map:new(q_||h_),string:new nk}};const ok=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const ik=function(e,t){var n=e.__data__;return ok(t)?n["string"==typeof t?"string":"hash"]:n.map};const ak=function(e){var t=ik(this,e).delete(e);return this.size-=t?1:0,t};const sk=function(e){return ik(this,e).get(e)};const lk=function(e){return ik(this,e).has(e)};const ck=function(e,t){var n=ik(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function uk(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uk.prototype.clear=rk,uk.prototype.delete=ak,uk.prototype.get=sk,uk.prototype.has=lk,uk.prototype.set=ck;const dk=uk;const hk=function(e,t){var n=this.__data__;if(n instanceof h_){var r=n.__data__;if(!q_||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dk(r)}return n.set(e,t),this.size=n.size,this};function pk(e){var t=this.__data__=new h_(e);this.size=t.size}pk.prototype.clear=p_,pk.prototype.delete=f_,pk.prototype.get=m_,pk.prototype.has=g_,pk.prototype.set=hk;const fk=pk;var mk=function(){try{var e=H_(Object,"defineProperty");return e({},"",{}),e}catch(pg){}}();const gk=mk;const yk=function(e,t,n){"__proto__"==t&&gk?gk(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const vk=function(e,t,n){(void 0!==n&&!o_(e[t],n)||void 0===n&&!(t in e))&&yk(e,t,n)};const bk=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}();var xk="object"==typeof exports&&exports&&!exports.nodeType&&exports,wk=xk&&"object"==typeof module&&module&&!module.nodeType&&module,Sk=wk&&wk.exports===xk?b_.Buffer:void 0,_k=Sk?Sk.allocUnsafe:void 0;const kk=function(e,t){if(t)return e.slice();var n=e.length,r=_k?_k(n):new e.constructor(n);return e.copy(r),r};const Tk=b_.Uint8Array;const Ek=function(e){var t=new e.constructor(e.byteLength);return new Tk(t).set(new Tk(e)),t};const Ck=function(e,t){var n=t?Ek(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Ik=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var jk=Object.create;const Ak=function(){function e(){}return function(t){if(!A_(t))return{};if(jk)return jk(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Ok=function(e,t){return function(n){return e(t(n))}};const Nk=Ok(Object.getPrototypeOf,Object);var Rk=Object.prototype;const Pk=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rk)};const Mk=function(e){return"function"!=typeof e.constructor||Pk(e)?{}:Ak(Nk(e))};const Dk=function(e){return null!=e&&"object"==typeof e};const Lk=function(e){return Dk(e)&&"[object Arguments]"==j_(e)};var Fk=Object.prototype,Bk=Fk.hasOwnProperty,Uk=Fk.propertyIsEnumerable;const zk=Lk(function(){return arguments}())?Lk:function(e){return Dk(e)&&Bk.call(e,"callee")&&!Uk.call(e,"callee")};const Vk=Array.isArray;const Gk=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Wk=function(e){return null!=e&&Gk(e.length)&&!O_(e)};const Hk=function(e){return Dk(e)&&Wk(e)};const qk=function(){return!1};var Xk="object"==typeof exports&&exports&&!exports.nodeType&&exports,Yk=Xk&&"object"==typeof module&&module&&!module.nodeType&&module,Kk=Yk&&Yk.exports===Xk?b_.Buffer:void 0;const Zk=(Kk?Kk.isBuffer:void 0)||qk;var Qk=Function.prototype,Jk=Object.prototype,$k=Qk.toString,eT=Jk.hasOwnProperty,tT=$k.call(Object);const nT=function(e){if(!Dk(e)||"[object Object]"!=j_(e))return!1;var t=Nk(e);if(null===t)return!0;var n=eT.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$k.call(n)==tT};var rT={};rT["[object Float32Array]"]=rT["[object Float64Array]"]=rT["[object Int8Array]"]=rT["[object Int16Array]"]=rT["[object Int32Array]"]=rT["[object Uint8Array]"]=rT["[object Uint8ClampedArray]"]=rT["[object Uint16Array]"]=rT["[object Uint32Array]"]=!0,rT["[object Arguments]"]=rT["[object Array]"]=rT["[object ArrayBuffer]"]=rT["[object Boolean]"]=rT["[object DataView]"]=rT["[object Date]"]=rT["[object Error]"]=rT["[object Function]"]=rT["[object Map]"]=rT["[object Number]"]=rT["[object Object]"]=rT["[object RegExp]"]=rT["[object Set]"]=rT["[object String]"]=rT["[object WeakMap]"]=!1;const oT=function(e){return Dk(e)&&Gk(e.length)&&!!rT[j_(e)]};const iT=function(e){return function(t){return e(t)}};var aT="object"==typeof exports&&exports&&!exports.nodeType&&exports,sT=aT&&"object"==typeof module&&module&&!module.nodeType&&module,lT=sT&&sT.exports===aT&&y_.process,cT=function(){try{var e=sT&&sT.require&&sT.require("util").types;return e||lT&&lT.binding&&lT.binding("util")}catch(pg){}}();var uT=cT&&cT.isTypedArray;const dT=uT?iT(uT):oT;const hT=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]};var pT=Object.prototype.hasOwnProperty;const fT=function(e,t,n){var r=e[t];pT.call(e,t)&&o_(r,n)&&(void 0!==n||t in e)||yk(e,t,n)};const mT=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?yk(n,s,l):fT(n,s,l)}return n};const gT=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var yT=/^(?:0|[1-9]\d*)$/;const vT=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&yT.test(e))&&e>-1&&e%1==0&&e<t};var bT=Object.prototype.hasOwnProperty;const xT=function(e,t){var n=Vk(e),r=!n&&zk(e),o=!n&&!r&&Zk(e),i=!n&&!r&&!o&&dT(e),a=n||r||o||i,s=a?gT(e.length,String):[],l=s.length;for(var c in e)!t&&!bT.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vT(c,l))||s.push(c);return s};const wT=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var ST=Object.prototype.hasOwnProperty;const _T=function(e){if(!A_(e))return wT(e);var t=Pk(e),n=[];for(var r in e)("constructor"!=r||!t&&ST.call(e,r))&&n.push(r);return n};const kT=function(e){return Wk(e)?xT(e,!0):_T(e)};const TT=function(e){return mT(e,kT(e))};const ET=function(e,t,n,r,o,i,a){var s=hT(e,n),l=hT(t,n),c=a.get(l);if(c)vk(e,n,c);else{var u=i?i(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=Vk(l),p=!h&&Zk(l),f=!h&&!p&&dT(l);u=l,h||p||f?Vk(s)?u=s:Hk(s)?u=Ik(s):p?(d=!1,u=kk(l,!0)):f?(d=!1,u=Ck(l,!0)):u=[]:nT(l)||zk(l)?(u=s,zk(s)?u=TT(s):A_(s)&&!O_(s)||(u=Mk(l))):d=!1}d&&(a.set(l,u),o(u,l,r,i,a),a.delete(l)),vk(e,n,u)}};const CT=function e(t,n,r,o,i){t!==n&&bk(n,(function(a,s){if(i||(i=new fk),A_(a))ET(t,n,s,r,e,o,i);else{var l=o?o(hT(t,s),a,s+"",t,n,i):void 0;void 0===l&&(l=a),vk(t,s,l)}}),kT)};const IT=function(e){return e};const jT=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var AT=Math.max;const OT=function(e,t,n){return t=AT(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=AT(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),jT(e,this,s)}};const NT=function(e){return function(){return e}};var RT=gk?function(e,t){return gk(e,"toString",{configurable:!0,enumerable:!1,value:NT(t),writable:!0})}:IT;const PT=RT;var MT=Date.now;const DT=function(e){var t=0,n=0;return function(){var r=MT(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const LT=DT(PT);const FT=function(e,t){return LT(OT(e,t,IT),e+"")};const BT=function(e,t,n){if(!A_(n))return!1;var r=typeof t;return!!("number"==r?Wk(n)&&vT(t,n.length):"string"==r&&t in n)&&o_(n[t],e)};const UT=function(e){return FT((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&BT(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))}((function(e,t,n){CT(e,t,n)}));var zT=function(e){var t=e.zDepth,n=e.radius,r=e.background,o=e.children,i=e.styles,a=void 0===i?{}:i,s=(0,LS.Ay)(UT({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":1===t});return l.createElement("div",{style:s.wrap},l.createElement("div",{style:s.bg}),l.createElement("div",{style:s.content},o))};zT.propTypes={background:yd().string,zDepth:yd().oneOf([0,1,2,3,4,5]),radius:yd().number,styles:yd().object},zT.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const VT=zT;const GT=function(){return b_.Date.now()};var WT=/\s/;const HT=function(e){for(var t=e.length;t--&&WT.test(e.charAt(t)););return t};var qT=/^\s+/;const XT=function(e){return e?e.slice(0,HT(e)+1).replace(qT,""):e};const YT=function(e){return"symbol"==typeof e||Dk(e)&&"[object Symbol]"==j_(e)};var KT=/^[-+]0x[0-9a-f]+$/i,ZT=/^0b[01]+$/i,QT=/^0o[0-7]+$/i,JT=parseInt;const $T=function(e){if("number"==typeof e)return e;if(YT(e))return NaN;if(A_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=A_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=XT(e);var n=ZT.test(e);return n||QT.test(e)?JT(e.slice(2),n?2:8):KT.test(e)?NaN:+e};var eE=Math.max,tE=Math.min;const nE=function(e,t,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function m(){var e=GT();if(f(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?tE(n,i-(e-c)):n}(e))}function g(e){return s=void 0,h&&r?p(e):(r=o=void 0,a)}function y(){var e=GT(),n=f(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=$T(t)||0,A_(n)&&(u=!!n.leading,i=(d="maxWait"in n)?eE($T(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},y.flush=function(){return void 0===s?a:g(GT())},y};const rE=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return A_(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),nE(e,t,{leading:r,maxWait:t,trailing:o})};var oE=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var iE=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"===typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),o=r.width,i=r.height,a="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>o&&(l=o),c<0?c=0:c>i&&(c=i);var u=l/o,d=1-c/i;return{h:t.h,s:u,v:d,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=rE((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),oE(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,i=t.pointer,a=t.circle,s=(0,LS.Ay)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:i,circle:a}},{custom:!!this.props.style});return l.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},l.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),l.createElement("div",{style:s.white,className:"saturation-white"},l.createElement("div",{style:s.black,className:"saturation-black"}),l.createElement("div",{style:s.pointer},this.props.pointer?l.createElement(this.props.pointer,this.props):l.createElement("div",{style:s.circle}))))}}]),t}(l.PureComponent||l.Component);const aE=iE;const sE=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const lE=Ok(Object.keys,Object);var cE=Object.prototype.hasOwnProperty;const uE=function(e){if(!Pk(e))return lE(e);var t=[];for(var n in Object(e))cE.call(e,n)&&"constructor"!=n&&t.push(n);return t};const dE=function(e){return Wk(e)?xT(e):uE(e)};const hE=function(e,t){return function(n,r){if(null==n)return n;if(!Wk(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(e,t){return e&&bk(e,t,dE)}));const pE=function(e){return"function"==typeof e?e:IT};const fE=function(e,t){return(Vk(e)?sE:hE)(e,pE(t))};function mE(e){return mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mE(e)}var gE=/^\s+/,yE=/\s+$/;function vE(e,t){if(t=t||{},(e=e||"")instanceof vE)return e;if(!(this instanceof vE))return new vE(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(gE,"").replace(yE,"").toLowerCase();var t,n=!1;if(ME[e])e=ME[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=HE.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=HE.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=HE.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=HE.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=HE.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=HE.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=HE.hex8.exec(e))return{r:UE(t[1]),g:UE(t[2]),b:UE(t[3]),a:WE(t[4]),format:n?"name":"hex8"};if(t=HE.hex6.exec(e))return{r:UE(t[1]),g:UE(t[2]),b:UE(t[3]),format:n?"name":"hex"};if(t=HE.hex4.exec(e))return{r:UE(t[1]+""+t[1]),g:UE(t[2]+""+t[2]),b:UE(t[3]+""+t[3]),a:WE(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=HE.hex3.exec(e))return{r:UE(t[1]+""+t[1]),g:UE(t[2]+""+t[2]),b:UE(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==mE(e)&&(qE(e.r)&&qE(e.g)&&qE(e.b)?(t=function(e,t,n){return{r:255*FE(e,255),g:255*FE(t,255),b:255*FE(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):qE(e.h)&&qE(e.s)&&qE(e.v)?(r=VE(e.s),o=VE(e.v),t=function(e,t,n){e=6*FE(e,360),t=FE(t,100),n=FE(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),l=r%6,c=[n,a,i,i,s,n][l],u=[s,n,n,a,i,i][l],d=[i,i,s,n,n,a][l];return{r:255*c,g:255*u,b:255*d}}(e.h,r,o),a=!0,s="hsv"):qE(e.h)&&qE(e.s)&&qE(e.l)&&(r=VE(e.s),i=VE(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=FE(e,360),t=FE(t,100),n=FE(n,100),0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),o=a(l,s,e),i=a(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=LE(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function bE(e,t,n){e=FE(e,255),t=FE(t,255),n=FE(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),s=(i+a)/2;if(i==a)r=o=0;else{var l=i-a;switch(o=s>.5?l/(2-i-a):l/(i+a),i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,l:s}}function xE(e,t,n){e=FE(e,255),t=FE(t,255),n=FE(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),s=i,l=i-a;if(o=0===i?0:l/i,i==a)r=0;else{switch(i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,v:s}}function wE(e,t,n,r){var o=[zE(Math.round(e).toString(16)),zE(Math.round(t).toString(16)),zE(Math.round(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function SE(e,t,n,r){return[zE(GE(r)),zE(Math.round(e).toString(16)),zE(Math.round(t).toString(16)),zE(Math.round(n).toString(16))].join("")}function _E(e,t){t=0===t?0:t||10;var n=vE(e).toHsl();return n.s-=t/100,n.s=BE(n.s),vE(n)}function kE(e,t){t=0===t?0:t||10;var n=vE(e).toHsl();return n.s+=t/100,n.s=BE(n.s),vE(n)}function TE(e){return vE(e).desaturate(100)}function EE(e,t){t=0===t?0:t||10;var n=vE(e).toHsl();return n.l+=t/100,n.l=BE(n.l),vE(n)}function CE(e,t){t=0===t?0:t||10;var n=vE(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),vE(n)}function IE(e,t){t=0===t?0:t||10;var n=vE(e).toHsl();return n.l-=t/100,n.l=BE(n.l),vE(n)}function jE(e,t){var n=vE(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,vE(n)}function AE(e){var t=vE(e).toHsl();return t.h=(t.h+180)%360,vE(t)}function OE(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=vE(e).toHsl(),r=[vE(e)],o=360/t,i=1;i<t;i++)r.push(vE({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function NE(e){var t=vE(e).toHsl(),n=t.h;return[vE(e),vE({h:(n+72)%360,s:t.s,l:t.l}),vE({h:(n+216)%360,s:t.s,l:t.l})]}function RE(e,t,n){t=t||6,n=n||30;var r=vE(e).toHsl(),o=360/n,i=[vE(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(vE(r));return i}function PE(e,t){t=t||6;for(var n=vE(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],s=1/t;t--;)a.push(vE({h:r,s:o,v:i})),i=(i+s)%1;return a}vE.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=LE(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=xE(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=xE(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=bE(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=bE(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return wE(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[zE(Math.round(e).toString(16)),zE(Math.round(t).toString(16)),zE(Math.round(n).toString(16)),zE(GE(r))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*FE(this._r,255))+"%",g:Math.round(100*FE(this._g,255))+"%",b:Math.round(100*FE(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*FE(this._r,255))+"%, "+Math.round(100*FE(this._g,255))+"%, "+Math.round(100*FE(this._b,255))+"%)":"rgba("+Math.round(100*FE(this._r,255))+"%, "+Math.round(100*FE(this._g,255))+"%, "+Math.round(100*FE(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(DE[wE(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+SE(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=vE(e);n="#"+SE(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return vE(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(EE,arguments)},brighten:function(){return this._applyModification(CE,arguments)},darken:function(){return this._applyModification(IE,arguments)},desaturate:function(){return this._applyModification(_E,arguments)},saturate:function(){return this._applyModification(kE,arguments)},greyscale:function(){return this._applyModification(TE,arguments)},spin:function(){return this._applyModification(jE,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(RE,arguments)},complement:function(){return this._applyCombination(AE,arguments)},monochromatic:function(){return this._applyCombination(PE,arguments)},splitcomplement:function(){return this._applyCombination(NE,arguments)},triad:function(){return this._applyCombination(OE,[3])},tetrad:function(){return this._applyCombination(OE,[4])}},vE.fromRatio=function(e,t){if("object"==mE(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:VE(e[r]));e=n}return vE(e,t)},vE.equals=function(e,t){return!(!e||!t)&&vE(e).toRgbString()==vE(t).toRgbString()},vE.random=function(){return vE.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},vE.mix=function(e,t,n){n=0===n?0:n||50;var r=vE(e).toRgb(),o=vE(t).toRgb(),i=n/100;return vE({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},vE.readability=function(e,t){var n=vE(e),r=vE(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},vE.isReadable=function(e,t,n){var r,o,i=vE.readability(e,t);switch(o=!1,r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},vE.mostReadable=function(e,t,n){var r,o,i,a,s=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=vE.readability(e,t[c]))>l&&(l=r,s=vE(t[c]));return vE.isReadable(e,s,{level:i,size:a})||!o?s:(n.includeFallbackColors=!1,vE.mostReadable(e,["#fff","#000"],n))};var ME=vE.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},DE=vE.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(ME);function LE(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function FE(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function BE(e){return Math.min(1,Math.max(0,e))}function UE(e){return parseInt(e,16)}function zE(e){return 1==e.length?"0"+e:""+e}function VE(e){return e<=1&&(e=100*e+"%"),e}function GE(e){return Math.round(255*parseFloat(e)).toString(16)}function WE(e){return UE(e)/255}var HE=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function qE(e){return!!HE.CSS_UNIT.exec(e)}var XE=function(e){var t=0,n=0;return fE(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},YE=function(e,t){var n=e.hex?vE(e.hex):vE(e),r=n.toHsl(),o=n.toHsv(),i=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"000000"===a&&0===i.a?"transparent":"#"+a,rgb:i,hsv:o,oldHue:e.h||t||r.h,source:e.source}},KE=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&vE(e).isValid()},ZE=function(e){if(!e)return"#fff";var t=YE(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},QE=function(e,t){return vE(t+" ("+e.replace("\xb0","")+")")._ok},JE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();const eC=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(XE(e)){var r=YE(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(XE(e)){var r=YE(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=JE({},YE(e.color,0)),t.debounce=nE((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),$E(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),l.createElement(e,JE({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return JE({},YE(e.color,t.oldHue))}}]),n}(l.PureComponent||l.Component);return t.propTypes=JE({},e.propTypes),t.defaultProps=JE({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var tC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nC=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function rC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var oC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const iC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=rC(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},rC(n,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),nC(r,[{key:"render",value:function(){return l.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},l.createElement(e,tC({},this.props,this.state)))}}]),r}(l.Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,o=void 0===r?function(){}:r,i=e.onHover,a=e.title,s=void 0===a?t:a,c=e.children,u=e.focus,d=e.focusStyle,h=void 0===d?{}:d,p="transparent"===t,f=(0,LS.Ay)({default:{swatch:oC({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?h:{})}}),m={};return i&&(m.onMouseOver=function(e){return i(t,e)}),l.createElement("div",oC({style:f.swatch,onClick:function(e){return o(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},m),c,p&&l.createElement(VS,{borderRadius:f.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));const aC=function(e){var t=e.direction,n=(0,LS.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return l.createElement("div",{style:n.picker})};var sC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lC=function(e){var t=e.rgb,n=e.hsl,r=e.width,o=e.height,i=e.onChange,a=e.direction,s=e.style,c=e.renderers,u=e.pointer,d=e.className,h=void 0===d?"":d,p=(0,LS.Ay)({default:{picker:{position:"relative",width:r,height:o},alpha:{radius:"2px",style:s}}});return l.createElement("div",{style:p.picker,className:"alpha-picker "+h},l.createElement(XS,sC({},p.alpha,{rgb:t,hsl:n,pointer:u,renderers:c,onChange:i,direction:a})))};lC.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:aC};eC(lC);const cC=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};const uC=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const dC=function(e){return this.__data__.has(e)};function hC(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new dk;++t<n;)this.add(e[t])}hC.prototype.add=hC.prototype.push=uC,hC.prototype.has=dC;const pC=hC;const fC=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const mC=function(e,t){return e.has(t)};const gC=function(e,t,n,r,o,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new pC:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],m=t[d];if(r)var g=a?r(m,f,d,t,e,i):r(f,m,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!fC(t,(function(e,t){if(!mC(p,t)&&(f===e||o(f,e,n,r,i)))return p.push(t)}))){h=!1;break}}else if(f!==m&&!o(f,m,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h};const yC=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const vC=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var bC=x_?x_.prototype:void 0,xC=bC?bC.valueOf:void 0;const wC=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Tk(e),new Tk(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o_(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=yC;case"[object Set]":var l=1&r;if(s||(s=vC),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=gC(s(e),s(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(xC)return xC.call(e)==xC.call(t)}return!1};const SC=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e};const _C=function(e,t,n){var r=t(e);return Vk(e)?r:SC(r,n(e))};const kC=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};const TC=function(){return[]};var EC=Object.prototype.propertyIsEnumerable,CC=Object.getOwnPropertySymbols;const IC=CC?function(e){return null==e?[]:(e=Object(e),kC(CC(e),(function(t){return EC.call(e,t)})))}:TC;const jC=function(e){return _C(e,dE,IC)};var AC=Object.prototype.hasOwnProperty;const OC=function(e,t,n,r,o,i){var a=1&n,s=jC(e),l=s.length;if(l!=jC(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:AC.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var y=a?r(g,m,u,t,e,i):r(m,g,u,e,t,i);if(!(void 0===y?m===g||o(m,g,n,r,i):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p};const NC=H_(b_,"DataView");const RC=H_(b_,"Promise");const PC=H_(b_,"Set");const MC=H_(b_,"WeakMap");var DC="[object Map]",LC="[object Promise]",FC="[object Set]",BC="[object WeakMap]",UC="[object DataView]",zC=D_(NC),VC=D_(q_),GC=D_(RC),WC=D_(PC),HC=D_(MC),qC=j_;(NC&&qC(new NC(new ArrayBuffer(1)))!=UC||q_&&qC(new q_)!=DC||RC&&qC(RC.resolve())!=LC||PC&&qC(new PC)!=FC||MC&&qC(new MC)!=BC)&&(qC=function(e){var t=j_(e),n="[object Object]"==t?e.constructor:void 0,r=n?D_(n):"";if(r)switch(r){case zC:return UC;case VC:return DC;case GC:return LC;case WC:return FC;case HC:return BC}return t});const XC=qC;var YC="[object Arguments]",KC="[object Array]",ZC="[object Object]",QC=Object.prototype.hasOwnProperty;const JC=function(e,t,n,r,o,i){var a=Vk(e),s=Vk(t),l=a?KC:XC(e),c=s?KC:XC(t),u=(l=l==YC?ZC:l)==ZC,d=(c=c==YC?ZC:c)==ZC,h=l==c;if(h&&Zk(e)){if(!Zk(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new fk),a||dT(e)?gC(e,t,n,r,o,i):wC(e,t,l,n,r,o,i);if(!(1&n)){var p=u&&QC.call(e,"__wrapped__"),f=d&&QC.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return i||(i=new fk),o(m,g,n,r,i)}}return!!h&&(i||(i=new fk),OC(e,t,n,r,o,i))};const $C=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Dk(t)&&!Dk(n)?t!==t&&n!==n:JC(t,n,r,o,e,i))};const eI=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=n[o])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new fk;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?$C(u,c,3,r,d):h))return!1}}return!0};const tI=function(e){return e===e&&!A_(e)};const nI=function(e){for(var t=dE(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,tI(o)]}return t};const rI=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const oI=function(e){var t=nI(e);return 1==t.length&&t[0][2]?rI(t[0][0],t[0][1]):function(n){return n===e||eI(n,e,t)}};var iI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aI=/^\w*$/;const sI=function(e,t){if(Vk(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!YT(e))||(aI.test(e)||!iI.test(e)||null!=t&&e in Object(t))};function lI(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(lI.Cache||dk),n}lI.Cache=dk;const cI=lI;const uI=function(e){var t=cI(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var dI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hI=/\\(\\)?/g,pI=uI((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(dI,(function(e,n,r,o){t.push(r?o.replace(hI,"$1"):n||e)})),t}));const fI=pI;var mI=x_?x_.prototype:void 0,gI=mI?mI.toString:void 0;const yI=function e(t){if("string"==typeof t)return t;if(Vk(t))return cC(t,e)+"";if(YT(t))return gI?gI.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};const vI=function(e){return null==e?"":yI(e)};const bI=function(e,t){return Vk(e)?e:sI(e,t)?[e]:fI(vI(e))};const xI=function(e){if("string"==typeof e||YT(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const wI=function(e,t){for(var n=0,r=(t=bI(t,e)).length;null!=e&&n<r;)e=e[xI(t[n++])];return n&&n==r?e:void 0};const SI=function(e,t,n){var r=null==e?void 0:wI(e,t);return void 0===r?n:r};const _I=function(e,t){return null!=e&&t in Object(e)};const kI=function(e,t,n){for(var r=-1,o=(t=bI(t,e)).length,i=!1;++r<o;){var a=xI(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Gk(o)&&vT(a,o)&&(Vk(e)||zk(e))};const TI=function(e,t){return null!=e&&kI(e,t,_I)};const EI=function(e,t){return sI(e)&&tI(t)?rI(xI(e),t):function(n){var r=SI(n,e);return void 0===r&&r===t?TI(n,e):$C(t,r,3)}};const CI=function(e){return function(t){return null==t?void 0:t[e]}};const II=function(e){return function(t){return wI(t,e)}};const jI=function(e){return sI(e)?CI(xI(e)):II(e)};const AI=function(e){return"function"==typeof e?e:null==e?IT:"object"==typeof e?Vk(e)?EI(e[0],e[1]):oI(e):jI(e)};const OI=function(e,t){var n=-1,r=Wk(e)?Array(e.length):[];return hE(e,(function(e,o,i){r[++n]=t(e,o,i)})),r};const NI=function(e,t){return(Vk(e)?cC:OI)(e,AI(t,3))};const RI=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,o=(0,LS.Ay)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return l.createElement("div",{style:o.swatches},NI(t,(function(e){return l.createElement(iC,{key:e,color:e,style:o.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),l.createElement("div",{style:o.clear}))};var PI=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,s=e.styles,c=void 0===s?{}:s,u=e.className,d=void 0===u?"":u,h="transparent"===r,p=function(e,n){KE(e)&&t({hex:e,source:"hex"},n)},f=(0,LS.Ay)(UT({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ZE(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===a});return l.createElement("div",{style:f.card,className:"block-picker "+d},l.createElement("div",{style:f.triangle}),l.createElement("div",{style:f.head},h&&l.createElement(VS,{borderRadius:"6px 6px 0 0"}),l.createElement("div",{style:f.label},r)),l.createElement("div",{style:f.body},l.createElement(RI,{colors:o,onClick:p,onSwatchHover:n}),l.createElement(JS,{style:{input:f.input},value:r,onChange:p})))};PI.propTypes={width:yd().oneOfType([yd().string,yd().number]),colors:yd().arrayOf(yd().string),triangle:yd().oneOf(["top","hide"]),styles:yd().object},PI.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};eC(PI);var MI={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},DI={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},LI={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},FI={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},BI={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},UI={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},zI={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},VI={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},GI={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},WI={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},HI={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},qI={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},XI={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},YI={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},KI={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ZI={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},QI={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},JI={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"};var $I=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,o=e.hover,i=e.active,a=e.circleSize,s=e.circleSpacing,c=(0,LS.Ay)({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:i});return l.createElement("div",{style:c.swatch},l.createElement(iC,{style:c.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};$I.defaultProps={circleSize:28,circleSpacing:14};const ej=(0,LS.H8)($I);var tj=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,o=e.colors,i=e.hex,a=e.circleSize,s=e.styles,c=void 0===s?{}:s,u=e.circleSpacing,d=e.className,h=void 0===d?"":d,p=(0,LS.Ay)(UT({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),f=function(e,t){return n({hex:e,source:"hex"},t)};return l.createElement("div",{style:p.card,className:"circle-picker "+h},NI(o,(function(e){return l.createElement(ej,{key:e,color:e,onClick:f,onSwatchHover:r,active:i===e.toLowerCase(),circleSize:a,circleSpacing:u})})))};tj.propTypes={width:yd().oneOfType([yd().string,yd().number]),circleSize:yd().number,circleSpacing:yd().number,styles:yd().object},tj.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[MI[500],DI[500],LI[500],FI[500],BI[500],UI[500],zI[500],VI[500],GI[500],WI[500],HI[500],qI[500],XI[500],YI[500],KI[500],ZI[500],QI[500],JI[500]],styles:{}};eC(tj);const nj=function(e){return void 0===e};var rj=r(9912),oj=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ij=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?KE(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"===typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"===typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(nj(e.s)?n.props.hsl.s:e.s),l:Number(nj(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),oj(t,[{key:"render",value:function(){var e=this,t=(0,LS.Ay)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=l.createElement("div",{style:t.fields,className:"flexbox-fix"},l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=l.createElement("div",{style:t.fields,className:"flexbox-fix"},l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),l.createElement("div",{style:t.alpha},l.createElement(JS,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=l.createElement("div",{style:t.fields,className:"flexbox-fix"},l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),l.createElement("div",{style:t.field},l.createElement(JS,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),l.createElement("div",{style:t.alpha},l.createElement(JS,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),l.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,l.createElement("div",{style:t.toggle},l.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},l.createElement(rj.A,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(l.Component);ij.defaultProps={view:"hex"};const aj=ij;const sj=function(){var e=(0,LS.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return l.createElement("div",{style:e.picker})};const lj=function(){var e=(0,LS.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return l.createElement("div",{style:e.picker})};var cj=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,o=e.rgb,i=e.hsl,a=e.hsv,s=e.hex,c=e.renderers,u=e.styles,d=void 0===u?{}:u,h=e.className,p=void 0===h?"":h,f=e.defaultView,m=(0,LS.Ay)(UT({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},d),{disableAlpha:r});return l.createElement("div",{style:m.picker,className:"chrome-picker "+p},l.createElement("div",{style:m.saturation},l.createElement(aE,{style:m.Saturation,hsl:i,hsv:a,pointer:lj,onChange:n})),l.createElement("div",{style:m.body},l.createElement("div",{style:m.controls,className:"flexbox-fix"},l.createElement("div",{style:m.color},l.createElement("div",{style:m.swatch},l.createElement("div",{style:m.active}),l.createElement(VS,{renderers:c}))),l.createElement("div",{style:m.toggles},l.createElement("div",{style:m.hue},l.createElement(n_,{style:m.Hue,hsl:i,pointer:sj,onChange:n})),l.createElement("div",{style:m.alpha},l.createElement(XS,{style:m.Alpha,rgb:o,hsl:i,pointer:sj,renderers:c,onChange:n})))),l.createElement(aj,{rgb:o,hsl:i,hex:s,view:f,onChange:n,disableAlpha:r})))};cj.propTypes={width:yd().oneOfType([yd().string,yd().number]),disableAlpha:yd().bool,styles:yd().object,defaultView:yd().oneOf(["hex","rgb","hsl"])},cj.defaultProps={width:225,disableAlpha:!1,styles:{}};const uj=eC(cj);const dj=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.active,a=(0,LS.Ay)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:ZE(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return l.createElement(iC,{style:a.color,color:t,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},l.createElement("div",{style:a.dot}))};const hj=function(e){var t=e.hex,n=e.rgb,r=e.onChange,o=(0,LS.Ay)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return l.createElement("div",{style:o.fields,className:"flexbox-fix"},l.createElement("div",{style:o.active}),l.createElement(JS,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:i}),l.createElement(JS,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:i}),l.createElement(JS,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:i}),l.createElement(JS,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:i}))};var pj=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,o=e.hex,i=e.rgb,a=e.styles,s=void 0===a?{}:a,c=e.className,u=void 0===c?"":c,d=(0,LS.Ay)(UT({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),h=function(e,n){e.hex?KE(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return l.createElement(VT,{style:d.Compact,styles:s},l.createElement("div",{style:d.compact,className:"compact-picker "+u},l.createElement("div",null,NI(r,(function(e){return l.createElement(dj,{key:e,color:e,active:e.toLowerCase()===o,onClick:h,onSwatchHover:n})})),l.createElement("div",{style:d.clear})),l.createElement(hj,{hex:o,rgb:i,onChange:h})))};pj.propTypes={colors:yd().arrayOf(yd().string),styles:yd().object},pj.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};eC(pj);const fj=(0,LS.H8)((function(e){var t=e.hover,n=e.color,r=e.onClick,o=e.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=(0,LS.Ay)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:t});return l.createElement("div",{style:a.swatch},l.createElement(iC,{color:n,onClick:r,onHover:o,focusStyle:i}))}));var mj=function(e){var t=e.width,n=e.colors,r=e.onChange,o=e.onSwatchHover,i=e.triangle,a=e.styles,s=void 0===a?{}:a,c=e.className,u=void 0===c?"":c,d=(0,LS.Ay)(UT({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),h=function(e,t){return r({hex:e,source:"hex"},t)};return l.createElement("div",{style:d.card,className:"github-picker "+u},l.createElement("div",{style:d.triangleShadow}),l.createElement("div",{style:d.triangle}),NI(n,(function(e){return l.createElement(fj,{color:e,key:e,onClick:h,onSwatchHover:o})})))};mj.propTypes={width:yd().oneOfType([yd().string,yd().number]),colors:yd().arrayOf(yd().string),triangle:yd().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:yd().object},mj.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};eC(mj);const gj=function(e){var t=e.direction,n=(0,LS.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return l.createElement("div",{style:n.picker})};var yj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vj=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.hsl,i=e.direction,a=e.pointer,s=e.styles,c=void 0===s?{}:s,u=e.className,d=void 0===u?"":u,h=(0,LS.Ay)(UT({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},c));return l.createElement("div",{style:h.picker,className:"hue-picker "+d},l.createElement(n_,yj({},h.hue,{hsl:o,pointer:a,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:i})))};vj.propTypes={styles:yd().object},vj.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:gj,styles:{}};eC(vj);eC((function(e){var t=e.onChange,n=e.hex,r=e.rgb,o=e.styles,i=void 0===o?{}:o,a=e.className,s=void 0===a?"":a,c=(0,LS.Ay)(UT({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),u=function(e,n){e.hex?KE(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return l.createElement(VT,{styles:i},l.createElement("div",{style:c.material,className:"material-picker "+s},l.createElement(JS,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:u}),l.createElement("div",{style:c.split,className:"flexbox-fix"},l.createElement("div",{style:c.third},l.createElement(JS,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:u})),l.createElement("div",{style:c.third},l.createElement(JS,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:u})),l.createElement("div",{style:c.third},l.createElement(JS,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:u})))))}));const bj=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,o=e.hex,i=(0,LS.Ay)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(e,o){e["#"]?KE(e["#"])&&t({hex:e["#"],source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},o):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},o)};return l.createElement("div",{style:i.fields},l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:a}),l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:a}),l.createElement("div",{style:i.divider}),l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),l.createElement(JS,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}),l.createElement("div",{style:i.divider}),l.createElement(JS,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),l.createElement("div",{style:i.fieldSymbols},l.createElement("div",{style:i.symbol},"\xb0"),l.createElement("div",{style:i.symbol},"%"),l.createElement("div",{style:i.symbol},"%")))};const xj=function(e){var t=e.hsl,n=(0,LS.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return l.createElement("div",{style:n.picker})};const wj=function(){var e=(0,LS.Ay)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return l.createElement("div",{style:e.pointer},l.createElement("div",{style:e.left},l.createElement("div",{style:e.leftInside})),l.createElement("div",{style:e.right},l.createElement("div",{style:e.rightInside})))};const Sj=function(e){var t=e.onClick,n=e.label,r=e.children,o=e.active,i=(0,LS.Ay)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return l.createElement("div",{style:i.button,onClick:t},n||r)};const _j=function(e){var t=e.rgb,n=e.currentColor,r=(0,LS.Ay)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return l.createElement("div",null,l.createElement("div",{style:r.label},"new"),l.createElement("div",{style:r.swatches},l.createElement("div",{style:r.new}),l.createElement("div",{style:r.current})),l.createElement("div",{style:r.label},"current"))};var kj=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Tj=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),kj(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,i=(0,LS.Ay)(UT({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return l.createElement("div",{style:i.picker,className:"photoshop-picker "+o},l.createElement("div",{style:i.head},this.props.header),l.createElement("div",{style:i.body,className:"flexbox-fix"},l.createElement("div",{style:i.saturation},l.createElement(aE,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:xj,onChange:this.props.onChange})),l.createElement("div",{style:i.hue},l.createElement(n_,{direction:"vertical",hsl:this.props.hsl,pointer:wj,onChange:this.props.onChange})),l.createElement("div",{style:i.controls},l.createElement("div",{style:i.top,className:"flexbox-fix"},l.createElement("div",{style:i.previews},l.createElement(_j,{rgb:this.props.rgb,currentColor:this.state.currentColor})),l.createElement("div",{style:i.actions},l.createElement(Sj,{label:"OK",onClick:this.props.onAccept,active:!0}),l.createElement(Sj,{label:"Cancel",onClick:this.props.onCancel}),l.createElement(bj,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(l.Component);Tj.propTypes={header:yd().string,styles:yd().object},Tj.defaultProps={header:"Color Picker",styles:{}};eC(Tj);const Ej=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,i=e.disableAlpha,a=(0,LS.Ay)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),s=function(e,o){e.hex?KE(e.hex)&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return l.createElement("div",{style:a.fields,className:"flexbox-fix"},l.createElement("div",{style:a.double},l.createElement(JS,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:s})),l.createElement("div",{style:a.single},l.createElement(JS,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),l.createElement("div",{style:a.single},l.createElement(JS,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),l.createElement("div",{style:a.single},l.createElement(JS,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),l.createElement("div",{style:a.alpha},l.createElement(JS,{style:{input:a.input,label:a.label},label:"a",value:Math.round(100*n.a),onChange:s,dragLabel:"true",dragMax:"100"})))};var Cj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ij=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=(0,LS.Ay)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(e,t){r({hex:e,source:"hex"},t)};return l.createElement("div",{style:i.colors,className:"flexbox-fix"},t.map((function(e){var t="string"===typeof e?{color:e}:e,n=""+t.color+(t.title||"");return l.createElement("div",{key:n,style:i.swatchWrap},l.createElement(iC,Cj({},t,{style:i.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Ij.propTypes={colors:yd().arrayOf(yd().oneOfType([yd().string,yd().shape({color:yd().string,title:yd().string})])).isRequired};const jj=Ij;var Aj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oj=function(e){var t=e.width,n=e.rgb,r=e.hex,o=e.hsv,i=e.hsl,a=e.onChange,s=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,d=e.renderers,h=e.styles,p=void 0===h?{}:h,f=e.className,m=void 0===f?"":f,g=(0,LS.Ay)(UT({default:Aj({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return l.createElement("div",{style:g.picker,className:"sketch-picker "+m},l.createElement("div",{style:g.saturation},l.createElement(aE,{style:g.Saturation,hsl:i,hsv:o,onChange:a})),l.createElement("div",{style:g.controls,className:"flexbox-fix"},l.createElement("div",{style:g.sliders},l.createElement("div",{style:g.hue},l.createElement(n_,{style:g.Hue,hsl:i,onChange:a})),l.createElement("div",{style:g.alpha},l.createElement(XS,{style:g.Alpha,rgb:n,hsl:i,renderers:d,onChange:a}))),l.createElement("div",{style:g.color},l.createElement(VS,null),l.createElement("div",{style:g.activeColor}))),l.createElement(Ej,{rgb:n,hsl:i,hex:r,onChange:a,disableAlpha:c}),l.createElement(jj,{colors:u,onClick:a,onSwatchHover:s}))};Oj.propTypes={disableAlpha:yd().bool,width:yd().oneOfType([yd().string,yd().number]),styles:yd().object},Oj.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};eC(Oj);const Nj=function(e){var t=e.hsl,n=e.offset,r=e.onClick,o=void 0===r?function(){}:r,i=e.active,a=e.first,s=e.last,c=(0,LS.Ay)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:a,last:s});return l.createElement("div",{style:c.swatch,onClick:function(e){return o({h:t.h,s:.5,l:n,source:"hsl"},e)}})};const Rj=function(e){var t=e.onClick,n=e.hsl,r=(0,LS.Ay)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return l.createElement("div",{style:r.swatches},l.createElement("div",{style:r.swatch},l.createElement(Nj,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:t,first:!0})),l.createElement("div",{style:r.swatch},l.createElement(Nj,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:t})),l.createElement("div",{style:r.swatch},l.createElement(Nj,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:t})),l.createElement("div",{style:r.swatch},l.createElement(Nj,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:t})),l.createElement("div",{style:r.swatch},l.createElement(Nj,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:t,last:!0})),l.createElement("div",{style:r.clear}))};const Pj=function(){var e=(0,LS.Ay)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return l.createElement("div",{style:e.picker})};var Mj=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,o=e.styles,i=void 0===o?{}:o,a=e.className,s=void 0===a?"":a,c=(0,LS.Ay)(UT({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return l.createElement("div",{style:c.wrap||{},className:"slider-picker "+s},l.createElement("div",{style:c.hue},l.createElement(n_,{style:c.Hue,hsl:t,pointer:r,onChange:n})),l.createElement("div",{style:c.swatches},l.createElement(Rj,{hsl:t,onClick:n})))};Mj.propTypes={styles:yd().object},Mj.defaultProps={pointer:Pj,styles:{}};eC(Mj);var Dj=r(5619);const Lj=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.first,a=e.last,s=e.active,c=(0,LS.Ay)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:ZE(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:a,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return l.createElement(iC,{color:t,style:c.color,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},l.createElement("div",{style:c.check},l.createElement(Dj.A,null)))};const Fj=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,o=e.active,i=(0,LS.Ay)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return l.createElement("div",{style:i.group},NI(r,(function(e,i){return l.createElement(Lj,{key:e,color:e,active:e.toLowerCase()===o,first:0===i,last:i===r.length-1,onClick:t,onSwatchHover:n})})))};var Bj=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.onSwatchHover,i=e.colors,a=e.hex,s=e.styles,c=void 0===s?{}:s,u=e.className,d=void 0===u?"":u,h=(0,LS.Ay)(UT({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),p=function(e,t){return r({hex:e,source:"hex"},t)};return l.createElement("div",{style:h.picker,className:"swatches-picker "+d},l.createElement(VT,null,l.createElement("div",{style:h.overflow},l.createElement("div",{style:h.body},NI(i,(function(e){return l.createElement(Fj,{key:e.toString(),group:e,active:a,onClick:p,onSwatchHover:o})})),l.createElement("div",{style:h.clear})))))};Bj.propTypes={width:yd().oneOfType([yd().string,yd().number]),height:yd().oneOfType([yd().string,yd().number]),colors:yd().arrayOf(yd().arrayOf(yd().string)),styles:yd().object},Bj.defaultProps={width:320,height:240,colors:[[MI[900],MI[700],MI[500],MI[300],MI[100]],[DI[900],DI[700],DI[500],DI[300],DI[100]],[LI[900],LI[700],LI[500],LI[300],LI[100]],[FI[900],FI[700],FI[500],FI[300],FI[100]],[BI[900],BI[700],BI[500],BI[300],BI[100]],[UI[900],UI[700],UI[500],UI[300],UI[100]],[zI[900],zI[700],zI[500],zI[300],zI[100]],[VI[900],VI[700],VI[500],VI[300],VI[100]],[GI[900],GI[700],GI[500],GI[300],GI[100]],["#194D33",WI[700],WI[500],WI[300],WI[100]],[HI[900],HI[700],HI[500],HI[300],HI[100]],[qI[900],qI[700],qI[500],qI[300],qI[100]],[XI[900],XI[700],XI[500],XI[300],XI[100]],[YI[900],YI[700],YI[500],YI[300],YI[100]],[KI[900],KI[700],KI[500],KI[300],KI[100]],[ZI[900],ZI[700],ZI[500],ZI[300],ZI[100]],[QI[900],QI[700],QI[500],QI[300],QI[100]],[JI[900],JI[700],JI[500],JI[300],JI[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};eC(Bj);var Uj=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,s=e.styles,c=void 0===s?{}:s,u=e.className,d=void 0===u?"":u,h=(0,LS.Ay)(UT({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a}),p=function(e,n){KE(e)&&t({hex:e,source:"hex"},n)};return l.createElement("div",{style:h.card,className:"twitter-picker "+d},l.createElement("div",{style:h.triangleShadow}),l.createElement("div",{style:h.triangle}),l.createElement("div",{style:h.body},NI(o,(function(e,t){return l.createElement(iC,{key:t,color:e,hex:e,style:h.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),l.createElement("div",{style:h.hash},"#"),l.createElement(JS,{label:null,style:{input:h.input},value:r.replace("#",""),onChange:p}),l.createElement("div",{style:h.clear})))};Uj.propTypes={width:yd().oneOfType([yd().string,yd().number]),triangle:yd().oneOf(["hide","top-left","top-right"]),colors:yd().arrayOf(yd().string),styles:yd().object},Uj.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};eC(Uj);var zj=function(e){var t=(0,LS.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return l.createElement("div",{style:t.picker})};zj.propTypes={hsl:yd().shape({h:yd().number,s:yd().number,l:yd().number,a:yd().number})},zj.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const Vj=zj;var Gj=function(e){var t=(0,LS.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return l.createElement("div",{style:t.picker})};Gj.propTypes={hsl:yd().shape({h:yd().number,s:yd().number,l:yd().number,a:yd().number})},Gj.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const Wj=Gj;const Hj=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,i=e.hsv,a=function(e,n){if(e.hex)KE(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");QE(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var o=e.hsv.split(",");QE(e.hsv,"hsv")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("\xb0",""),1==o[1]?o[1]=.01:1==o[2]&&(o[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsv"},n))}else if(e.hsl){var i=e.hsl.split(",");QE(e.hsl,"hsl")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==d[1]?d[1]=.01:1==d[2]&&(d[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsl"},n))}},s=(0,LS.Ay)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",d=Math.round(i.h)+"\xb0, "+Math.round(100*i.s)+"%, "+Math.round(100*i.v)+"%";return l.createElement("div",{style:s.wrap,className:"flexbox-fix"},l.createElement("div",{style:s.fields},l.createElement("div",{style:s.double},l.createElement(JS,{style:{input:s.input,label:s.label},label:"hex",value:o,onChange:a})),l.createElement("div",{style:s.column},l.createElement("div",{style:s.single},l.createElement(JS,{style:{input:s.input2,label:s.label2},label:"rgb",value:c,onChange:a})),l.createElement("div",{style:s.single},l.createElement(JS,{style:{input:s.input2,label:s.label2},label:"hsv",value:d,onChange:a})),l.createElement("div",{style:s.single},l.createElement(JS,{style:{input:s.input2,label:s.label2},label:"hsl",value:u,onChange:a})))))};var qj=function(e){var t=e.width,n=e.onChange,r=e.rgb,o=e.hsl,i=e.hsv,a=e.hex,s=e.header,c=e.styles,u=void 0===c?{}:c,d=e.className,h=void 0===d?"":d,p=(0,LS.Ay)(UT({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return l.createElement("div",{style:p.picker,className:"google-picker "+h},l.createElement("div",{style:p.head},s),l.createElement("div",{style:p.swatch}),l.createElement("div",{style:p.saturation},l.createElement(aE,{hsl:o,hsv:i,pointer:Vj,onChange:n})),l.createElement("div",{style:p.body},l.createElement("div",{style:p.controls,className:"flexbox-fix"},l.createElement("div",{style:p.hue},l.createElement(n_,{style:p.Hue,hsl:o,radius:"4px",pointer:Wj,onChange:n}))),l.createElement(Hj,{rgb:r,hsl:o,hex:a,hsv:i,onChange:n})))};qj.propTypes={width:yd().oneOfType([yd().string,yd().number]),styles:yd().object,header:yd().string},qj.defaultProps={width:652,styles:{},header:"Color picker"};eC(qj);const Xj=()=>{const[e,t]=(0,l.useState)("#99C2D0"),[n,r]=(0,l.useState)([]),[o,i]=(0,l.useState)(null),[a,s]=(0,l.useState)(null),[c,u]=(0,l.useState)(!1),d=["",""],h=(e,t,n,r)=>{e.beginShape();for(let o=0;o<20;o++){const i=e.TWO_PI-o/1/e.HALF_PI,a=t+e.cos(i)-r,s=n-e.sin(i)-r;e.vertex(a,s);const l=i-e.HALF_PI/2,c=t+e.cos(l)-r-.5,u=n+e.sin(l)-r-.5;e.vertex(c,u)}e.endShape(e.CLOSE)};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{className:"color-button",children:(0,Je.jsx)(uj,{color:e,onChangeComplete:e=>(e=>{t(e.hex)})(e)})}),(0,Je.jsx)(NS(),{className:"fluid",setup:(e,t)=>{e.createCanvas(1220,750).parent(t),e.background(0,0,255);const n=[];for(let r=0;r<1e3;r++){const t=e.random(e.width),r=e.random(e.height),o=e.random(-1,1),i=e.random(-1,1);n.push({x:t,y:r,dx:o,dy:i})}r(n)},draw:t=>{t.clear(),t.background(0,20,20);for(let r=0;r<n.length;r++){let{x:i,y:s,dx:l,dy:u}=n[r];if(c?(l=t.random(-1,1),u=t.random(-1,1),t.fill(t.random()>.5?"#FF0000":"#FFFF00")):t.fill(e),null!==o&&null!==a){const e=t.dist(i,s,o,a);if(e>1){i+=(o-i)/e,s+=(a-s)/e}}else i+=l,s+=u,(i<0||i>t.width)&&(l*=-1),(s<0||s>t.height)&&(u*=-1);t.noStroke(),h(t,i,s,6),n[r]={x:i,y:s,dx:l,dy:u}}},mousePressed:e=>{i(e.mouseX),s(e.mouseY),u(!0)},mouseReleased:e=>{i(null),s(null),u(!1);const n=d[Math.floor(Math.random()*d.length)];t(n)}})]})},Yj=()=>{const[e,t]=(0,l.useState)(!1),[n]=(0,l.useState)([]),[r,o]=(0,l.useState)("ellipse"),[i,a]=(0,l.useState)([]),[s,c]=(0,l.useState)(null),[u,d]=(0,l.useState)("#242424"),[h,p]=(0,l.useState)("#14DCEB"),[f,m]=(0,l.useState)(1);return(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("div",{className:"sketch-controls",children:[(0,Je.jsx)("label",{htmlFor:"backgroundColor",children:"BACKGROUND COLOR"}),(0,Je.jsx)("input",{type:"color",id:"backgroundColor",value:u,onChange:e=>{d(e.target.value)}}),(0,Je.jsx)("label",{htmlFor:"shapeColor",children:"SHAPE COLOR"}),(0,Je.jsx)("input",{type:"color",id:"shapeColor",value:h,onChange:e=>{p(e.target.value)}}),(0,Je.jsx)("label",{htmlFor:"lineThickness",children:"SIZE"}),(0,Je.jsx)("input",{className:"lineThickness",type:"range",id:"lineThickness",min:"1",max:"10",value:f,onChange:e=>{m(parseInt(e.target.value))},style:{backgroundColor:"red",color:"white",border:"1px solid transparent"}})]}),(0,Je.jsxs)("div",{className:"sketch-buttons",children:[(0,Je.jsx)("button",{onClick:()=>{o("ellipse")},children:"DRAW CIRCULE"}),(0,Je.jsx)("button",{onClick:()=>{o("line")},children:"DRAW LINES"}),(0,Je.jsx)("button",{onClick:()=>{o("snowflake")},children:"DRAW CIRCULES"})]}),(0,Je.jsx)(NS(),{setup:(e,t)=>{e.createCanvas(724,568).parent(t),e.frameRate(60)},draw:o=>{if(o.background(u),t(o.mouseX>0&&o.mouseX<o.width&&o.mouseY>0&&o.mouseY<o.height),o.mouseIsPressed&&e)if("ellipse"===r){const e={type:"ellipse",x:o.mouseX,y:o.mouseY,size:5,color:h};a([...i,e])}else if("line"!==r||s){if("line"===r&&s){const e={type:"line",startX:s.x,startY:s.y,endX:o.mouseX,endY:o.mouseY,color:h};a([...i,e])}else if("snowflake"===r){const e={type:"snowflake",x:o.mouseX,y:o.mouseY,color:h};a([...i,e])}}else c({x:o.mouseX,y:o.mouseY});o.strokeWeight(f);for(const e of n)for(const t of e)o.stroke(t.color),"ellipse"===t.type?o.ellipse(t.x,t.y,t.size,t.size):"line"===t.type?o.line(t.startX,t.startY,t.endX,t.endY):"snowflake"===t.type&&o.text("*",t.x,t.y);for(const e of i)o.stroke(e.color),"ellipse"===e.type?o.ellipse(e.x,e.y,e.size,e.size):"line"===e.type?o.line(e.startX,e.startY,e.endX,e.endY):"snowflake"===e.type&&o.text("*",e.x,e.y)},className:"draw-container"})]})};r(1213);const Kj=r.p+"static/media/suns-soleil.4c4bc2672cf49bd40b60.mp4",Zj=r.p+"static/media/beat.b3be5b01c8fd4f9470c9.wav",Qj=r.p+"static/media/ojo.83c597dc61dc2d759b15.wav",Jj=r.p+"static/media/soho.fa61c375e2365a7ab31d.wav",$j=r.p+"static/media/rising.992bed25bc39b08a5d19.wav",eA=r.p+"static/media/space.7901f76250741c6e3459.wav",tA=r.p+"static/media/suzi.a76d3e10ecdb497a6006.jpg",nA=r.p+"static/media/harm.e179ac40ba09f57e6141.jpg",rA=r.p+"static/media/goyl.291f7becdf2d6eb0178b.jpg";let oA,iA,aA,sA,lA,cA,uA,dA,hA,pA=!1,fA=!1,mA=!1,gA=!1,yA=!1,vA=!1,bA=!1,xA=!1,wA=!0,SA=!1,_A=0,kA=[],TA=100,EA=0,CA=100,IA=0,jA=100,AA=0,OA=0;function NA(e,t,n,r){e.fill(280,20,50),e.beginShape();for(let o=0;o<5;o++){let i=e.TWO_PI*o/8-e.HALF_PI,a=t*e.cos(i)*r,s=n*e.sin(i)*r;e.vertex(a,s),i+=e.TWO_PI/10;let l=t/e.cos(i)/r/2,c=n/e.sin(i)/r/2;e.vertex(l,c)}e.endShape(e.CLOSE)}const RA=e=>(0,Je.jsx)(NS(),{className:"sketch",setup:(e,t)=>{e.createCanvas(1200,500,e.WEBGL).parent(t)},draw:e=>{if(e.keyIsDown(86)&&!xA?(cA.loop(),xA=!0):!e.keyIsDown(86)&&xA&&(cA.pause(),xA=!1),xA){const t=350,n=t/-cA.width*-cA.height;e.image(cA,0,0,t,n)}else e.background(255,0,0);const t=e.keyIsDown(76);if(t&&!pA&&(OA=0,fA?(oA.stop(),iA.stop(),aA.stop(),sA.stop(),fA=!1):(oA.loop(),iA.loop(),aA.loop(),sA.loop(),fA=!0)),pA=t,t&&(e.push(),e.translate(0,0,-200),e.rotateX(OA),e.rotateY(OA),e.box(90),e.pop(),OA+=.01),mA&&oA.isPlaying()){e.push();const t=e.sin(EA);TA=e.map(t,-1,1,50,900),EA+=.5,e.translate(e.width/-50,e.height/24,-700),e.image(uA,-TA/2,-TA/2+0,TA,TA),e.pop()}if(e.keyIsDown(66)&&!mA?(oA.loop(),mA=!0):!e.keyIsDown(66)&&mA&&(oA.stop(),mA=!1),gA&&iA.isPlaying()){e.push();const t=e.sin(IA);CA=e.map(t,-1,1,50,900),IA+=.5;const n=1.5*e.width/1.6;e.translate(n,e.height/8,-700),e.image(dA,-CA/2,-CA/2+0,CA,CA),e.pop()}if(e.keyIsDown(75)&&!gA?(iA.loop(),gA=!0):!e.keyIsDown(75)&&gA&&(iA.stop(),gA=!1),yA&&aA.isPlaying()){e.push();const t=e.sin(AA);jA=e.map(t,-1,1,50,900),AA+=.5,e.translate(e.width/-1,e.height/8,-700),e.image(hA,-jA/2,-jA/2+0,jA,jA),e.pop()}if(e.keyIsDown(83)&&!yA?(aA.loop(),yA=!0):!e.keyIsDown(83)&&yA&&(aA.stop(),yA=!1),e.keyIsDown(72)&&!vA?(sA.loop(),vA=!0):!e.keyIsDown(72)&&vA&&(sA.stop(),vA=!1),e.keyIsDown(72)&&!SA?(SA=!0,_A=50):!e.keyIsDown(72)&&SA&&(SA=!1),SA){e.fill(350,4,309);const t=e.width/-60,n=e.height/60;e.ellipse(t,n,_A,_A),wA?(_A+=10,_A>200&&(_A=200,wA=!1)):(_A-=5,_A<5&&(_A=5,wA=!0))}e.keyIsDown(82)&&!bA?(lA.loop(),bA=!0):!e.keyIsDown(82)&&bA&&(lA.stop(),bA=!1,kA=[]);for(let n=0;n<kA.length;n++)NA(e,kA[n].x,kA[n].y,kA[n].radius);if(e.keyIsPressed&&e.keyIsDown(82)){kA.push({x:e.random(e.width),y:e.random(e.height),radius:5,growing:!0});for(let e=0;e<kA.length;e++)kA[e].growing?(kA[e].radius+=2,kA[e].radius>30&&(kA[e].growing=!1)):(kA[e].radius-=1,kA[e].radius<5&&(kA[e].growing=!0))}},preload:e=>{oA=e.loadSound(Zj),iA=e.loadSound(Qj),aA=e.loadSound(Jj),sA=e.loadSound($j),lA=e.loadSound(eA),uA=e.loadImage(tA),dA=e.loadImage(nA),hA=e.loadImage(rA),cA=e.createVideo([Kj]),cA.hide()},remove:e=>{cA.remove()}}),PA=()=>{const[e,t]=(0,l.useState)({r:145,g:160,b:220}),[n,r]=(0,l.useState)(!1),[o,i]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!0),d=(0,l.useRef)(null),h=[];return(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("div",{className:"color-button-container",children:[(0,Je.jsx)("button",{className:"color-buttons",onClick:()=>{r((e=>!e))},children:"PICK COLOR"}),n&&(0,Je.jsx)(uj,{color:e,onChange:e=>{t(e.rgb)},onClose:()=>{r(!1)}})]}),(0,Je.jsx)(NS(),{className:"fluid",setup:(e,t)=>{e.createCanvas(1024,768).parent(t),o?e.background(255,5,50):e.background(255,55,50),e.frameRate(60)},draw:t=>{if(o||t.background(255),c&&t.frameCount%60<30)if(t.textAlign(t.CENTER),t.textSize(30),t.textFont("Array"),t.fill(0),t.frameCount<230)t.frameCount%60<15&&t.text("DONT BE SHY!!",t.width/2,t.height/2-50);else{const e="PRESS U TO UPLOAD YOUR PHOTOS",n="CLICK INSIDE THE CANVAS TO DRAW YOUR IMAGE WITH THE CHOSEN COLOR";t.text(e,t.width/2,t.height/2-50),t.text(n,t.width/2,t.height/2-20)}o&&!d.current&&(d.current={user:t.loadImage(o,(()=>{console.log("User image loaded successfully.")}))});for(let n=h.length-1;n>=0;n--)t.noFill(),t.stroke(e.r,e.g,e.b),t.ellipse(h[n].x,h[n].y,h[n].radius,h[n].radius),h[n].growing&&(h[n].radius-=5),h[n].radius>=340&&h.splice(n,1)},keyPressed:e=>{if("u"===e.key||"U"===e.key){u(!1);const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{const t=e.target.files[0],n=new FileReader;n.onload=e=>{i(e.target.result),s(!0)},n.readAsDataURL(t)},e.click()}},mousePressed:e=>{if(a&&o&&d.current&&d.current.user){const t=e.mouseX,n=e.mouseY,r=100;e.image(d.current.user,t-r/2,n-r/2,r,r),h.push({x:t,y:n,radius:0,growing:!0})}},mouseReleased:()=>{h.forEach((e=>{e.growing=!1}))}})]})},MA=r.p+"static/media/llanto.c08dc2be3b8d4aa265c2.wav";let DA;const LA=()=>{const[e,t]=(0,l.useState)(!1),[n]=(0,l.useState)([]),[r,o]=(0,l.useState)([]),[i,a]=(0,l.useState)([]),[s,c]=(0,l.useState)(!0),[u,d]=(0,l.useState)(!1),h=new Set;(0,l.useEffect)((()=>{DA=new Audio(MA),DA.loop=!0,DA.load()}),[]);const p=()=>{DA.pause(),DA.currentTime=0,d(!1)},f=e=>{h.clear();for(let t=0;t<200;t++)n[t]={x:e.random(e.width),y:e.random(e.height),size:e.random(.1,2),opacity:e.random(150,255),speed:e.random(1,3)}};return(0,Je.jsx)("div",{children:e?(0,Je.jsx)(NS(),{setup:(e,t)=>{e.createCanvas(1400,700).parent(t),e.frameRate(60);for(let r=0;r<200;r++)n.push({x:e.random(e.width),y:e.random(e.height),size:e.random(.1,2),opacity:e.random(150,255),speed:e.random(1,3)})},draw:e=>{e.background(0);let t=e.mouseX>=0&&e.mouseX<=e.width&&e.mouseY>=0&&e.mouseY<=e.height;for(const r of n){if(!h.has(r)){const t=e.atan2(e.mouseY-r.y,e.mouseX-r.x);r.x+=r.speed*e.cos(t),r.y+=r.speed*e.sin(t),e.dist(r.x,r.y,e.mouseX,e.mouseY)<5&&h.add(r)}e.stroke(255,0,0,r.opacity),e.noFill(),e.ellipse(r.x,r.y,r.size,r.size)}200===h.size&&t&&(u||(DA.play(),d(!0)));for(const n of r){e.beginShape();for(const{x:t,y:r}of n)e.vertex(t,r);e.endShape()}if(s){e.stroke(255,50),e.noFill(),e.beginShape();for(const{x:t,y:n}of i)e.vertex(t,n);e.endShape()}},mouseMoved:e=>{s&&a((t=>[...t,{x:e.mouseX,y:e.mouseY}]))},mouseReleased:()=>{o((e=>[...e,i])),a([])},mouseLeave:()=>{c(!1),p()},mouseClicked:e=>{u&&(p(),f(e))}}):(0,Je.jsx)("button",{className:"button-permission",onClick:()=>{DA&&!e&&DA.play().then((()=>{t(!0),p()})).catch((e=>{console.error("Error playing audio:",e)}))},children:"ALLOW AUDIO"})})},FA=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)([]),[o,i]=(0,l.useState)(0),[a,s]=(0,l.useState)(0);return(0,Je.jsxs)("div",{className:"iaStyles",children:[(0,Je.jsx)("h1",{children:"Simple Model Component"}),(0,Je.jsx)("p",{children:"Ingrese los comandos de p5.js:"}),(0,Je.jsxs)("ul",{children:[(0,Je.jsx)("li",{children:"Para dibujar una elipse: 'ellipse 100 100 50 80' (x, y, ancho, alto)"}),(0,Je.jsx)("li",{children:"Para dibujar una l\xednea: 'line 50 50 200 200' (x1, y1, x2, y2)"}),(0,Je.jsx)("li",{children:"Para dibujar un rect\xe1ngulo: 'rect 50 50 100 80' (x, y, ancho, alto)"}),(0,Je.jsx)("li",{children:"Para dibujar un tri\xe1ngulo: 'triangle 50 50 100 100 150 50' (x1, y1, x2, y2, x3, y3)"}),(0,Je.jsx)("li",{children:"Para dibujar un arco: 'arc 50 50 100 100 0 3.14' (x, y, ancho, alto, \xe1nguloInicial, \xe1nguloFinal)"}),(0,Je.jsx)("li",{children:"Para dibujar un cuadril\xe1tero: 'quad 50 50 150 50 200 150 100 200' (x1, y1, x2, y2, x3, y3, x4, y4)"}),(0,Je.jsx)("li",{children:"Para dibujar un punto: 'point 50 50' (x, y)"})]}),(0,Je.jsx)("p",{children:"Ingrese un valor para la deformaci\xf3n: "}),(0,Je.jsxs)("form",{onSubmit:n=>{n.preventDefault(),r((t=>[...t,e])),t("")},children:[(0,Je.jsx)("input",{type:"text",value:e,onChange:e=>{t(e.target.value)},placeholder:"Ingrese los comandos de p5.js"}),(0,Je.jsx)("button",{type:"submit",children:"Agregar Comando"})]}),(0,Je.jsxs)("label",{children:["Movimiento:",(0,Je.jsx)("input",{type:"number",value:a,onChange:e=>{s(Number(e.target.value))}})]}),(0,Je.jsxs)("label",{children:["Deformaci\xf3n:",(0,Je.jsx)("input",{type:"number",value:o,onChange:e=>{i(Number(e.target.value))}})]}),(0,Je.jsx)(NS(),{setup:(e,t)=>{e.createCanvas(400,400).parent(t),e.background(0,0,255)},draw:e=>{e.background(0,0,255),n.forEach((t=>{e.stroke(255),e.strokeWeight(2);const[n,...r]=t.split(" ");if("ellipse"===n&&4===r.length){const[t,n,i,s]=r.map(Number),l=(0!==o&&e.random(-20,20),0!==o&&e.random(-20,20),0!==o?e.random(-20,20)+i:i),c=0!==o?e.random(-20,20)+s:s,u=0!==a?a:0,d=0!==a?a:0;e.ellipse(t+u,n+d,l,c)}else if("line"===n&&4===r.length){const[t,n,i,a]=r.map(Number),s=0!==o?e.random(-20,20):0,l=0!==o?e.random(-20,20):0,c=0!==o?e.random(-20,20):0,u=0!==o?e.random(-20,20):0;e.line(t+s,n+l,i+c,a+u)}else if("rect"===n&&4===r.length){const[t,n,i,a]=r.map(Number),s=0!==o?e.random(-20,20):0,l=0!==o?e.random(-20,20):0,c=0!==o?e.random(-20,20)+i:i,u=0!==o?e.random(-20,20)+a:a;e.rect(t+s,n+l,c,u)}else if("triangle"===n&&6===r.length){const[t,n,i,a,s,l]=r.map(Number),c=0!==o?e.random(-20,20):0,u=0!==o?e.random(-20,20):0,d=0!==o?e.random(-20,20):0,h=0!==o?e.random(-20,20):0,p=0!==o?e.random(-20,20):0,f=0!==o?e.random(-20,20):0;e.triangle(t+c,n+u,i+d,a+h,s+p,l+f)}else if("arc"===n&&6===r.length){const[t,n,i,a,s,l]=r.map(Number),c=0!==o?i+e.random(-20,20):i,u=0!==o?a+e.random(-20,20):a;e.arc(t,n,c,u,s,l)}else if("quad"===n&&8===r.length){const[t,n,o,i,a,s,l,c]=r.map(Number);e.quad(t,n,o,i,a,s,l,c)}else if("point"===n&&2===r.length){const[t,n]=r.map(Number);e.point(t,n)}}))}})]})};class BA{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class UA{refCount(e){return zA("refCount")}incRef(e){return zA("incRef")}timerAvailable(){return!0}time(e){return zA("time")}read(e){return zA("read")}readSync(e){return zA("readSync")}readToGPU(e,t){return zA("readToGPU")}numDataIds(){return zA("numDataIds")}disposeData(e,t){return zA("disposeData")}write(e,t,n){return zA("write")}move(e,t,n,r,o){return zA("move")}createTensorFromGPUData(e,t,n){return zA("createTensorFromGPUData")}memory(){return zA("memory")}floatPrecision(){return zA("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return zA("dispose")}}function zA(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function VA(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,HA(e,t,n)}function GA(e,t,n){return Math.max(e,Math.min(t,n))}function WA(e){return e%2===0?e:e+1}function HA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qA(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function XA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";qA(ZA(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function YA(e){qA(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function KA(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function ZA(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function QA(e){return e%1===0}function JA(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function $A(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function eO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((o,i)=>{let a=0;const s=()=>{if(e())return void o();a++;const l=t(a);null!=n&&a>=n?i():null!=r?r(s,l):setTimeout(s,l)};s()}))}function tO(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const o=e.slice();return o[r]=t/n,o}function nO(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),qA(e.every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),qA(e.every((e=>QA(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function rO(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:nO(t,e).sort();let a=0;for(let s=0;s<e.length;++s){if(null!=i){if(i[a]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[a]||i[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function oO(e,t){return iO(e,t)}function iO(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function aO(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function sO(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function lO(e){return"string"===typeof e||e instanceof String}function cO(e){return"number"===typeof e}function uO(e){return Array.isArray(e)?uO(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":cO(e)?"float32":lO(e)?"string":"boolean"===typeof e?"bool":"float32"}function dO(e){return!!(e&&e.constructor&&e.call&&e.apply)}function hO(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function pO(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function fO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Array;if(1===t.length){const i=t[0]*(r?2:1);for(let t=0;t<i;t++)o[t]=n[e+t]}else{const i=t[0],a=t.slice(1),s=a.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<i;t++)o[t]=fO(e+t*s,a,n,r)}return o}function mO(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return fO(0,e,t,n)}function gO(e,t){const n=yO(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function yO(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function vO(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return mO(e,new Float32Array(n));if("int32"===t)return mO(e,new Int32Array(n));if("bool"===t)return mO(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function bO(e){e.forEach((t=>{qA(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function xO(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function wO(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function SO(e){return e&&e.then&&"function"===typeof e.then}const _O="tfjsflags";class kO{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=TO,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(EO().getBool("IS_TEST")||EO().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];EO().getBool("IS_TEST")||EO().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(SO(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(_O in e){e[_O].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function TO(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function EO(){return IO}let CO,IO=null;function jO(){if(null==CO){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof r.g)e=r.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}CO=e}return CO}function AO(e,t){const n=function(){const e=jO();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const OO="Abs",NO="Acos",RO="Acosh",PO="Add",MO="AddN",DO="All",LO="Any",FO="ArgMax",BO="ArgMin",UO="Asin",zO="Asinh",VO="Atan",GO="Atanh",WO="Atan2",HO="AvgPool",qO="AvgPoolGrad",XO="AvgPool3D",YO="AvgPool3DGrad",KO="BatchMatMul",ZO="BatchToSpaceND",QO="Bincount",JO="BitwiseAnd",$O="BroadcastArgs",eN="Cast",tN="Ceil",nN="ClipByValue",rN="Complex",oN="ComplexAbs",iN="Concat",aN="Conv2D",sN="Conv2DBackpropFilter",lN="Conv2DBackpropInput",cN="Conv3D",uN="Conv3DBackpropFilterV2",dN="Conv3DBackpropInputV2",hN="Cos",pN="Cosh",fN="Cumprod",mN="Cumsum",gN="CropAndResize",yN="DenseBincount",vN="DepthToSpace",bN="DepthwiseConv2dNative",xN="DepthwiseConv2dNativeBackpropFilter",wN="DepthwiseConv2dNativeBackpropInput",SN="Diag",_N="Dilation2D",kN="Dilation2DBackpropInput",TN="Dilation2DBackpropFilter",EN="Draw",CN="RealDiv",IN="Einsum",jN="Elu",AN="EluGrad",ON="Erf",NN="Equal",RN="Exp",PN="ExpandDims",MN="Expm1",DN="FFT",LN="Fill",FN="FlipLeftRight",BN="Floor",UN="FloorDiv",zN="FusedBatchNorm",VN="GatherV2",GN="GatherNd",WN="Greater",HN="GreaterEqual",qN="Identity",XN="IFFT",YN="Imag",KN="IsFinite",ZN="IsInf",QN="IsNan",JN="LeakyRelu",$N="Less",eR="LessEqual",tR="LinSpace",nR="Log",rR="Log1p",oR="LogicalAnd",iR="LogicalNot",aR="LogicalOr",sR="LRN",lR="LRNGrad",cR="Max",uR="Maximum",dR="MaxPool",hR="MaxPoolGrad",pR="MaxPool3D",fR="MaxPool3DGrad",mR="MaxPoolWithArgmax",gR="Mean",yR="Min",vR="Minimum",bR="MirrorPad",xR="Mod",wR="Multinomial",SR="Multiply",_R="Neg",kR="NotEqual",TR="NonMaxSuppressionV3",ER="NonMaxSuppressionV4",CR="NonMaxSuppressionV5",IR="OnesLike",jR="OneHot",AR="Pack",OR="PadV2",NR="Pow",RR="Prelu",PR="Prod",MR="RaggedGather",DR="RaggedRange",LR="RaggedTensorToTensor",FR="Range",BR="Real",UR="Reciprocal",zR="Relu",VR="Reshape",GR="ResizeNearestNeighbor",WR="ResizeNearestNeighborGrad",HR="ResizeBilinear",qR="ResizeBilinearGrad",XR="Relu6",YR="Reverse",KR="Round",ZR="Rsqrt",QR="ScatterNd",JR="TensorScatterUpdate",$R="SearchSorted",eP="Select",tP="Selu",nP="Slice",rP="Sin",oP="Sinh",iP="Sign",aP="Sigmoid",sP="Softplus",lP="Sqrt",cP="Sum",uP="SpaceToBatchND",dP="SplitV",hP="Softmax",pP="SparseFillEmptyRows",fP="SparseReshape",mP="SparseSegmentMean",gP="SparseSegmentSum",yP="SparseToDense",vP="SquaredDifference",bP="Square",xP="StaticRegexReplace",wP="StridedSlice",SP="StringNGrams",_P="StringSplit",kP="StringToHashBucketFast",TP="Sub",EP="Tan",CP="Tanh",IP="Tile",jP="TopK",AP="Transform",OP="Transpose",NP="Unique",RP="Unpack",PP="UnsortedSegmentSum",MP="ZerosLike",DP="Step",LP="FromPixels",FP="RotateWithOffset",BP="_FusedMatMul",UP="FusedConv2D",zP="FusedDepthwiseConv2D";function VP(){EO().getBool("IS_TEST")||EO().getBool("PROD")||console.warn(...arguments)}function GP(){EO().getBool("IS_TEST")||EO().getBool("PROD")||console.log(...arguments)}const WP=AO("kernelRegistry",(()=>new Map)),HP=AO("gradRegistry",(()=>new Map));function qP(e,t){const n=QP(e,t);return WP.get(n)}function XP(e){return HP.get(e)}function YP(e){const t=WP.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[i,a]=o,[s]=i.split("_");s===e&&n.push(a)}return n}function KP(e){const{kernelName:t,backendName:n}=e,r=QP(t,n);WP.has(r)&&VP("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),WP.set(r,e)}function ZP(e){const{kernelName:t}=e;HP.has(t)&&EO().getBool("DEBUG")&&VP("Overriding the gradient for '".concat(t,"'")),HP.set(t,e)}function QP(e,t){return"".concat(t,"_").concat(e)}function JP(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var $P=r(9394);const eM=r.n($P)()||$P;function tM(e){return eM.fromString(e,!0,16)}const nM=tM("c3a5c85c97cb3127"),rM=tM("b492b66fbe98f273"),oM=tM("9ae16a3b2f90404f");function iM(e){return e.xor(e.shru(47))}function aM(e,t,n){const r=e.slice(t,t+n);return eM.fromBytes(Array.from(r),!0,!0)}function sM(e,t){return aM(e,t,8)}function lM(e,t){return aM(e,t,4)}function cM(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function uM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tM("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function dM(e,t,n,r){return function(e,t,n,r,o,i){o=o.add(e),i=cM(i.add(o).add(r),21);const a=o;return o=(o=o.add(t)).add(n),i=i.add(cM(o,44)),[o.add(r),i.add(a)]}(sM(e,t),sM(e,t+8),sM(e,t+16),sM(e,t+24),n,r)}function hM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=eM.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=oM.add(2*t),r=sM(e,0).add(oM),o=sM(e,t-8);return uM(cM(o,37).mul(n).add(r),cM(r,25).add(o).mul(n),n)}if(t>=4){const n=oM.add(2*t);return uM(lM(e,0).shl(3).add(t),lM(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return iM(oM.mul(n).xor(nM.mul(r))).mul(oM)}return oM}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=oM.add(2*t),r=sM(e,0).mul(rM),o=sM(e,8),i=sM(e,t-8).mul(n),a=sM(e,t-16).mul(oM);return uM(cM(r.add(o),43).add(cM(i,30)).add(a),r.add(cM(o.add(oM),18)).add(i),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=oM.add(2*t),r=sM(e,0).mul(oM),o=sM(e,8),i=sM(e,t-8).mul(n),a=sM(e,t-16).mul(oM),s=cM(r.add(o),43).add(cM(i,30)).add(a),l=uM(s,r.add(cM(o.add(oM),18)).add(i),n),c=sM(e,16).mul(n),u=sM(e,24),d=s.add(sM(e,t-32)).mul(n),h=l.add(sM(e,t-24)).mul(n);return uM(cM(c.add(u),43).add(cM(d,30)).add(h),c.add(cM(u.add(r),18)).add(d),n)}(e,t);let r=n,o=n.mul(rM).add(113),i=iM(o.mul(oM).add(113)).mul(oM),a=[eM.UZERO,eM.UZERO],s=[eM.UZERO,eM.UZERO];r=r.mul(oM).add(sM(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=cM(r.add(o).add(a[0]).add(sM(e,l+8)),37).mul(rM),o=cM(o.add(a[1]).add(sM(e,l+48)),42).mul(rM),r=r.xor(s[1]),o=o.add(a[0]).add(sM(e,l+40)),i=cM(i.add(s[0]),33).mul(rM),a=dM(e,l,a[1].mul(rM),r.add(s[0])),s=dM(e,l+32,i.add(s[1]),o.add(sM(e,l+16))),[i,r]=[r,i],l+=64}while(l!==c);const d=rM.add(i.and(255).shl(1));return l=u,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=cM(r.add(o).add(a[0]).add(sM(e,l+8)),37).mul(d),o=cM(o.add(a[1]).add(sM(e,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),o=o.add(a[0].mul(9).add(sM(e,l+40))),i=cM(i.add(s[0]),33).mul(d),a=dM(e,l,a[1].mul(d),r.add(s[0])),s=dM(e,l+32,i.add(s[1]),o.add(sM(e,l+16))),[i,r]=[r,i],uM(uM(a[0],s[0],d).add(iM(o).mul(nM)).add(i),uM(a[1],s[1],d).add(r),d)}function pM(e,t){return"string"===t?gM(e):fM([e],t)}function fM(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=bM(e)),EO().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function mM(){return EO().platform.now()}function gM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",EO().platform.encode(e,t)}function yM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",EO().platform.decode(e,t)}function vM(e){return null!=EO().platform.isTypedArray?EO().platform.isTypedArray(e):JP(e)}function bM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||SO(e)||null==e||vM(e)&&n)t.push(e);else if(Array.isArray(e)||vM(e))for(let r=0;r<e.length;++r)bM(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let o=0;o<=r;o++)bM(e[o],t,n)}return t}class xM{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new SM)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let i;const a=mM();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();i=Promise.resolve({kernelMs:mM()-a})}if(EO().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{wM(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then((e=>e.kernelMs)),extraInfo:i.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:i}=e;n.forEach((e=>{Promise.all([e.data(),r,i]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function wM(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class SM{logKernelProfile(e,t,n,r,o,i){const a="number"===typeof r?$A("".concat(r,"ms"),9):r.error,s=$A(e,25),l=t.rank,c=t.size,u=$A(t.shape.toString(),14);let d="";for(const h in o){const e=o[h];if(null!=e){const n=e.shape||t.shape,r=n.length;d+="".concat(h,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(a,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const _M=20,kM=3,TM=7;function EM(e,t,n,r){const o=pO(t),i=function(e,t,n,r){const o=KA(t),i=r[r.length-1],a=new Array(i).fill(0),s=t.length,l="complex64"===n?AM(e):e;if(s>1)for(let c=0;c<o/i;c++){const e=c*i;for(let t=0;t<i;t++)a[t]=Math.max(a[t],CM(l[e+t],0,n).length)}return a}(e,t,n,o),a=t.length,s=jM(e,t,n,o,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(a)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function CM(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(TM))," + ")+"".concat(parseFloat(e[1].toFixed(TM)),"j"):lO(e)?"'".concat(e,"'"):"bool"===n?IM(e):parseFloat(e.toFixed(TM)).toString(),$A(r,t)}function IM(e){return 0===e?"false":"true"}function jM(e,t,n,r,o){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[CM(AM(e)[0],0,n)]}return"bool"===n?[IM(e[0])]:[e[0].toString()]}if(1===l){if(s>_M){const t=kM*a;let r=Array.from(e.slice(0,t)),i=Array.from(e.slice((s-kM)*a,s*a));return"complex64"===n&&(r=AM(r),i=AM(i)),["["+r.map(((e,t)=>CM(e,o[t],n))).join(", ")+", ..., "+i.map(((e,t)=>CM(e,o[s-kM+t],n))).join(", ")+"]"]}return["["+("complex64"===n?AM(e):Array.from(e)).map(((e,t)=>CM(e,o[t],n))).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),d=r[0]*a,h=[];if(s>_M){for(let t=0;t<kM;t++){const r=t*d,i=r+d;h.push(...jM(e.slice(r,i),c,n,u,o,!1))}h.push("...");for(let t=s-kM;t<s;t++){const r=t*d,i=r+d;h.push(...jM(e.slice(r,i),c,n,u,o,t===s-1))}}else for(let m=0;m<s;m++){const t=m*d,r=t+d;h.push(...jM(e.slice(t,r),c,n,u,o,m===s-1))}const p=2===l?",":"";h[0]="["+(s>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":f),h}function AM(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class OM{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=KA(e),null!=n){const e=n.length;qA(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||iO(t,this.size),this.strides=pO(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),qA(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const i of t){if(i<0||i>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let o=t[t.length-1];for(let i=0;i<t.length-1;++i)o+=this.strides[i]*t[i];return this.values[o]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return NM().makeTensor(this.values,this.shape,this.dtype)}}let NM=null,RM=null,PM=null;class MM{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=KA(e),this.strides=pO(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return RM.buffer(this.shape,this.dtype,e)}bufferSync(){return RM.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return mO(this.shape,e,"complex64"===this.dtype)}arraySync(){return mO(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=NM().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>yM(e)))}catch(Kae){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),NM().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=NM().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>yM(e)))}catch(Kae){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await NM().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),NM().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return RM.print(this,e)}clone(){return this.throwIfDisposed(),RM.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return EM(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),RM.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),NM().makeVariable(this,e,t,n)}}function DM(){return AO("Tensor",(()=>MM))}Object.defineProperty(MM,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),DM();class LM extends MM{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!ZA(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));NM().disposeTensor(this),this.dataId=e.dataId,NM().incRef(this,null)}dispose(){NM().disposeVariable(this),this.isDisposedInternal=!0}}var FM,BM,UM,zM,VM;Object.defineProperty(LM,Symbol.hasInstance,{value:e=>e instanceof MM&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(FM||(FM={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(BM||(BM={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(UM||(UM={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(zM||(zM={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(VM||(VM={}));const GM={float32:zM,int32:BM,bool:UM,complex64:VM};function WM(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return GM[e][t]}function HM(e){return WM(e,"int32")}function qM(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function XM(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function YM(e,t){if(e.dtype===t.dtype)return[e,t];const n=WM(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function KM(e,t){return t.some((t=>t.id===e.id))}function ZM(e){const t=[];return QM(e,t,new Set),t}function QM(e,t,n){if(null==e)return;if(e instanceof MM)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const i in o){const e=o[i];n.has(e)||(n.add(e),QM(e,t,n))}}function JM(e){return null!=e.kernelName}class $M{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class eD{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new $M}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(VP("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new xM(this.backendInstance),!0}setupRegisteredKernels(){YP(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){YP(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof UA||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,VP("Initialization of backend ".concat(e," failed")),VP(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return VP("Initialization of backend ".concat(e," failed")),VP(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return eD.nextTensorId++}nextVariableId(){return eD.nextVariableId++}clone(e){const t=nD.runKernel(qN,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return nD.runKernel(eN,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=qP(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-o-i;if(a>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(a," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=JM(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(JM(e)){const{kernelName:t,inputs:o,attrs:i}=e;null==this.backendName&&this.backend;const l=qP(t,this.backendName);qA(null!=l,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),a=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:o,attrs:i,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const c=a.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};a=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,d=JM(e)?null:e.backwardsFunc;let h;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,c,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=a()})),r&&this.addTapeNode(l,c,t,d,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map((e=>null!=c[e]?c[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=XP(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let i;r.saveAllInputs?(qA(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),i=Object.keys(t).map((e=>t[e]))):i=e.map((e=>t[e]));const a=n.filter(((e,t)=>o[t]));return i.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&lO(e[0])&&(o=e.map((e=>gM(e))));const i=r.write(o,t,n),a=new MM(t,n,i,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(i),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,i=new MM(r,o,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new LM(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name ".concat(o.name," was already registered"));return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*sO(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof LM||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*sO(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=XP(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=yO(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=ZM(e),n=new Set(t.map((e=>e.id)));for(let o=0;o<this.state.activeScope.track.length;o++){const e=this.state.activeScope.track[o];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(qA(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));qA(o instanceof MM,(()=>"The result y returned by f() must be a tensor."));const i=function(e,t,n){const r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],i=n.inputs;for(const e in i){const a=i[e];let s=!1;for(let e=0;e<t.length;e++)if(r[a.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[n.id]=!0;break}if(s)break}}const i={};i[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(i[t.outputs[e].id]){for(const e in n)i[n[e].id]=!0,a[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(o[t.id]&&a[t.id]){const e={};for(const o in t.inputs){const n=t.inputs[o];r[n.id]&&(e[o]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,o);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=gO(KA(e),"float32");return nD.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const i=t[o],a=[];if(i.outputs.forEach((t=>{const n=e[t.id];null!=n?a.push(n):a.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));const s=i.gradient(a);for(const t in i.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(o.dtype,"'"));const a=i.inputs[t];if(!ZA(o.shape,a.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(a.shape,"'"));if(null==e[a.id])e[a.id]=o;else{const t=e[a.id];e[a.id]=r(t,o),t.dispose()}}}}(e,i,(e=>this.tidy(e)),rD);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){var t=this;return qA(dO(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let i;qA(r.every((e=>e instanceof MM)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const a={};r.forEach(((e,t)=>{a[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(i=e(...r,n),qA(i.value instanceof MM,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),qA(dO(i.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),i.value),backwardsFunc:(e,t)=>{const n=i.gradFunc(e,t),o=Array.isArray(n)?n:[n];qA(o.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),qA(o.every((e=>e instanceof MM)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return o.forEach(((e,t)=>{a[t]=()=>e})),a},inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=mM(),n=await this.backend.time(e);return n.wallMs=mM()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new $M;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function tD(){const e=jO();if(null==e._tfengine){const t=new kO(e);e._tfengine=new eD(t)}var t;return t=e._tfengine.ENV,IO=t,NM=()=>e._tfengine,e._tfengine}eD.nextTensorId=0,eD.nextVariableId=0;const nD=tD();function rD(e,t){const n={a:e,b:t};return nD.runKernel(PO,n)}let oD;function iD(e){if(void 0!==oD)return oD;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function aD(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const sD=EO();function lD(e,t){let n=e;if(vM(e))return"string"===t?[]:[e.length];if(qM(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(XM(e))return[e.buffer.size/(null==t?4:sO(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||vM(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&EO().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&cD(e,r,[]),r}function cD(e,t,n){if(n=n||[],!Array.isArray(e)&&!vM(e))return void qA(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));qA(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),qA(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const r=t.slice(1);for(let o=0;o<e.length;++o)cD(e[o],r,n.concat(o))}function uD(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function dD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof DM())return uD(r,e.dtype,t,n),e;let o=uO(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),uD(r,o,t,n),null==e||!vM(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const i=lD(e,o);vM(e)||Array.isArray(e)||(e=[e]);const a="string"!==o?fM(e,o):bM(e,[],!0);return nD.makeTensor(a,i,o)}function hD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,o)=>dD(e,"".concat(t,"[").concat(o,"]"),n,r)))}sD.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),sD.registerFlag("IS_BROWSER",(()=>aD())),sD.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),sD.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),sD.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),sD.registerFlag("PROD",(()=>!1)),sD.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>sD.getBool("DEBUG"))),sD.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),sD.registerFlag("IS_TEST",(()=>!1)),sD.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>sD.getBool("DEBUG"))),sD.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),sD.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),sD.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));function pD(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const o=function(){nD.startScope(n);try{const e=r(...arguments);return SO(e)&&console.error("Cannot return a Promise inside of tidy."),nD.endScope(e),e}catch(e){throw nD.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}const fD=pD({complex_:function(e,t){const n=dD(e,"real","complex"),r=dD(t,"imag","complex");XA(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const o={real:n,imag:r};return nD.runKernel(rN,o)}});function mD(e,t,n,r){if(null==r)r=uO(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(XM(e)||qM(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return nD.backend.createTensorFromGPUData(e,t||n,r)}if(!vM(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){bO(t);const e=KA(t),r=KA(n);qA(e===r,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r)));for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==KA(t.slice(o));qA(n[o]===t[o]||!r,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return vM(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?fM(e,r):bM(e,[],!0),nD.makeTensor(e,t,r)}function gD(e,t,n){return mD(e,t,lD(e,n),n)}class yD{static join(e){return new yD(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>vM(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=t+r.byteLength;this.shards.push({buffer:r,start:t,end:o}),t=o}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),o=new Uint8Array(r);let i=0;for(let a=n;a<this.shards.length;a++){const n=this.shards[a],r=e+i-n.start,s=i,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(o.set(c,s),i+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,i=t(e[o]);if(0===i)return o;i<0?r=o:n=o+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}var vD;function bD(){return nD}function xD(){return nD.memory()}function wD(e,t){return nD.tidy(e,t)}function SD(e){ZM(e).forEach((e=>e.dispose()))}function _D(e){return nD.keep(e)}function kD(){return nD.backendName}function TD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return nD.registerBackend(e,t,n)}function ED(){return nD.backend}vD=function(e){EO().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")},PM=vD;const CD=4;async function ID(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let i=0;i<o.length;++i){const a=o[i],s=Array.isArray(e)?e[i].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(a,"': ").concat(s.dtype));const l={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+CD*t.length,r=new Uint8Array(n);let o=0;for(let i=0;i<t.length;i++){const e=t[i],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=CD,r.set(e,o),o+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:jD(await Promise.all(r)),specs:n}}function jD(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const AD="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function OD(e){return AD?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function ND(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function RD(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function PD(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:OD(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:OD(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new yD(e.weightData).byteLength}}function MD(e){const t=[];for(const n of e)t.push(...n.weights);return t}class DD{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==DD.instance&&(DD.instance=new DD),DD.instance}static registerSaveRouter(e){DD.getInstance().saveRouters.push(e)}static registerLoadRouter(e){DD.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return DD.getHandlers(e,"save")}static getLoadHandlers(e,t){return DD.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?DD.getInstance().loadRouters:DD.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const LD="tensorflowjs",FD="models_store",BD="model_info_store";function UD(){if(!EO().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function zD(e){const t=e.result;t.createObjectStore(FD,{keyPath:"modelPath"}),t.createObjectStore(BD,{keyPath:"modelPath"})}class VD{constructor(e){if(this.indexedDB=UD(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(LD,1);r.onupgradeneeded=()=>zD(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(FD,"readonly"),r=t.objectStore(FD).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{t.weightData=yD.join(t.weightData);const r=PD(t),a=o.transaction(BD,"readwrite");let s,l,c=a.objectStore(BD);try{s=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(i){return n(i)}s.onsuccess=()=>{l=o.transaction(FD,"readwrite");const s=l.objectStore(FD);let u;try{u=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(i){return n(i)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=a.objectStore(BD);const t=c.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(u.error)),t.onerror=e=>(o.close(),n(u.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}VD.URL_SCHEME="indexeddb://";const GD=e=>{return EO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(VD.URL_SCHEME)?(t=e.slice(VD.URL_SCHEME.length),new VD(t)):null;var t};DD.registerSaveRouter(GD),DD.registerLoadRouter(GD);class WD{constructor(){this.indexedDB=UD()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(LD,1);n.onupgradeneeded=()=>zD(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(BD,"readonly"),i=o.objectStore(BD).getAll();i.onsuccess=()=>{const t={};for(const e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(VD.URL_SCHEME)?t.slice(VD.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(LD,1);r.onupgradeneeded=()=>zD(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(BD,"readwrite"),a=i.objectStore(BD),s=a.get(e);let l;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=a.delete(e),i=()=>{l=o.transaction(FD,"readwrite");const r=l.objectStore(FD).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=i,r.onerror=e=>(i(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),i.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const HD="/",qD="tensorflowjs_models",XD="info",YD="model_topology",KD="weight_specs",ZD="weight_data",QD="model_metadata";function JD(e){return{info:[qD,e,XD].join(HD),topology:[qD,e,YD].join(HD),weightSpecs:[qD,e,KD].join(HD),weightData:[qD,e,ZD].join(HD),modelMetadata:[qD,e,QD].join(HD)}}function $D(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function eL(e){const t=e.split(HD);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(HD)}class tL{constructor(e){if(!EO().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=JD(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=PD(e),i=yD.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(AD)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(i));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:o}}catch(t){throw $D(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(o.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(o.weightSpecsBytes,", ")+"weightDataBytes=".concat(o.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(AD){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(i),t}}tL.URL_SCHEME="localstorage://";const nL=e=>{return EO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tL.URL_SCHEME)?(t=e.slice(tL.URL_SCHEME.length),new tL(t)):null;var t};DD.registerSaveRouter(nL),DD.registerLoadRouter(nL);class rL{constructor(){qA(EO().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),qA("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=qD+HD,n=HD+XD;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[eL(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=JD(e=(t=e).startsWith(tL.URL_SCHEME)?t.slice(tL.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return $D(n),r}}const oL="://";class iL{constructor(){this.managers={}}static getInstance(){return null==iL.instance&&(iL.instance=new iL),iL.instance}static registerManager(e,t){qA(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(oL)&&(e=e.slice(0,e.indexOf(oL))),qA(e.length>0,(()=>"scheme must not be an empty string."));const n=iL.getInstance();qA(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=iL.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(iL.getInstance().managers)}}class aL{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&EO().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return JP(e)}}if(EO().get("IS_BROWSER")){EO().setPlatform("browser",new aL);try{iL.registerManager(tL.URL_SCHEME,new rL)}catch(Zae){}try{iL.registerManager(VD.URL_SCHEME,new WD)}catch(Zae){}}const sL=()=>r(5817);let lL;class cL{constructor(){this.util=r(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=EO().global.fetch?EO().global.fetch(e,t):(null==lL&&(lL=sL()),lL(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function uL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",bO(e),new OM(e,t,n)}EO().get("IS_NODE")&&!EO().get("IS_BROWSER")&&EO().setPlatform("node",new cL);const dL=pD({cast_:function(e,t){const n=dD(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:t};return nD.runKernel(eN,r,o)}});const hL=pD({clone_:function(e){const t={x:dD(e,"x","clone","string_or_numeric")};return nD.runKernel(qN,t)}});tD();const pL={buffer:uL,cast:dL,clone:hL,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};RM=pL;const fL=pD({add_:function(e,t){let n=dD(e,"a","add"),r=dD(t,"b","add");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(PO,o)}});const mL=pD({floorDiv_:function(e,t){let n=dD(e,"a","floorDiv"),r=dD(t,"b","floorDiv");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(UN,o)}});const gL=pD({div_:function(e,t){let n=dD(e,"a","div"),r=dD(t,"b","div");if([n,r]=YM(n,r),"int32"===n.dtype&&"int32"===r.dtype)return mL(n,r);const o={a:n,b:r};return nD.runKernel(CN,o,{})}});const yL=pD({mul_:function(e,t){let n=dD(e,"a","mul"),r=dD(t,"b","mul");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(SR,o)}});const vL=pD({sqrt_:function(e){const t={x:dD(e,"x","sqrt","float32")};return nD.runKernel(lP,t)}});const bL=pD({square_:function(e){const t=dD(e,"x","square");return nD.runKernel("Square",{x:t},{})}});const xL=pD({zerosLike_:function(e){const t={x:dD(e,"x","zerosLike")};return nD.runKernel(MP,t)}});function wL(e){return nD.customGrad(e)}function SL(e,t){if((vM(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&vM(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return mD(e,[],[],t)}const _L=new Map,kL=new Map;class TL{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class EL{constructor(){this.classNameMap={}}static getMap(){return null==EL.instance&&(EL.instance=new EL),EL.instance}static register(e){EL.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function CL(e,t,n){qA(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),qA("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),qA(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return EL.register(e),_L.set(r,e),kL.set(e,r),e}class IL extends TL{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:o}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:o[e.name]})));this.applyGradients(e)}else this.applyGradients(o);return SD(o),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){qA(dO(e),(()=>"The f passed in variableGrads(f) must be a function")),qA(null==t||Array.isArray(t)&&t.every((e=>e instanceof LM)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in nD.registeredVariables)t.push(nD.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,o=t.length;t=t.filter((e=>e.trainable)),qA(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."));const{value:i,grads:a}=nD.gradients(e,t,null,!0);qA(a.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),qA(0===i.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(i.rank," tensor")));const s={};return t.forEach(((e,t)=>{null!=a[t]&&(s[e.name]=a[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:i,grads:s}}(e,t)}dispose(){null!=this.iterations_&&SD(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:SL(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(IL,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class jL extends IL{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=nD.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=nD.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:wD((()=>xL(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:wD((()=>xL(r).variable(false)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedGrads[n].variable,a=this.accumulatedUpdates[n].variable;wD((()=>{const e=fL(yL(i,this.rho),yL(bL(o),1-this.rho)),t=yL(gL(vL(fL(a,this.epsilon)),vL(fL(i,this.epsilon))),o),n=fL(yL(a,this.rho),yL(bL(t),1-this.rho));i.assign(e),a.assign(n);const s=fL(yL(t,-this.learningRate),r);r.assign(s)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(SD(this.accumulatedGrads.map((e=>e.variable))),SD(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function AL(e,t,n){bO(e);const r={shape:e,value:t,dtype:n=n||uO(t)};return nD.runKernel(LN,{},r)}class OL extends IL{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=nD.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:wD((()=>AL(r.shape,this.initialAccumulatorValue).variable(e)))}}const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedGrads[n].variable;wD((()=>{const e=fL(i,bL(o));i.assign(e);const t=fL(yL(gL(o,vL(fL(e,nD.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&SD(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const NL=pD({pow_:function(e,t){let n=dD(e,"base","pow"),r=dD(t,"exp","pow");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(NR,o)}});const RL=pD({sub_:function(e,t){let n=dD(e,"a","sub"),r=dD(t,"b","sub");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(TP,o)}});class PL extends IL{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],wD((()=>{this.accBeta1=SL(t).variable(),this.accBeta2=SL(n).variable()})),null==r&&(this.epsilon=nD.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);wD((()=>{const n=RL(1,this.accBeta1),r=RL(1,this.accBeta2);t.forEach(((t,o)=>{const i=nD.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:wD((()=>xL(i).variable(false)))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:"".concat(t,"/v"),variable:wD((()=>xL(i).variable(false)))});const a=Array.isArray(e)?e[o].tensor:e[t];if(null==a)return;const s=this.accumulatedFirstMoment[o].variable,l=this.accumulatedSecondMoment[o].variable,c=fL(yL(s,this.beta1),yL(a,1-this.beta1)),u=fL(yL(l,this.beta2),yL(bL(a),1-this.beta2)),d=gL(c,n),h=gL(u,r);s.assign(c),l.assign(u);const p=fL(yL(gL(d,fL(vL(h),this.epsilon)),-this.learningRate),i);i.assign(p)})),this.accBeta1.assign(yL(this.accBeta1,this.beta1)),this.accBeta2.assign(yL(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&SD(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&SD(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),wD((()=>{this.accBeta1.assign(NL(this.beta1,this.iterations_+1)),this.accBeta2.assign(NL(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const ML=pD({abs_:function(e){const t=dD(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return nD.runKernel(oN,e)}{const e={x:t};return nD.runKernel(OO,e)}}});function DL(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r}function LL(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],i=t.length-r-1,a=t[i];(null==o||1===o&&a>1)&&n.unshift(i)}return n}function FL(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let i=e[e.length-o-1];null==i&&(i=1);let a=t[t.length-o-1];if(null==a&&(a=1),1===i)r[n-o-1]=a;else if(1===a)r[n-o-1]=i;else{if(i!==a){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-o-1]=i}}return r}const BL=pD({maximum_:function(e,t){let n=dD(e,"a","maximum"),r=dD(t,"b","maximum");[n,r]=YM(n,r),"bool"===n.dtype&&(n=dL(n,"int32"),r=dL(r,"int32")),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(uR,o)}});class UL extends IL{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],wD((()=>{this.iteration=SL(0).variable(),this.accBeta1=SL(t).variable()})),null==r&&(this.epsilon=nD.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);wD((()=>{const n=RL(1,this.accBeta1),r=gL(-this.learningRate,fL(yL(this.iteration,this.decay),1));t.forEach(((t,o)=>{const i=nD.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:xL(i).variable(false)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:"".concat(t,"/v"),variable:xL(i).variable(false)});const a=Array.isArray(e)?e[o].tensor:e[t];if(null==a)return;const s=this.accumulatedFirstMoment[o].variable,l=this.accumulatedWeightedInfNorm[o].variable,c=fL(yL(s,this.beta1),yL(a,1-this.beta1)),u=yL(l,this.beta2),d=ML(a),h=BL(u,d);s.assign(c),l.assign(h);const p=fL(yL(gL(r,n),gL(c,fL(h,this.epsilon))),i);i.assign(p)})),this.iteration.assign(fL(this.iteration,1)),this.accBeta1.assign(yL(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&SD(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&SD(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class zL extends IL{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=nD.registeredVariables[t];wD((()=>{const e=fL(yL(this.c,r),o);o.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=_D(SL(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class VL extends zL{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=SL(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=nD.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:wD((()=>xL(r).variable(e)))}}const o=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];null!=i&&wD((()=>{let e;const t=fL(yL(this.m,o),i);e=this.useNesterov?fL(yL(this.c,fL(i,yL(t,this.m))),r):fL(yL(this.c,t),r),o.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&SD(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class GL extends IL{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,null==r&&(this.epsilon=nD.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=nD.registeredVariables[t],o=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:wD((()=>xL(r).variable(o)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:wD((()=>xL(r).variable(o)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:wD((()=>xL(r).variable(o)))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;wD((()=>{const e=fL(yL(a,this.decay),yL(bL(i),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=fL(yL(t,this.decay),yL(i,1-this.decay)),l=gL(yL(i,this.learningRate),vL(RL(e,fL(bL(o),this.epsilon)))),c=fL(yL(s,this.momentum),l);a.assign(e),t.assign(o),s.assign(c);const u=RL(r,c);r.assign(u)}else{const e=fL(yL(a,this.decay),yL(bL(i),1-this.decay)),t=fL(yL(s,this.momentum),gL(yL(i,this.learningRate),vL(fL(e,this.epsilon))));a.assign(e),s.assign(t);const n=RL(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&SD(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&SD(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&SD(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const WL=[jL,OL,PL,UL,VL,GL,zL];function HL(e){return new Promise((e=>setTimeout(e))).then(e)}class qL{constructor(e){if(!EO().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(qL.URL_SCHEME)&&(e=e.slice(qL.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=yD.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=ND(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await HL((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await HL((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:PD(e)}}}}qL.URL_SCHEME="downloads://";function XL(e,t,n,r){!function(e){qA(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){qA(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),qA(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),qA(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((i=>(i.then((i=>{const a=n+ ++o/e.length*(r-n);return t(a),i})),i))))}async function YL(e,t){null==t&&(t={});const n=null==t.fetchFunc?EO().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await XL(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await XL(o,t.onProgress,.5,1)}DD.registerSaveRouter((e=>EO().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qL.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new qL(e)}(e.slice(qL.URL_SCHEME.length)):null));class KL{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(qA("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=EO().platform.fetch,qA(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&qA(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=ND(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=yD.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:PD(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(pg){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return RD(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=MD(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?EO().platform.fetch:t.fetchFunc;let o,i=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var a;i<e.length;){if(!o){const n=(await r(e[i],t.requestInit,{isBinary:!0})).body;o=n.getReader()}const{done:s,value:l}=await o.read();if(!s)return void n.enqueue(l);i++,o=void 0,null===(a=t.onProgress)||void 0===a||a.call(t,i/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,i=[],a=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):i.push(o+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const t=await this.getWeightUrls(e);return[MD(e),await YL(t,this.loadOptions)]}}function ZL(e){return null!=e.match(KL.URL_SCHEME_REGEX)}KL.URL_SCHEME_REGEX=/^https?:\/\//;const QL=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>ZL(e))):ZL(e),n)return JL(e,t)}return null};function JL(e,t){return new KL(e,t)}DD.registerSaveRouter(QL),DD.registerLoadRouter(QL);const $L=-2,eF=-1;function tF(e,t,n){const r=e.shape.length;qA(r===t.length,(()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,")."))),qA(r===n.length,(()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")));for(let o=0;o<r;++o)qA(t[o]+n[o]<=e.shape[o],(()=>"Error in slice".concat(r,"D: begin[").concat(o,"] + size[").concat(o,"] ")+"(".concat(t[o]+n[o],") would overflow input.shape[").concat(o,"] (").concat(e.shape[o],")")))}function nF(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function rF(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function oF(e,t,n,r){const o=[...e];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)0===i?o[t]=1:(o.splice(t,0,1),o.pop());return o}function iF(e,t,n){return n<=e?n:n-(t-1)}function aF(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function sF(e,t,n,r,o,i,a,s,l){const c=e.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=lF(a,l,c,r,e),d=cF(s,l,c,o,e),h=oF(i,l,c,e)}else for(let p=0;p<c;p++)u[p]=dF(a,r,i,e,p,l),d[p]=hF(s,o,i,e,p,l),h[p]=uF(i,p,l);return{begin:u,end:d,strides:h}}function lF(e,t,n,r,o){const i=[...o],a=aF(n,t);for(let s=0;s<i.length;s++)if(a.indexOf(s)>-1)i[s]=0;else{const o=iF(t,n,s);let a=r[o];e&1<<o&&(a=0),i[s]=a}return i}function cF(e,t,n,r,o){const i=[...o],a=aF(n,t);for(let s=0;s<i.length;s++)if(a.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const o=iF(t,n,s);let a=r[o];e&1<<o&&(a=Number.MAX_SAFE_INTEGER),i[s]=a}for(let s=0;s<i.length;s++){const e=o[s];i[s]<0&&(i[s]+=e),i[s]=GA(0,i[s],o[s])}return i}function uF(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function dF(e,t,n,r,o,i){let a=t[o];const s=n[o]||1;(e&1<<o||i&1<<o||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[o];return a<0&&(a+=l),a=GA(0,a,l-1),a}function hF(e,t,n,r,o,i){let a=t[o];const s=n[o]||1;(e&1<<o||i&1<<o||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[o];return a<0&&(a+=l),a=s>0?GA(0,a,l):GA(-1,a,l-1),a}function pF(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function fF(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function mF(e,t,n){let r;const o=e.shape.length;let i;return r="number"===typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{qA(-1!==e,(()=>"slice() does not support negative begin indexing."))})),i=null==n?new Array(o).fill(-1):"number"===typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,i=i.map(((t,n)=>t>=0?t:(qA(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-r[n]))),[r,i]}function gF(e,t,n,r,o,i,a,s,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=a&&0!==(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)u&&0!==(1<<b&s)&&d.numAddAxisAfterEllipsis++,1<<b&a&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push($L),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(eF),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);let p=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<e.length;++b){if(0===h.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const t=!!(h.shrinkAxisMask&1<<b),n=e[b];if(-1===n){g.push(t?1:-1);continue}const r=[h.beginMask&1<<b,h.endMask&1<<b],o=[h.strides[b]>0?0:-1,h.strides[b]>0?n:n-1];if(t&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[b];const i=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(t){const e=h.begin[b]<0?n+h.begin[b]:h.begin[b];if(h.begin[b]=e,h.end[b]=h.begin[b]+1,e<0||e>=n)throw Error("slice index ".concat(h.begin[b]," of dimension ").concat(b," out of bounds."))}else h.begin[b]=yF(h.begin[b],0,h.strides[b],n,r,o),h.end[b]=yF(h.end[b],1,h.strides[b],n,r,o);const e=1===h.strides[b]&&0===h.begin[b]&&h.end[b]===n;p=p&&e,f=f&&(0===b&&1===h.strides[b]||e)}else p=p&&1===h.strides[b]&&i,f=f&&(0===b&&1===h.strides[b]||i);let a,s=!1;if(h.beginValid&&h.endValid?(a=h.end[b]-h.begin[b],s=!0):t?(a=1,s=!0):i&&n>=0&&(a=h.strides[b]<0?-n:n,s=!0),s){let e;e=0===a||a<0!==h.strides[b]<0?0:Math.trunc(a/h.strides[b])+(a%h.strides[b]!==0?1:0),g.push(e)}else g.push(-1)}for(let b=0;b<h.finalShapeGatherIndices.length;++b){const e=h.finalShapeGatherIndices[b];e>=0?y.push(g[e]):e===$L&&y.push(1)}const v=y.filter(((e,t)=>h.finalShapeGatherIndices[t]!==$L));return{finalShapeSparse:v,finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function yF(e,t,n,r,o,i){if(o[t])return n>0?i[t]:i[t+1&1];{const t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}const vF=pD({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:dD(e,"x","all","bool")},o={axis:t,keepDims:n};return nD.runKernel(DO,r,o)}});const bF=pD({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:dD(e,"x","any","bool")},o={axis:t,keepDims:n};return nD.runKernel(LO,r,o)}});const xF=pD({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:dD(e,"x","argMax")},r={axis:t};return nD.runKernel(FO,n,r)}});function wF(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0;return kF(e,[...t,e[3]],n,i,r,null,null,PF(o))}function SF(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=CF(t);let c;if("channelsLast"===a)c=[s,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat ".concat(a));c=[s,l,e[1],e[1]]}return kF(e,c,n,r,o,i,!1,a)}function _F(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,c]=IF(t);let u,d;if("NDHWC"===a)d="channelsLast",u=[s,l,c,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat ".concat(a));d="channelsFirst",u=[s,l,c,e[1],e[1]]}return TF(e,u,n,r,o,!1,d,i)}function kF(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,d,c,u]=e}const[h,p,,f]=t,[m,g]=CF(n),[y,v]=CF(r),b=jF(h,y),x=jF(p,v),{padInfo:w,outHeight:S,outWidth:_}=function(e,t,n,r,o,i,a,s,l){let c,u,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=EF(e,t,n));const i=e[0],a=e[1],s=AF((i-t+2*r)/n+1,o),l=AF((a-t+2*r)/n+1,o);return[s,l]}([t,n],i,r,e,s);u=o[0],d=o[1]}else if("same"===e){u=Math.ceil(t/r),d=Math.ceil(n/o);const e=Math.max(0,(u-1)*r+i-t),s=Math.max(0,(d-1)*o+a-n),l=Math.floor(e/2),h=e-l,p=Math.floor(s/2);c={top:l,bottom:h,left:p,right:s-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),d=Math.ceil((n-a+1)/o);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const h="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:h,bottom:p,left:f,right:m,type:0===h&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=AF((t-i+h+p)/r+1,s),d=AF((n-a+f+m)/o+1,s)}}return{padInfo:c,outHeight:u,outWidth:d}}(o,c,u,m,g,b,x,i,s),k=a?f*d:f;let T;return"channelsFirst"===s?T=[l,k,S,_]:"channelsLast"===s&&(T=[l,S,_,k]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:u,inChannels:d,outHeight:S,outWidth:_,outChannels:k,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:e,outShape:T,filterShape:t}}function TF(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,c,u,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,c,u,d,h]=e;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat ".concat(a));[l,h,c,u,d]=e}const[p,f,m,,g]=t,[y,v,b]=IF(n),[x,w,S]=IF(r),_=jF(p,x),k=jF(f,w),T=jF(m,S),{padInfo:E,outDepth:C,outHeight:I,outWidth:j}=function(e,t,n,r,o,i,a,s,l,c,u){let d,h,p,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,o,i){null==o&&(o=EF(e,t[0],r[0]));const a=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*o>=t[s]&&(a[s]=AF((e[s]-t[s]+2*o)/r[s]+1,i));return a}([t,n,r,1],[s,l,c],1,[o,i,a],e,u);h=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{h=Math.ceil(t/o),p=Math.ceil(n/i),f=Math.ceil(r/a);const e=(h-1)*o+s-t,u=(p-1)*i+l-n,m=(f-1)*a+c-r,g=Math.floor(e/2),y=e-g,v=Math.floor(u/2),b=u-v,x=Math.floor(m/2);d={top:v,bottom:b,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(o,c,u,d,y,v,b,_,k,T,s),A=i?g*h:g;let O;return"channelsFirst"===a?O=[l,A,C,I,j]:"channelsLast"===a&&(O=[l,C,I,j,A]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:C,outHeight:I,outWidth:j,outChannels:A,padInfo:E,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:_,effectiveFilterHeight:k,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:e,outShape:O,filterShape:t}}function EF(e,t,n){const r=jF(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function CF(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function IF(e){return"number"===typeof e?[e,e,e]:e}function jF(e,t){return t<=1?e:e+(e-1)*(t-1)}function AF(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function OF(e){const[t,n,r]=CF(e);return 1===t&&1===n&&1===r}function NF(e,t){return OF(e)||OF(t)}function RF(e){return CF(e).every((e=>e>0))}function PF(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function MF(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)qA(QA(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{qA(QA(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}const DF=pD({reshape_:function(e,t){const n={x:dD(e,"x","reshape","string_or_numeric")},r={shape:t};return nD.runKernel(VR,n,r)}});const LF=pD({avgPool_:function(e,t,n,r,o){const i=dD(e,"x","avgPool","float32");qA(NF(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let a=i,s=!1;3===i.rank&&(s=!0,a=DF(i,[1,i.shape[0],i.shape[1],i.shape[2]])),qA(4===a.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(a.rank,"."))),MF("avgPool",r,o);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let u=nD.runKernel(HO,l,c);return u=dL(u,i.dtype),s?DF(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const FF=pD({avgPool3d_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=dD(e,"x","avgPool3d","float32");let s=a,l=!1;4===a.rank&&(l=!0,s=DF(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),qA(5===s.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),qA("NDHWC"===i,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i))),qA("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),MF("avgPool3d",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i};let d=nD.runKernel(XO,c,u);return d=dL(d,s.dtype),l?DF(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const BF=pD({batchNorm_:function(e,t,n,r,o,i){null==i&&(i=.001);const a=dD(e,"x","batchNorm"),s=dD(t,"mean","batchNorm"),l=dD(n,"variance","batchNorm");let c,u;null!=o&&(c=dD(o,"scale","batchNorm")),null!=r&&(u=dD(r,"offset","batchNorm")),qA(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),qA(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),qA(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d=function(e){let t;return t=0===e.rank||1===e.rank?DF(e,[1,1,1,e.size]):2===e.rank?DF(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?DF(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(a),h={x:d,scale:c,offset:u,mean:s,variance:l},p={varianceEpsilon:i},f=nD.runKernel(zN,h,p);return DF(f,a.shape)}});const UF=pD({batchNorm2d_:function(e,t,n,r,o,i){const a=dD(e,"x","batchNorm"),s=dD(t,"mean","batchNorm"),l=dD(n,"variance","batchNorm");let c,u;return null!=o&&(c=dD(o,"scale","batchNorm")),null!=r&&(u=dD(r,"offset","batchNorm")),qA(2===a.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(a.rank,"."))),qA(2===s.rank||1===s.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,"."))),qA(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&qA(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&qA(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),BF(a,s,l,u,c,i)}});const zF=pD({batchNorm3d_:function(e,t,n,r,o,i){const a=dD(e,"x","batchNorm"),s=dD(t,"mean","batchNorm"),l=dD(n,"variance","batchNorm");let c,u;return null!=o&&(c=dD(o,"scale","batchNorm")),null!=r&&(u=dD(r,"offset","batchNorm")),qA(3===a.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(a.rank,"."))),qA(3===s.rank||1===s.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,"."))),qA(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&qA(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&qA(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),BF(a,s,l,u,c,i)}});const VF=pD({batchNorm4d_:function(e,t,n,r,o,i){const a=dD(e,"x","batchNorm"),s=dD(t,"mean","batchNorm"),l=dD(n,"variance","batchNorm");let c,u;return null!=o&&(c=dD(o,"scale","batchNorm")),null!=r&&(u=dD(r,"offset","batchNorm")),qA(4===a.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(a.rank,"."))),qA(4===s.rank||1===s.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,"."))),qA(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&qA(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&qA(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),BF(a,s,l,u,c,i)}});const GF=pD({broadcastTo_:function(e,t){let n=dD(e,"broadcastTo","x");const r=n.shape;if(bO(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=DF(n,e)}const o=n.shape,i=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])i[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));const a=i.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===a.length)return hL(n);const s={x:n},l={reps:i};return nD.runKernel(IP,s,l)}});const WF=pD({clipByValue_:function(e,t,n){const r=dD(e,"x","clipByValue");if(qA(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return AL(r.shape,t,r.dtype);const o={x:r},i={clipValueMin:t,clipValueMax:n};return nD.runKernel(nN,o,i)}});const HF=pD({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;qA(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=hD(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return hL(n[0]);const r=n,o={axis:t};return nD.runKernel(iN,r,o)}});const qF=pD({concat1d_:function(e){return HF(e,0)}});const XF=pD({concat2d_:function(e,t){return HF(e,t)}});const YF=pD({concat3d_:function(e,t){return HF(e,t)}});const KF=pD({concat4d_:function(e,t){return HF(e,t)}});const ZF=pD({conv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=dD(e,"x","conv2d","float32"),l=dD(t,"filter","conv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=DF(s,[1,s.shape[0],s.shape[1],s.shape[2]])),qA(4===c.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,"."))),qA(4===l.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."))),MF("conv2d",r,a);const d="NHWC"===o?c.shape[3]:c.shape[1];qA(d===l.shape[2],(()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],"."))),qA(NF(n,i),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'"))),qA(RF(i),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),qA(RF(n),(()=>"Error in conv2D: Strides should be larger than 0."));const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:a},f=nD.runKernel(aN,h,p);return u?DF(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const QF=pD({conv1d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const s=dD(e,"x","conv1d"),l=dD(t,"filter","conv1d");let c=s,u=!1;2===s.rank&&(u=!0,c=DF(s,[1,s.shape[0],s.shape[1]])),qA(3===c.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,"."))),qA(3===l.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,"."))),MF("conv1d",r,a),qA(c.shape[2]===l.shape[1],(()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],"."))),qA(NF(n,i),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'"))),qA(RF(i),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),qA(RF(n),(()=>"Error in conv1D: Stride should be larger than 0.")),qA("NWC"===o,(()=>"Error in conv1d: got dataFormat of ".concat(o," but only NWC is currently supported.")));const d=DF(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=DF(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=ZF(h,d,[1,n],r,"NHWC",[1,i],a);return DF(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const JF=pD({conv2DBackpropInput_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0;qA(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let s=e,l=t,c=!1;3===t.rank&&(c=!0,l=DF(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),qA(4===s.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,"."))),qA(4===l.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank))),qA(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const u="NHWC"===i?s[3]:s[1],d="NHWC"===i?l.shape[3]:l.shape[1];qA(u===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),qA(d===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),MF("conv2dDerInput",o,a);const h={dy:l,filter:n},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:a,inputShape:s},f=nD.runKernel(lN,h,p);return c?DF(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const $F=pD({conv2dTranspose_:function(e,t,n,r,o,i){const a=dD(e,"x","conv2dTranspose"),s=dD(t,"filter","conv2dTranspose");return JF(n,a,s,r,o,"NHWC",i)}});const eB=pD({conv3d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const a=dD(e,"x","conv3d"),s=dD(t,"filter","conv3d");let l=a,c=!1;4===a.rank&&(c=!0,l=DF(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),qA(5===l.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,"."))),qA(5===s.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,"."))),qA(l.shape[4]===s.shape[3],(()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],"."))),qA(NF(n,i),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'"))),qA("NDHWC"===o,(()=>"Error in conv3d: got dataFormat of ".concat(o," but only NDHWC is currently supported."))),qA(RF(i),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),qA(RF(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:l,filter:s},d={strides:n,pad:r,dataFormat:o,dilations:i},h=nD.runKernel(cN,u,d);return c?DF(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const tB=pD({conv3DBackpropInput_:function(e,t,n,r,o){qA(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let i=e,a=t,s=!1;4===t.rank&&(s=!0,a=DF(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);const l=i[4],c=a.shape[4];qA(5===i.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,"."))),qA(5===a.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(a.rank))),qA(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),qA(l===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),qA(c===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const u={dy:a,filter:n},d={pad:o,strides:r,inputShape:i},h=nD.runKernel(dN,u,d);return s?DF(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const nB=pD({conv3dTranspose_:function(e,t,n,r,o){const i=dD(e,"x","conv3dTranspose"),a=dD(t,"filter","conv3dTranspose");return tB(n,i,a,r,o)}});const rB=pD({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=dD(e,"x","denseBincount"),i=dD(t,"weights","denseBincount");qA("int32"===o.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(o.dtype))),qA(o.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(o.rank,"."))),qA(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),qA(i.size===o.size||0===i.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(o.shape,", weights shape: ")+"".concat(i.shape,".")));const a={x:o,weights:i},s={size:n,binaryOutput:r};return nD.runKernel(yN,a,s)}});const oB=pD({depthwiseConv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=dD(e,"x","depthwiseConv2d","float32"),l=dD(t,"filter","depthwiseConv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=DF(s,[1,s.shape[0],s.shape[1],s.shape[2]])),qA(4===c.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,"."))),qA(4===l.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")));const d="NHWC"===o?c.shape[3]:c.shape[1];qA(d===l.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],"."))),MF("depthwiseConv2d",r,a);const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:a},f=nD.runKernel(bN,h,p);return u?DF(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const iB=pD({elu_:function(e){const t={x:dD(e,"x","elu","float32")};return nD.runKernel(jN,t)}});const aB=pD({equal_:function(e,t){let n=dD(e,"a","equal","string_or_numeric"),r=dD(t,"b","equal","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(NN,o)}});const sB=pD({exp_:function(e){const t={x:dD(e,"x","exp")};return nD.runKernel(RN,t)}});const lB=pD({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=dD(e,"x","expandDims","string_or_numeric");qA(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},o={dim:t};return nD.runKernel(PN,r,o)}});const cB=pD({tile_:function(e,t){const n=dD(e,"x","tile","string_or_numeric");qA(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const r={x:n},o={reps:t};return nD.runKernel(IP,r,o)}});const uB=pD({eye_:function(e,t,n){null==t&&(t=e);const r=uL([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),o=e<=t?e:t;for(let a=0;a<o;++a)r.set(1,a,a);const i=DF(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return cB(lB(i,0),[n[0],1,1]);if(2===n.length)return cB(lB(lB(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return cB(lB(lB(lB(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const dB=pD({floor_:function(e){const t={x:dD(e,"x","floor","float32")};return nD.runKernel(BN,t)}});const hB=pD({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o={x:dD(e,"x","gather"),indices:dD(t,"indices","gather","int32")},i={axis:n,batchDims:r};return nD.runKernel(VN,o,i)}});const pB=pD({greater_:function(e,t){let n=dD(e,"a","greater","string_or_numeric"),r=dD(t,"b","greater","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(WN,o)}});const fB=pD({greaterEqual_:function(e,t){let n=dD(e,"a","greaterEqual","string_or_numeric"),r=dD(t,"b","greaterEqual","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(HN,o)}});const mB=pD({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:dD(e,"x","leakyRelu")},r={alpha:t};return nD.runKernel(JN,n,r)}});const gB=pD({log_:function(e){const t={x:dD(e,"x","log","float32")};return nD.runKernel(nR,t)}});const yB=pD({log1p_:function(e){const t={x:dD(e,"x","log1p")};return nD.runKernel(rR,t)}});const vB=pD({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:dD(e,"x","max")},o={reductionIndices:t,keepDims:n};return nD.runKernel(cR,r,o)}});const bB=pD({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=dD(e,"x","sum");"bool"===r.dtype&&(r=dL(r,"int32"));const o={x:r},i={axis:t,keepDims:n};return nD.runKernel(cP,o,i)}});const xB=pD({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=dD(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=wL(((e,n)=>{const r=vB(e,t,!0),o=RL(e,r),i=RL(dL(o,"float32"),gB(bB(sB(o),t,!0)));n([i]);return{value:i,gradFunc:(e,n)=>{const[r]=n,o=sB(r);return RL(e,yL(bB(e,t,!0),o))}}}));return r(n)}});function wB(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function SB(e,t,n){const r=e.length+t.length,o=[];let i=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[i++]):o.push(t[a++]);return o}function _B(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((t=>e[t]))]}function kB(e,t){return SB(e,t.map((e=>1)),t)}function TB(e,t,n){qA(wB(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function EB(e,t){if(wB(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function CB(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function IB(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const jB=pD({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=dD(e,"x","logSumExp"),o=nO(t,r.shape),i=vB(r,o,!0),a=RL(r,i),s=sB(a),l=bB(s,o),c=gB(l),u=fL(DF(i,c.shape),c);if(n){const e=kB(u.shape,o);return DF(u,e)}return u}});const AB=pD({logicalAnd_:function(e,t){const n=dD(e,"a","logicalAnd","bool"),r=dD(t,"b","logicalAnd","bool");FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(oR,o)}});const OB=pD({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=dD(e,"a","matMul"),i=dD(t,"b","matMul");[o,i]=YM(o,i);const a={a:o,b:i},s={transposeA:n,transposeB:r};return nD.runKernel(KO,a,s)}});const NB=pD({maxPool_:function(e,t,n,r,o){const i=dD(e,"x","maxPool");let a=i,s=!1;3===i.rank&&(s=!0,a=DF(i,[1,i.shape[0],i.shape[1],i.shape[2]])),qA(4===a.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.rank,"."))),qA(NF(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),MF("maxPool",r,o);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o},u=nD.runKernel(dR,l,c);return s?DF(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const RB=pD({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=dD(e,"x","maxPool3d");let s=a,l=!1;4===a.rank&&(l=!0,s=DF(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),qA(5===s.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),qA("NDHWC"===i,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i))),MF("maxPool3d",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=nD.runKernel(pR,c,u);return l?DF(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const PB=pD({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:dD(e,"x","mean")},o={axis:t,keepDims:n};return nD.runKernel(gR,r,o)}});const MB=pD({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:dD(e,"x","min")},o={axis:t,keepDims:n};return nD.runKernel(yR,r,o)}});const DB=pD({minimum_:function(e,t){let n=dD(e,"a","minimum"),r=dD(t,"b","minimum");[n,r]=YM(n,r),"bool"===n.dtype&&(n=dL(n,"int32"),r=dL(r,"int32")),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(vR,o)}});const LB=pD({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=nO(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=dD(e,"x","moments")).shape),r=PB(e,n,t);let o=r.shape;t||(o=kB(r.shape,n));const i=bL(RL(dL(e,"float32"),DF(r,o)));return{mean:r,variance:PB(i,n,t)}}});const FB=pD({neg_:function(e){const t={x:dD(e,"x","neg")};return nD.runKernel(_R,t)}});const BB=pD({notEqual_:function(e,t){let n=dD(e,"a","notEqual","string_or_numeric"),r=dD(t,"b","notEqual","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(kR,o)}});const UB=pD({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const i={indices:dD(e,"indices","oneHot","int32")},a={dtype:o,depth:t,onValue:n,offValue:r};return nD.runKernel(jR,i,a)}});function zB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(bO(e),"complex64"===t){const t=zB(e,"float32"),n=zB(e,"float32");return fD(t,n)}const n=yO(KA(e),t);return nD.makeTensor(n,e,t)}function VB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(bO(e),"complex64"===t){const t=VB(e,"float32"),n=zB(e,"float32");return fD(t,n)}const n=gO(KA(e),t);return nD.makeTensor(n,e,t)}const GB=pD({onesLike_:function(e){const t={x:dD(e,"x","onesLike")};return nD.runKernel(IR,t)}});const WB=pD({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=dD(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},i={x:r};return nD.runKernel(OR,i,o)}});const HB=pD({prelu_:function(e,t){const n={x:dD(e,"x","prelu"),alpha:dD(t,"alpha","prelu")};return nD.runKernel(RR,n)}});var qB=r(8046);class XB{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=o||Math.random();this.random=qB.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,i;do{r=2*this.random()-1,o=2*this.random()-1,i=r*r+o*o}while(i>=1||0===i);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*o*a,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class YB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=qB.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const KB=pD({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(bO(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const i=new XB(t,n,r,!1,o),a=uL(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});const ZB=pD({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;bO(e);const i=uL(e,r),a=new YB(t,n,null,o);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});function QB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:r};return nD.runKernel(FR,{},o)}const JB=pD({relu_:function(e){const t={x:dD(e,"x","relu")};return nD.runKernel(zR,t)}});const $B=pD({reverse_:function(e,t){const n={x:dD(e,"x","reverse")},r={dims:t};return nD.runKernel(YR,n,r)}});const eU=pD({selu_:function(e){const t={x:dD(e,"x","selu")};return nD.runKernel(tP,t)}});const tU=pD({separableConv2d_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=dD(e,"x","separableConv2d"),l=dD(t,"depthwiseFilter","separableConv2d"),c=dD(n,"pointwiseFilter","separableConv2d");let u=s,d=!1;if(3===s.rank&&(d=!0,u=DF(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");qA(4===u.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),qA(4===l.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),qA(4===c.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),qA(1===c.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],"."))),qA(1===c.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")));const h=l.shape[2],p=l.shape[3];qA(c.shape[2]===h*p,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(c.shape[2],".")));const f=oB(u,l,r,o,a,i),m=ZF(f,c,1,"valid",a);return d?DF(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const nU=pD({sigmoid_:function(e){const t={x:dD(e,"x","sigmoid","float32")};return nD.runKernel(aP,t)}});const rU=pD({slice_:function(e,t,n){const r=dD(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const o={x:r},i={begin:t,size:n};return nD.runKernel(nP,o,i)}});const oU=pD({slice1d_:function(e,t,n){const r=dD(e,"x","slice1d");return qA(1===r.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor"))),rU(r,[t],[n])}});const iU=pD({slice2d_:function(e,t,n){const r=dD(e,"x","slice2d");return qA(2===r.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor"))),rU(r,t,n)}});const aU=pD({slice3d_:function(e,t,n){const r=dD(e,"x","slice3d");return qA(3===r.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor"))),rU(r,t,n)}});const sU=pD({slice4d_:function(e,t,n){const r=dD(e,"x","slice4d");return qA(4===r.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor"))),rU(r,t,n)}});const lU=pD({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=dD(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},o={dim:t};return nD.runKernel(hP,r,o)}});const cU=pD({softplus_:function(e){const t={x:dD(e,"x","softplus")};return nD.runKernel(sP,t)}});const uU=pD({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:dD(e,"x","split")},o={numOrSizeSplits:t,axis:n};return nD.runKernel(dP,r,o)}});const dU=pD({squeeze_:function(e,t){const n=dD(e,"x","squeeze","string_or_numeric");return DF(n,rO(n.shape,t).newShape)}});const hU=pD({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=hD(e,"tensors","stack","string_or_numeric");qA(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&qA(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,o={axis:t};return nD.runKernel(AR,r,o)}});const pU=pD({tanh_:function(e){const t={x:dD(e,"x","tanh","float32")};return nD.runKernel(CP,t)}});function fU(e,t){YA(e);const n=lD(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return mD(e,null,n,t)}function mU(e,t,n){if(YA(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=lD(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return mD(e,t,r,n)}const gU=pD({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(bO(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const i=new XB(t,n,r,!0,o),a=uL(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});const yU=pD({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=dD(e,"x","unstack","string_or_numeric");qA(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const r={value:n},o={axis:t};return nD.runKernel(RP,r,o)}});const vU=pD({where_:function(e,t,n){const r=dD(t,"a","where"),o=dD(n,"b","where"),i=dD(e,"condition","where","bool"),a=FL(FL(i.shape,r.shape),o.shape),s={condition:GF(i,a),t:GF(r,a),e:GF(o,a)};return nD.runKernel(eP,s)}});const bU=pD({imag_:function(e){const t={input:dD(e,"input","imag")};return nD.runKernel(YN,t)}});const xU=pD({real_:function(e){const t={input:dD(e,"input","real")};return nD.runKernel(BR,t)}});const wU=pD({transpose_:function(e,t,n){const r=dD(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),qA(r.rank===t.length,(()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{qA(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)))})),r.rank<=1)return r.clone();const o={x:r},i={perm:t};return"complex64"===r.dtype?wD((()=>{let e=xU(r),t=bU(r);return e=nD.runKernel(OP,{x:e},i),t=nD.runKernel(OP,{x:t},i),n&&(t=FB(t)),fD(e,t)})):nD.runKernel(OP,o,i)}});const SU=pD({dropout_:function(e,t,n,r){const o=dD(e,"x","dropout");if(qA("float32"===o.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(o.dtype," tensor instead."))),qA(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof MM?o.clone():o;const i=function(e,t){if(null==t)return e.shape.slice();if(ZA(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),a=1-t,s=gL(dB(fL(ZB(i,0,1,"float32",r),a)),a);return yL(o,s)}});const _U=pD({fft_:function(e){qA("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return nD.runKernel(DN,t)}});const kU=pD({rfft_:function(e,t){qA("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const r=e.size/n;let o;if(null!=t&&t<n){const r=e.shape.map((e=>0)),i=e.shape.map((e=>e));i[e.shape.length-1]=t,o=rU(e,r,i),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,o=HF([e,zB(r)],e.shape.length-1),n=t}else o=e;const i=xL(o),a=DF(fD(o,i),[r,n]),s=_U(a),l=Math.floor(n/2)+1,c=xU(s),u=bU(s),d=uU(c,[l,n-l],c.shape.length-1),h=uU(u,[l,n-l],u.shape.length-1),p=o.shape.slice();return p[o.shape.length-1]=l,DF(fD(d[0],h[0]),p)}});const TU=pD({ifft_:function(e){qA("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return nD.runKernel(XN,t)}});const EU=pD({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const o=DF(e,[n,t]);r=TU(o)}else{const o=[n,2*(t-1)],i=DF(xU(e),[n,t]),a=DF(bU(e),[n,t]),s=$B(rU(i,[0,1],[n,t-2]),1),l=yL($B(rU(a,[0,1],[n,t-2]),1),SL(-1)),c=HF([i,s],1),u=HF([a,l],1),d=DF(fD(c,u),[o[0],o[1]]);r=TU(d)}if(r=xU(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=DF(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const CU=pD({conv2DBackpropFilter_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=DF(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=DF(t,[1,t.shape[0],t.shape[1],t.shape[2]])),qA(4===s.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,"."))),qA(4===l.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,"."))),qA(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const c="NHWC"===i?s.shape[3]:s.shape[1],u="NHWC"===i?l.shape[3]:l.shape[1];qA(c===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],"."))),qA(u===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],")."))),MF("conv2dDerFilter",o,a);const d={x:s,dy:l},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:a,filterShape:n};return nD.runKernel(sN,d,h)}});const IU=pD({relu6_:function(e){const t={x:dD(e,"x","relu6")};return nD.runKernel(XR,t)}});const jU=pD({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:dD(e,"x","step")},r={alpha:t};return nD.runKernel(DP,n,r)}});function AU(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return yL(e,jU(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function OU(e,t){let n=t;const r=LL(e.shape,t.shape);return r.length>0&&(n=bB(n,r)),DF(n,e.shape)}function NU(e,t,n,r){if("linear"===t)return e;if("relu"===t)return JB(e);if("elu"===t)return iB(e);if("relu6"===t)return IU(e);if("prelu"===t)return HB(e,n);if("leakyrelu"===t)return mB(e,r);if("sigmoid"===t)return nU(e);throw new Error("Unknown fused activation ".concat(t,"."))}const RU=(e,t)=>!(e>0)||"linear"===t;const PU=pD({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}=e;if(c=c||"linear",!1===RU(nD.state.gradientDepth,c)){qA("NHWC"===i,(()=>"Error in fused conv2d: got dataFormat of ".concat(i," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=ZF(t,n,r,o,i,a,s);return null!=l&&(e=fL(e,l)),NU(e,c,u,d)}const h=dD(t,"x","conv2d","float32"),p=dD(n,"filter","conv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=DF(h,[1,h.shape[0],h.shape[1],h.shape[2]])),qA(4===f.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,"."))),qA(4===p.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,"."))),MF("fused conv2d",o,s);const g="NHWC"===i?f.shape[3]:f.shape[1];qA(p.shape[2]===g,(()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],"."))),qA(NF(r,a),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(a,"'")));const y=kF(f.shape,p.shape,r,a,o,s);let v,b;if(null!=l&&(v=dD(l,"bias","fused conv2d"),[v]=YM(v,h),"NHWC"===i?FL(y.outShape,v.shape):(qA(v.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,"."))),qA(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")"))))),null!=u){const e=u.shape;if(qA(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)qA(1===e[0]||e[0]===y.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,").")));else if(3===e.length)try{FL(e,y.outShape)}catch(pg){const n="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(n)}b=dD(u,"prelu weights","fused conv2d")}const x=(e,t)=>{qA("NHWC"===i,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(i," but only NHWC is currently supported.")));const[n,s,l,u]=t,d=AU(e,l,c);qA(OF(a),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(a,"'")));const h=[JF(s.shape,d,n,r,o),CU(s,d,n.shape,r,o)];if(null!=u){const e=OU(u,d);h.push(e)}return h},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:r,pad:o,dataFormat:i,dilations:a,dimRoundingMode:s,activation:c,leakyreluAlpha:d};if(null==l){const e=wL(((e,t,n)=>{let r=nD.runKernel(UP,w,S);return n([t,e,r]),m&&(r=DF(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(f,p)}{const e=wL(((e,t,n,r)=>{let o=nD.runKernel(UP,w,S);return r([t,e,o,n]),m&&(o=DF(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:x}}));return e(f,p,v)}}});const MU=pD({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=DF(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=DF(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:s,dy:l},u={strides:r,pad:o,dimRoundingMode:a,dilations:i,filterShape:n};return nD.runKernel(xN,c,u)}});const DU=pD({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=DF(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:s,filter:n},u={strides:r,pad:o,dimRoundingMode:a,dilations:i,inputShape:e},d=nD.runKernel(wN,c,u);return l?DF(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const LU=pD({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:o=!1,bias:i,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===RU(nD.state.gradientDepth,a)){let e=OB(t,n,r,o);return null!=i&&(e=fL(e,i)),NU(e,a,s,l)}let c=dD(t,"a","fused matMul"),u=dD(n,"b","fused matMul");[c,u]=YM(c,u);const d=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=o?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=o?u.shape[u.rank-2]:u.shape[u.rank-1],m=c.shape.slice(0,-2),g=u.shape.slice(0,-2),y=KA(m),v=KA(g);qA(d===h,(()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const b=FL(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),x=DF(c,r?[y,d,p]:[y,p,d]),w=DF(u,o?[v,f,h]:[v,h,f]);let S,_;null!=i&&(S=dD(i,"bias","fused matMul"),[S]=YM(S,c),FL(b,S.shape)),null!=s&&(_=dD(s,"prelu weights","fused matMul"));const k=(e,t)=>{const[n,s,l,c]=t,u=AU(DF(e,l.shape),l,a);let d,h;if(r||o?!r&&o?(d=OB(u,s,!1,!1),h=OB(u,n,!0,!1)):r&&!o?(d=OB(s,u,!1,!0),h=OB(n,u,!1,!1)):(d=OB(s,u,!0,!0),h=OB(u,n,!0,!0)):(d=OB(u,s,!1,!0),h=OB(n,u,!0,!1)),null!=i){return[d,h,OU(c,u)]}return[d,h]},T={a:x,b:w,bias:S,preluActivationWeights:_},E={transposeA:r,transposeB:o,activation:a,leakyreluAlpha:l};if(null==i){const e=wL(((e,t,n)=>{const r=nD.runKernel(BP,T,E);return n([e,t,r]),{value:DF(r,b),gradFunc:k}}));return e(x,w)}{const e=wL(((e,t,n,r)=>{const o=nD.runKernel(BP,T,E);return r([e,t,o,n]),{value:DF(o,b),gradFunc:k}}));return e(x,w,S)}}});const FU=pD({cropAndResize_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=dD(e,"image","cropAndResize"),s=dD(t,"boxes","cropAndResize","float32"),l=dD(n,"boxInd","cropAndResize","int32"),c=s.shape[0];qA(4===a.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(a.rank,"."))),qA(2===s.rank&&4===s.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,"."))),qA(1===l.rank&&l.shape[0]===c,(()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,"."))),qA(2===r.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,"."))),qA(r[0]>=1&&r[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(r))),qA("bilinear"===o||"nearest"===o,(()=>"method must be bilinear or nearest, but was ".concat(o)));const u={image:a,boxes:s,boxInd:l},d={method:o,extrapolationValue:i,cropSize:r};return nD.runKernel(gN,u,d)}});const BU=pD({flipLeftRight_:function(e){const t=dD(e,"image","flipLeftRight","float32");qA(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return nD.runKernel(FN,n,{})}});const UU=pD({grayscaleToRGB_:function(e){const t=dD(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];qA(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),qA(1===r,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,cB(t,o)}});const zU=pD({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(((e,t)=>dD(e,"tensors".concat(t),"einsum"))),i={equation:e};return nD.runKernel(IN,o,i)}});const VU=pD({rgbToGrayscale_:function(e){const t=dD(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];qA(t.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),qA(3===r,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")));const o=t.dtype,i=dL(t,"float32"),a=fU([.2989,.587,.114]);let s;switch(t.rank){case 2:s=zU("ij,j->i",i,a);break;case 3:s=zU("ijk,k->ij",i,a);break;case 4:s=zU("ijkl,l->ijk",i,a);break;case 5:s=zU("ijklm,m->ijkl",i,a);break;case 6:s=zU("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return s=lB(s,-1),dL(s,o)}});const GU=pD({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=dD(e,"image","rotateWithOffset","float32");qA(4===o.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(o.rank,".")));const i={image:o},a={radians:t,fillValue:n,center:r};return nD.runKernel(FP,i,a)}});function WU(e,t,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);const a=e.shape[0];return n=Math.min(n,a),qA(0<=r&&r<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'"))),qA(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),qA(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),qA(1===t.rank,(()=>"scores must be a 1D tensor")),qA(t.shape[0]===a,(()=>"scores has incompatible shape with boxes. Expected ".concat(a,", ")+"but was ".concat(t.shape[0]))),qA(0<=i&&i<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'"))),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}const HU=pD({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=dD(e,"boxes","nonMaxSuppression","float32"),a=dD(t,"scores","nonMaxSuppression","float32"),s=WU(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return nD.runKernel(TR,{boxes:i,scores:a},l)}});function qU(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,i=0,a=!1;for(;r<o;){i=r+(o-r>>>1);const s=n(t,e[i]);s>0?r=i+1:(o=i,a=!s)}return a?r:-r-1}(e,t,n||XU)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function XU(e,t){return e>t?1:e<t?-1:0}function YU(e,t,n,r,o){return QU(e,t,n,r,o,0)}function KU(e,t,n,r,o,i){return QU(e,t,n,r,o,0,!1,i,!0)}function ZU(e,t,n,r,o,i){return QU(e,t,n,r,o,i,!0)}function QU(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let g=0;g<t.length;g++)t[g]>o&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(ez);const u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:i,suppressBeginIndex:a}=t;if(n<o)break;let s=!1;for(let l=d.length-1;l>=a;--l){const n=JU(e,i,d[l]);if(n>=r){s=!0;break}if(t.score=t.score*$U(r,u,n),t.score<=o)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(i),h.push(t.score)):t.score>o&&qU(c,t,ez))}const p=d.length,f=n-p;s&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const m={selectedIndices:d};return a&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function JU(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),p=(s-i)*(l-a),f=(d-c)*(h-u);if(p<=0||f<=0)return 0;const m=Math.max(i,c),g=Math.max(a,u),y=Math.min(s,d),v=Math.min(l,h),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function $U(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function ez(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const tz=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=dD(e,"boxes","nonMaxSuppressionAsync"),a=dD(t,"scores","nonMaxSuppressionAsync"),s=WU(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l=await Promise.all([i.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:d}=YU(c,u,n,r,o);return i!==e&&i.dispose(),a!==t&&a.dispose(),fU(d,"int32")};const nz=pD({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=dD(e,"boxes","nonMaxSuppression"),s=dD(t,"scores","nonMaxSuppression"),l=WU(a,s,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:a,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=nD.runKernel(CR,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}});const rz=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=dD(e,"boxes","nonMaxSuppressionAsync"),s=dD(t,"scores","nonMaxSuppressionAsync"),l=WU(a,s,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([a.data(),s.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=ZU(u,d,n,r,o,i);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:fU(h,"int32"),selectedScores:fU(p)}};const oz=pD({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=dD(e,"boxes","nonMaxSuppression"),s=dD(t,"scores","nonMaxSuppression"),l=WU(a,s,n,r,o,null),c={boxes:a,scores:s},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i},d=nD.runKernel(ER,c,u);return{selectedIndices:d[0],validOutputs:d[1]}}});const iz=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=dD(e,"boxes","nonMaxSuppressionAsync"),s=dD(t,"scores","nonMaxSuppressionAsync"),l=WU(a,s,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:m}=KU(h,p,c,u,d,i);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:fU(f,"int32"),validOutputs:SL(m,"int32")}};const az=pD({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=dD(e,"images","resizeBilinear");qA(3===o.rank||4===o.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),qA(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),qA(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let i=o,a=!1;3===o.rank&&(a=!0,i=DF(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=nD.runKernel(HR,s,l);return a?DF(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const sz=pD({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=dD(e,"images","resizeNearestNeighbor");qA(3===o.rank||4===o.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),qA(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),qA("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),qA(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let i=o,a=!1;3===o.rank&&(a=!0,i=DF(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=nD.runKernel(GR,s,l);return a?DF(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const lz=pD({bincount_:function(e,t,n){const r=dD(e,"x","bincount"),o=dD(t,"weights","bincount");qA("int32"===r.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype))),qA(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),qA(o.size===r.size||0===o.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(o.shape,".")));const i={x:r,weights:o},a={size:n};return nD.runKernel(QO,i,a)}});const cz=pD({lessEqual_:function(e,t){let n=dD(e,"a","lessEqual","string_or_numeric"),r=dD(t,"b","lessEqual","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(eR,o)}});const uz=pD({round_:function(e){const t={x:dD(e,"x","round")};return nD.runKernel(KR,t)}});const dz=pD({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=dD(e,"image","threshold"),i=o.shape[0]*o.shape[1];let a,s,l,c,u=yL(fU([r]),255);if(qA(3===o.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(o.rank,"."))),qA(3===o.shape[2]||1===o.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(o.shape[2],"."))),qA("int32"===o.dtype||"float32"===o.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(o.dtype,"."))),qA("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===o.shape[2]){[a,s,l]=uU(o,[1,1,1],-1);const e=yL(a,.2989),t=yL(s,.587),n=yL(l,.114);c=fL(fL(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,o,i,a,s,l=fU([-1]),c=fU([0]),u=fU([0]);for(let d=0;d<e.size-1;d++){n=rU(e,0,d+1),r=rU(e,d+1),a=gL(bB(n),t),s=gL(bB(r),t);const h=bB(yL(n,QB(0,n.size)));o=gL(h,bB(n));const p=AL(r.shape,n.size),f=fL(QB(0,r.size),p),m=yL(r,f);i=gL(bB(m),bB(r));const g=RL(o,i),y=RL(o,i),v=yL(a,s);u=yL(yL(v,g),y);const b=pB(u,c);c=vU(b,u,c),l=vU(b,fU([d]),l)}return l}(lz(dL(uz(c),"int32"),gD([]),256),i)}const d=n?cz(c,u):pB(c,u);return dL(yL(d,255),"int32")}});const hz=pD({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;const a=dD(e,"image","transform","float32"),s=dD(t,"transforms","transform","float32");qA(4===a.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(a.rank,"."))),qA(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),qA(null==i||2===i.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")));const l={image:a,transforms:s},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return nD.runKernel(AP,l,c)}});const pz=pD({less_:function(e,t){let n=dD(e,"a","less","string_or_numeric"),r=dD(t,"b","less","string_or_numeric");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel($N,o)}});const fz=pD({bandPart_:function(e,t,n){const r=dD(e,"a","bandPart");qA(r.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")));const o=r.shape,[i,a]=r.shape.slice(-2);let s,l;"number"===typeof t?(qA(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),qA(t<=i,(()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(i,")."))),s=dD(t<0?i:t,"numLower","bandPart")):(qA("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=vU(pz(t,0),i,DB(t,i))),"number"===typeof n?(qA(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),qA(n<=a,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(a,")."))),l=dD(n<0?a:n,"numUpper","bandPart")):(qA("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=vU(pz(n,0),a,DB(n,a)));const c=DF(QB(0,i,1,"int32"),[-1,1]),u=QB(0,a,1,"int32"),d=RL(c,u),h=AB(cz(d,s),fB(d,FB(l))),p=zB([i,a],r.dtype);return DF(hU(yU(DF(r,[-1,i,a])).map((e=>vU(h,e,p)))),o)}});function mz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return ML(e);if(1!==e.rank&&null===n)return mz(DF(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return bB(ML(e),n);if(t===1/0)return vB(ML(e),n);if(t===-1/0)return MB(ML(e),n);if("euclidean"===t||2===t)return vL(bB(NL(ML(e),SL(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return vB(bB(ML(e),n[0]),n[1]-1);if(t===1/0)return vB(bB(ML(e),n[1]),n[0]);if(t===-1/0)return MB(bB(ML(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return vL(bB(bL(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const gz=pD({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=mz(e=dD(e,"x","norm"),t,n);let i=o.shape;if(r){const t=nO(n,e.shape);i=kB(o.shape,t)}return DF(o,i)}});const yz=pD({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,qA(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)qA(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=uU(e,e.shape[0],0).map((e=>dU(e,[0])));qA(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],r=e;for(let o=0;o<e.length;++o)n.push(nD.tidy((()=>{let e=r[o];if(o>0)for(let t=0;t<o;++t){const r=yL(bB(yL(n[t],e)),n[t]);e=RL(e,r)}return gL(e,gz(e,"euclidean"))})));return t?hU(n,0):n}});function vz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return nD.tidy((()=>{qA(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],r=e.shape[1];let o=uB(n),i=hL(e);const a=mU([[1]],[1,1]);let s=hL(a);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=i,l=s,c=o;[s,i,o]=nD.tidy((()=>{const t=rU(i,[e,e],[n-e,1]),l=gz(t),c=rU(i,[e,e],[1,1]),u=vU(pB(c,0),mU([[-1]]),mU([[1]])),d=RL(c,yL(u,l)),h=gL(t,d);s=1===h.shape[0]?hL(a):HF([a,rU(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=FB(gL(OB(u,d),l)),f=rU(i,[e,0],[n-e,r]),m=yL(p,s),g=wU(s);if(0===e)i=RL(f,OB(m,OB(g,f)));else{const t=RL(f,OB(m,OB(g,f)));i=HF([rU(i,[0,0],[e,r]),t],0)}const y=wU(m),v=rU(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=RL(v,OB(OB(v,s),y));else{const t=RL(v,OB(OB(v,s),y));o=HF([rU(o,[0,0],[n,e]),t],1)}return[s,i,o]})),SD([t,l,c])}return!t&&n>r&&(o=rU(o,[0,0],[n,r]),i=rU(i,[0,0],[r,r])),[o,i]}))}const bz=pD({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(qA(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return vz(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=yU(DF(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];r.forEach((e=>{const[n,r]=vz(e,t);o.push(n),i.push(r)}));return[DF(hU(o,0),e.shape),DF(hU(i,0),e.shape)]}}});var xz;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(xz||(xz={}));const wz=pD({squaredDifference_:function(e,t){let n=dD(e,"a","squaredDifference"),r=dD(t,"b","squaredDifference");[n,r]=YM(n,r),FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(vP,o,{})}});const Sz={flipLeftRight:BU,grayscaleToRGB:UU,resizeNearestNeighbor:sz,resizeBilinear:az,rgbToGrayscale:VU,rotateWithOffset:GU,cropAndResize:FU,nonMaxSuppression:HU,nonMaxSuppressionAsync:tz,nonMaxSuppressionWithScore:nz,nonMaxSuppressionWithScoreAsync:rz,nonMaxSuppressionPadded:oz,nonMaxSuppressionPaddedAsync:iz,threshold:dz,transform:hz},_z={bandPart:fz,gramSchmidt:yz,qr:bz};const kz=class{static sgd(e){return new zL(e)}static momentum(e,t){return new VL(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new GL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new PL(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new jL(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new UL(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new OL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},Tz="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function Ez(){return new Promise((e=>Tz((()=>e()))))}function Cz(e,t){const n=e[0].length;e.forEach(((e,t)=>{qA(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),qA(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const r=e[0];e.forEach(((e,o)=>{for(let i=0;i<n;i++)qA(i===t||e[i]===r[i],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(o,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(o,".")))}))}function Iz(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var jz;function Az(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let o=1;o<n.length;++o){const i=n[o],a=r[r.length-n.length+o],s=r[a];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(o+e,"] = ").concat(i," but shape[").concat(o+e,"] = ").concat(s))}else r[a]=i}return r}function Oz(e){const t={FIRST_DIM_SIZE:jz.FIRST_DIM_SIZE,VALUE_ROWIDS:jz.VALUE_ROWIDS,ROW_LENGTHS:jz.ROW_LENGTHS,ROW_SPLITS:jz.ROW_SPLITS,ROW_LIMITS:jz.ROW_LIMITS,ROW_STARTS:jz.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function Nz(e){return 0===e.length?0:e[0]===jz.FIRST_DIM_SIZE?e.length-1:e.length}function Rz(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let o=0;o<Math.min(n,r-1);++o){const n=e[o],r=t[o+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(o-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(o-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(jz||(jz={}));const Pz=30;function Mz(e){return e<=Pz?e:hO(e,Math.floor(Math.sqrt(e)))}function Dz(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Lz(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let o=0;o<n;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(n+1))}return r}function Fz(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],o=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?o.push(n):r.push(n);n.push(...r),n.push(0),n.push(...o)}return n}function Bz(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function Uz(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function zz(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function Vz(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===KA(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const o=t.shape,i=o[o.length-1];let a=1;for(let d=0;d<o.length-1;++d)a*=o[d];const s=e.shape,l=o.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=s[d],l.push(s[d]);const u=[...pO(e.shape).map((e=>e/c)),1].slice(0,i);return[l,a,c,u]}function Gz(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(o,".");if(n.rank<o)throw new Error(i+" update.rank < ".concat(o,". "));if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < ".concat(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != ".concat(o+e.length-r));for(let a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape[".concat(a,"] (").concat(n.shape[a],") != indices.shape[").concat(a,"] (").concat(t.shape[a],")."));for(let a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape[".concat(a+o,"] (").concat(n.shape[a+o],") != shape[").concat(a+o,"] (").concat(e[a+o],")"))}function Wz(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Gz(n,t,e)}function Hz(e,t,n){const r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length;let a=1;for(let l=o;l<i;++l)a*=n[l];const s=o<1?1:o;return{sliceRank:o,numUpdates:KA(t.shape)/s,sliceSize:a,strides:[...pO(n.slice(0,o)),1],outputSize:KA(n)}}const qz=1.7580993408473768,Xz=1.0507009873554805,Yz=.3275911,Kz=.254829592,Zz=-.284496736,Qz=1.421413741,Jz=-1.453152027,$z=1.061405429;function eV(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function tV(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function nV(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function rV(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function oV(e,t){return{real:e[2*t],imag:e[2*t+1]}}function iV(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function aV(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function sV(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const lV="->",cV=/->/g,uV=",",dV="...";function hV(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(cV,"").length)/lV.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(lV,'").'));const[r,o]=e.split(lV);qA(-1===r.indexOf(dV),(()=>'The ellipsis notation ("'.concat(dV,'") is not supported yet.')));const i=r.split(uV),a=i.length;if(t!==a)throw new Error("Expected ".concat(a," input tensors, received ").concat(t));if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<o.length;++d){const e=o[d];if(!i.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===s.indexOf(e)&&e!==uV&&s.push(e)}const l=new Array(i.length);for(let d=0;d<a;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error("Found duplicate axes in input component ".concat(i[d],". ")+"Support for duplicate axes in input is not implemented yet.");l[d]=[];for(let e=0;e<i[d].length;++e)l[d].push(s.indexOf(i[d][e]))}const c=s.length,u=[];for(let d=o.length;d<c;++d)u.push(d);return{allDims:s,summedDims:u,idDims:l}}function pV(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const r=[];for(let o=0;o<e;++o)-1===n[o]&&r.push(o);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function fV(e,t,n){const r=new Array(e);for(let o=0;o<n.length;++o){const e=n[o].shape;for(let n=0;n<t[o].length;++n)void 0===r[t[o][n]]?r[t[o][n]]=e[n]:qA(r[t[o][n]]===e[n],(()=>"Expected dimension ".concat(r[t[o][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function mV(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let a=0;a<o;++a)r.push([]);const i=[];for(let a=0;a<n.length;++a){const e=yV(t,n[a]);for(const t of e)-1===i.indexOf(t)&&(r[a].push(t),i.push(t))}return{path:n,steps:r}}function gV(e){return e.every(((e,t)=>e===t))}function yV(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function vV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)qA(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);qA(o<=1,(()=>"There should be only one negative value in split array."));const i=t.indexOf(-1);if(-1!==i){const r=t.reduce(((e,t)=>t>0?e+t:e));t[i]=e.shape[n]-r}qA(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function bV(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function xV(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function wV(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function SV(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function _V(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function kV(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function TV(e,t){const n=KA(e),r=KA(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function EV(e,t){const n=KA(e),r=KA(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function CV(){return"segment ids must be >= 0"}function IV(){return"segment ids are not increasing"}function jV(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function AV(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function OV(e,t){let n,r=!1;for(e<=Pz?(n=e,r=!0):n=hO(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=hO(e,n+1);return n}function NV(e,t,n){const r=[],o=e.length;for(let i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}function RV(e,t,n,r){const o=t.shape.length,i=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error("Expect batchDims in the range of [-".concat(o,", ").concat(o,"], but got ").concat(r));if(r<0&&(r+=o),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const a=e.shape[n],s=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)s.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)s.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<o;d++)s.push(t.shape[d]);for(let d=n+1;d<i;d++)s.push(e.shape[d]),u*=e.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:s}}function PV(e){try{return e.map((e=>yM(e)))}catch(Zae){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Zae))}}function MV(e){return e.map((e=>gM(e)))}function DV(e,t){const n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);const r=uL(e,"int32"),o=uL([n.length,e.length],"int32");for(let i=0;i<n.length;i++){const t=r.indexToLoc(n[i]),a=i*e.length;o.values.set(t,a)}return o.toTensor()}!function(){for(const e of WL)CL(e)}();const LV={kernelName:OO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,jU(dL(n,"float32"),-1))}}},FV={kernelName:NO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=bL(dL(n,"float32")),r=vL(RL(SL(1),t));return FB(gL(e,r))}}}},BV={kernelName:RO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=vL(RL(bL(dL(n,"float32")),1));return gL(e,t)}}}},UV={kernelName:PO,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{let t=e;const r=LL(n.shape,o);return r.length>0&&(t=bB(t,r)),DF(t,n.shape)},b:()=>{let t=e;const n=LL(r.shape,o);return n.length>0&&(t=bB(t,n)),DF(t,r.shape)}}}},zV={kernelName:MO,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},VV={kernelName:FO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>xL(n)}}},GV={kernelName:BO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>xL(n)}}},WV={kernelName:UO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,vL(RL(SL(1),bL(dL(n,"float32")))))}}},HV={kernelName:zO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=vL(fL(SL(1),bL(dL(n,"float32"))));return gL(e,t)}}}},qV={kernelName:WO,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{const t=fL(bL(n),bL(r));let i=yL(e,gL(r,t));const a=LL(n.shape,o);return a.length>0&&(i=bB(i,a)),DF(i,n.shape)},b:()=>{const t=fL(bL(n),bL(r));let i=FB(yL(e,gL(n,t)));const a=LL(r.shape,o);return a.length>0&&(i=bB(i,a)),DF(i,r.shape)}}}},XV={kernelName:VO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,fL(bL(dL(n,"float32")),1))}}},YV={kernelName:GO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,RL(SL(1),bL(dL(n,"float32"))))}}};const KV=pD({avgPool3dGrad_:function(e,t,n,r,o,i){const a=dD(e,"dy","avgPool3dGrad"),s=dD(t,"input","avgPool3dGrad");let l=a,c=s,u=!1;4===s.rank&&(u=!0,l=DF(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=DF(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),qA(5===l.rank,(()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,"."))),qA(5===c.rank,(()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,"."))),MF("avgPool3dGrad",o,i);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:o,dimRoundingMode:i},p=nD.runKernel(YO,d,h);return u?DF(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),ZV={kernelName:XO,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:i,pad:a,dimRoundingMode:s}=n;return{x:()=>KV(e,r,o,i,a,s)}}};const QV=pD({avgPoolGrad_:function(e,t,n,r,o){const i=dD(e,"dy","avgPoolGrad"),a=dD(t,"input","avgPoolGrad");qA(a.rank===i.rank,(()=>"Rank of input (".concat(a.rank,") does not match rank of dy (").concat(i.rank,")")));let s=a,l=i,c=!1;3===a.rank&&(c=!0,s=DF(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=DF(i,[1,i.shape[0],i.shape[1],i.shape[2]])),qA(4===l.rank,(()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,"."))),qA(4===s.rank,(()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")));const u={dy:l,input:s},d={filterSize:n,strides:r,pad:o},h=nD.runKernel(qO,u,d);return c?DF(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),JV={kernelName:HO,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:i,pad:a}=n;return{x:()=>QV(e,r,o,i,a)}}},$V={kernelName:KO,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,o]=t,{transposeA:i,transposeB:a}=n;return i||a?!i&&a?{a:()=>OB(e,o,!1,!1),b:()=>OB(e,r,!0,!1)}:i&&!a?{a:()=>OB(o,e,!1,!0),b:()=>OB(r,e,!1,!1)}:{a:()=>OB(o,e,!0,!0),b:()=>OB(e,r,!0,!0)}:{a:()=>OB(e,o,!1,!0),b:()=>OB(r,e,!0,!1)}}};const eG=pD({spaceToBatchND_:function(e,t,n){const r=dD(e,"x","spaceToBatchND");qA(r.rank>=1+t.length,(()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length))),qA(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),qA(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]===0:e),!0),(()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const o={x:r},i={blockShape:t,paddings:n};return nD.runKernel(uP,o,i)}}),tG={kernelName:ZO,gradFunc:(e,t,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>eG(e,r,o)}}},nG={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,o=r.inputShape,i=r.shape,a=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])a[l]=1;else if(1!==o[l])throw new Error("broadcastTo(): [".concat(o,"] cannot be broadcast to [").concat(i,"]."));const s=[];for(let l=0;l<a.length;l++)a[l]>1&&s.push(l);return{x:()=>bB(e,s,!0)}}},rG={kernelName:eN,gradFunc:e=>({x:()=>e.clone()})},oG={kernelName:tN,gradFunc:e=>({x:()=>xL(e)})},iG={kernelName:nN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:o,clipValueMax:i}=n;return{x:()=>vU(AB(fB(r,o),cz(r,i)),e,xL(e))}}},aG={kernelName:oN,inputsToSave:["x"],gradFunc:LV.gradFunc},sG={kernelName:iN,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:o}=n,i=nO(o,t[0].shape)[0],a=r.map((e=>e[i]));return uU(e,a,i).map((e=>()=>e))}},lG={kernelName:aN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{dilations:i,strides:a,pad:s,dataFormat:l}=n;return qA(OF(i),(()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'"))),{x:()=>JF(r.shape,e,o,a,s,l),filter:()=>CU(r,e,o.shape,a,s,l)}}},cG={kernelName:lN,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{strides:i,pad:a,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>ZF(e,o,i,a,s,1,l),filter:()=>CU(e,r,o.shape,i,a,s,l)}}};const uG=pD({conv3DBackpropFilter_:function(e,t,n,r,o){let i=e;4===e.rank&&(i=DF(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;4===a.rank&&(a=DF(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),qA(5===i.rank,(()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,"."))),qA(5===a.rank,(()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(a.shape,"."))),qA(5===n.length,(()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,"."))),qA(i.shape[4]===n[3],(()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],"."))),qA(a.shape[4]===n[4],(()=>"Error in conv3dDerFilter: depth of dy (".concat(a.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")));const s={x:i,dy:a},l={strides:r,pad:o,filterShape:n};return nD.runKernel(uN,s,l)}}),dG={kernelName:cN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:i}=n;qA(OF(r),(()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")));const[a,s]=t;return{x:()=>tB(a.shape,e,s,o,i),filter:()=>uG(a,e,s.shape,o,i)}}};const hG=pD({sin_:function(e){const t={x:dD(e,"x","sin","float32")};return nD.runKernel(rP,t)}}),pG={kernelName:hN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(FB(hG(dL(n,"float32"))),e)}}};const fG=pD({sinh_:function(e){const t={x:dD(e,"x","sinh")};return nD.runKernel(oP,t)}}),mG={kernelName:pN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(fG(dL(n,"float32")),e)}}};const gG=pD({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:dD(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return nD.runKernel(mN,o,i)}}),yG={kernelName:mN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o,exclusive:i,reverse:a}=n;return{x:()=>{const t=EB([o],r.rank);let n=gG(e,o,i,!a);return null!=t&&(n=wU(n,t)),n}}}},vG={kernelName:bN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:i,dimRoundingMode:a}=n,s=null==r?[1,1]:r;qA(OF(s),(()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")));const[l,c]=t;return qA(4===l.rank,(()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,"."))),qA(4===c.rank,(()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,"."))),qA(l.shape[3]===c.shape[2],(()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],"."))),qA(NF(o,s),(()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(o," and dilations ")+"'".concat(s,"'."))),MF("depthwiseConv2d",i,a),{x:()=>DU(l.shape,e,c,o,i,s,a),filter:()=>MU(l,e,c.shape,o,i,s,a)}}},bG={kernelName:_N,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,i={x:r,filter:o,dy:e},a={x:r,filter:o,dy:e};return{x:()=>nD.runKernel(kN,i,n),filter:()=>nD.runKernel(TN,a,n)}}},xG={kernelName:jN,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>nD.runKernel(AN,r)}}},wG={kernelName:ON,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=yL(sB(FB(bL(n))),2/Math.sqrt(Math.PI));return{x:()=>yL(e,r)}}},SG={kernelName:RN,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,n)}}},_G={kernelName:PN,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>DF(e,n.shape)}}},kG={kernelName:MN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,sB(n))}}},TG={kernelName:BN,gradFunc:e=>({x:()=>xL(e)})},EG={kernelName:UN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{const t=gL(e,dL(r,"float32")),i=LL(n.shape,o);return i.length>0?DF(bB(t,i),n.shape):t},b:()=>{let t=yL(e,dL(n,"float32"));const i=LL(r.shape,o);i.length>0&&(t=DF(bB(t,i),r.shape));const a=bL(r);return FB(gL(t,dL(a,"float32")))}}}};const CG=pD({rsqrt_:function(e){const t={x:dD(e,"x","rsqrt","float32")};return nD.runKernel(ZR,t)}}),IG={kernelName:zN,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[o,i,a,s]=t,l=null==s?SL(1):s,c=LL(i.shape,o.shape),u=[];if(1===i.rank){for(let e=0;e<o.shape.length-1;++e)u.push(o.shape[e]);u.push(1)}const d=RL(o,i),h=yL(e,l),p=CG(fL(a,SL(r))),f=yL(yL(yL(p,p),p),SL(-.5));return{x:()=>1===i.rank?DF(yL(yL(e,cB(DF(p,[1,1,1,i.shape[0]]),u)),l),o.shape):DF(yL(yL(e,p),l),o.shape),mean:()=>{let e=yL(yL(p,SL(-1)),h);return 1===i.rank&&(e=bB(e,c)),DF(e,i.shape)},variance:()=>{let e=yL(yL(f,d),h);return 1===i.rank&&(e=bB(e,c)),DF(e,i.shape)},scale:()=>{const t=yL(d,p);let n=yL(e,t);return 1===i.rank&&(n=bB(n,c)),DF(n,i.shape)},offset:()=>{let t=e;return 1===i.rank&&(t=bB(t,c)),DF(t,i.shape)}}}};const jG=pD({unsortedSegmentSum_:function(e,t,n){const r=dD(e,"x","unsortedSegmentSum"),o=dD(t,"segmentIds","unsortedSegmentSum","int32");qA(QA(n),(()=>"numSegments must be of dtype int"));const i={x:r,segmentIds:o},a={numSegments:n};return nD.runKernel(PP,i,a)}}),AG={kernelName:VN,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,o]=t,{axis:i,batchDims:a}=n,s=nO(i,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,o=t.size,a=r.slice(0,s),l=a.length,c=r.slice(i,r.length).slice(1),u=c.length,d=OG(0,l),h=OG(l+1,l+1+u),p=NG([a,[o],c]),f=DF(n,p),m=DF(t,[o]),g=NG([[l],d,h]),y=wU(f,g);let v=jG(y,m,e.shape[s]);const b=CB(g);return v=wU(v,b),v};if(1===a){const t=r.shape[0],n=r.split(t,0),i=()=>{const t=hU(n.map(((t,n)=>l(t,o.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:i,indices:()=>o}}return{x:l(r,o,e),indices:()=>o}}};function OG(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function NG(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const RG={kernelName:HN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>xL(n),b:()=>xL(r)}}},PG={kernelName:qN,gradFunc:e=>({x:()=>dL(e,"float32")})},MG={kernelName:KN,gradFunc:e=>({x:()=>xL(e)})},DG={kernelName:ZN,gradFunc:e=>({x:()=>xL(e)})},LG={kernelName:QN,gradFunc:e=>({x:()=>xL(e)})},FG={kernelName:JN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:o}=n,i=pB(r,0);return{x:()=>vU(i,e,yL(e,o))}}},BG={kernelName:rR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,fL(n,1))}}},UG={kernelName:nR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,dL(n,"float32"))}}},zG={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;return{logits:()=>{const t=sB(r);return RL(e,yL(bB(e,o,!0),t))}}}};const VG=pD({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},o={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return nD.runKernel(lR,r,o)}}),GG={kernelName:sR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{depthRadius:i,bias:a,alpha:s,beta:l}=n;return{x:()=>VG(r,o,e,i,a,s,l)}}};function WG(e,t,n,r){return t.rank<n.rank&&(t=DF(t,kB(t.shape,r))),e.rank<n.rank&&(e=DF(e,kB(e.shape,r))),{x:()=>yL(e,dL(aB(n,t),e.dtype))}}const HG={kernelName:cR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:o}=r,i=t[0],a=WG(e,t[1],i,nO(o,i.shape));return{x:()=>a.x()}}},qG={kernelName:uR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>yL(e,dL(fB(n,r),"float32")),b:()=>yL(e,dL(pz(n,r),"float32"))}}};const XG=pD({maxPool3dGrad_:function(e,t,n,r,o,i,a){const s=dD(e,"dy","maxPool3dGrad"),l=dD(t,"input","maxPool3dGrad"),c=dD(n,"output","maxPool3dGrad");let u=s,d=l,h=c,p=!1;4===l.rank&&(p=!0,u=DF(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=DF(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=DF(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),qA(5===u.rank,(()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,"."))),qA(5===d.rank,(()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,"."))),qA(5===h.rank,(()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,"."))),MF("maxPool3dGrad",i,a);const f={dy:u,input:d,output:h},m={filterSize:r,strides:o,pad:i,dimRoundingMode:a},g=nD.runKernel(fR,f,m);return p?DF(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),YG={kernelName:pR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:l}=n;return{x:()=>XG(e,r,o,i,a,s,l)}}};const KG=pD({maxPoolGrad_:function(e,t,n,r,o,i,a){const s=dD(e,"dy","maxPoolGrad"),l=dD(t,"input","maxPoolGrad"),c=dD(n,"output","maxPoolGrad");qA(l.rank===s.rank,(()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(s.rank,")"))),qA(4===s.rank,(()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,"."))),qA(4===l.rank,(()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,"."))),MF("maxPoolGrad",i,a);const u={dy:s,input:l,output:c},d={filterSize:r,strides:o,pad:i,dimRoundingMode:a};return nD.runKernel(hR,u,d)}}),ZG={kernelName:dR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:i,strides:a,pad:s}=n;return{x:()=>KG(e,r,o,i,a,s)}}},QG={kernelName:gR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n,i=nO(o,r.shape),a=KA(_B(r.shape,i)[1]);return{x:()=>{const t=r.shape.slice();i.forEach((e=>{t[e]=1}));const n=DF(e,t);return gL(yL(n,VB(r.shape,"float32")),a)}}}},JG={kernelName:yR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:o}=r,[i,a]=t,s=WG(e,a,i,nO(o,i.shape));return{x:()=>s.x()}}},$G={kernelName:vR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>yL(e,dL(cz(n,r),"float32")),b:()=>yL(e,dL(pB(n,r),"float32"))}}},eW={kernelName:bR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,i=o.map((e=>e[0]));return{x:()=>rU(e,i,r.shape)}}},tW={kernelName:xR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{const t=LL(n.shape,o);return t.length>0?DF(bB(e,t),n.shape):e},b:()=>{const t=yL(e,FB(dB(gL(n,r)))),i=LL(r.shape,o);return i.length>0?DF(bB(t,i),r.shape):t}}}},nW={kernelName:SR,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{const t=yL(e,dL(r,"float32")),i=LL(n.shape,o);return i.length>0?DF(bB(t,i),n.shape):t},b:()=>{const t=yL(e,dL(n,"float32")),i=LL(r.shape,o);return i.length>0?DF(bB(t,i),r.shape):t}}}},rW={kernelName:_R,gradFunc:e=>({x:()=>FB(e)})},oW={kernelName:jR,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>zB(n.shape,"float32")}}},iW={kernelName:IR,gradFunc:e=>({x:()=>xL(e)})},aW={kernelName:AR,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return yU(e,r).map((e=>()=>e))}},sW={kernelName:OR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,i=o.map((e=>e[0]));return{x:()=>rU(e,i,r.shape)}}},lW={kernelName:NR,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,o]=t,i=n,a=r,s=FL(i.shape,a.shape);return{a:()=>{const t=dL(a,"float32");let n=yL(e,yL(t,NL(i,RL(t,SL(1)))));const r=LL(i.shape,s);return r.length>0&&(n=bB(n,r)),DF(n,i.shape)},b:()=>{const t=pB(i,0),n=vU(t,gB(i),xL(i));let r=yL(e,yL(o,n));const l=LL(a.shape,s);return l.length>0&&(r=bB(r,l)),DF(r,a.shape)}}}},cW={kernelName:RR,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,o=pB(n,0);return{x:()=>vU(o,e,yL(e,r)),alpha:()=>{let t=vU(o,xL(e),yL(e,n));const i=LL(r.shape,e.shape);return i.length>0&&(t=bB(t,i)),DF(t,r.shape)}}}};const uW=pD({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:dD(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return nD.runKernel(fN,o,i)}});function dW(e,t,n){const r=e.shape.length,o=r-n.length,i=EB(n,r);let a=e;null!=i&&(a=wU(e,i));const s=a.shape.slice(),l=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const o=DF(t,r),i=uW(e,n,!0,!1),a=uW(e,n,!0,!0),s=yL(i,a);return yL(o,s)}(a.reshape(s),t,o);if(c=c.reshape(a.shape),null!=i){const e=CB(i);c=wU(c,e)}return c}const hW={kernelName:PR,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;let i=[];return i=void 0===o||null===o?r.shape.map(((e,t)=>t)):"number"===typeof o?[o]:o,{x:()=>dW(r,e,i)}}},pW={kernelName:CN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{const t=gL(e,dL(r,"float32")),i=LL(n.shape,o);return i.length>0?DF(bB(t,i),n.shape):t},b:()=>{let t=yL(e,dL(n,"float32"));const i=LL(r.shape,o);i.length>0&&(t=DF(bB(t,i),r.shape));const a=bL(r);return FB(gL(t,dL(a,"float32")))}}}},fW={kernelName:UR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,FB(bL(n)))}}},mW={kernelName:XR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=yL(cz(n,6),jU(n));return{x:()=>yL(e,dL(r,"float32"))}}},gW={kernelName:zR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,dL(jU(n),"float32"))}}},yW={kernelName:VR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>DF(e,n.shape)}}},vW={kernelName:HR,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>nD.runKernel(qR,o,n)}}},bW={kernelName:GR,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>nD.runKernel(WR,o,n)}}},xW={kernelName:YR,gradFunc:(e,t,n)=>{const{dims:r}=n,o=nO(r,e.shape);return{x:()=>$B(e,o)}}},wW={kernelName:KR,gradFunc:e=>({x:()=>xL(e)})},SW={kernelName:ZR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>FB(gL(e,yL(NL(n,1.5),2)))}}};const _W=pD({logicalNot_:function(e){const t={x:dD(e,"x","logicalNot","bool")};return nD.runKernel(iR,t)}}),kW={kernelName:eP,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>dL(xL(n),"float32"),t:()=>yL(e,dL(n,e.dtype)),e:()=>yL(e,dL(_W(n),e.dtype))}}},TW={kernelName:tP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=pB(n,SL(0)),r=SL(qz),o=SL(Xz),i=yL(e,o),a=yL(yL(e,r),sB(dL(n,"float32")));return vU(t,i,a)}}}},EW={kernelName:aP,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,yL(n,RL(SL(1),n)))}}},CW={kernelName:iP,gradFunc:e=>({x:()=>xL(e)})};const IW=pD({cos_:function(e){const t={x:dD(e,"x","cos","float32")};return nD.runKernel(hN,t)}}),jW={kernelName:rP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(IW(dL(n,"float32")),e)}}};const AW=pD({cosh_:function(e){const t={x:dD(e,"x","cosh","float32")};return nD.runKernel(pN,t)}}),OW={kernelName:oP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(AW(dL(n,"float32")),e)}}},NW={kernelName:nP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:o,size:i}=n,a=r.shape,[s,l]=mF(r,o,i),c=[];for(let u=0;u<e.rank;u++)c.push([s[u],a[u]-s[u]-l[u]]);return{x:()=>WB(e,c)}}},RW={kernelName:hP,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:o}=n,i=yL(e,r);return{logits:()=>RL(i,yL(bB(i,[o],true),r))}}},PW={kernelName:sP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,nU(n))}}};const MW=pD({batchToSpaceND_:function(e,t,n){const r=dD(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));qA(r.rank>=1+t.length,(()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length))),qA(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),qA(r.shape[0]%o===0,(()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(o)));const i={x:r},a={blockShape:t,crops:n};return nD.runKernel(ZO,i,a)}}),DW={kernelName:uP,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>MW(e,r,o)}}},LW={kernelName:dP,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>HF(e,r)}}},FW={kernelName:lP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,yL(vL(dL(n,"float32")),2))}}},BW={kernelName:bP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(e,yL(dL(n,"float32"),2))}}},UW={kernelName:vP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=SL(2);return{a:()=>yL(e,yL(o,RL(n,r))),b:()=>yL(e,yL(o,RL(r,n)))}}},zW={kernelName:TP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=FL(n.shape,r.shape);return{a:()=>{let t=e;const r=LL(n.shape,o);return r.length>0&&(t=bB(t,r)),DF(t,n.shape)},b:()=>{let t=e;const n=LL(r.shape,o);return n.length>0&&(t=bB(t,n)),DF(FB(t),r.shape)}}}},VW={kernelName:cP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,o=r.shape.slice(),{axis:i}=n;nO(i,r.shape).forEach((e=>{o[e]=1}));const a=DF(e,o),s=yL(a,VB(r.shape,"float32"));return{x:()=>s}}},GW={kernelName:EP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gL(e,bL(IW(n)))}}},WW={kernelName:CP,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yL(RL(SL(1),bL(n)),e)}}},HW={kernelName:IP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:o}=n;return{x:()=>{let t=xL(r);if(1===r.rank)for(let n=0;n<o[0];++n)t=fL(t,rU(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<o[0];++n)for(let i=0;i<o[1];++i)t=fL(t,rU(e,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<o[0];++n)for(let i=0;i<o[1];++i)for(let a=0;a<o[2];++a)t=fL(t,rU(e,[n*r.shape[0],i*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<o[0];++n)for(let i=0;i<o[1];++i)for(let a=0;a<o[2];++a)for(let s=0;s<o[3];++s)t=fL(t,rU(e,[n*r.shape[0],i*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},qW={kernelName:PP,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=BL(t,xL(t)),r=hB(e,n);let o=fB(t,SL(0,"int32"));const i=r.rank-o.rank;for(let s=0;s<i;++s)o=lB(o,s+1);o=AB(o,VB(r.shape,"bool"));const a=xL(r);return vU(o,r,a)}(e,n)}}};const XW=[LV,FV,BV,UV,zV,VV,GV,WV,HV,qV,XV,YV,ZV,JV,$V,tG,nG,rG,oG,iG,aG,sG,cG,lG,dG,pG,mG,yG,vG,bG,pW,xG,wG,SG,_G,kG,EG,TG,IG,AG,RG,PG,MG,DG,LG,FG,BG,UG,zG,GG,HG,HG,qG,YG,ZG,QG,JG,$G,eW,tW,nW,rW,oW,iW,aW,sW,sW,lW,cW,hW,fW,mW,gW,yW,vW,bW,xW,wW,SW,kW,TW,EW,CW,jW,OW,NW,RW,PW,DW,DW,LW,LW,FW,UW,BW,{kernelName:DP,gradFunc:e=>({x:()=>xL(e)})},zW,VW,GW,WW,HW,{kernelName:OP,gradFunc:(e,t,n)=>{const r=n,{perm:o}=r,i=CB(o);return{x:()=>wU(e,i)}}},{kernelName:RP,gradFunc:(e,t,n)=>{const r=n,{axis:o}=r;return{value:()=>hU(e,o)}}},qW,{kernelName:MP,gradFunc:e=>({x:()=>xL(e)})}];for(const r of XW)ZP(r);DM().prototype.abs=function(){return this.throwIfDisposed(),ML(this)};const YW=pD({acos_:function(e){const t={x:dD(e,"x","acos")};return nD.runKernel(NO,t)}});DM().prototype.acos=function(){return this.throwIfDisposed(),YW(this)};const KW=pD({acosh_:function(e){const t={x:dD(e,"x","acosh")};return nD.runKernel(RO,t)}});DM().prototype.acosh=function(){return this.throwIfDisposed(),KW(this)},DM().prototype.add=function(e){return this.throwIfDisposed(),fL(this,e)},DM().prototype.all=function(e,t){return this.throwIfDisposed(),vF(this,e,t)},DM().prototype.any=function(e,t){return this.throwIfDisposed(),bF(this,e,t)},DM().prototype.argMax=function(e){return this.throwIfDisposed(),xF(this,e)};const ZW=pD({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:dD(e,"x","argMin")},r={axis:t};return nD.runKernel(BO,n,r)}});DM().prototype.argMin=function(e){return this.throwIfDisposed(),ZW(this,e)},DM().prototype.asScalar=function(){return this.throwIfDisposed(),qA(1===this.size,(()=>"The array must have only 1 element.")),DF(this,[])},DM().prototype.asType=function(e){return this.throwIfDisposed(),dL(this,e)},DM().prototype.as1D=function(){return this.throwIfDisposed(),DF(this,[this.size])},DM().prototype.as2D=function(e,t){return this.throwIfDisposed(),DF(this,[e,t])},DM().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),DF(this,[e,t,n])},DM().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),DF(this,[e,t,n,r])},DM().prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),DF(this,[e,t,n,r,o])};const QW=pD({asin_:function(e){const t={x:dD(e,"x","asin")};return nD.runKernel(UO,t)}});DM().prototype.asin=function(){return this.throwIfDisposed(),QW(this)};const JW=pD({asinh_:function(e){const t={x:dD(e,"x","asinh")};return nD.runKernel(zO,t)}});DM().prototype.asinh=function(){return this.throwIfDisposed(),JW(this)};const $W=pD({atan_:function(e){const t={x:dD(e,"x","atan")};return nD.runKernel(VO,t)}});DM().prototype.atan=function(){return this.throwIfDisposed(),$W(this)};const eH=pD({atan2_:function(e,t){let n=dD(e,"a","atan2"),r=dD(t,"b","atan2");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(WO,o)}});DM().prototype.atan2=function(e){return this.throwIfDisposed(),eH(this,e)};const tH=pD({atanh_:function(e){const t={x:dD(e,"x","atanh")};return nD.runKernel(GO,t)}});DM().prototype.atanh=function(){return this.throwIfDisposed(),tH(this)},DM().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),LF(this,e,t,n,r)},DM().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),MW(this,e,t)},DM().prototype.batchNorm=function(e,t,n,r,o){return this.throwIfDisposed(),BF(this,e,t,n,r,o)},DM().prototype.broadcastTo=function(e){return this.throwIfDisposed(),GF(this,e)},DM().prototype.cast=function(e){return this.throwIfDisposed(),dL(this,e)};const nH=pD({ceil_:function(e){const t={x:dD(e,"x","ceil","float32")};return nD.runKernel(tN,t)}});DM().prototype.ceil=function(){return this.throwIfDisposed(),nH(this)},DM().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),WF(this,e,t)},DM().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof MM&&(e=[e]),HF([this,...e],t)},DM().prototype.conv1d=function(e,t,n,r,o,i){return this.throwIfDisposed(),QF(this,e,t,n,r,o,i)},DM().prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),$F(this,e,t,n,r,o)},DM().prototype.conv2d=function(e,t,n,r,o,i){return this.throwIfDisposed(),ZF(this,e,t,n,r,o,i)},DM().prototype.cos=function(){return this.throwIfDisposed(),IW(this)},DM().prototype.cosh=function(){return this.throwIfDisposed(),AW(this)},DM().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),uW(this,e,t,n)},DM().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),gG(this,e,t,n)};const rH=pD({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=dD(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];qA(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),qA(o*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape))),qA(i*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape))),qA(a%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(a," for depthToSpace with input shape ").concat(r.shape)));const s={x:r},l={blockSize:t,dataFormat:n};return nD.runKernel(vN,s,l)}});DM().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),rH(this,e,t)},DM().prototype.depthwiseConv2d=function(e,t,n,r,o,i){return this.throwIfDisposed(),oB(this,e,t,n,r,o,i)};const oH=pD({dilation2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const a=dD(e,"x","dilation2d"),s=dD(t,"filter","dilation2d");qA(3===a.rank||4===a.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(a.rank,"."))),qA(3===s.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,"."))),qA("NHWC"===i,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)));let l=a,c=!1;3===a.rank&&(l=DF(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),qA(l.shape[3]===s.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(s.shape[2])));const u={x:l,filter:s},d={strides:n,pad:r,dilations:o},h=nD.runKernel(_N,u,d);return c?DF(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});DM().prototype.dilation2d=function(e,t,n,r,o){return this.throwIfDisposed(),oH(this,e,t,n,r,o)};const iH=pD({divNoNan_:function(e,t){let n=dD(e,"a","div"),r=dD(t,"b","div");[n,r]=YM(n,r);const o=gL(n,r),i=xL(o),a=aB(r,i);return vU(a,i,o)}});DM().prototype.divNoNan=function(e){return this.throwIfDisposed(),iH(this,e)},DM().prototype.div=function(e){return this.throwIfDisposed(),gL(this,e)};const aH=pD({dot_:function(e,t){const n=dD(e,"t1","dot"),r=dD(t,"t2","dot");qA((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(qA(o===i,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(o," and ").concat(i,"."))),1===n.rank&&1===r.rank){const e=DF(n,[1,-1]),t=DF(r,[-1,1]),o=OB(e,t);return DF(o,[])}if(1===n.rank&&2===r.rank){const e=DF(n,[1,-1]),t=DF(r,[r.shape[0],r.shape[1]]),o=OB(e,t);return DF(o,[o.size])}if(2===n.rank&&1===r.rank){const e=DF(r,[-1,1]),t=OB(n,e);return DF(t,[t.size])}{const e=DF(r,[r.shape[0],r.shape[1]]);return OB(n,e)}}});DM().prototype.dot=function(e){return this.throwIfDisposed(),aH(this,e)},DM().prototype.elu=function(){return this.throwIfDisposed(),iB(this)},DM().prototype.equal=function(e){return this.throwIfDisposed(),aB(this,e)};const sH=pD({erf_:function(e){let t=dD(e,"x","erf");qA("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=dL(t,"float32"));const n={x:t};return nD.runKernel(ON,n)}});DM().prototype.erf=function(){return this.throwIfDisposed(),sH(this)};const lH=pD({euclideanNorm_:function(e){return gz(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});DM().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),lH(this,e,t)},DM().prototype.exp=function(){return this.throwIfDisposed(),sB(this)},DM().prototype.expandDims=function(e){return this.throwIfDisposed(),lB(this,e)};const cH=pD({expm1_:function(e){const t={x:dD(e,"x","expm1")};return nD.runKernel(MN,t)}});DM().prototype.expm1=function(){return this.throwIfDisposed(),cH(this)},DM().prototype.fft=function(){return this.throwIfDisposed(),_U(this)},DM().prototype.flatten=function(){return this.throwIfDisposed(),DF(this,[this.size])},DM().prototype.floor=function(){return this.throwIfDisposed(),dB(this)},DM().prototype.floorDiv=function(e){return this.throwIfDisposed(),mL(this,e)},DM().prototype.gather=function(e,t,n){return this.throwIfDisposed(),hB(this,e,t,n)},DM().prototype.greaterEqual=function(e){return this.throwIfDisposed(),fB(this,e)},DM().prototype.greater=function(e){return this.throwIfDisposed(),pB(this,e)},DM().prototype.ifft=function(){return this.throwIfDisposed(),TU(this)},DM().prototype.irfft=function(){return this.throwIfDisposed(),EU(this)};const uH=pD({isFinite_:function(e){const t={x:dD(e,"x","isFinite")};return nD.runKernel(KN,t)}});DM().prototype.isFinite=function(){return this.throwIfDisposed(),uH(this)};const dH=pD({isInf_:function(e){const t={x:dD(e,"x","isInf")};return nD.runKernel(ZN,t)}});DM().prototype.isInf=function(){return this.throwIfDisposed(),dH(this)};const hH=pD({isNaN_:function(e){const t={x:dD(e,"x","isNaN")};return nD.runKernel(QN,t)}});DM().prototype.isNaN=function(){return this.throwIfDisposed(),hH(this)},DM().prototype.leakyRelu=function(e){return this.throwIfDisposed(),mB(this,e)},DM().prototype.lessEqual=function(e){return this.throwIfDisposed(),cz(this,e)},DM().prototype.less=function(e){return this.throwIfDisposed(),pz(this,e)};const pH=pD({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const i=dD(e,"x","localResponseNormalization");qA(4===i.rank||3===i.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,"."))),qA(QA(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let a=i,s=!1;3===i.rank&&(s=!0,a=DF(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:a},c={depthRadius:t,bias:n,alpha:r,beta:o},u=nD.runKernel(sR,l,c);return s?DF(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});DM().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),pH(this,e,t,n,r)};const fH=pD({logSigmoid_:function(e){const t=dD(e,"x","logSigmoid"),n=wL((e=>({value:FB(cU(FB(e))),gradFunc:t=>yL(t,nU(FB(e)))})));return n(t)}});DM().prototype.logSigmoid=function(){return this.throwIfDisposed(),fH(this)},DM().prototype.logSoftmax=function(e){return this.throwIfDisposed(),xB(this,e)},DM().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),jB(this,e,t)},DM().prototype.log=function(){return this.throwIfDisposed(),gB(this)},DM().prototype.log1p=function(){return this.throwIfDisposed(),yB(this)},DM().prototype.logicalAnd=function(e){return this.throwIfDisposed(),AB(this,e)},DM().prototype.logicalNot=function(){return this.throwIfDisposed(),_W(this)};const mH=pD({logicalOr_:function(e,t){const n=dD(e,"a","logicalOr","bool"),r=dD(t,"b","logicalOr","bool");FL(n.shape,r.shape);const o={a:n,b:r};return nD.runKernel(aR,o)}});DM().prototype.logicalOr=function(e){return this.throwIfDisposed(),mH(this,e)};const gH=pD({logicalXor_:function(e,t){const n=dD(e,"a","logicalXor","bool"),r=dD(t,"b","logicalXor","bool");return FL(n.shape,r.shape),AB(mH(e,t),_W(AB(e,t)))}});DM().prototype.logicalXor=function(e){return this.throwIfDisposed(),gH(this,e)},DM().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),OB(this,e,t,n)},DM().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),NB(this,e,t,n,r)},DM().prototype.max=function(e,t){return this.throwIfDisposed(),vB(this,e,t)},DM().prototype.maximum=function(e){return this.throwIfDisposed(),BL(this,e)},DM().prototype.mean=function(e,t){return this.throwIfDisposed(),PB(this,e,t)},DM().prototype.min=function(e,t){return this.throwIfDisposed(),MB(this,e,t)},DM().prototype.minimum=function(e){return this.throwIfDisposed(),DB(this,e)};const yH=pD({mirrorPad_:function(e,t,n){qA("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const r=dD(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");qA(t.length===r.rank,(()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")));const o="reflect"===n?1:0;for(let s=0;s<r.rank;s++)qA(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),qA(t[s][0]>=0&&t[s][0]<=r.shape[s]-o&&t[s][1]>=0&&t[s][1]<=r.shape[s]-o,(()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-o," or less than 0 for input of ")+"shape ".concat(r.shape)));const i={paddings:t,mode:n},a={x:r};return nD.runKernel(bR,a,i)}});DM().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),yH(this,e,t)};const vH=pD({mod_:function(e,t){let n=dD(e,"a","mod"),r=dD(t,"b","mod");[n,r]=YM(n,r);const o={a:n,b:r};return nD.runKernel(xR,o)}});DM().prototype.mod=function(e){return this.throwIfDisposed(),vH(this,e)},DM().prototype.mul=function(e){return this.throwIfDisposed(),yL(this,e)},DM().prototype.neg=function(){return this.throwIfDisposed(),FB(this)},DM().prototype.norm=function(e,t,n){return this.throwIfDisposed(),gz(this,e,t,n)},DM().prototype.notEqual=function(e){return this.throwIfDisposed(),BB(this,e)},DM().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),UB(this,e,t,n)},DM().prototype.onesLike=function(){return this.throwIfDisposed(),GB(this)},DM().prototype.pad=function(e,t){return this.throwIfDisposed(),WB(this,e,t)};const bH=pD({pool_:function(e,t,n,r,o,i,a){null==o&&(o=[1,1]),null==i&&(i=1),0===r&&(r="valid");const s=dD(e,"x","maxPool");let l=s,c=!1;3===s.rank&&(c=!0,l=DF(s,[1,s.shape[0],s.shape[1],s.shape[2]])),qA(NF(i,o),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(o,"'")));const u=SF(l.shape,t,i,o,r),d=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),o=r.map((e=>Math.floor(e/2))),i=r.map(((e,t)=>e-o[t]));return r.map(((e,t)=>[o[t],i[t]]))}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),i=e.concat(r,o),a=t.map(((e,t)=>(e-i[t]%e)%e)),s=o.map(((e,t)=>e+a[t])),l=t.map(((e,t)=>[r[t],s[t]])),c=t.map(((e,t)=>[0,a[t]]));return[l,c]}([u.inHeight,u.inWidth],d,h),g=p?r:"valid",y=p?l:eG(l,d,f),v=("avg"===n?()=>LF(y,t,i,g,a):()=>NB(y,t,i,g,a))(),b=p?v:MW(v,d,m);return c?DF(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});DM().prototype.pool=function(e,t,n,r,o,i){return this.throwIfDisposed(),bH(this,e,t,n,r,o,i)},DM().prototype.pow=function(e){return this.throwIfDisposed(),NL(this,e)},DM().prototype.prelu=function(e){return this.throwIfDisposed(),HB(this,e)};const xH=pD({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=dD(e,"x","prod");"bool"===r.dtype&&(r=dL(r,"int32"));const o={x:r},i={axis:t,keepDims:n};return nD.runKernel(PR,o,i)}});DM().prototype.prod=function(e,t){return this.throwIfDisposed(),xH(this,e,t)};const wH=pD({reciprocal_:function(e){const t={x:dD(e,"x","reciprocal")};return nD.runKernel(UR,t)}});DM().prototype.reciprocal=function(){return this.throwIfDisposed(),wH(this)},DM().prototype.relu=function(){return this.throwIfDisposed(),JB(this)},DM().prototype.relu6=function(){return this.throwIfDisposed(),IU(this)},DM().prototype.reshapeAs=function(e){return this.throwIfDisposed(),DF(this,e.shape)},DM().prototype.reshape=function(e){return this.throwIfDisposed(),DF(this,e)},DM().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),az(this,e,t,n)},DM().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),sz(this,e,t,n)},DM().prototype.reverse=function(e){return this.throwIfDisposed(),$B(this,e)},DM().prototype.rfft=function(){return this.throwIfDisposed(),kU(this)},DM().prototype.round=function(){return this.throwIfDisposed(),uz(this)},DM().prototype.rsqrt=function(){return this.throwIfDisposed(),CG(this)},DM().prototype.selu=function(){return this.throwIfDisposed(),eU(this)},DM().prototype.separableConv2d=function(e,t,n,r,o,i){return this.throwIfDisposed(),tU(this,e,t,n,r,o,i)},DM().prototype.sigmoid=function(){return this.throwIfDisposed(),nU(this)};const SH=pD({sign_:function(e){const t={x:dD(e,"x","sign")};return nD.runKernel(iP,t)}});DM().prototype.sign=function(){return this.throwIfDisposed(),SH(this)},DM().prototype.sin=function(){return this.throwIfDisposed(),hG(this)},DM().prototype.sinh=function(){return this.throwIfDisposed(),fG(this)},DM().prototype.slice=function(e,t){return this.throwIfDisposed(),rU(this,e,t)},DM().prototype.softmax=function(e){return this.throwIfDisposed(),lU(this,e)},DM().prototype.softplus=function(){return this.throwIfDisposed(),cU(this)},DM().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),eG(this,e,t)},DM().prototype.split=function(e,t){return this.throwIfDisposed(),uU(this,e,t)},DM().prototype.sqrt=function(){return this.throwIfDisposed(),vL(this)},DM().prototype.square=function(){return this.throwIfDisposed(),bL(this)},DM().prototype.squaredDifference=function(e){return this.throwIfDisposed(),wz(this,e)},DM().prototype.squeeze=function(e){return this.throwIfDisposed(),dU(this,e)},DM().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof MM?[this,e]:[this,...e];return hU(n,t)},DM().prototype.step=function(e){return this.throwIfDisposed(),jU(this,e)};const _H=pD({stridedSlice_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:dD(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return nD.runKernel(wP,c,u)}});DM().prototype.stridedSlice=function(e,t,n,r,o,i,a,s){return this.throwIfDisposed(),_H(this,e,t,n,r,o,i,a,s)},DM().prototype.sub=function(e){return this.throwIfDisposed(),RL(this,e)},DM().prototype.sum=function(e,t){return this.throwIfDisposed(),bB(this,e,t)};const kH=pD({tan_:function(e){const t={x:dD(e,"x","tan","float32")};return nD.runKernel(EP,t)}});DM().prototype.tan=function(){return this.throwIfDisposed(),kH(this)},DM().prototype.tanh=function(){return this.throwIfDisposed(),pU(this)},DM().prototype.tile=function(e){return this.throwIfDisposed(),cB(this,e)},DM().prototype.toBool=function(){return this.throwIfDisposed(),dL(this,"bool")},DM().prototype.toFloat=function(){return this.throwIfDisposed(),dL(this,"float32")},DM().prototype.toInt=function(){return this.throwIfDisposed(),dL(this,"int32")};const TH=pD({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=dD(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(o,") ")+"but got ".concat(t));const i={x:r},a={k:t,sorted:n},[s,l]=nD.runKernel(jP,i,a);return{values:s,indices:l}}});DM().prototype.topk=function(e,t){return this.throwIfDisposed(),TH(this,e,t)},DM().prototype.transpose=function(e){return this.throwIfDisposed(),wU(this,e)};const EH=pD({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=dD(e,"x","unique","string_or_numeric");qA(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[i,a]=nD.runKernel(NP,r,o);return{values:i,indices:a}}});DM().prototype.unique=function(e){return this.throwIfDisposed(),EH(this,e)},DM().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),jG(this,e,t)},DM().prototype.unstack=function(e){return this.throwIfDisposed(),yU(this,e)},DM().prototype.where=function(e,t){return this.throwIfDisposed(),vU(e,this,t)},DM().prototype.zerosLike=function(){return this.throwIfDisposed(),xL(this)};class CH extends Error{constructor(e){super(e),Object.setPrototypeOf(this,CH.prototype)}}class IH extends Error{constructor(e){super(e),Object.setPrototypeOf(this,IH.prototype)}}class jH extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jH.prototype)}}class AH extends Error{constructor(e){super(e),Object.setPrototypeOf(this,AH.prototype)}}class OH extends Error{constructor(e){super(e),Object.setPrototypeOf(this,OH.prototype)}}Error;class NH{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function RH(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function PH(e,t){if(!e)throw new OH(t)}function MH(e,t){let n=0;for(const r of e)r===t&&n++;return n}function DH(e){return 1===e.length?e[0]:e}function LH(e){return Array.isArray(e)?e:[e]}function FH(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function BH(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let UH={};function zH(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function VH(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>VH(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?VH(t):e[n]=t.value)}}}function GH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const o=e;let i;if(o in n)i=n[o];else if(o in UH)i=UH[o];else if(i=t[o],null==i)throw new jH("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new jH("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(i),".\n")+"'className' and 'config' must set.");const a=i.className;let s,l;if(a in n?[s,l]=n[a]:a in UH?[s,l]=UH.className:a in t&&([s,l]=t[a]),null==s)throw new jH("Unknown ".concat(r,": ").concat(a,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(UH))e[n]=UH[n];for(const o of Object.keys(n))e[o]=n[o];i.config.customObjects=e;const t=Object.assign({},UH);for(const o of Object.keys(n))UH[o]=n[o];VH(i.config);const r=l(s,i.config,n,o);return UH=Object.assign({},t),r}{const e=Object.assign({},UH);for(const r of Object.keys(n))UH[r]=n[r];const t=new s(i.config);return UH=Object.assign({},e),t}}}function WH(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function HH(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function qH(e){if(null==e)throw new jH("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function XH(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new jH("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function YH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return PH(n>=0),PH(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function KH(e,t){Array.isArray(e)?(qA(e.length>0,(()=>"".concat(t," is unexpectedly an empty array."))),e.forEach(((e,n)=>KH(e,"element ".concat(n+1," of ").concat(t))))):qA(Number.isInteger(e)&&e>0,(()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ZH(e),".")))}function ZH(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>ZH(e))).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function QH(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let JH=0;function $H(){return JH++}const eq={};function tq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in eq||(eq[e]=0),eq[e]+=1,e+eq[e].toString()}const nq=["channelsFirst","channelsLast"],rq=["nearest","bilinear"],oq=["valid","same","causal"],iq=["max","avg"],aq=["sum","mul","concat","ave"],sq=new Map;function lq(e){XH(nq,"DataFormat",e)}function cq(e){XH(oq,"PaddingMode",e)}function uq(e){XH(iq,"PoolMode",e)}const dq=[],hq="/";function pq(e,t){dq.push(e);try{const e=t();return dq.pop(),e}catch(pg){throw dq.pop(),pg}}function fq(e){if(!yq(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===dq.length?"":dq.join(hq)+hq)+e}function mq(e){if(!yq(e))throw new Error("Not a valid tensor name: '"+e+"'");sq.has(e)||sq.set(e,0);const t=sq.get(e);if(sq.set(e,sq.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return sq.set(n,1),n}return e}const gq=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function yq(e){return!!e.match(gq)}function vq(e){return e===parseInt(e.toString(),10)}function bq(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let o=t;o<n;++o)r*=e[o];return r}function xq(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function wq(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Sq(e,t){if(t<e)throw new jH("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let _q;function kq(){return null==_q&&(_q=ED().epsilon()),_q}function Tq(e,t){return dL(e,t)}function Eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),DF(e,n)}function Cq(e,t,n){return wD((()=>{switch(e.rank){case 1:return oU(e,t,n);case 2:return iU(e,[t,0],[n,e.shape[1]]);case 3:return aU(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return sU(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return rU(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return rU(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new jH("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Iq(e,t,n){return wD((()=>{switch(e.rank){case 1:return oU(e,t,n);case 2:return iU(e,[0,t],[e.shape[0],n]);case 3:return aU(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return sU(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new jH("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function jq(e,t,n,r){return wD((()=>{switch(e.rank){case 1:return oU(e,t,n);case 2:switch(r){case 1:return Cq(e,t,n);case 2:return Iq(e,t,n);default:throw new jH("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Cq(e,t,n);case 2:return aU(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Iq(e,t,n);default:throw new jH("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Cq(e,t,n);case 2:return sU(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return sU(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Iq(e,t,n);default:throw new jH("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new jH("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Aq(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),HF(e,n)}function Oq(e,t){switch(e.rank){case 1:return qF([e,t]);case 2:return XF([e,t],0);case 3:return YF([e,t],0);case 4:return KF([e,t],0);default:throw new jH("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Nq(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new jH("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return cB(e,t)}function Rq(e){return KB(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function Pq(e,t,n,r){if(e.rank<2||t.rank<2)throw new AH("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new AH("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return LU({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Lq(e.rank,r,"channelsLast"):null,activation:n})}{const o=e.shape.slice(),i=o.pop();e=DF(e,[-1,i]);const a=t.shape.slice(),s=a.pop(),l=a.pop(),c=[...a,s],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=DF(wU(t,u),[l,-1]);const d=[...o,...c];return DF(LU({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Lq(e.rank,r,"channelsLast"):null,activation:n}),d)}}function Mq(e,t,n){return wD((()=>(t=Array.isArray(t)?fU(t,"int32"):dL(t,"int32"),hB(e,t,n))))}function Dq(e){return yL(e,e)}function Lq(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new jH("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?DF(t,[1,r[0],1,1,1]):DF(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?DF(t,[1,1,1,1,r[0]]):DF(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?DF(t,[1,r[0],1,1]):DF(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?DF(t,[1,1,1,r[0]]):DF(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?DF(t,[1,r[0],1]):DF(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?DF(t,[1,1,r[0]]):DF(t,[1].concat(r))}else if(e<3)return t;throw new jH("Unsupported input rank by biasAdd: ".concat(t.rank))}function Fq(e,t,n){return wD((()=>(null==n&&(n="channelsLast"),lq(n),fL(e,Lq(e.rank,t,n)))))}function Bq(e,t,n,r){return wD((()=>SU(e,t,n,r)))}function Uq(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const zq=["fanIn","fanOut","fanAvg"],Vq=["normal","uniform","truncatedNormal"];class Gq extends TL{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Wq extends Gq{apply(e,t){return zB(e,t)}}Wq.className="Zeros",CL(Wq);class Hq extends Gq{apply(e,t){return VB(e,t)}}Hq.className="Ones",CL(Hq);class qq extends Gq{constructor(e){if(super(),"object"!==typeof e)throw new jH("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new jH("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return wD((()=>yL(SL(this.value),VB(e,t))))}getConfig(){return{value:this.value}}}qq.className="Constant",CL(qq);class Xq extends Gq{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return ZB(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Xq.className="RandomUniform",CL(Xq);class Yq extends Gq{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new AH("randomNormal does not support dType ".concat(t,"."));return Rq(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Yq.className="RandomNormal",CL(Yq);class Kq extends Gq{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new AH("truncatedNormal does not support dType ".concat(t,"."));return gU(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Kq.className="TruncatedNormal",CL(Kq);class Zq extends Gq{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return wD((()=>{if(2!==e.length||e[0]!==e[1])throw new jH("Identity matrix initializer can only be used for 2D square matrices.");return yL(this.gain,uB(e[0]))}))}getConfig(){return{gain:this.gain}}}Zq.className="Identity",CL(Zq);class Qq extends Gq{constructor(e){if(super(),e.scale<0)throw new jH("scale must be a positive float. Got: ".concat(e.scale));var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,XH(zq,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){XH(Vq,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(lq(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=bq(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=bq(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=bq(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],o=n[1];let i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,o):i/=Math.max(1,(r+o)/2),"normal"===this.distribution){const n=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new AH("".concat(this.getClassName()," does not support dType ").concat(t,"."));return gU(e,0,n,t,this.seed)}{const n=Math.sqrt(3*i);return ZB(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Qq.className="VarianceScaling",CL(Qq);class Jq extends Qq{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}Jq.className="GlorotUniform",CL(Jq);class $q extends Qq{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}$q.className="GlorotNormal",CL($q);class eX extends Qq{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}eX.className="HeNormal",CL(eX);class tX extends Qq{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}tX.className="HeUniform",CL(tX);class nX extends Qq{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}nX.className="LeCunNormal",CL(nX);class rX extends Qq{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qq.className}}rX.className="LeCunUniform",CL(rX);class oX extends Gq{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return wD((()=>{if(e.length<2)throw new AH("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=KA(e.slice(0,-1)),r=e[e.length-1],o=n*r;o>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(o,") elements: ")+"Slowness may result.");const i=Rq([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),a=_z.qr(i,!1);let s=a[0];const l=a[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=yL(s,l.sign()),n<r&&(s=s.transpose()),yL(SL(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}oX.className="Orthogonal",CL(oX);const iX={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function aX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return GH(e,EL.getMap().classNameMap,t,"initializer")}function sX(e){return zH(e)}function lX(e){if("string"===typeof e){const t=e in iX?iX[e]:e;if("GlorotNormal"===t)return new $q;if("GlorotUniform"===t)return new Jq;if("HeNormal"===t)return new eX;if("HeUniform"===t)return new tX;if("LeCunNormal"===t)return new nX;if("LeCunUniform"===t)return new rX;{const e={};return e.className=t,e.config={},aX(e)}}return e instanceof Gq?e:aX(e)}function cX(e){return Array.isArray(e)&&Array.isArray(e[0])}function uX(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function dX(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new jH("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function hX(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new jH("Expected exactly 1 Shape; got ".concat(e.length))}return e}function pX(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const fX="Variable";class mX{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fX,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=$H(),n=null==n?fX:n,this.originalName=fq(n),this.name=mq(this.originalName),this.trainable_=r,this.constraint=o,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return nD.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function gX(e){return e.map((e=>e.read()))}function yX(e){e.forEach((e=>{e[0].write(e[1])}))}class vX{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class bX{constructor(e,t,n,r,o,i,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=$H(),null!=i&&(this.originalName=fq(i),this.name=mq(this.originalName)),this.rank=t.length}}let xX=0;class wX{constructor(e,t){this.callArgs=t,this.id=xX++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let SX=0;class _X extends TL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=SX++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=FH(e)+"_"+tq(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new IH("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new jH("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return DH(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return DH(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new CH("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new CH("Layer ".concat(this.name)+" is not connected, no input to return.");return DH(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new CH("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new CH("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return DH(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=LH(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=LH(this.inputSpec);if(t.length!==n.length)throw new jH("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],o=n[r];if(null==o)continue;const i=e.rank;if(null!=o.ndim&&i!==o.ndim)throw new jH("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(o.ndim,", found ndim=").concat(i));if(null!=o.maxNDim&&i>o.maxNDim)throw new jH("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(o.maxNDim,", found ndim=").concat(i));if(null!=o.minNDim&&i<o.minNDim)throw new jH("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(o.minNDim,", found ndim=").concat(i,"."));if(null!=o.dtype&&e.dtype!==o.dtype)throw new jH("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(o.dtype,", found dtype=").concat(e.dtype,"."));if(o.axes){const t=e.shape;for(const e in o.axes){const n=Number(e),i=o.axes[e],a=n>=0?t[n]:t[t.length+n];if(null!=i&&-1===[i,null].indexOf(a))throw new jH("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(i," but got shape ").concat(t,"."))}}if(null!=o.shape)for(let t=0;t<o.shape.length;++t){const n=o.shape[t],i=e.shape[t];if(null!=n&&null!=i&&n!==i)throw new jH("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(o.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=LH(e),r=function(e){let t=!0;for(const n of LH(e))if(!(n instanceof bX)){t=!1;break}return t}(e),o=function(e){let t=!0;for(const n of LH(e))if(n instanceof bX){t=!1;break}return t}(e);if(r===o)throw new jH("Arguments to apply() must be all SymbolicTensors or all Tensors");return pq(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of LH(e))t.push(n.shape);this.build(DH(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const o=LH(r),i=[];for(let e of o)-1!==n.indexOf(e)&&(e=e.clone()),i.push(e);if(r=DH(i),null!=this.activityRegularizer)throw new AH("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=LH(e);const t=[];for(const n of e)t.push(n.shape);return DH(t)}(e),r=this.computeOutputShape(n);let o;const i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),o=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new bX(i,n,this,LH(e),t,this.name,r))):new bX(i,r,this,LH(e),t,this.name),this.addInboundNode(e,o,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new AH("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new CH("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new CH("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new IH("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return pX(this.weights)}build(e){this.built=!0}getWeights(){return gX(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){wD((()=>{const t=this.weights;if(t.length!==e.length)throw new jH('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=gX(t);for(let o=0;o<r.length;++o){const i=r[o],a=t[o],s=e[o];if(!ZA(i.shape,s.shape))throw new jH("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(s.shape));n.push([a,s])}yX(n)}))}addWeight(e,t,n,r,o,i,a,s){if(-1!==this._addedWeightNames.indexOf(e))throw new jH("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():lX("zeros"));const l=r.apply(t,n),c=new mX(l,n,e,i,a);return l.dispose(),null!=o&&this.addLoss((()=>o.apply(c.read()))),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=LH(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),o=LH(t),i=LH(r);if(o.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(o.length," tensors ")+"but ".concat(o.length," masks for those tensors"));for(let a=0;a<o.length;a++)o[a].kerasMask=i[a]}addInboundNode(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=LH(e);t=LH(t),n=LH(n),r=LH(r),o=uX(o),i=uX(i);const l=[],c=[],u=[];for(const d of s)l.push(d.sourceLayer),c.push(d.nodeIndex),u.push(d.tensorIndex);new wX({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:i},a);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function kX(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=kX(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class TX extends _X{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:tq("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new jH("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new jH("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new jH("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new bX(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new wX({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new jH("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function EX(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new jH("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");return new TX({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}TX.className="InputLayer",CL(TX);class CX{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof CX)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new jH("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return dL(t,e.dtype)}catch(Zae){throw new jH("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof bX){if(null==this.id2Value[e.id])throw new jH("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new jH("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof bX){if(null==this.id2Value[e.id])throw new jH("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new jH("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&SD(this.id2Mask)}}const IX=new NH,jX=new NH;function AX(e,t,n,r){const o=null!=n&&n.training,i=Array.isArray(e),a=i?e:[e],s=a.map((e=>e.name)),l=[],c=t.names();for(const f of s)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=s.join(",")+"|"+t.names().sort().join(",");let d,h=IX.get(u);if(null==h){const e=function(e,t){qA(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const o=NX(e[0],t);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const i of e){const{sorted:e,recipientMap:a}=NX(i,t);for(const t of e)o.has(t.name)||(n.push(t),o.add(t.name));for(const t in a)null==r[t]&&(r[t]=new Set),a[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:OX(r)}}(a,t);h=e.sorted,d=e.recipientCounts,IX.put(u,h),jX.put(u,d)}d={},o||Object.assign(d,jX.get(u));const p=new CX(t);for(let f=0;f<h.length;++f){if(null!=r){const e=xD().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=h[f],i=e.sourceLayer;if(i instanceof TX)continue;const a=[],c=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);a.push(e),c.push(r),null!=r&&(m=!0),o||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=c[0]);const g=LH(i.apply(a,n));let y=null;i.supportsMasking&&(y=i.computeMask(a,c));const v=RX(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],g[t],Array.isArray(y)?y[0]:y);const e=s.indexOf(b[t].name);-1!==e&&(l[e]=g[t])}o||SD(u)}return p.disposeMasks(),i?l:l[0]}function OX(e){const t={};for(const n in e)t[n]=e[n].size;return t}function NX(e,t){const n=new Set,r=[],o={};for(const s of t.names())n.add(s);const i=[],a=[];for(i.push(e);i.length>0;){const e=i[i.length-1];if(n.has(e.name)){i.pop();continue}const t=a[a.length-1]===i.length-1;if(0===e.inputs.length||t)i.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(i.length-1);for(const t of e.inputs)null==o[t.name]&&(o[t.name]=new Set),o[t.name].add(e.name),n.has(t.name)||i.push(t)}}return{sorted:r,recipientMap:o}}function RX(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function PX(e,t){return wD((()=>vL(bB(yL(e,e),t,!0))))}EO().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=IX&&IX.setMaxEntries(e),null!=jX&&jX.setMaxEntries(e)}));class MX extends TL{getConfig(){return{}}}class DX extends MX{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return wD((()=>{const t=PX(e,this.axis),n=WF(t,0,this.maxValue);return yL(e,gL(n,fL(kq(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}DX.className="MaxNorm",CL(DX);class LX extends MX{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return wD((()=>gL(e,fL(kq(),PX(e,this.axis)))))}getConfig(){return{axis:this.axis}}}LX.className="UnitNorm",CL(LX);class FX extends MX{apply(e){return JB(e)}}FX.className="NonNeg",CL(FX);class BX extends MX{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return wD((()=>{const t=PX(e,this.axis),n=fL(yL(this.rate,WF(t,this.minValue,this.maxValue)),yL(1-this.rate,t));return yL(e,gL(n,fL(kq(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}BX.className="MinMaxNorm",CL(BX);const UX={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function zX(e){return zH(e)}function VX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return GH(e,EL.getMap().classNameMap,t,"constraint")}function GX(e){if(null==e)return null;if("string"===typeof e){return VX({className:e in UX?UX[e]:e,config:{}})}return e instanceof MX?e:VX(e)}async function WX(e){if(null==e)return;const t=[],n=[],r=[];for(const o in e){const i=e[o];if("number"!==typeof i){const e=i;t.push(e.data()),n.push(o),r.push(e)}}if(t.length>0){const o=await Promise.all(t);for(let t=0;t<o.length;++t)e[n[t]]=o[t][0];SD(r)}}function HX(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var qX;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(qX||(qX={}));class XX{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class YX{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class KX extends XX{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const o=wD((()=>fL(this.totals[r],yL(e,n))));this.totals[r]=o,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:wD((()=>{const e=yL(gL(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),_D(t[n])})))}}class ZX extends XX{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const o in this.history){const r=this.history[o];for(let i=0;i<r.length;++i)if("number"!==typeof r[i]){const a=r[i];e.push(a.data()),t.push(o),n.push(i)}}const r=await Promise.all(e);for(let o=0;o<r.length;++o){this.history[t[o]][n[o]].dispose(),this.history[t[o]][n[o]]=r[o][0]}}}class QX extends XX{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Ez,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");cO(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,o=null!=n?n():mM();return function(){const i=null!=n?n():mM();return i-o<t||(o=i,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await WX(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await WX(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await WX(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await WX(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await WX(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):cO(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await WX(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await WX(e),await this.trainEnd(e))}}function JX(e,t){if(null==e&&(e={}),e instanceof XX)return[e];if(Array.isArray(e)&&e[0]instanceof XX)return e;return LH(e).map((e=>new QX(e,t)))}class $X{constructor(){}static registerCallbackConstructor(e,t){qA(e>=0&&Number.isInteger(e),(()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e))),$X.checkForDuplicate(t),null==$X.constructors[e]&&($X.constructors[e]=[]),$X.constructors[e].push(t)}static checkForDuplicate(e){for(const t in $X.constructors){$X.constructors[+t].forEach((t=>{if(t===e)throw new jH("Duplicate callback constructor.")}))}}static clear(){$X.constructors={}}static createCallbacks(e){const t=[];for(const n in $X.constructors){const r=+n;e>=r&&t.push(...$X.constructors[r])}return t.map((e=>new e))}}function eY(e,t,n,r,o,i,a,s,l){const c=new ZX,u=[new KX,...$X.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const d=new YX(u);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:i,batchSize:a,verbose:t,doValidation:s,metrics:l}),{callbackList:d,history:c}}function tY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return GH(e,EL.getMap().classNameMap,t,"layer",n)}function nY(e,t){return wD((()=>{"float32"!==e.dtype&&(e=dL(e,"float32"));const n=bB(Dq(e),t,!0),r=AL(n.shape,kq()),o=vL(BL(n,r));return gL(e,o)}))}function rY(e,t){return wD((()=>PB(Dq(RL(t,e)),-1)))}function oY(e,t){return wD((()=>PB(ML(RL(t,e)),-1)))}function iY(e,t){return wD((()=>{const n=RL(e,t),r=WF(ML(e),kq(),Number.MAX_VALUE),o=ML(gL(n,r));return yL(100,PB(o,-1))}))}function aY(e,t){return wD((()=>{const n=WF(t,kq(),Number.MAX_VALUE),r=gB(fL(1,n)),o=WF(e,kq(),Number.MAX_VALUE),i=gB(fL(1,o));return PB(Dq(RL(r,i)),-1)}))}function sY(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return wD((()=>{if(n)t=lU(t);else{const e=bB(t,t.shape.length-1,!0);t=gL(t,e)}return t=WF(t,kq(),1-kq()),FB(bB(yL(dL(e,"float32"),gB(t)),t.shape.length-1))}))}function lY(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return wD((()=>{const r=dL(dB(function(e){const t=[bq(e.shape)];return DF(e,t)}(e)),"int32"),o=(t=WF(t,kq(),1-kq())).shape;return sY(DF(UB(r,o[o.length-1]),o),t,n)}))}function cY(e,t){return wD((()=>{let n;return n=WF(t,kq(),1-kq()),n=gB(gL(n,RL(1,n))),PB(function(e,t){if(!ZA(e.shape,t.shape))throw new jH("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return wD((()=>{const n=JB(t),r=FB(ML(t));return fL(RL(n,yL(t,e)),yB(sB(r)))}))}(e,n),-1)}))}function uY(e,t){return wD((()=>{const n=WF(e,kq(),1),r=WF(t,kq(),1);return bB(yL(e,gB(gL(n,r))),-1)}))}function dY(e,t){return wD((()=>{const n=nY(e,-1),r=nY(t,-1),o=yL(n,r);return FB(bB(o,-1))}))}$X.constructors={};const hY={meanSquaredError:rY,meanAbsoluteError:oY,meanAbsolutePercentageError:iY,meanSquaredLogarithmicError:aY,squaredHinge:function(e,t){return wD((()=>{const n=BL(0,RL(1,yL(e,t)));return PB(Dq(n),-1)}))},hinge:function(e,t){return wD((()=>{const n=BL(0,RL(1,yL(e,t)));return PB(n,-1)}))},categoricalHinge:function(e,t){return wD((()=>{const n=bB(yL(e,t),-1),r=vB(yL(RL(1,e),t),-1);return BL(0,fL(1,RL(r,n)))}))},logcosh:function(e,t){return wD((()=>{const n=Math.log(2),r=RL(t,e),o=RL(fL(r,cU(yL(-2,r))),n);return PB(o,-1)}))},categoricalCrossentropy:sY,sparseCategoricalCrossentropy:lY,binaryCrossentropy:cY,kullbackLeiblerDivergence:uY,poisson:function(e,t){return wD((()=>{const n=gB(fL(kq(),t));return PB(RL(t,yL(e,n)),-1)}))},cosineProximity:dY};function pY(e){if("string"===typeof e){if(e in hY)return hY[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new jH(t)}return e}function fY(e,t){return wD((()=>{const n=yL(.5,GB(t)),r=Tq(pB(t,n),e.dtype);return PB(aB(e,r),-1)}))}function mY(e,t){return wD((()=>Tq(aB(xF(e,-1),xF(t,-1)),"float32")))}function gY(e,t){return wD((()=>dL(bB(AB(aB(e,1),aB(t,1))),"float32")))}function yY(e,t){return cY(e,t)}function vY(e,t){return e.rank===t.rank&&(e=dU(e,[e.rank-1])),(t=xF(t,-1)).dtype!==e.dtype&&(t=dL(t,e.dtype)),dL(aB(e,t),"float32")}const bY=sY,xY=lY,wY={binaryAccuracy:fY,categoricalAccuracy:mY,precision:function(e,t){return wD((()=>{const n=gY(e,t),r=function(e,t){return wD((()=>dL(bB(AB(aB(e,0),aB(t,1))),"float32")))}(e,t),o=fL(n,r);return dL(vU(pB(o,0),gL(n,o),0),"float32")}))},categoricalCrossentropy:bY,sparseCategoricalCrossentropy:xY,mse:rY,MSE:rY,mae:oY,MAE:oY,mape:iY,MAPE:iY,cosine:dY};function SY(e){if("string"===typeof e&&e in wY)return wY[e];if("string"!==typeof e&&null!=e)return e;throw new jH("Unknown metric ".concat(e))}function _Y(e){if(PH(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(hY))if(hY[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(wY))if(wY[n]===e){t=n;break}return void 0!==t?t:e.name}}const kY=1048576;function TY(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!EY(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>kY&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(kY,"."))}}function EY(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!EY(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!EY(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function CY(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const o=function(e){let t=!0;const n=[],r=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||1===o.length&&o[0].inboundLayers.length>1){t=!1;break}r.push(...o)}if(t)for(const o of e.layers){let e=!1;for(const n of o.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),i=["Layer (type)","Input Shape","Output shape","Param #"];let a;if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!o){i.push("Receives inputs"),a=[];for(const t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),IY(i,n,r),r("=".repeat(t));const s=e.layers;for(let u=0;u<s.length;++u)o?jY(s[u],n,r):AY(s[u],n,a,r),r((u===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?pX(e.collectedTrainableWeights):pX(e.trainableWeights);return t}(e),c=pX(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function IY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let o=0;o<e.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=e[o],r=r.slice(0,t[o]),r+=" ".repeat(t[o]-r.length);n(r)}function jY(e,t,n){let r,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(Zae){o="multiple"}try{r=JSON.stringify(e.outputShape)}catch(Zae){r="multiple"}const i=e.name,a=e.getClassName();IY(["".concat(i," (").concat(a,")"),o,r,e.countParams().toString()],t,n)}function AY(e,t,n,r){let o,i;try{i=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(Zae){i="multiple"}try{o=JSON.stringify(e.outputShape)}catch(Zae){o="multiple"}const a=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];a.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const s=e.name,l=e.getClassName(),c=0===a.length?"":a[0];IY(["".concat(s," (").concat(l,")"),i,o,e.countParams().toString(),c],t,r);for(let u=1;u<a.length;++u)IY(["","","","",a[u]],t,r)}function OY(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function NY(e,t){if(null===e)return null;if("string"===typeof e)return BH(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];OY(t,o,r)?n.push(r):n.push(NY(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=BH(n);t[e]=NY(r,e)}}return t}}function RY(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return FH(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];OY(t,o,r)?n.push(r):n.push(RY(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],o=FH(n);t[o]="name"!==n&&"className"!==n||"string"!==typeof r?RY(r,n):r}return t}}const PY="4.17.0";class MY extends _X{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=tq(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],HH(this.inputs).length!==this.inputs.length)throw new jH("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map((e=>e.name))));HH(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map((e=>e.name)))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;PH(0===t,"input layer has >1 nodes"),PH(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof TX))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},o={},i={},a=[],s=(e,t,n,r,o,l)=>{null!=r&&null!=o&&null!=l||(r=e.sourceLayer,o=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[o];if(-1!==n.indexOf(c))throw new IH("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(MY.nodeKey(r,o)),r.id in i||(i[r.id]=Object.keys(i).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let i=0;i<u;i++){const e=c.inputTensors[i],r=c.inboundLayers[i],o=c.nodeIndices[i],a=c.tensorIndices[i];s(e,t,n,r,o,a)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);a.push(c)},l=[],c=[];for(const y of this.outputs)s(y,l,c);const u=a.slice().reverse();for(const y of u){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const i=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,i),r[y.outboundLayer.id]=e,o[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const o=y.inboundLayers[r],i=y.nodeIndices[r],a=o.inboundNodes[i],s=null==t[a.id]?0:t[a.id];t[a.id]=Math.max(e+1,s),n[a.id]=a}}const d={};for(const y in t){const e=t[y];e in d||(d[e]=[]),d[e].push(n[y])}const h={};for(const y in r){const e=r[y];e in h||(h[e]=[]),h[e].push(o[y])}let p=Object.keys(h).map((e=>parseInt(e,10))).sort(WH);this.layers=[];for(const y of p){const e=h[y];e.sort(((e,t)=>{const n=i[e.id],r=i[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof MY&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,p=Object.keys(d).map((e=>parseInt(e,10))).sort(WH);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of d[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new IH("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(m));for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=d;const g=this.layers.map((e=>e.name));for(const y of g){const e=g.filter((e=>e===y)).length;if(1!==e)throw new IH('The name "'.concat(y,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new wX({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new jH("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const o=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[e,t]of a.weights.entries()){const i=o?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[i])throw new jH("Duplicate weight name: ".concat(i));n[i]=t,r++}const i=[];for(const a in e){let r=a;if(null==n[a]){const e=a.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])i.push([n[r],e[a]]);else if(t)throw new jH("Provided weight data has no target variable: ".concat(a));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new jH("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}yX(i)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],o=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");o!==t&&(e[o]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(PY),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=RY(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return wD((()=>{e=LH(e);const n=new CX;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return AX(this.outputs,n,t)}))}computeMask(e,t){return wD((()=>{let n;return e=LH(e),n=null==t?RH(null,e.length):LH(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=uX(e);if(t.length!==this.inputLayers.length)throw new jH("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let a=0;a<t.length;a++){const e=this.inputLayers[a],r=t[a];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(WH);if(r.length>1)for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let a=0;a<t.inboundLayers.length;a++){const e=t.inboundLayers[a],o=t.nodeIndices[a],i=t.tensorIndices[a],s=n["".concat(e.name,"_").concat(o,"_").concat(i)];r.push(s)}const o=uX(e.computeOutputShape(DH(r))),i=e.inboundNodes.indexOf(t);for(let t=0;t<o.length;t++){n["".concat(e.name,"_").concat(i,"_").concat(t)]=o[t]}}}const o=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],t=this.outputLayersNodeIndices[a],n=this.outputLayersTensorIndices[a],r="".concat(e.name,"_").concat(t,"_").concat(n);i.push(r)}for(let a=0;a<i.length;a++){const e=i[a];PH(e in n),o.push(n[e])}return DH(o)}runInternalGraph(e,t){null==t&&(t=RH(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],o=e[s],i=t[s];n[r.id]=[o,i]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(WH);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,o=t.outputTensors,i=new Array;for(const t of r)t.id in n&&i.push(n[t.id]);if(i.length===r.length){let r,a,s,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===i.length){const[t,n]=i[0];null==c.mask&&(c.mask=n),s=LH(e.call(t,c)),l=LH(e.computeMask(t,n)),r=[t],a=[n]}else r=i.map((e=>e[0])),a=i.map((e=>e[1])),null==c.mask&&(c.mask=a),s=LH(e.call(r,c)),l=LH(e.computeMask(r,a));if(e.activityRegularizer)throw new AH("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<o.length;++e){const t=o[e],r=s[e],i=l[e];n[t.id]=[r,i]}}}}const o=[],i=[],a=[];for(const s of this.outputs){PH(s.id in n,"Could not compute output ".concat(s.name," : ").concat(s.id));const[e,t]=n[s.id];a.push(e.shape),o.push(e),i.push(t)}return[o,i,a]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof MY?1:0;for(let e=0;e<r.inboundNodes.length;e++){const o=MY.nodeKey(r,e);this.containerNodes.has(o)&&(t[o]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new jH("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new jH("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new jH("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return wD((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=MY.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const i of this.layers){const e=i.getClassName(),r=i.getConfig(),o=[];for(let n=0;n<i.inboundNodes.length;n++){const e=i.inboundNodes[n],r=MY.nodeKey(i,n);let a={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),a=e.callArgs}catch(Zae){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),a={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const o=e.inboundLayers[r],i=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[MY.nodeKey(o,i)];null==l&&(l=0),n.push([o.name,l,s,a])}o.push(n)}}}const a={};a.name=i.name,a.className=e,a.config=r,a.inboundNodes=o,n.push(a)}e.layers=n;const r=[];for(let i=0;i<this.inputLayers.length;i++){const e=this.inputLayers[i],n=this.inputLayersNodeIndices[i],o=MY.nodeKey(e,n);if(!this.containerNodes.has(o))continue;let a=t[o];null!==a&&void 0!==a||(a=0);const s=this.inputLayersTensorIndices[i];r.push([e.name,a,s])}e.inputLayers=r;const o=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],n=this.outputLayersNodeIndices[i],r=MY.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let a=t[r];null!==a&&void 0!==a||(a=0);const s=this.outputLayersTensorIndices[i];o.push([e.name,a,s])}return e.outputLayers=o,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},o={};function i(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function a(e,t){const n=[];let o;for(const a of t){const s=a[0],l=a[1],c=a[2];if(o=null==a[3]?{}:a[3],!(s in r))return void i(e,t);const u=r[s];if(u.inboundNodes.length<=l)return void i(e,t);const d=u.inboundNodes[l];n.push(d.outputTensors[c])}n.length>0&&e.apply(DH(n),o)}function s(e){const o=e.name,a=tY(e,null!=t.customObjects?t.customObjects:{});a.setFastWeightInitDuringBuild(n),r[o]=a;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new jH("Corrupted configuration, expected array for nodeData: ".concat(e));i(a,e)}))}const l=t.name,c=t.layers;for(const f of c)s(f);for(;!qH(o);)for(const e of c){const t=r[e.name];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)a(t,n)}}const u=[],d=[],h=t.inputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];PH(e in r);const o=r[e].inboundNodes[t].outputTensors;u.push(o[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];PH(e in r);const o=r[e].inboundNodes[t].outputTensors;d.push(o[n])}return new e({inputs:u,outputs:d,name:l})}get stateful(){if(this._stateful)throw new jH("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){wD((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function DY(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function LY(e,t){return DY(e,t,"classWeight")}async function FY(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=wD((()=>{if(1===e.shape.length)return hL(e);if(2===e.shape.length){if(e.shape[1]>1){return xF(e,1)}if(1===e.shape[1])return DF(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),r=Array.from(await t.data());SD(t);const o=[];return r.forEach((e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");o.push(n[e])})),fU(o,"float32")}return null}function BY(e,t){return yL(e,t)}function UY(e,t){let n,r;const o=t;n=o.xs,r=o.ys,qA(null!=n&&null!=r,(()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)));const i=zY("input",e.inputNames,n),a=zY("output",e.outputNames,r),s=i[0].shape[0];qA(i.length===e.inputs.length,(()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")"))),qA(a.length===e.outputs.length,(()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(a.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")));for(let l=0;l<i.length;l++)qA(i[l].shape[0]===s,(()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));for(let l=0;l<a.length;l++)qA(a[l].shape[0]===s,(()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(a[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));return{xs:i,ys:a}}function zY(e,t,n){if(n instanceof MM)return[n];if(Array.isArray(n))return qA(n.length===t.length,(()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,"."))),n;{const r=[];for(const o of t){if(null==n[o])throw new jH("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));r.push(n[o])}return r}}async function VY(e,t,n){const r=null!=n.batchesPerEpoch;if(qA(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),qA(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),qA(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs))),qA(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch))),qA(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=null!=n.validationData;let i,a;if(o)if(GY(n.validationData))qA(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches)));else{const e=function(e){if(3===e.length)throw new AH("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);i=e.xs,a=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=o?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const u=JX(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=eY(u,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,o,c);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const c={};await h.onEpochBegin(f);let u=0,d=0;for(r||(m=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:o}=UY(e,t.value),i={};i.batch=d,i.size=r[0].shape[0],await h.onBatchBegin(d,i);const a=[];if(null!=n.classWeight){const t=LY(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await FY(o[e],null,t[e]))}const c=r.concat(o).concat(a),p=s(c);SD(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];i[t]=n,_D(n)}await h.onBatchEnd(d,i),HX(i),d++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(o){let t;t=GY(n.validationData)?LH(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):LH(e.evaluate(i,a,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,c),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function GY(e){return"function"===typeof e.iterator}function WY(e){qA(e>0&&Number.isInteger(e),(()=>"batchSize is required to be a positive integer, but got ".concat(e)))}function HY(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>Cq(e,t,n-t))):Cq(e,t,n-t)}function qY(e,t){return wD((()=>null==e?null:Array.isArray(e)?e.map((e=>qY(e,t))):Mq(e,"int32"===t.dtype?t:dL(t,"int32"))))}function XY(e,t){const n=[];let r=0,o=null;for(;r<e;)o=r+t,o>=e&&(o=e),n.push([r,o]),r=o;return n}function YY(e){const t=[];e instanceof MM&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Eq(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function KY(e,t){if(null==e)return;const n=[];if(t instanceof MM)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const o in t){const e=t[o];n.push(e.id)}const r=[];if(e instanceof MM)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const o in e){const t=e[o];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function ZY(e){return Array.isArray(e)}function QY(e){return!function(e){return e instanceof MM}(e)&&!ZY(e)}function JY(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(ZY(e)&&e.length>0)t=!0;else if(QY(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new jH("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((e=>null));if(QY(e)){r=[];for(const n of t){if(null==e[n])throw new jH('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(ZY(e)){if(e.length!==t.length)throw new jH("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new jH("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=YY(r),null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new jH("Error when checking ".concat(i,": expected ").concat(t[a]," ")+"to have ".concat(n[a].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[a].length;++t){if(0===t&&!o)continue;const r=e.shape[t],s=n[a][t];if(null!=s&&s>=0&&r!==s)throw new jH("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[a].slice(1,n[a].length),"] ")+"(i.e.,tensor shape [*,".concat(n[a].slice(1,n[a].length),"])")+" but the ".concat(i," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function $Y(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new jH("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new jH("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new jH("Error when checking ".concat(i,": expected ").concat(t[a]," ")+"to have ".concat(n[a].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[a].length;++r){if(0===r&&!o)continue;const s=e.shape[r],l=n[a][r];if(null!=l&&l!==s)throw new jH("Error when checking ".concat(i,": expected ")+"".concat(t[a]," to have shape ").concat(JSON.stringify(n[a])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class eK extends MY{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new jH("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");CY(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>kz.adagrad(.01),Adadelta:()=>kz.adadelta(1,.95,kq()),Adam:()=>kz.adam(.001,.9,.999,kq()),Adamax:()=>kz.adamax(.002,.9,.999,kq(),0),RMSProp:()=>kz.rmsprop(.001,.9,0,kq()),SGD:()=>kz.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new jH("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof IL))throw new jH("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new jH("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map((e=>pY(e)))}else{const n=pY(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new jH('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(pY(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const e=this.internalOutputShapes[i],t=this.outputNames[i];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[i])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],pq("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),o=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};pq("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,i;for(const a of t){if("string"===typeof a&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(a)){const t=this.internalOutputShapes[e];let o;1===t[t.length-1]||this.lossFunctions[e]===cY?-1!==["accuracy","acc"].indexOf(a)?r=fY:-1!==["crossentropy","ce"].indexOf(a)&&(r=yY):this.lossFunctions[e]===lY?-1!==["accuracy","acc"].indexOf(a)?r=vY:-1!==["crossentropy","ce"].indexOf(a)&&(r=xY):-1!==["accuracy","acc"].indexOf(a)?r=mY:-1!==["crossentropy","ce"].indexOf(a)&&(r=bY),-1!==["accuracy","acc"].indexOf(a)?o="acc":-1!==["crossentropy","ce"].indexOf(a)&&(o="ce"),i=r,n=""+o}else{const e=SY(a);i=e,n=""+_Y(a)}let t;pq(n,(()=>{t=i})),o(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;WY(r);const o=this.standardizeUserDataXY(e,t,!0,r);try{const e=o[0].concat(o[1]);this.makeTestFunction();const t=this.testFunction;return DH(this.testLoop(t,e,r,n.verbose,n.steps))}finally{KY(o[0],e),KY(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,o=e.testFunction;let i=[];if(n.verbose>0)throw new AH("Verbose mode is not implemented yet.");qA(!r||n.batches>0&&Number.isInteger(n.batches),(()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches))));const a="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await a.next();if(i=wD((()=>{if(t.value){const{xs:n,ys:r}=UY(e,t.value),a=n.concat(r),c=wD((()=>o(a)));if(SD(a),0===l)for(let e=0;e<c.length;++e)i.push(SL(0));const u=a[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=i[e];i[e]=wD((()=>fL(i[e],yL(u,t)))),l>0&&SD(n)}SD(c),s+=u,++l}return i})),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<i.length;++c){const e=i[c];i[c]=gL(i[c],s),SD(e)}return DH(i)}(this,e,t)}checkNumSamples(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new jH("If ".concat(o," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new jH("Either the input data should have a defined shape, or "+"".concat(o," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new jH("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],o=this.retrieveSymbolicTensors(r),i=new CX;if(e instanceof MM&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new jH("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)i.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new jH("No value is provided for the model's input ".concat(s.name));i.add(s,t)}const a=AX(o,i);return n?a:a[0]}retrieveSymbolicTensors(e){const t=RH(null,e.length);let n=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],i=o.map((e=>e.name));for(let r=0;r<e.length;++r){const a=i.indexOf(e[r]);if(-1!==a&&(t[r]=o[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new jH("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return wD((()=>{const r=this.checkNumSamples(e);if(n)throw new AH("Verbose predictLoop() is not implemented yet.");const o=XY(r,t),i=this.outputs.map((e=>[]));for(let t=0;t<o.length;++t){const n=wD((()=>{const n=o[t][0],r=o[t][1],i=HY(e,n,r),a=[];if(Array.isArray(i))for(let e=0;e<i.length;++e)a.push({key:this.inputs[e],value:i[e]});else a.push({key:this.inputs[0],value:i});const s=new CX(a);return AX(this.outputs,s)}));n.forEach(((e,t)=>i[t].push(e)))}return DH(i.map((e=>HF(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=YY(e);$Y(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return WY(e),this.predictLoop(n,e)}finally{KY(n,e)}}predictOnBatch(e){$Y(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new IH("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const e=this.feedOutputShapes[o];this.feedLossFns[o]===lY?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t,n){const r=HH(e.map((e=>e.shape[0])));r.sort();const o=HH(t.map((e=>e.shape[0])));if(o.sort(),r.length>1)throw new jH("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((e=>e.shape)))));if(o.length>1)throw new jH("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((e=>e.shape)))));if(r.length>0&&o.length>0&&!ZA(r,o))throw new jH("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(o[0]," target ")+"sample(s).")}(e=JY(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=JY(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[rY,cY,sY];for(let o=0;o<e.length;++o){const i=e[o],a=t[o],s=n[o];if(null!=a){if(a===sY&&1===i.shape[i.shape.length-1])throw new jH("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(a)){const e=i.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],o=t[n];if(null!=o&&r!==o)throw new jH("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new jH("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0;const[a,s]=this.standardizeUserDataXY(e,t,o,i);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=LY(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await FY(s[t],null,e[t]))}return[a,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return wD((()=>{const i=this.checkNumSamples(t,n,o,"steps"),a=[];if(r>0)throw new AH("Verbose mode is not implemented yet.");if(null!=o)throw new AH("steps mode in testLoop() is not implemented yet");{const r=XY(i,n),o=fU(Sq(0,i));for(let n=0;n<r.length;++n){const i=r[n][0],s=r[n][1],l=Cq(o,i,s-i),c=qY(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)a.push(SL(0));for(let e=0;e<u.length;++e){const t=u[e];a[e]=fL(a[e],yL(s-i,t))}}for(let e=0;e<a.length;++e)a[e]=gL(a[e],i)}return a}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let o=r;if(MH(e,r)>1){const t=MH(e.slice(0,n),r);o+="_".concat(t)}t.push(o)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),i=[],a=this.collectedTrainableWeights.map((e=>e.read())),s=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const a=new CX(e),s=AX(this.outputs,a,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=o[n]&&(e=BY(e,o[n]));const i=PB(e);t.push(i),l=0===n?e:fL(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],o=this.metricsTensors[n][1];e=PB(t(r[o],s[o]))}_D(e),i.push(e)}return l=PB(l),this.calculateLosses().forEach((e=>{l=fL(l,e)})),l}),!0,a);return[s].concat(i)}}makeTestFunction(){this.testFunction=e=>wD((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let e=0;e<this.inputs.length;++e)i.push({key:this.inputs[e],value:r[e]});const a=new CX(i),s=AX(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],i=PB(r(o[e],s[e]));n=0===e?i:fL(n,i),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],i=PB(n(o[r],s[r]));t.push(i)}return t}))}async fit(e,t){let n,r,o,i,a,s,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==d.batchSize?32:d.batchSize;WY(h);const p=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,p,h);n=f[0],r=f[1],u=f[2];let m,g=!1;if(null!=d.validationData&&d.validationData.length>0){if(g=!0,2!==d.validationData.length)throw 3===d.validationData.length?new AH("validationData including sample weights is not supported yet."):new jH("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(d.validationData," is invalid."));a=d.validationData[0],s=d.validationData[1];const e=!0,t=await this.standardizeUserData(a,s,null,null,e,h);l=t[0],c=t[1],m=l.concat(c)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];l=HY(n,e,t),o=n,n=HY(n,0,e),c=HY(r,e,t),i=r,r=HY(r,0,e),m=l.concat(c)}else null!=d.validationSteps&&(g=!0);const y=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let x,w;g?(this.makeTestFunction(),x=this.testFunction,w=b.slice().concat(b.map((e=>"val_"+e)))):(x=null,m=[],w=b.slice());const S=JX(d.callbacks,d.yieldEvery);return await this.fitLoop(v,y,b,h,d.epochs,d.verbose,S,x,m,d.shuffle,w,d.initialEpoch,null,null)}finally{this.isTraining=!1,KY(n,e),KY(r,t),KY(o,e),KY(i,t),KY(l,a),KY(c,s),null!=u&&SD(u)}}async fitLoop(e,t,n,r,o,i,a,s,l,c,u,d,h,p){null==r&&(r=32),null==o&&(o=1),null==c&&(c=!0),null==d&&(d=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=p&&(f=!0,null==h))throw new jH("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,h,"steps_per_epoch");let g;null!=m&&(g=Sq(0,m)),null==i&&(i=1);const{callbackList:y,history:v}=eY(a,i,o,d,m,h,r,f,u);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=d;b<o;++b){await y.onEpochBegin(b);const o={};if(null!=h)throw new AH("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new AH("batch shuffling is not implemneted yet");c&&VA(g);const i=fU(g),a=XY(m,r);for(let c=0;c<a.length;++c){const u={};if(await y.onBatchBegin(c,u),wD((()=>{const d=a[c][0],h=a[c][1],p=Cq(i,d,h-d);u.batch=c,u.size=h-d;const m=qY(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];u[t]=r,_D(r)}if(c===a.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],i=e[t];_D(i),o["val_"+r]=i}}})),await y.onBatchEnd(c,u),HX(u),this.stopTraining_)break}i.dispose()}if(await y.onEpochEnd(b,o),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return VY(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],o=n[1],i=this.makeTrainFunction()(r.concat(o)),a=[];for(const s of i){const e=await s.data();a.push(e[0])}return SD(i),KY(n[0],e),KY(n[1],t),DH(a)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:o[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=xD().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-xD().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=FH(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>FH(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=FH(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[FH(_Y(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>FH(_Y(e))));{const e={};for(const t in this.metrics)e[t]=FH(_Y(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=tY(NY(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=BH(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>BH(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=BH(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>BH(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=BH(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,DD.getSaveHandlers(n));if(0===t.length)throw new jH("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new jH("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}var n;if(null==e.save)throw new jH("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await ID(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(PY),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){o.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await ID(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(i=[r.data,t],yD.join(i))}var i;if(null!=this.userDefinedMetadata){const e=!0;TY(this.userDefinedMetadata,this.name,e),o.userDefinedMetadata=this.userDefinedMetadata}return o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){TY(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}eK.className="Model",CL(eK);class tK extends eK{}tK.className="Functional",CL(tK);class nK extends eK{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:tq("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new jH("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof nK||e instanceof eK;let n;if(t){if(n=e,1!==n.outputs.length)throw new jH("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new jH("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new jH("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=EX({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new jH("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new jH("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=kX(this.outputs[0])}this.inboundNodes=[],new wX({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:RH(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(hX(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new eK({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new IH("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new IH("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new IH("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new IH("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new jH("Legacy serialization format not supported yet.");n=t}else qA(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,o=t;const i=new e(o);if(!(i instanceof nK))throw new AH("Sequential.fromConfig called on non-Sequential input: ".concat(i));for(const a of n){const e=tY(a,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),i.add(e)}return i}set stopTraining(e){if(null==this.model)throw new jH("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new jH("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}nK.className="Sequential",CL(nK);class rK extends TL{getConfig(){return{}}}class oK extends rK{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new AH("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return iB(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}oK.className="elu",CL(oK);class iK extends rK{apply(e){return eU(e)}}iK.className="selu",CL(iK);class aK extends rK{apply(e){return JB(e)}}aK.className="relu",CL(aK);class sK extends rK{apply(e){return wD((()=>DB(6,JB(e))))}}sK.className="relu6",CL(sK);class lK extends rK{apply(e){return e}}lK.className="linear",CL(lK);class cK extends rK{apply(e){return nU(e)}}cK.className="sigmoid",CL(cK);class uK extends rK{apply(e){return function(e){return wD((()=>{const t=fL(.5,yL(.2,e));return WF(t,0,1)}))}(e)}}uK.className="hardSigmoid",CL(uK);class dK extends rK{apply(e){return cU(e)}}dK.className="softplus",CL(dK);class hK extends rK{apply(e){return function(e){return wD((()=>gL(e,fL(ML(e),1))))}(e)}}hK.className="softsign",CL(hK);class pK extends rK{apply(e){return pU(e)}}pK.className="tanh",CL(pK);class fK extends rK{apply(e){return lU(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}fK.className="softmax",CL(fK);class mK extends rK{apply(e){return xB(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}mK.className="logSoftmax",CL(mK);class gK extends rK{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return wD((()=>yL(nU(yL(e,t)),e)))}}gK.className="swish",CL(gK);class yK extends rK{apply(e){return wD((()=>yL(e,pU(cU(e)))))}}function vK(e){return e.getClassName()}function bK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return GH(e,EL.getMap().classNameMap,t,"activation")}function xK(e){if(null==e){const e={className:"linear",config:{}};return bK(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},bK(t)}return e instanceof rK?e:bK(e)}function wK(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}yK.className="mish",CL(yK);class SK extends TL{}class _K extends SK{constructor(e){super(),wK(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return wD((()=>{let t=zB([1]);return this.hasL1&&(t=fL(t,bB(yL(this.l1,ML(e))))),this.hasL2&&(t=fL(t,bB(yL(this.l2,Dq(e))))),DF(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}_K.className="L1L2",CL(_K);const kK={l1l2:"L1L2"};function TK(e){return zH(e)}function EK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return GH(e,EL.getMap().classNameMap,t,"regularizer")}function CK(e){if(null==e)return null;if("string"===typeof e){return EK({className:e in kK?kK[e]:e,config:{}})}return e instanceof SK?e:EK(e)}class IK extends _X{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=dX(e);let n=JB(e);return null!=this.maxValue&&(n=WF(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}IK.className="ReLU",CL(IK);class jK extends _X{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=dX(e);return mB(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}jK.className="LeakyReLU",CL(jK);class AK extends _X{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=lX(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=CK(e.alphaRegularizer),this.alphaConstraint=GX(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new jH("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=hX(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new vX({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=dX(e),HB(e,this.alpha.read())}getConfig(){const e={alphaInitializer:sX(this.alphaInitializer),alphaRegularizer:TK(this.alphaRegularizer),alphaConstraint:zX(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}AK.className="PReLU",CL(AK);class OK extends _X{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new AH("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=dX(e);return iB(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}OK.className="ELU",CL(OK);class NK extends _X{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=dX(e);return yL(n,dL(pB(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}NK.className="ThresholdedReLU",CL(NK);class RK extends _X{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new fK).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return wD((()=>{let n=dX(e);const r=t.mask;if(null!=r){const e=yL(RL(VB(n.shape),dL(r,n.dtype)),SL(-1e9));n=fL(n,e)}return this.axis instanceof Array?this.axis.length>1?sB(RL(n,jB(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function PK(e,t,n){if("number"===typeof e)return RH(e,t);if(e.length!==t)throw new jH("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const o=e[r];if(!vq(o))throw new jH("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(o))}return e}function MK(e,t,n,r){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((o+r-1)/r)}function DK(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+wq([n-t,0]);else{if("same"!==r)throw new jH("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function LK(e,t){return wD((()=>(lq(t),"channelsFirst"===t?wU(e,[0,2,3,1]):e)))}function FK(e,t){return wD((()=>(lq(t),"channelsFirst"===t?wU(e,[0,2,3,4,1]):e)))}function BK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return wD((()=>{if(null==i&&(i="channelsLast"),lq(i),3!==e.shape.length)throw new jH("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new jH("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new jH("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=wU(e,[0,2,1])),"causal"===o)throw new AH("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=QF(e,t,r,"same"===o?"same":"valid","NWC",a);return null!=n&&(s=Fq(s,n)),s}))}function UK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return wD((()=>{if(null==i&&(i="channelsLast"),lq(i),3!==e.rank&&4!==e.rank)throw new jH("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new jH("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=LK(e,i);if("causal"===o)throw new AH("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=PU({x:l,filter:t,strides:r,pad:"same"===o?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(l=wU(l,[0,3,1,2])),l}))}function zK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return wD((()=>{if(null==i&&(i="channelsLast"),lq(i),4!==e.rank&&5!==e.rank)throw new jH("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new jH("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let s=FK(e,i);if("causal"===o)throw new AH("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=eB(s,t,r,"same"===o?"same":"valid","NDHWC",a),null!=n&&(s=Fq(s,n)),"channelsFirst"===i&&(s=wU(s,[0,4,1,2,3])),s}))}RK.className="Softmax",CL(RK);class VK extends _X{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",VK.verifyArgs(t),this.rank=e,KH(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new AH("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=PK(t.kernelSize,e,"kernelSize"),this.strides=PK(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,cq(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,lq(this.dataFormat),this.activation=xK(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=lX(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=GX(t.biasConstraint),this.biasRegularizer=CK(t.biasRegularizer),this.activityRegularizer=CK(t.activityRegularizer),this.dilationRate=PK(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new jH("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new jH("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new jH("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(PH("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!YH(e.kernelSize,"number",1,3))throw new jH("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:vK(this.activation),useBias:this.useBias,biasInitializer:sX(this.biasInitializer),biasRegularizer:TK(this.biasRegularizer),activityRegularizer:TK(this.activityRegularizer),biasConstraint:zX(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class GK extends VK{constructor(e,t){super(e,t),this.kernel=null,GK.verifyArgs(t),this.filters=t.filters,KH(this.filters,"filters"),this.kernelInitializer=lX(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=GX(t.kernelConstraint),this.kernelRegularizer=CK(t.kernelRegularizer)}build(e){e=hX(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jH("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return wD((()=>{let t;e=dX(e);const n=null==this.bias?null:this.bias.read(),r=QH(this.activation.getClassName());if(null!=r&&2===this.rank)t=UK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=BK(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=UK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new AH("convolutions greater than 3D are not implemented yet.");t=zK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=hX(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<n.length;++o){const e=MK(n[o],this.kernelSize[o],this.padding,this.strides[o],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[o]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:sX(this.kernelInitializer),kernelRegularizer:TK(this.kernelRegularizer),kernelConstraint:zX(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new jH("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class WK extends GK{constructor(e){super(2,e),WK.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!YH(e.kernelSize,"number",1,2))throw new jH("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}WK.className="Conv2D",CL(WK);class HK extends GK{constructor(e){super(3,e),HK.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new jH("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}HK.className="Conv3D",CL(HK);class qK extends WK{constructor(e){if(super(e),this.inputSpec=[new vX({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new jH("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=hX(e)).length)throw new jH("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jH("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new vX({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return wD((()=>{let t=dX(e);if(4!==t.shape.length)throw new jH("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,i;"channelsFirst"===this.dataFormat?(o=2,i=3):(o=1,i=2);const a=n[o],s=n[i],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],d=this.strides[1],h=[r,DK(a,u,l,this.padding),DK(s,d,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=wU(t,[0,2,3,1]));let p=$F(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=wU(p,[0,3,1,2])),null!=this.bias&&(p=Fq(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=hX(e)).slice();let n,r,o;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3):(n=3,r=1,o=2);const i=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=DK(t[r],s,i,this.padding),t[o]=DK(t[o],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}qK.className="Conv2DTranspose",CL(qK);class XK extends HK{constructor(e){if(super(e),this.inputSpec=[new vX({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new jH("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=hX(e)).length)throw new jH("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jH("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new vX({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return wD((()=>{let t=dX(e);if(5!==t.shape.length)throw new jH("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,i,a;"channelsFirst"===this.dataFormat?(a=2,o=3,i=4):(a=1,o=2,i=3);const s=n[a],l=n[o],c=n[i],u=this.kernelSize[0],d=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,DK(s,p,u,this.padding),DK(l,f,d,this.padding),DK(c,m,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=wU(t,[0,2,3,4,1]));let y=nB(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=wU(y,[0,4,1,2,3])),null!==this.bias&&(y=Fq(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y}))}computeOutputShape(e){const t=(e=hX(e)).slice();let n,r,o,i;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3,i=4):(n=4,r=1,o=2,i=3);const a=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=DK(t[r],c,a,this.padding),t[o]=DK(t[o],u,s,this.padding),t[i]=DK(t[i],d,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}XK.className="Conv3DTranspose",CL(XK);class YK extends GK{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new jH("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new jH("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new jH("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=lX(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=CK(t.depthwiseRegularizer),this.depthwiseConstraint=GX(t.depthwiseConstraint),this.pointwiseInitializer=lX(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=CK(t.pointwiseRegularizer),this.pointwiseConstraint=GX(t.pointwiseConstraint)}build(e){if((e=hX(e)).length<this.rank+2)throw new jH("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new jH("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(n*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new vX({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return wD((()=>{let t;if(e=dX(e),1===this.rank)throw new AH("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=wU(e,[0,2,3,1])),t=tU(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=Fq(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=wU(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=sX(this.depthwiseInitializer),e.pointwiseInitializer=sX(this.pointwiseInitializer),e.depthwiseRegularizer=TK(this.depthwiseRegularizer),e.pointwiseRegularizer=TK(this.pointwiseRegularizer),e.depthwiseConstraint=zX(this.depthwiseConstraint),e.pointwiseConstraint=zX(this.pointwiseConstraint),e}}YK.className="SeparableConv";class KK extends YK{constructor(e){super(2,e)}}KK.className="SeparableConv2D",CL(KK);class ZK extends GK{constructor(e){super(1,e),ZK.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!YH(e.kernelSize,"number",1,1))throw new jH("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}ZK.className="Conv1D",CL(ZK);class QK extends _X{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return wD((()=>{if(e=dX(e),"channelsLast"===this.dataFormat){const t=jq(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return jq(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=jq(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return jq(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}QK.className="Cropping2D",CL(QK);class JK extends _X{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,lq(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,XH(rq,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return wD((()=>{let t=dX(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=wU(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],o="nearest"===this.interpolation?Sz.resizeNearestNeighbor(t,[e,r]):Sz.resizeBilinear(t,[e,r]);return wU(o,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?Sz.resizeNearestNeighbor(t,[e,r]):Sz.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}JK.className="UpSampling2D",CL(JK);class $K extends VK{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=lX(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=GX(e.depthwiseConstraint),this.depthwiseRegularizer=CK(e.depthwiseRegularizer)}build(e){if((e=hX(e)).length<4)throw new jH("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new jH("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return wD((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return wD((()=>{null==o&&(o="channelsLast"),lq(o);let a=LK(e,o);if(4!==e.rank)throw new jH("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new jH("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return a=oB(a,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===o&&(a=wU(a,[0,3,1,2])),a}))}(e=dX(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=Fq(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=hX(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=MK(t,this.kernelSize[0],this.padding,this.strides[0]),i=MK(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,i]:[e[0],o,i,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=sX(this.depthwiseInitializer),e.depthwiseRegularizer=TK(this.depthwiseRegularizer),e.depthwiseConstraint=zX(this.depthwiseRegularizer),e}}function eZ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new jH("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=o(t),constants:n=o(n)}}function tZ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return wD((()=>{const l=t.shape.length;if(l<3)throw new jH("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(Sq(2,l));if(t=wU(t,c),null!=i)throw new AH("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=o&&(o=dL(dL(o,"bool"),"float32"),o.rank===l-1&&(o=lB(o,-1)),o=wU(o,c)),r&&(t=$B(t,0),null!=o&&(o=$B(o,0)));const u=[];let d,h=n;const p=t.shape[0],f=yU(t);let m,g;null!=o&&(m=yU(o));for(let t=0;t<p;++t){const n=f[t],r=wD((()=>e(n,h)));if(null==o)d=r[0],h=r[1];else{const e=wD((()=>{const e=m[t],n=RL(GB(e),e),o=fL(yL(r[0],e),yL(h[0],n)),i=h.map(((t,o)=>fL(yL(r[1][o],e),yL(t,n))));return{output:o,newStates:i}}));d=e.output,h=e.newStates}s&&u.push(d)}if(s){g=hU(u,1)}return[d,g,h]}))}$K.className="DepthwiseConv2D",CL($K);class nZ extends _X{constructor(e){let t;if(super(e),null==e.cell)throw new jH("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new uZ({cells:e.cell}):e.cell,null==t.stateSize)throw new jH("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new vX({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return Sq(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){cX(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return wD((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new AH("Constants support is not implemented in RNN yet.");cX(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new vX({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let o;if(this.cell.build(r),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!ZA(this.stateSpec.map((e=>e.shape[e.shape.length-1])),o))throw new jH("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=o.map((e=>new vX({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wD((()=>{if(!this.stateful)throw new CH("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new jH("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>zB([n,e]))):this.states_=[zB([n,this.cell.stateSize])];else if(null==e)SD(this.states_),null!=this.keptStates&&(SD(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>zB([n,e]))):this.states_[0]=zB([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new jH("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):SD(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,i=[n,o];if(!ZA(r.shape,i))throw new jH("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(i,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map((e=>_D(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=eZ(e,n,r,this.numConstants);e=o.inputs,n=o.initialState,r=o.constants;let i=[],a=[];if(null!=n){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new vX({shape:e.shape}));a=a.concat(this.stateSpec)}null!=r&&(t.constants=r,i=i.concat(r),this.numConstants=r.length);if(i[0]instanceof bX){const n=[e].concat(i),r=this.inputSpec.concat(a),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return wD((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let o=null==t?null:t.initialState;e=dX(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==i)throw new jH("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},s=tZ(((e,t)=>{const n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]}),e,o,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],c=s[1],u=s[2];this.stateful&&this.resetStates(u,r);const d=this.returnSequences?c:l;return this.returnState?[d].concat(u):d}))}getInitialState(e){return wD((()=>{let t=zB(e.shape);return t=bB(t,[1,2]),t=Eq(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?Nq(t,[1,e]):t)):this.cell.stateSize>1?[Nq(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===nZ.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tY(t.cell,n);return new e(Object.assign(t,{cell:r}))}}nZ.className="RNN",CL(nZ);class rZ extends _X{}class oZ extends rZ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,KH(this.units,"units"),this.activation=xK(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lX(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lX(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lX(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=CK(e.kernelRegularizer),this.recurrentRegularizer=CK(e.recurrentRegularizer),this.biasRegularizer=CK(e.biasRegularizer),this.kernelConstraint=GX(e.kernelConstraint),this.recurrentConstraint=GX(e.recurrentConstraint),this.biasConstraint=GX(e.biasConstraint),this.dropout=xq([1,wq([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xq([1,wq([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=hX(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return wD((()=>{if(2!==e.length)throw new jH("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dZ({ones:()=>GB(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dZ({ones:()=>GB(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;o=Pq(null!=i?yL(e,i):e,this.kernel.read()),null!=this.bias&&(o=Fq(o,this.bias.read())),null!=a&&(n=yL(n,a));let s=fL(o,Pq(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vK(this.activation),useBias:this.useBias,kernelInitializer:sX(this.kernelInitializer),recurrentInitializer:sX(this.recurrentInitializer),biasInitializer:sX(this.biasInitializer),kernelRegularizer:TK(this.kernelRegularizer),recurrentRegularizer:TK(this.recurrentRegularizer),biasRegularizer:TK(this.biasRegularizer),activityRegularizer:TK(this.activityRegularizer),kernelConstraint:zX(this.kernelConstraint),recurrentConstraint:zX(this.recurrentConstraint),biasConstraint:zX(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}oZ.className="SimpleRNNCell",CL(oZ);class iZ extends nZ{constructor(e){e.cell=new oZ(e),super(e)}call(e,t){return wD((()=>{null!=this.cell.dropoutMask&&(SD(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(SD(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return new e(t)}}iZ.className="SimpleRNN",CL(iZ);class aZ extends rZ{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new jH("GRUCell does not support reset_after parameter set to true.");this.units=e.units,KH(this.units,"units"),this.activation=xK(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xK(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lX(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lX(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lX(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=CK(e.kernelRegularizer),this.recurrentRegularizer=CK(e.recurrentRegularizer),this.biasRegularizer=CK(e.biasRegularizer),this.kernelConstraint=GX(e.kernelConstraint),this.recurrentConstraint=GX(e.recurrentConstraint),this.biasConstraint=GX(e.biasConstraint),this.dropout=xq([1,wq([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xq([1,wq([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=hX(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return wD((()=>{if(2!==e.length)throw new jH("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dZ({ones:()=>GB(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dZ({ones:()=>GB(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let a,s,l;0<this.dropout&&this.dropout<1&&(e=yL(e,o[0]));let c=Pq(e,this.kernel.read());this.useBias&&(c=Fq(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=yL(r,i[0]));const u=this.recurrentKernel.read(),[d,h]=uU(u,[2*this.units,this.units],u.rank-1),p=Pq(r,d),[f,m,g]=uU(c,3,c.rank-1),[y,v]=uU(p,2,p.rank-1);a=this.recurrentActivation.apply(fL(f,y)),s=this.recurrentActivation.apply(fL(m,v));const b=Pq(yL(s,r),h);l=this.activation.apply(fL(g,b));const x=fL(yL(a,r),yL(fL(1,FB(a)),l));return[x,x]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vK(this.activation),recurrentActivation:vK(this.recurrentActivation),useBias:this.useBias,kernelInitializer:sX(this.kernelInitializer),recurrentInitializer:sX(this.recurrentInitializer),biasInitializer:sX(this.biasInitializer),kernelRegularizer:TK(this.kernelRegularizer),recurrentRegularizer:TK(this.recurrentRegularizer),biasRegularizer:TK(this.biasRegularizer),activityRegularizer:TK(this.activityRegularizer),kernelConstraint:zX(this.kernelConstraint),recurrentConstraint:zX(this.recurrentConstraint),biasConstraint:zX(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}aZ.className="GRUCell",CL(aZ);class sZ extends nZ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new aZ(e),super(e)}call(e,t){return wD((()=>{null!=this.cell.dropoutMask&&(SD(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(SD(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}sZ.className="GRU",CL(sZ);class lZ extends rZ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,KH(this.units,"units"),this.activation=xK(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xK(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lX(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lX(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lX(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=CK(e.kernelRegularizer),this.recurrentRegularizer=CK(e.recurrentRegularizer),this.biasRegularizer=CK(e.biasRegularizer),this.kernelConstraint=GX(e.kernelConstraint),this.recurrentConstraint=GX(e.recurrentConstraint),this.biasConstraint=GX(e.biasConstraint),this.dropout=xq([1,wq([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xq([1,wq([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=hX(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends Gq{apply(t,r){const o=e.apply([n]),i=(new Hq).apply([n]),a=e.apply([2*n]);return Oq(Oq(o,i),a)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return wD((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new jH("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dZ({ones:()=>GB(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dZ({ones:()=>GB(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let s,l,c,u;0<this.dropout&&this.dropout<1&&(e=yL(e,i[0]));let d=Pq(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=yL(r,a[0])),d=fL(d,Pq(r,this.recurrentKernel.read())),this.useBias&&(d=Fq(d,this.bias.read()));const[h,p,f,m]=uU(d,4,d.rank-1);s=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=fL(yL(l,o),yL(s,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=yL(u,this.activation.apply(c));return[g,g,c]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vK(this.activation),recurrentActivation:vK(this.recurrentActivation),useBias:this.useBias,kernelInitializer:sX(this.kernelInitializer),recurrentInitializer:sX(this.recurrentInitializer),biasInitializer:sX(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:TK(this.kernelRegularizer),recurrentRegularizer:TK(this.recurrentRegularizer),biasRegularizer:TK(this.biasRegularizer),activityRegularizer:TK(this.activityRegularizer),kernelConstraint:zX(this.kernelConstraint),recurrentConstraint:zX(this.recurrentConstraint),biasConstraint:zX(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}lZ.className="LSTMCell",CL(lZ);class cZ extends nZ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new lZ(e),super(e)}call(e,t){return wD((()=>{null!=this.cell.dropoutMask&&(SD(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(SD(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}cZ.className="LSTM",CL(cZ);class uZ extends rZ{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return wD((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const o=[];let i;for(let a=0;a<this.cells.length;++a){const s=this.cells[a];n=r[a],i=0===a?[e[0]].concat(n):[i[0]].concat(n),i=s.call(i,t),o.push(i.slice(1))}n=[];for(const e of o.slice().reverse())n.push(...e);return[i[0]].concat(n)}))}build(e){let t;cX(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{pq("RNNCell_".concat(r),(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const o of t.cells)r.push(tY(o,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return gX(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,o=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],o[e]])}yX(t)}}function dZ(e){const{ones:t,rate:n,training:r=!1,count:o=1,dropoutFunc:i}=e,a=()=>null!=i?i(t(),n):Bq(t(),n),s=()=>Uq(a,t,r);if(!o||o<=1)return _D(s().clone());return Array(o).fill(void 0).map(s).map((e=>_D(e.clone())))}uZ.className="StackedRNNCells",CL(uZ);var hZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class pZ extends nZ{constructor(e){if(e.unroll)throw new AH("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new AH("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new vX({ndim:5})]}call(e,t){return wD((()=>{if(null!=this.cell.dropoutMask&&(SD(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(SD(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new jH("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return wD((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),o=zB([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(o):[o]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wD((()=>{if(!this.stateful)throw new CH("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),o=[r[0],...r.slice(2)];if(null==n[0])throw new jH("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>zB(o))):this.states_=[zB(o)];else if(null==e)SD(this.states_),null!=this.keptStates&&(SD(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>zB(o))):this.states_[0]=zB(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new jH("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):SD(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=o;if(!ZA(n.shape,r))throw new jH("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map((e=>_D(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:o,strides:i,dilationRate:a}=this.cell,s="channelsFirst"===t,l=e[s?3:2],c=e[s?4:3],u=MK(l,r[0],o,i[0],a[0]),d=MK(c,r[1],o,i[1],a[1]);return[...e.slice(0,2),...s?[n,u,d]:[u,d,n]]}}pZ.className="ConvRNN2D";class fZ extends lZ{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:o,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,KH(this.filters,"filters"),this.kernelSize=PK(n,2,"kernelSize"),this.kernelSize.forEach((e=>KH(e,"kernelSize"))),this.strides=PK(r||1,2,"strides"),this.strides.forEach((e=>KH(e,"strides"))),this.padding=o||"valid",cq(this.padding),this.dataFormat=i||"channelsLast",lq(this.dataFormat),this.dilationRate=PK(a||1,2,"dilationRate"),this.dilationRate.forEach((e=>KH(e,"dilationRate")))}build(e){var t;e=hX(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new jH("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],o=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends Gq{apply(e,t){return Aq([n.apply([r]),VB([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return wD((()=>{if(3!==e.length)throw new jH("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],o=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dZ({ones:()=>GB(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=(e,t,n)=>t&&t[n]?yL(t[n],e):e;let l=s(r,a,0),c=s(r,a,1),u=s(r,a,2),d=s(r,a,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dZ({ones:()=>GB(o),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=s(o,h,0),f=s(o,h,1),m=s(o,h,2),g=s(o,h,3);const[y,v,b,x]=uU(this.kernel.read(),4,3),[w,S,_,k]=this.useBias?uU(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,w,this.padding),c=this.inputConv(c,v,S,this.padding),u=this.inputConv(u,b,_,this.padding),d=this.inputConv(d,x,k,this.padding);const[T,E,C,I]=uU(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,T),f=this.recurrentConv(f,E),m=this.recurrentConv(m,C),g=this.recurrentConv(g,I);const j=this.recurrentActivation.apply(fL(l,p)),A=this.recurrentActivation.apply(fL(c,f)),O=fL(yL(A,i),yL(j,this.activation.apply(fL(u,m)))),N=yL(this.recurrentActivation.apply(fL(d,g)),this.activation.apply(O));return[N,N,O]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=hZ(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const o=ZF(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Fq(o,n,this.dataFormat):o}recurrentConv(e,t){return ZF(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}fZ.className="ConvLSTM2DCell",CL(fZ);class mZ extends pZ{constructor(e){const t=new fZ(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}mZ.className="ConvLSTM2D",CL(mZ);class gZ extends _X{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return Uq((()=>Bq(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}gZ.className="Dropout",CL(gZ);class yZ extends gZ{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}yZ.className="SpatialDropout1D",CL(yZ);class vZ extends _X{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,KH(this.units,"units"),this.activation=xK(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=lX(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=lX(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=GX(e.kernelConstraint),this.biasConstraint=GX(e.biasConstraint),this.kernelRegularizer=CK(e.kernelRegularizer),this.biasRegularizer=CK(e.biasRegularizer),this.activityRegularizer=CK(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=hX(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=hX(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e),r=QH(this.activation.getClassName());let o;return null!=r?o=Pq(n,this.kernel.read(),r,this.bias?this.bias.read():null):(o=Pq(n,this.kernel.read()),null!=this.bias&&(o=Fq(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o}))}getConfig(){const e={units:this.units,activation:vK(this.activation),useBias:this.useBias,kernelInitializer:sX(this.kernelInitializer),biasInitializer:sX(this.biasInitializer),kernelRegularizer:TK(this.kernelRegularizer),biasRegularizer:TK(this.biasRegularizer),activityRegularizer:TK(this.activityRegularizer),kernelConstraint:zX(this.kernelConstraint),biasConstraint:zX(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}vZ.className="Dense",CL(vZ);class bZ extends _X{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=hX(e);for(const t of e.slice(1))if(null==t)throw new jH('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],bq(e,1)]}call(e,t){return wD((()=>{this.invokeCallHook(e,t);let n=dX(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=wU(n,e)}return function(e){if(e.rank<=1)throw new jH("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],bq(e.shape,1)];return DF(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}bZ.className="Flatten",CL(bZ);class xZ extends _X{constructor(e){super(e),this.supportsMasking=!0,this.activation=xK(e.activation)}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e);return this.activation.apply(n)}))}getConfig(){const e={activation:vK(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}xZ.className="Activation",CL(xZ);class wZ extends _X{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return wD((()=>function(e,t){return wD((()=>{if(2!==e.shape.length)throw new jH("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return Nq(Eq(e,1),[1,t,1])}))}(e=dX(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}wZ.className="RepeatVector",CL(wZ);class SZ extends _X{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let o=1,i=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==i)throw new jH("Can only specifiy one unknown dimension.");i=s}else o*=e}const a=bq(e);if(null!==i){if(0===o||a%o!==0)throw new jH(n);r[i]=a/o}else if(a!==o)throw new jH(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e),r=n.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return DF(n,o)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}SZ.className="Reshape",CL(SZ);class _Z extends _X{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=Sq(1,e.dims.length+1);if(!ZA(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new vX({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=hX(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return wU(dX(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}_Z.className="Permute",CL(_Z);class kZ extends _X{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=dX(e);return bF(BB(n,this.maskValue),-1)}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e),r=bF(BB(n,this.maskValue),-1,!0);return yL(n,dL(r,n.dtype))}))}}kZ.className="Masking",CL(kZ);class TZ extends _X{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(LH(e.inputLength))}this.inputDim=e.inputDim,KH(this.inputDim,"inputDim"),this.outputDim=e.outputDim,KH(this.outputDim,"outputDim"),this.embeddingsInitializer=lX(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=CK(e.embeddingsRegularizer),this.activityRegularizer=CK(e.activityRegularizer),this.embeddingsConstraint=GX(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return wD((()=>this.maskZero?(e=dX(e),BB(e,xL(e))):null))}computeOutputShape(e){if(e=hX(e),null==this.inputLength)return[...e,this.outputDim];const t=LH(this.inputLength);if(t.length!==e.length-1)throw new jH('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const o=t[r],i=e[r+1];if(null!=o&&null!=i&&o!==i)throw new jH('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==o&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return wD((()=>{this.invokeCallHook(e,t);let n=dX(e);"int32"!==n.dtype&&(n=Tq(n,"int32"));const r=Mq(this.embeddings.read(),DF(n,[n.size]));return DF(r,hX(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:sX(this.embeddingsInitializer),embeddingsRegularizer:TK(this.embeddingsRegularizer),activityRegularizer:TK(this.activityRegularizer),embeddingsConstraint:zX(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}TZ.className="Embedding",CL(TZ);class EZ extends _X{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new AH}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const o=e[e.length-t.length+r],i=t[r];if(null==o||null==i||o<0||i<0)n.push(null);else if(1===o)n.push(i);else if(1===i)n.push(o);else{if(o!==i)throw new jH("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[hX(e)]),e.length<2)throw new jH("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const o of e)null!=o&&null!==o[0]&&t.push(o[0]);if(t=HH(t),t.length>1)throw new jH("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let o=1;o<e.length;++o){const t=null==e[o]?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===HH(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return wD((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=wq(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Eq(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const i of e){const e=i.rank;if(null==e){const e=i.shape,r=e[0],o=e.slice(1).concat([r]);let a=DF(i,[r].concat(bq(e.slice(1))));a=wU(a,[1,0]),a=DF(a,o),t.push(a),n=!0}else if(e>1){const r=Sq(1,e).concat([0]);t.push(wU(i,r)),n=!0}else t.push(i)}let r=this.mergeFunction(t);const o=r.rank;if(n)if(null==o){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=DF(wU(DF(r,[-1,t]),[1,0]),n)}else if(o>1){const e=[o-1].concat(Sq(0,o-1));r=wU(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=HH(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return wD((()=>{if(null==t)return null;if(!Array.isArray(t))throw new jH("`mask` should be an Array");if(!Array.isArray(e))throw new jH("`inputs` should be an Array");if(t.length!==e.length)throw new jH("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:lB(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=AB(n,t[e]);return n}))}}class CZ extends EZ{constructor(e){super(e)}mergeFunction(e){return wD((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=fL(t,e[n]);return t}))}}CZ.className="Add",CL(CZ);class IZ extends EZ{constructor(e){super(e)}mergeFunction(e){return wD((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=yL(t,e[n]);return t}))}}IZ.className="Multiply",CL(IZ);class jZ extends EZ{constructor(e){super(e)}mergeFunction(e){return wD((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=fL(t,e[n]);return yL(1/e.length,t)}))}}jZ.className="Average",CL(jZ);class AZ extends EZ{constructor(e){super(e)}mergeFunction(e){return wD((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=BL(t,e[n]);return t}))}}AZ.className="Maximum",CL(AZ);class OZ extends EZ{constructor(e){super(e)}mergeFunction(e){return wD((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=DB(t,e[n]);return t}))}}OZ.className="Minimum",CL(OZ);class NZ extends EZ{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new jH("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let o=!1;for(const e of n)if(ZA(e,t)){o=!0;break}o||n.push(t)}if(n.length>1)throw new jH("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return wD((()=>Aq(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new jH("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const o of t.slice(1)){if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new jH("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new jH("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new jH("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return wD((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let i=0;i<e.length;++i)null==t[i]?r.push(dL(GB(e[i]),"bool")):t[i].rank<e[i].rank?r.push(lB(t[i],-1)):r.push(t[i]);const o=HF(r,this.axis);return vF(o,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function RZ(e,t){for(;e<0;)e+=t;return e}NZ.className="Concatenate",CL(NZ);class PZ extends EZ{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){qA(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new AH("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new jH("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new jH("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>RZ(t,e[n].shape.length))):[RZ(this.axes,n.shape.length),RZ(this.axes,r.shape.length)],this.normalize&&(n=nY(n,t[0]),r=nY(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new AH("batchDot is not implemented for tensors of 4D or higher rank yet");if(qA(e.shape.length>=2,(()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length))),qA(e.shape.length>=2,(()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length))),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new AH("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,o=t.shape.length;null==n&&(n=[r-1,o-2]);const i=n;return wD((()=>{let n,a;if(r>o){n=r-o;const e=[];for(let t=0;t<n;++t)e.push(1);t=DF(t,t.shape.concat(e))}else if(o>r){n=o-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=DF(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=i[0]===i[1]?bB(yL(e,t),i[0]):bB(yL(wU(e,[1,0]),t),i[1]);else{const n=i[0]!==e.shape.length-1,r=i[1]===t.shape.length-1;a=OB(e,t,n,r)}if(n>0){let e;e=r>o?r+o-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);a=dU(a,t)}return 1===a.shape.length&&(a=lB(a,1)),a}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[RZ(this.axes,e.length),RZ(this.axes,t.length)],n}computeOutputShape(e){qA(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new AH("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const o=t.concat(n);return 1===o.length&&o.push(1),o}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}PZ.className="Dot",CL(PZ);class MZ extends _X{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e);return Uq((()=>fL(Rq(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}MZ.className="GaussianNoise",CL(MZ);class DZ extends _X{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return wD((()=>{this.invokeCallHook(e,t);const n=dX(e);if(this.rate>0&&this.rate<1){return Uq((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return yL(n,Rq(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}DZ.className="GaussianDropout",CL(DZ);class LZ extends _X{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||dX(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return wD((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=dX(e),r=-1.7580993408473766;let o=fB(ZB(n),this.rate);o=Tq(o,"float32");const i=((1-this.rate)*(1+this.rate*r**2))**-.5,a=-i*r*this.rate,s=fL(yL(t,o),yL(fL(o,-1),r));return fL(yL(s,i),a)};return Uq(r,(()=>dX(e)),t.training||!1)}return e}))}}function FZ(e,t,n,r,o){let i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=UF(e,t,n,r,o,a);else if(3===e.rank)i=zF(e,t,n,r,o,a);else{if(4!==e.rank)throw new AH("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=VF(e,t,n,r,o,a)}return i}function BZ(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ZA(r.slice().sort(),Sq(0,e.rank-1))?function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return wD((()=>{const i=LB(e,r),a=i.mean,s=i.variance;return[FZ(e,a,s,n,t,o),a,s]}))}(e,t,n,r,o):function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return wD((()=>{const i=LB(e,r),a=i.mean,s=i.variance,l=[];for(const t of Sq(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=DF(a,l),u=DF(s,l),d=null==t?null:DF(t,l),h=null==n?null:DF(n,l);return[FZ(e,c,u,h,d,o),a,s]}))}(e,t,n,r,o)}LZ.className="AlphaDropout",CL(LZ);class UZ extends _X{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=lX(e.betaInitializer||"zeros"),this.gammaInitializer=lX(e.gammaInitializer||"ones"),this.movingMeanInitializer=lX(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=lX(e.movingVarianceInitializer||"ones"),this.betaConstraint=GX(e.betaConstraint),this.gammaConstraint=GX(e.gammaConstraint),this.betaRegularizer=CK(e.betaRegularizer),this.gammaRegularizer=CK(e.gammaRegularizer)}build(e){e=hX(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new jH("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new vX({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return wD((()=>{const n=null!=t.training&&t.training,r=dX(e),o=r.shape,i=o.length,a=Sq(0,i),s=this.axis>=0?this.axis:this.axis+i;a.splice(s,1);const l=RH(1,i);l[s]=o[s];const c=a.slice();c.sort();const u=!ZA(c,Sq(0,i).slice(0,i-1));if(!n)return(()=>{if(u){const e=DF(this.movingMean.read(),l),t=DF(this.movingVariance.read(),l),n=this.center?DF(this.beta.read(),l):null,o=this.scale?DF(this.gamma.read(),l):null;return FZ(r,e,t,n,o,this.epsilon)}return FZ(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,h,p]=BZ(r,this.gamma.read(),this.beta.read(),a,this.epsilon),f=(e,t,n)=>{wD((()=>{const r=1-n,o=e.read(),i=yL(RL(o,t),r);e.write(RL(o,i))}))};return(()=>{f(this.movingMean,h,this.momentum),f(this.movingVariance,p,this.momentum)})(),d}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:sX(this.betaInitializer),gammaInitializer:sX(this.gammaInitializer),movingMeanInitializer:sX(this.movingMeanInitializer),movingVarianceInitializer:sX(this.movingVarianceInitializer),betaRegularizer:TK(this.betaRegularizer),gammaRegularizer:TK(this.gammaRegularizer),betaConstraint:zX(this.betaConstraint),gammaConstraint:zX(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}UZ.className="BatchNormalization",CL(UZ);class zZ extends _X{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=lX(e.betaInitializer||"zeros"),this.gammaInitializer=lX(e.gammaInitializer||"ones"),this.betaRegularizer=CK(e.betaRegularizer),this.gammaRegularizer=CK(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=hX(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==HH(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map((t=>e[t]));this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}call(e,t){const n=dX(e),r=n.shape,o=r.length;return wD((()=>{let{mean:e,variance:t}=LB(n,this.axis,!0);const i=RH(1,o);for(const n of this.axis)i[n]=r[n];const a=e=>null!=e&&e.shape.length!==o?DF(e,i):e;let s=this.scale?a(this.gamma.read()):null,l=this.center?a(this.beta.read()):null;const c=[],u=[];for(let n=0;n<o;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=cB(e,c),t=cB(t,c),null!=s&&(s=cB(s,u)),null!=l&&(l=cB(l,u)),FZ(n,e,t,l,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:sX(this.betaInitializer),gammaInitializer:sX(this.gammaInitializer),betaRegularizer:TK(this.betaRegularizer),gammaRegularizer:TK(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}zZ.className="LayerNormalization",CL(zZ);class VZ extends _X{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new jH("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new jH("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new jH("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new vX({ndim:4})]}computeOutputShape(e){let t,n;return e=hX(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return wD((()=>function(e,t,n){return wD((()=>{if(4!==e.rank)throw new jH("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new jH("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new jH("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],WB(e,r)}))}(dX(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function GZ(e,t,n,r,o,i){return wD((()=>{let a;lq(o),uq(i),cq(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==i&&(i="max"),e=LK(e,o);const s="same"===r?"same":"valid";return a="max"===i?NB(e,t,n,s):LF(e,t,n,s),"channelsFirst"===o&&(a=wU(a,[0,3,1,2])),a}))}function WZ(e,t,n,r,o,i){return wD((()=>{let a;lq(o),uq(i),cq(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==i&&(i="max"),e=FK(e,o);const s="same"===r?"same":"valid";return a="max"===i?RB(e,t,n,s):FF(e,t,n,s),"channelsFirst"===o&&(a=wU(a,[0,4,1,2,3])),a}))}VZ.className="ZeroPadding2D",CL(VZ);class HZ extends _X{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new jH("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(KH(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new jH("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}KH(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,cq(this.padding),this.inputSpec=[new vX({ndim:3})]}computeOutputShape(e){const t=MK((e=hX(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return wD((()=>{this.invokeCallHook(e,t),e=Eq(dX(e),2);const n=this.poolingFunction(dX(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return dU(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class qZ extends HZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),GZ(e,t,n,r,o,"max")}}qZ.className="MaxPooling1D",CL(qZ);class XZ extends HZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),GZ(e,t,n,r,o,"avg")}}XZ.className="AveragePooling1D",CL(XZ);class YZ extends _X{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new jH("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];KH(this.poolSize,"poolSize"),KH(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,lq(this.dataFormat),cq(this.padding),this.inputSpec=[new vX({ndim:4})]}computeOutputShape(e){e=hX(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=MK(t,this.poolSize[0],this.padding,this.strides[0]),n=MK(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return wD((()=>(this.invokeCallHook(e,t),this.poolingFunction(dX(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class KZ extends YZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),GZ(e,t,n,r,o,"max")}}KZ.className="MaxPooling2D",CL(KZ);class ZZ extends YZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),GZ(e,t,n,r,o,"avg")}}ZZ.className="AveragePooling2D",CL(ZZ);class QZ extends _X{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new jH("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];KH(this.poolSize,"poolSize"),KH(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,lq(this.dataFormat),cq(this.padding),this.inputSpec=[new vX({ndim:5})]}computeOutputShape(e){e=hX(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=MK(t,this.poolSize[0],this.padding,this.strides[0]),n=MK(n,this.poolSize[1],this.padding,this.strides[1]),r=MK(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return wD((()=>(this.invokeCallHook(e,t),this.poolingFunction(dX(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class JZ extends QZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),WZ(e,t,n,r,o,"max")}}JZ.className="MaxPooling3D",CL(JZ);class $Z extends QZ{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return lq(o),cq(r),WZ(e,t,n,r,o,"avg")}}$Z.className="AveragePooling3D",CL($Z);class eQ extends _X{constructor(e){super(e),this.inputSpec=[new vX({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new AH}}class tQ extends eQ{constructor(e){super(e||{})}call(e,t){return wD((()=>{const t=dX(e);return PB(t,1)}))}}tQ.className="GlobalAveragePooling1D",CL(tQ);class nQ extends eQ{constructor(e){super(e||{})}call(e,t){return wD((()=>{const t=dX(e);return vB(t,1)}))}}nQ.className="GlobalMaxPooling1D",CL(nQ);class rQ extends _X{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,lq(this.dataFormat),this.inputSpec=[new vX({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new AH}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class oQ extends rQ{call(e,t){return wD((()=>{const t=dX(e);return"channelsLast"===this.dataFormat?PB(t,[1,2]):PB(t,[2,3])}))}}oQ.className="GlobalAveragePooling2D",CL(oQ);class iQ extends rQ{call(e,t){return wD((()=>{const t=dX(e);return"channelsLast"===this.dataFormat?vB(t,[1,2]):vB(t,[2,3])}))}}iQ.className="GlobalMaxPooling2D",CL(iQ);class aQ extends _X{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tY(t.layer,n);delete t.layer;const o={layer:r};return Object.assign(o,t),new e(o)}}class sQ extends aQ{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=hX(e)).length<3)throw new jH("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=hX(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return wD((()=>tZ(((e,n)=>[dX(this.layer.call(e,t)),[]]),e=dX(e),[],!1,null,null,!1,!0)[1]))}}sQ.className="TimeDistributed",CL(sQ);class lQ extends aQ{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=tY(n),t.goBackwards=!0!==t.goBackwards;const r={};var o;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=tY(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=this.mergeMode,XH(aq,"BidirectionalMergeMode",o),e.weights)throw new AH("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,o=this.forwardLayer.computeOutputShape(e);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),this.returnState?(r=o.slice(1),t=o[0]):t=o[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):DH(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=eZ(e,n,r,this.numConstants);if(e=o.inputs,n=o.initialState,r=o.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const i=[],a=[];if(null!=n){const e=n.length;if(e%2>0)throw new jH("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);const r=n.map((e=>new vX({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new AH("Support for constants in Bidirectional layers is not implemented yet.");const s=i[0]instanceof bX;for(const l of i)if(l instanceof bX!==s)throw new jH("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(i),r=this.inputSpec.concat(a),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return wD((()=>{const n=t.initialState;let r,o,i,a;if(null==n)r=this.forwardLayer.call(e,t),o=this.backwardLayer.call(e,t);else{const i=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:i})),o=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=$B(o,1)),"concat"===this.mergeMode?a=Aq([r,o]):"sum"===this.mergeMode?a=fL(r,o):"ave"===this.mergeMode?a=yL(.5,fL(r,o)):"mul"===this.mergeMode?a=yL(r,o):null==this.mergeMode&&(a=[r,o]),this.returnState?null==this.mergeMode?a.concat(i):[a].concat(i):a}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){pq(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),pq(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=tY(t.layer);if(delete t.layer,null!=t.numConstants)throw new AH("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}lQ.className="Bidirectional",CL(lQ);class cQ extends _X{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return wD((()=>("float32"!==(e=dX(e)).dtype&&(e=Tq(e,"float32")),fL(yL(e,this.scale),this.offset))))}}cQ.className="Rescaling",CL(cQ);const{resizeBilinear:uQ,cropAndResize:dQ}=Sz;class hQ extends _X{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,o,i,a,s){return wD((()=>{let l,c=!1;const u=[t/i,n/a,(r+t)/i,(o+n)/a],d=[];3===e.rank?(c=!0,l=hU([e])):l=e;for(let e=0;e<l.shape[0];e++)d.push(u);const h=gD(d,[d.length,4]),p=QB(0,d.length,1,"int32"),f=dQ(l,h,p,[r,o],"nearest");return Tq(c?dX(yU(f)):f,s)}))}upsize(e,t,n,r){return wD((()=>Tq(uQ(e,[t,n]),r)))}call(e,t){return wD((()=>{const t=dX(e),n=t.dtype,r=t.shape,o=r[r.length-3],i=r[r.length-2];let a=0;o!==this.height&&(a=Math.floor((o-this.height)/2));let s=0;return i!==this.width&&(s=Math.floor((i-this.width)/2),0===s&&(s=1)),a>=0&&s>=0?this.centerCrop(t,a,s,this.height,this.width,o,i,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=hX(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}hQ.className="CenterCrop",CL(hQ);class pQ extends _X{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=hX(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return wD((()=>{let n;if("int32"!==(e=dX(e)).dtype&&(e=Tq(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new jH("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=dX(t.countWeights)}const r=vB(e),o=MB(e),i=pB(this.numTokens,r).bufferSync().get(0),a=fB(o,0).bufferSync().get(0);if(!i||!a)throw new jH("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let o=dX(e);if("int32"!==o.dtype&&(o=Tq(o,"int32")),"int"===t)return o;const i=o.shape;if(0===o.rank&&(o=lB(o,-1)),"oneHot"===t&&1!==o.shape[o.shape.length-1]&&(o=lB(o,-1)),o.rank>2)throw new jH("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(o.rank,"."));const a=["multiHot","oneHot"].includes(t),s=o;let l;if(l=rB(s,"undefined"!==typeof r&&"count"===t?r:[],n,a),"tfIdf"!==t)return l;if(r)return yL(l,r);throw new jH("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}pQ.className="CategoryEncoding",CL(pQ);const fQ=new Set(["bilinear","nearest"]);class mQ extends _X{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!fQ.has(e.interpolation))throw new jH("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=hX(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return wD((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return Sz.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return Sz.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...fQ]," are supported"))}))}}mQ.className="Resizing",CL(mQ);class gQ{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}gQ.className="RandomSeed";class yQ extends _X{constructor(e){super(e),this.randomGenerator=new gQ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}yQ.className="BaseRandomLayer";const vQ=new Set(["bilinear","nearest"]);class bQ extends yQ{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new jH("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new jH("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new jH("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!vQ.has(n))throw new jH("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=hX(e))[2];return[this.imgHeight,-1,t]}call(e,t){return wD((()=>{const t=dX(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=ZB([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return Sz.resizeBilinear(e,o);case"nearest":return Sz.resizeNearestNeighbor(e,o);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...vQ]," are supported"))}}))}}bQ.className="RandomWidth",CL(bQ);var xQ,wQ;EO().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(xQ||(xQ={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(wQ||(wQ={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function SQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse){if(EQ(e)){const o=Array.isArray(e)?[]:{};r.add(e);for(const i in e){const a=SQ(e[i],t,n,r);o[i]=a}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,o.value),o.value}function _Q(e){return kQ(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:TQ)}function kQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(EQ(r)){const o=Array.isArray(r)?[]:{};n.add(r);for(const i in r){const r=e.map((e=>e[i])),a=kQ(r,t,n);o[i]=a}return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return o.value}function TQ(e){return null===e?null:EQ(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function EQ(e){let t=!1;if(EO().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:n}=r(551);t=e instanceof n}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof MM)&&!(e instanceof Promise)&&!t)}function CQ(e){return function(e,t){return SQ(e,t)}(e,IQ)}function IQ(e){return e instanceof MM?{value:e.clone(),recurse:!1}:EQ(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class jQ{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class AQ extends jQ{constructor(){super(AQ.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function OQ(e){return new MQ(e)}function NQ(e,t){return new qQ(e,t)}AQ.INITIAL_CAPACITY=32;class RQ{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new VQ(this,e)}filter(e){return new UQ(this,e)}map(e){return new zQ(this,e)}mapAsync(e){return new GQ(this,e)}serialMapAsync(e){return new GQ(this,e).serial()}flatmap(e){return new HQ(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new BQ(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TQ;return this.rowMajorBatch(e,t).map((e=>_Q(e,n)))}concatenate(e,t){return new qQ(new PQ([this,e]),t)}take(e){return e<0||null==e?this:new FQ(this,e)}skip(e){return e<0||null==e?this:new LQ(this,e)}prefetch(e){return new YQ(this,e)}shuffle(e,t){return new KQ(this,e,t)}serial(){return new DQ(this)}}class PQ extends RQ{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:CQ(e),done:!1}}}class MQ extends RQ{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(pg){throw pg.message="Error thrown while iterating through a dataset: ".concat(pg.message),pg}}}class DQ extends RQ{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class LQ extends RQ{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;SD(e.value)}return this.upstream.next()}}class FQ extends RQ{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class BQ extends RQ{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class UQ extends RQ{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;SD(e.value)}}}class zQ extends RQ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=ZM(e.value),n=this.transform(e.value),r=ZM(n);for(const o of t)KM(o,r)||o.dispose();return{value:n,done:!1}}}class VQ extends RQ{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(pg){if(!this.handler(pg))return{value:null,done:!0}}}}class GQ extends RQ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=ZM(e.value),n=await this.transform(e.value),r=ZM(n);for(const o of t)KM(o,r)||o.dispose();return{value:n,done:!1}}}class WQ extends RQ{constructor(){super(),this.outputQueue=new AQ,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class HQ extends WQ{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=ZM(e.value),n=this.transform(e.value),r=ZM(n);this.outputQueue.pushAll(n);for(const o of t)KM(o,r)||o.dispose();return!0}}class qQ extends RQ{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var XQ;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(XQ||(XQ={}));class YQ extends RQ{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new jQ(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class KQ extends YQ{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=qB.alea(n||mM().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class ZQ{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return qA(e>0,(()=>"batchSize needs to be positive, but it is\n      ".concat(e))),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),QQ((async()=>(await n.iterator()).columnMajorBatch(e,t,JQ)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,QQ((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,QQ((async()=>(await t.iterator()).filter((t=>wD((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return QQ((async()=>(await t.iterator()).map((t=>wD((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return QQ((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return QQ((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,QQ((async()=>NQ(OQ((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,QQ((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,o=qB.alea(t||mM().toString());return QQ((async()=>{let t=o.int32();return n&&(t+=o.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,QQ((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function QQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends ZQ{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function JQ(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof MM||vM(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof MM?hU(e):gD(e)}(e),recurse:!1}}return{value:null,recurse:!0}}ZQ.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function $Q(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&qA("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}const eJ=DV;class tJ extends UA{nextDataId(){return tJ.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new BA(this,bD())}write(e,t,n){this.firstUse&&(this.firstUse=!1,EO().get("IS_NODE")&&VP("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&lO(n[0])){const o=n.map((e=>gM(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,o){this.data.set(e,{values:t,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return eV(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>yM(e)));return uL(e.shape,e.dtype,n)}catch(Kae){throw new Error("Failed to decode encoded string bytes into utf-8")}return uL(e.shape,e.dtype,t)}makeOutput(e,t,n){return bD().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=mM();e();return{kernelMs:mM()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){$Q([e],"where");const t=this.readSync(e.dataId);return eJ(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}tJ.nextDataId=0;function nJ(e){return(t,n,r)=>{const o=iO(n,t.length);for(let i=0;i<t.length;++i)o[i]=e(t[i],r);return o}}function rJ(e,t,n){return oJ(e,nJ(t),n)}function oJ(e,t,n){return r=>{let{inputs:o,attrs:i,backend:a}=r;const{x:s}=o;$Q(s,e);const l=a,c=l.data.get(s.dataId).values;let u;if("string"===s.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=PV(c)}else u=c;const d=n||s.dtype,h=t(u,d,i);return l.makeTensorInfo(s.shape,d,h)}}TD("cpu",(()=>new tJ),1);const iJ=rJ(jN,(e=>e>=0?e:Math.exp(e)-1)),aJ={kernelName:jN,backendName:"cpu",kernelFunc:iJ};function sJ(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const lJ={kernelName:qN,backendName:"cpu",kernelFunc:sJ};function cJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r;$Q([o],"leakyRelu");const a=KA(o.shape),s=n.data.get(o.dataId).values,l=oO("float32",a);for(let c=0;c<s.length;c++)l[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(o.shape,"float32",l)}const uJ={kernelName:JN,backendName:"cpu",kernelFunc:cJ};function dJ(e){return(t,n,r,o,i)=>{const a=FL(t,n),s=a.length,l=pO(a),c=oO(i,KA(a)),u=t.length,d=n.length,h=pO(t),p=pO(n),f=DL(t,a),m=DL(n,a);if(f.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=e(r[g%r.length],o[g%o.length]);else for(let g=0;g<c.length;++g){const t=wO(g,s,l),n=t.slice(-u);f.forEach((e=>n[e]=0));const i=xO(n,u,h),a=t.slice(-d);m.forEach((e=>a[e]=0));const y=xO(a,d,p);c[g]=e(r[i],o[y])}return[c,a]}}const hJ=dJ(((e,t)=>e<0?t*e:e));function pJ(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t;$Q([r,o],"prelu");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,[s,l]=hJ(r.shape,o.shape,i,a,"float32");return n.makeTensorInfo(l,"float32",s)}const fJ={kernelName:RR,backendName:"cpu",kernelFunc:pJ},mJ=rJ(zR,(e=>Math.max(0,e))),gJ={kernelName:zR,backendName:"cpu",kernelFunc:mJ},yJ=rJ(XR,(e=>Math.min(Math.max(0,e),6))),vJ={kernelName:XR,backendName:"cpu",kernelFunc:yJ},bJ=nJ((e=>1/(1+Math.exp(-e)))),xJ=rJ(aP,(e=>1/(1+Math.exp(-e)))),wJ={kernelName:aP,backendName:"cpu",kernelFunc:xJ};function SJ(e,t,n,r,o){if("linear"===n)return sJ({inputs:{x:t},backend:e});if("relu"===n)return mJ({inputs:{x:t},backend:e});if("elu"===n)return iJ({inputs:{x:t},backend:e});if("relu6"===n)return yJ({inputs:{x:t},backend:e});if("prelu"===n)return pJ({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return cJ({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===n)return xJ({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function _J(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(o.shape,"float32",a)},s}const kJ={kernelName:rN,backendName:"cpu",kernelFunc:_J};function TJ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return _J({inputs:{real:TJ(e,t,"float32"),imag:TJ(e,t,"float32")},backend:e})}const r=yO(KA(t),n);return e.makeTensorInfo(t,n,r)}function EJ(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}const CJ={kernelName:BR,backendName:"cpu",kernelFunc:EJ};function IJ(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=fM([0],n),[o,i]=dJ(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[i,"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function jJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===o.dtype)return sJ({inputs:{x:o},backend:n});const e=TJ(n,o.shape,o.dtype),t=jJ({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=_J({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=EJ({inputs:{input:o},backend:n}),t=jJ({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!aO(o.dtype,i)){const e=sJ({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}const a=n.data.get(o.dataId).values,[s,l,c]=IJ(a,o.shape,o.dtype,i);return n.makeTensorInfo(s,l,c)}const AJ={kernelName:eN,backendName:"cpu",kernelFunc:jJ};function OJ(e,t,n,r){return null==n?n=>{let{inputs:o,backend:i}=n;const{a:a,b:s}=o,l=i;$Q([a,s],e);const c=l.data.get(a.dataId).values,u=l.data.get(s.dataId).values,d="string"===a.dtype?PV(c):c,h="string"===a.dtype?PV(u):u,p=r||a.dtype,[f,m]=t(a.shape,s.shape,d,h,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:o,backend:i}=e;const{a:a,b:s}=o,l=i;if("complex64"===a.dtype||"complex64"===s.dtype){const e=jJ({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,i=l.data.get(r.dataId).values,c=l.data.get(o.dataId).values,u=jJ({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(u.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=l.data.get(h.dataId).values,m=l.data.get(p.dataId).values,[g,y,v]=n(a.shape,s.shape,i,c,f,m),b=l.makeTensorInfo(v,"float32",g),x=l.makeTensorInfo(v,"float32",y),w=_J({inputs:{real:b,imag:x},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(x),w}{const e=l.data.get(a.dataId).values,n=l.data.get(s.dataId).values,o=r||a.dtype,[i,c]=t(a.shape,s.shape,e,n,o);return l.makeTensorInfo(c,o,i)}}}function NJ(e){return(t,n,r,o,i,a)=>{const s=FL(t,n),l=KA(s),c=s.length,u=pO(s),d=oO("float32",l),h=oO("float32",l),p=DL(t,s),f=DL(n,s),m=eV(r,o),g=eV(i,a),y=t.length,v=pO(t),b=n.length,x=pO(n);if(p.length+f.length===0)for(let w=0;w<d.length;w++){const t=w%m.length,n=w%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);d[w]=r.real,h[w]=r.imag}else for(let w=0;w<d.length;w++){const t=wO(w,c,u),n=t.slice(-y);p.forEach((e=>n[e]=0));const r=xO(n,y,v),o=t.slice(-b);f.forEach((e=>o[e]=0));const i=xO(o,b,x),a=e(m[2*r],m[2*r+1],g[2*i],g[2*i+1]);d[w]=a.real,h[w]=a.imag}return[d,h,s]}}const RJ=dJ(((e,t)=>e+t)),PJ=NJ(((e,t,n,r)=>({real:e+n,imag:t+r}))),MJ=OJ(PO,RJ,PJ),DJ={kernelName:PO,backendName:"cpu",kernelFunc:MJ};function LJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:i}=r,a=KA(o.shape),s=tO(i,a),l=KA(s);qA(a===l,(()=>"The new shape (".concat(s,") has ").concat(l," elements and the old ")+"shape (".concat(o.shape,") has ").concat(a," elements. The new shape and old ")+"shape must have the same number of elements.")),n.incRef(o.dataId);const c=n.data.get(o.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}const FJ={kernelName:VR,backendName:"cpu",kernelFunc:LJ};function BJ(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:a,transposeB:s}=r;$Q([o,i],"matMul");const l=o.shape.length,c=i.shape.length,u=a?o.shape[l-2]:o.shape[l-1],d=s?i.shape[c-1]:i.shape[c-2],h=a?o.shape[l-1]:o.shape[l-2],p=s?i.shape[c-2]:i.shape[c-1],f=o.shape.slice(0,-2),m=i.shape.slice(0,-2),g=KA(f),y=KA(m),v=FL(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);qA(u===d,(()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(i.shape," and transposeA=").concat(a)+" and transposeB=".concat(s," must match.")));const b=s?[y,p,d]:[y,d,p],x=LJ({inputs:{x:o},backend:n,attrs:{shape:a?[g,u,h]:[g,h,u]}}),w=LJ({inputs:{x:i},backend:n,attrs:{shape:b}}),S=a?x.shape[1]:x.shape[2],_=a?x.shape[2]:x.shape[1],k=s?w.shape[1]:w.shape[2],T=Math.max(g,y),E=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,I=pO(x.shape),j=pO(w.shape),[A,O,N]=a?[I[0],1,I[1]]:[I[0],I[1],1],[R,P,M]=s?[1,j[1],j[0]]:[j[1],1,j[0]],D=_*k,L=uL([T,_,k],x.dtype),F=L.values,B=n.blockSize;for(let U=0;U<T;U++){const e=U%g,t=U%y;for(let n=0;n<_;n+=B){const r=Math.min(n+B,_);for(let o=0;o<k;o+=B){const i=Math.min(o+B,k);for(let a=0;a<S;a+=B){const s=Math.min(a+B,S);for(let l=n;l<r;l++)for(let n=o;n<i;n++){let r=0;for(let o=a;o<s;o++){r+=E[e*A+l*O+o*N]*C[o*R+n*P+t*M]}F[U*D+(l*k+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,L.dtype,L.values)}const UJ={kernelName:KO,backendName:"cpu",kernelFunc:BJ};const zJ={kernelName:BP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,p,f;const m=[];h=BJ({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(p=MJ({inputs:{a:h,b:a},backend:n}),m.push(h),h=p),u&&(f=SJ(n,h,u,s,d),m.push(h),h=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}};function VJ(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const GJ={kernelName:OO,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;$Q(t,"abs");let r=new Float32Array(KA(t.shape));return r=VJ(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},WJ=rJ(NO,(e=>Math.acos(e))),HJ={kernelName:NO,backendName:"cpu",kernelFunc:WJ},qJ=rJ(RO,(e=>Math.acosh(e))),XJ={kernelName:RO,backendName:"cpu",kernelFunc:qJ};const YJ={kernelName:MO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;$Q(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),i=uL(r[0].shape,r[0].dtype),a=i.values;for(let s=0;s<r.length;s++){const e=o[s];for(let t=0;t<a.length;t++)a[t]+=e[t]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function KJ(e,t,n,r,o){const i=t.length,a=KA(t),s=pO(t),l=pO(o),c=oO(n,KA(o));for(let u=0;u<a;++u){const t=wO(u,i,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[xO(n,i,l)]=e[u]}return c}function ZJ(e){const{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:i}=n;$Q(o,"transpose");const a=o.shape.length,s=new Array(a);for(let c=0;c<s.length;c++)s[c]=o.shape[i[c]];const l=KJ(r.data.get(o.dataId).values,o.shape,o.dtype,i,s);return{dataId:r.write(l,s,o.dtype),shape:s,dtype:o.dtype}}const QJ={kernelName:OP,backendName:"cpu",kernelFunc:ZJ};const JJ={kernelName:DO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;$Q(o,"all");const s=nO(i,o.shape);let l=s;const c=EB(l,o.shape.length);let u=o;null!=c&&(u=ZJ({inputs:{x:o},backend:n,attrs:{perm:c}}),l=IB(l.length,o.shape.length)),TB("all",l,u.shape.length);const[d,h]=_B(u.shape,l),p=KA(h),f=yO(KA(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(a){const e=LJ({inputs:{x:g},backend:n,attrs:{shape:kB(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const $J={kernelName:LO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;$Q(o,"any");const s=nO(i,o.shape);let l=s;const c=EB(l,o.shape.length);let u=o;null!=c&&(u=ZJ({inputs:{x:o},backend:n,attrs:{perm:c}}),l=IB(l.length,o.shape.length)),TB("any",l,u.shape.length);const[d,h]=_B(u.shape,l),p=KA(h),f=yO(KA(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(a){const e=LJ({inputs:{x:g},backend:n,attrs:{shape:kB(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const e$={kernelName:FO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;$Q(o,"argMax");let a=nO(i,o.shape);const s=EB(a,o.shape.length);let l=o;const c=[];null!=s&&(l=ZJ({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),a=IB(a.length,l.shape.length)),a=[a[0]],TB("argMax",a,l.shape.length);const[u,d]=_B(l.shape,a),h=yO(KA(u),"int32"),p=KA(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const o=f[e+r];o>t&&(t=o,n=r)}h[m]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}};const t$={kernelName:BO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;$Q(o,"argMin");let a=nO(i,o.shape);const s=EB(a,o.shape.length);let l=o;const c=[];null!=s&&(l=ZJ({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),a=IB(a.length,l.shape.length)),a=[a[0]],TB("argMin",a,l.shape.length);const[u,d]=_B(l.shape,a),h=yO(KA(u),"int32"),p=KA(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const o=f[e+r];o<t&&(t=o,n=r)}h[m]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}},n$=rJ(UO,(e=>Math.asin(e))),r$={kernelName:UO,backendName:"cpu",kernelFunc:n$},o$=rJ(zO,(e=>Math.asinh(e))),i$={kernelName:zO,backendName:"cpu",kernelFunc:o$},a$=rJ(VO,(e=>Math.atan(e))),s$={kernelName:VO,backendName:"cpu",kernelFunc:a$},l$=dJ(((e,t)=>Math.atan2(e,t))),c$=OJ(WO,l$),u$={kernelName:WO,backendName:"cpu",kernelFunc:c$},d$=rJ(GO,(e=>Math.atanh(e))),h$={kernelName:GO,backendName:"cpu",kernelFunc:d$};function p$(e,t,n,r,o,i){const a=o.strideHeight,s=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=o.padInfo.top,p=o.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=uL(o.outShape,n),g=m.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],b=o.outShape[3];for(let x=0;x<o.batchSize;++x){const t=x*y,n=x*r[0];for(let m=0;m<o.inChannels;++m)for(let y=0;y<o.outHeight;++y){const x=y*a-h,w=Math.max(0,x),S=Math.min(o.inHeight,u+x),_=t+y*v;for(let t=0;t<o.outWidth;++t){const a=t*s-p,u=Math.max(0,a),h=Math.min(o.inWidth,d+a);let y=f,v=0,x=0;for(let t=w;t<S;t+=l){const o=n+t*r[1];for(let t=u;t<h;t+=c){const n=e[o+t*r[2]+m];"max"===i&&n>y?y=n:"avg"===i&&(v+=n,x++)}if(isNaN(y))break}g[_+t*b+m]="avg"===i?v/x:y}}}return m}function f$(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=uL(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=uL(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let y=n;for(;y<0;)y+=c;const v=Math.min(r.inHeight,d+n);for(let s=0;s<r.outWidth;++s){const d=s*l-f;let p=d;for(;p<0;)p+=u;const b=Math.min(r.inWidth,h+d);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<v;t+=c){const a=t-n;for(let n=p;n<b;n+=u){const s=n-d,l=m.get(g,t,n,e);l>x&&(x=l,w=o?i?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:a*h+s)}}a.set(w,g,t,s,e)}}return a}function m$(e,t,n,r,o,i){const a=o.strideDepth,s=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,h=o.effectiveFilterDepth,p=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,y=o.padInfo.left,v="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=uL(o.outShape,n),x=b.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],_=o.outShape[3]*o.outShape[4],k=o.outShape[4];for(let T=0;T<o.batchSize;++T){const t=T*w,n=T*r[0];for(let b=0;b<o.inChannels;++b)for(let w=0;w<o.outDepth;++w){const T=w*a-m;let E=T;for(;E<0;)E+=c;const C=Math.min(o.inDepth,h+T),I=t+w*S;for(let t=0;t<o.outHeight;++t){const a=t*s-g;let h=a;for(;h<0;)h+=u;const m=Math.min(o.inHeight,p+a),w=I+t*_;for(let t=0;t<o.outWidth;++t){const a=t*l-y;let s=a;for(;s<0;)s+=d;const p=Math.min(o.inWidth,f+a),g=w+t*k;let S=v,_=0,T=0;for(let t=E;t<C;t+=c){const o=n+t*r[1];for(let t=h;t<m;t+=u){const n=o+t*r[2];for(let t=s;t<p;t+=d){const o=e[n+t*r[3]+b];if("max"===i&&o>S?S=o:"avg"===i&&(_+=o,T++),isNaN(S))break}if(isNaN(S))break}if(isNaN(S))break}x[g+b]="avg"===i?_/Math.max(T,1):S}}}}return b}const g$={kernelName:HO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;$Q(o,"avgPool");const{filterSize:i,strides:a,pad:s,dimRoundingMode:l}=r;qA(NF(a,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const c=SF(o.shape,i,a,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ZA(c.inShape,c.outShape))u=sJ({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=pO(o.shape),r=p$(e,o.shape,o.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,o.dtype,r.values)}return u}};const y$={kernelName:XO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:l,dataFormat:c}=r;$Q(o,"avgPool3d");const u=_F(o.shape,i,a,1,s,l,c),d=m$(n.data.get(o.dataId).values,o.shape,o.dtype,pO(o.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const v$={kernelName:YO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:c}=r;$Q([o,i],"avgPool3DGrad");const u=_F(i.shape,a,s,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterDepth,w=u.effectiveFilterHeight,S=u.effectiveFilterWidth,_=x-1-u.padInfo.front,k=S-1-u.padInfo.left,T=w-1-u.padInfo.top,E=uL(i.shape,"float32"),C=1/(f*m*g),I=n.bufferSync(o);for(let j=0;j<u.batchSize;++j)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-_,i=n-T,a=r-k;let s=0;for(let t=0;t<x;t+=y){const n=(o+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(i+t)/h;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<S;t+=b){const o=(a+t)/p;if(o<0||o>=u.outWidth||Math.floor(o)!==o)continue;s+=I.get(j,n,r,o,e)}}}E.set(s*C,j,t,n,r,e)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};const b$={kernelName:qO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i;$Q([o,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=SF(a.shape,s,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,v=u.effectiveFilterWidth,b=v-1-u.padInfo.left,x=y-1-u.padInfo.top,w=uL(a.shape,"float32"),S=1/(p*f),_=n.data.get(o.dataId).values,k=uL(o.shape,"float32",_);for(let T=0;T<u.batchSize;++T)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-x,o=n-b;let i=0;for(let t=0;t<y;t+=m){const n=(r+t)/d;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(o+t)/h;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;i+=k.get(T,n,r,e)}}w.set(i*S,T,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const x$={kernelName:zN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:i,offset:a,mean:s,variance:l}=t;qA(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),qA(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),qA(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),$Q([o,s,l,i,a],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,y=p.length,v=h.length,b=d.length;let x=0,w=0,S=0,_=0;for(let k=0;k<u.length;++k)m[k]=f[x++]+(u[k]-d[w++])*p[S++]/Math.sqrt(h[_++]+c),x>=g&&(x=0),w>=b&&(w=0),S>=y&&(S=0),_>=v&&(_=0);return n.makeTensorInfo(o.shape,o.dtype,m)}};function w$(e,t,n,r,o){const i=pF(r,t,n),a=KA(n),s=pO(r);if(i){const n=fF(t,s);return"string"===o?e.slice(n,n+a):e.subarray(n,n+a)}const l=uL(r,o,"string"===o?PV(e):e),c=uL(n,o);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map(((e,n)=>e+t[n]));c.set(l.get(...n),...e)}return"string"===o?MV(c.values):c.values}function S$(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:a}=r;$Q(o,"slice");const[s,l]=mF(o,i,a);tF(o,s,l);const c=w$(n.data.get(o.dataId).values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const _$={kernelName:nP,backendName:"cpu",kernelFunc:S$};const k$={kernelName:ZO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:a}=r;$Q([o],"batchToSpaceND");const s=i.reduce(((e,t)=>e*t)),l=Lz(o.shape,i,s),c=Fz(l.length,i.length),u=Bz(o.shape,i,s),d=Uz(a,i.length),h=zz(u,a,i.length),p=LJ({inputs:{x:o},backend:n,attrs:{shape:l}}),f=ZJ({inputs:{x:p},backend:n,attrs:{perm:c}}),m=LJ({inputs:{x:f},backend:n,attrs:{shape:u}}),g=S$({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function T$(e,t,n,r,o){const i=KA(r),a=yO(o,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(a[n]+=i>0?t[s]:1)}return a}function E$(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.shape[0],i=e.shape[1],a=uL([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<i;o++){const i=e.get(s,o);if(i<0)throw new Error("Input x must be non-negative!");i>=n||(r?a.set(1,s,i):t.size>0?a.set(a.get(s,i)+t.get(s,o),s,i):a.set(a.get(s,i)+1,s,i))}return a}const C$={kernelName:QO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:a}=r,s=T$(n.data.get(o.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,s)}},I$=dJ(((e,t)=>e&t)),j$={kernelName:JO,backendName:"cpu",kernelFunc:OJ(JO,I$)};const A$={kernelName:$O,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,s=FL(Array.from(i),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},O$=nJ((e=>Math.ceil(e))),N$=oJ(tN,O$),R$={kernelName:tN,backendName:"cpu",kernelFunc:N$},P$=rJ(nN,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),M$={kernelName:nN,backendName:"cpu",kernelFunc:P$},D$={kernelName:oN,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(KA(t.shape)),o=n.data.get(t.dataId),i=o.complexTensorInfos.real,a=o.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<s.length;c++){const e=s[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function L$(e,t,n,r){const o=iO(n,KA(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=KA(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const i="string"===n?PV(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=i[a++]}r+=e.shape[1]}))}return o}function F$(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}const B$={kernelName:YN,backendName:"cpu",kernelFunc:F$};function U$(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,i=nO(o,t[0].shape)[0],a=t.map((e=>e.shape));Cz(a,i);let s=Iz(t.map((e=>e.shape)),i);if(0===KA(s))return n.makeTensorInfo(s,t[0].dtype,[]);const l=t.filter((e=>KA(e.shape)>0));if(1===l.length)return sJ({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map((e=>EJ({inputs:{input:e},backend:n}))),t=l.map((e=>F$({inputs:{input:e},backend:n}))),r=U$({inputs:e,backend:n,attrs:{axis:i}}),o=U$({inputs:t,backend:n,attrs:{axis:i}}),a=_J({inputs:{real:r,imag:o},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),a}const c=l.map((e=>{const t=KA(e.shape.slice(i));return LJ({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=c.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));s=Iz(c.map((e=>e.shape)),1);const d=1===c[0].shape[0],h=L$(u,s,t[0].dtype,d),p=Iz(l.map((e=>e.shape)),i),f=n.makeTensorInfo(p,t[0].dtype,h);return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const z$={kernelName:iN,backendName:"cpu",kernelFunc:U$};function V$(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r;$Q([o,i],"conv2d");const d=PF(l),h=kF(o.shape,i.shape,a,c,s,u,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo.left,v=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new OM(h.outShape,o.dtype),w=pO(o.shape),S=pO(i.shape),_=w[0],k=b?w[1]:w[2],T=b?w[2]:1,E=b?1:w[1],C=x.strides[0],I=b?x.strides[1]:x.strides[2],j=b?x.strides[2]:1,A=b?1:x.strides[1],O=n.data.get(o.dataId).values,N=n.data.get(i.dataId).values,R=x.values;for(let P=0;P<h.batchSize;++P){const e=P*_,t=P*C;for(let n=0;n<h.outHeight;++n){const r=t+n*I,o=n*h.strideHeight-v;for(let t=0;t<p;++t){const n=o+t*m;if(n<0||n>=h.inHeight)continue;const i=t*S[0],a=e+n*k;for(let e=0;e<h.outWidth;++e){const t=r+e*j,n=e*h.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=h.inWidth)continue;const o=a+r*T;let s=i+e*S[1];for(let e=0;e<h.inChannels;++e){const n=O[o+e*E];for(let e=0;e<h.outChannels;++e)R[t+e*A]+=n*N[s+e];s+=h.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,R)}const G$={kernelName:aN,backendName:"cpu",kernelFunc:V$};const W$={kernelName:sN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;$Q([o,i],"conv2dBackpropFilter");const d=PF(l),h=kF(o.shape,u,a,1,s,c,!1,d),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,y="channelsLast"===h.dataFormat,v=new OM(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,_=new OM(o.shape,o.dtype,w),k=new OM(i.shape,i.dtype,S);for(let T=0;T<m;++T){const e=Math.max(0,Math.ceil((x-T)/p)),t=Math.min(h.outHeight,(h.inHeight+x-T)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((b-n)/f)),o=Math.min(h.outWidth,(h.inWidth+b-n)/f);for(let i=0;i<h.inChannels;++i)for(let a=0;a<h.outChannels;++a){let s=0;for(let l=0;l<h.batchSize;++l)for(let c=e;c<t;++c){const e=T+c*p-x;for(let t=r;t<o;++t){const r=n+t*f-b;s+=y?_.get(l,e,r,i)*k.get(l,c,t,a):_.get(l,i,e,r)*k.get(l,a,c,t)}}v.set(s,T,n,i,a)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const H$={kernelName:lN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:a,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r;$Q([o,i],"conv2dBackpropInput");const d=pO(i.shape),h=pO(o.shape);let p=PF(c);const f=kF(a,i.shape,s,1,l,u,!1,p),m=new OM(f.inShape,"float32"),g=m.values,y=n.data.get(o.dataId).values,v=n.data.get(i.dataId).values,[b,x,w]=d,{batchSize:S,filterHeight:_,filterWidth:k,inChannels:T,inHeight:E,inWidth:C,outChannels:I,outHeight:j,outWidth:A,strideHeight:O,strideWidth:N}=f;p=f.dataFormat;const R=_-1-f.padInfo.top,P=k-1-f.padInfo.left,M="channelsLast"===p,D=m.strides[0],L=M?m.strides[1]:m.strides[2],F=M?m.strides[2]:1,B=M?1:m.strides[1],U=h[0],z=M?h[1]:h[2],V=M?h[2]:1,G=M?1:h[1];for(let W=0;W<S;++W)for(let e=0;e<T;++e)for(let t=0;t<E;++t){const n=t-R,r=Math.max(0,Math.ceil(n/O)),o=Math.min(j,(_+n)/O);for(let i=0;i<C;++i){const a=i-P,s=Math.max(0,Math.ceil(a/N)),l=Math.min(A,(k+a)/N);let c=0;for(let t=r;t<o;++t){const r=t*O-n;for(let n=s;n<l;++n){const o=U*W+z*t+V*n,i=b*(_-1-r)+x*(k-1-(n*N-a))+w*e;for(let e=0;e<I;++e){c+=y[o+G*e]*v[i+e]}}}g[D*W+L*t+F*i+B*e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const q$={kernelName:cN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dilations:l}=r;$Q([o,i],"conv3d");const c=TF(o.shape,i.shape,a,l,s),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,y=g.front,v=g.left,b=g.top,x=new OM(c.outShape,o.dtype),w=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,_=x.values,k=pO(o.shape),T=pO(i.shape);for(let E=0;E<c.batchSize;++E){const e=E*k[0],t=E*x.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*x.strides[1],o=n*c.strideDepth-y;for(let t=0;t<u;++t){const n=o+t*p;if(n<0||n>=c.inDepth)continue;const i=t*T[0],a=e+n*k[1];for(let e=0;e<c.outHeight;++e){const t=r+e*x.strides[2],n=e*c.strideHeight-b;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const o=i+e*T[1],s=a+r*k[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-v;for(let e=0;e<h;++e){const t=r+e*m;if(t<0||t>=c.inWidth)continue;const i=o+e*T[2],a=s+t*c.inChannels;let l=i;for(let e=0;e<c.inChannels;++e){const t=w[a+e];for(let e=0;e<c.outChannels;++e)_[n+e]+=t*S[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const X$={kernelName:uN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:s,filterShape:l}=r;$Q([o,i],"conv3dBackpropFilterV2");const c=pO(o.shape),u=pO(i.shape),d=TF(o.shape,l,a,1,s),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new OM(d.filterShape,"float32"),b=v.values,[x,w,S,_]=v.strides,k=n.data.get(i.dataId).values,[T,E,C,I]=u,j=n.data.get(o.dataId).values,[A,O,N,R]=c,P=d.padInfo.front,M=d.padInfo.left,D=d.padInfo.top;for(let L=0;L<m;++L){const e=Math.max(0,Math.ceil((P-L)/h)),t=Math.min(d.outDepth,(d.inDepth+P-L)/h),n=L*x;for(let r=0;r<g;++r){const o=Math.max(0,Math.ceil((D-r)/p)),i=Math.min(d.outHeight,(d.inHeight+D-r)/p),a=r*w+n;for(let n=0;n<y;++n){const s=Math.max(0,Math.ceil((M-n)/f)),l=Math.min(d.outWidth,(d.inWidth+M-n)/f),c=n*S+a;for(let a=0;a<d.inChannels;++a){const u=a*_+c;for(let c=0;c<d.outChannels;++c){let m=0;for(let u=0;u<d.batchSize;++u){const d=u*A,g=u*T;for(let u=e;u<t;++u){const e=(L+u*h-P)*O+d,t=u*E+g;for(let u=o;u<i;++u){const o=(r+u*p-D)*N+e,i=u*C+t;for(let e=s;e<l;++e){const t=e*I+i;m+=j[(n+e*f-M)*R+o+a]*k[t+c]}}}}b[u+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const Y$={kernelName:dN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:a,strides:s,inputShape:l}=r;$Q([o],"conv3dBackpropInputV2");const c=pO(o.shape),u=pO(i.shape),d=TF(l,i.shape,s,1,a),h=new OM(d.inShape,"float32"),p=h.values,[f,m,g,y]=h.strides,v=n.data.get(o.dataId).values,[b,x,w,S]=c,_=n.data.get(i.dataId).values,[k,T,E,C]=u,{batchSize:I,filterDepth:j,filterHeight:A,filterWidth:O,inChannels:N,inDepth:R,inHeight:P,inWidth:M,outChannels:D,outDepth:L,outHeight:F,outWidth:B,strideDepth:U,strideHeight:z,strideWidth:V}=d,G=j-1-d.padInfo.front,W=A-1-d.padInfo.top,H=O-1-d.padInfo.left;for(let q=0;q<I;++q)for(let e=0;e<N;++e)for(let t=0;t<R;++t){const n=t-G,r=Math.max(0,Math.ceil(n/U)),o=Math.min(L,(j+n)/U);for(let i=0;i<P;++i){const a=i-W,s=Math.max(0,Math.ceil(a/z)),l=Math.min(F,(A+a)/z);for(let c=0;c<M;++c){const u=c-H,d=Math.max(0,Math.ceil(u/V)),h=Math.min(B,(O+u)/V);let I=0;for(let t=r;t<o;++t){const r=t*U-n;for(let n=s;n<l;++n){const o=n*z-a;for(let i=d;i<h;++i){const a=b*q+x*t+w*n+S*i,s=k*(j-1-r)+T*(A-1-o)+E*(O-1-(i*V-u))+C*e;for(let e=0;e<D;++e){I+=v[a+e]*_[s+e]}}}}p[f*q+m*t+g*i+y*c+e]=I}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},K$=rJ(hN,(e=>Math.cos(e))),Z$={kernelName:hN,backendName:"cpu",kernelFunc:K$},Q$=rJ(pN,(e=>Math.cosh(e))),J$={kernelName:pN,backendName:"cpu",kernelFunc:Q$};const $$={kernelName:gN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:i,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:c}=r,[u,d,h,p]=o.shape,f=i.shape[0],[m,g]=s,y=uL([f,m,g,p],"float32"),v=n.data.get(i.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=pO(o.shape),S=pO(y.shape);for(let _=0;_<f;_++){const e=4*_,t=v[e],n=v[e+1],r=v[e+2],o=v[e+3],i=b[_];if(i>=u)continue;const a=m>1?(r-t)*(d-1)/(m-1):0,s=g>1?(o-n)*(h-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(d-1)+u*a:.5*(t+r)*(d-1);if(e<0||e>d-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*S[2]+u*S[1]+_*S[0];y.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),a=e-t;for(let e=0;e<g;e++){const l=g>1?n*(h-1)+e*s:.5*(n+o)*(h-1);if(l<0||l>h-1){for(let t=0;t<p;t++){const n=t+e*S[2]+u*S[1]+_*S[0];y.values[n]=c}continue}const d=Math.floor(l),f=Math.ceil(l),m=l-d;for(let n=0;n<p;n++){let o=n+d*w[2]+t*w[1]+i*w[0];const s=x[o];o=n+f*w[2]+t*w[1]+i*w[0];const l=x[o];o=n+d*w[2]+r*w[1]+i*w[0];const c=x[o];o=n+f*w[2]+r*w[1]+i*w[0];const h=s+(l-s)*m,p=c+(x[o]-c)*m;o=n+e*S[2]+u*S[1]+_*S[0],y.values[o]=h+(p-h)*a}}}else for(let t=0;t<g;++t){const r=g>1?n*(h-1)+t*s:.5*(n+o)*(h-1);if(r<0||r>h-1){for(let e=0;e<p;e++){const n=e+t*S[2]+u*S[1]+_*S[0];y.values[n]=c}continue}const a=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+a*w[2]+l*w[1]+i*w[0],r=e+t*S[2]+u*S[1]+_*S[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const e0={kernelName:fN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:a,reverse:s}=r;$Q(o,"cumprod");const l=EB([i],o.shape.length);let c=o;null!=l&&(c=ZJ({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=IB(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=WM(c.dtype,"int32"),h=gO(KA(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)h[t]=a?1:p[t];else{const n=m(y,e-1);h[t]=a?p[n]*h[n]:p[t]*h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=ZJ({inputs:{x:g},backend:n,attrs:{perm:CB(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const t0={kernelName:mN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:a,reverse:s}=r;$Q(o,"cumsum");const l=EB([i],o.shape.length);let c=o;null!=l&&(c=ZJ({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=IB(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=WM(c.dtype,"int32"),h=yO(KA(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)h[t]=a?0:p[t];else{const n=m(y,e-1);h[t]=a?p[n]+h[n]:p[t]+h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=ZJ({inputs:{x:g},backend:n,attrs:{perm:CB(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const n0={kernelName:yN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:a,binaryOutput:s}=r;if(1===o.shape.length){const e=T$(n.data.get(o.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,e)}if(2===o.shape.length){const e=E$(n.bufferSync(o),n.bufferSync(i),a,s);return n.makeTensorInfo(e.shape,i.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};const r0={kernelName:vN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:i,dataFormat:a}=r;qA("NHWC"===a,(()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(a)));const s=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*i,h=c*i,p=u/(i*i),f=n.data.get(o.dataId).values,m=new Float32Array(s*d*h*p);let g=0;for(let y=0;y<s;++y)for(let e=0;e<d;++e){const t=Math.floor(e/i),n=e%i;for(let e=0;e<h;++e){const r=Math.floor(e/i),o=(n*i+e%i)*p;for(let e=0;e<p;++e){const n=e+o+u*(r+c*(t+l*y));m[g++]=f[n]}}}return n.makeTensorInfo([s,d,h,p],o.dtype,m)}};function o0(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:c}=r;$Q([o,i],"depthwiseConv2DNative");const u=pO(o.shape),d=pO(i.shape);let h=l;null==h&&(h=[1,1]),qA(NF(a,h),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(a," and dilations '").concat(h,"'")));const p=kF(o.shape,i.shape,a,h,s,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,S=new OM(p.outShape,o.dtype),_=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,T=S.values;for(let E=0;E<p.batchSize;++E){const e=E*u[0],t=E*S.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*S.strides[1],o=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=o+t*g;if(n<0||n>=p.inHeight)continue;const i=t*d[0],a=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=r+e*S.strides[2],n=e*p.strideWidth-b;for(let e=0;e<m;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const o=i+e*d[1],s=a+r*p.inChannels;let l=t,c=o;for(let e=0;e<p.inChannels;++e){const t=_[s+e];for(let e=0;e<w;++e)T[l+e]+=t*k[c+e];l+=w,c+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const i0={kernelName:bN,backendName:"cpu",kernelFunc:o0};const a0={kernelName:xN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r;$Q([o,i],"depthwiseConv2dNativeBackpropFilter");const d=kF(o.shape,u,a,s,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g=new OM(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(o.dataId).values,w=new OM(o.shape,o.dtype,x),S=n.data.get(i.dataId).values,_=new OM(i.shape,i.dtype,S);for(let k=0;k<f;++k){const e=Math.max(0,Math.ceil((v-k)/h)),t=Math.min(d.outHeight,(d.inHeight+v-k)/h);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((y-n)/p)),o=Math.min(d.outWidth,(d.inWidth+y-n)/p);for(let i=0;i<d.outChannels;++i){const a=Math.trunc(i/b),s=i%b;let l=0;for(let c=0;c<d.batchSize;++c)for(let s=e;s<t;++s){const e=k+s*h-v;for(let t=r;t<o;++t){const r=n+t*p-y;l+=w.get(c,e,r,a)*_.get(c,s,t,i)}}g.set(l,k,n,a,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const s0={kernelName:wN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r;$Q([o,i],"depthwiseConv2DNativeBackpropInput");const d=pO(o.shape),h=pO(i.shape),p=kF(u,i.shape,a,s,l,c,!0),f=new OM(p.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=n.data.get(o.dataId).values,[x,w,S]=d,_=n.data.get(i.dataId).values,[k,T,E]=h,{batchSize:C,filterHeight:I,filterWidth:j,inChannels:A,inHeight:O,inWidth:N,outChannels:R,outHeight:P,outWidth:M,strideHeight:D,strideWidth:L}=p,F=I-1-p.padInfo.top,B=j-1-p.padInfo.left,U=R/A;for(let z=0;z<C;++z)for(let e=0;e<A;++e)for(let t=0;t<O;++t){const n=t-F,r=Math.max(0,Math.ceil(n/D)),o=Math.min(P,(I+n)/D);for(let i=0;i<N;++i){const a=i-B,s=Math.max(0,Math.ceil(a/L)),l=Math.min(M,(j+a)/L);let c=0;for(let t=r;t<o;++t){const r=t*D-n;for(let n=s;n<l;++n){const o=x*z+w*t+S*n,i=k*(I-1-r)+T*(j-1-(n*L-a))+E*e;for(let t=0;t<U;++t){c+=b[o+(e*U+t)]*_[i+t]}}}m[g*z+y*t+v*i+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const l0={kernelName:SN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=KA(r.shape),i=n.data.get(r.dataId).values,a=uL([o,o],r.dtype),s=a.values;for(let c=0;c<i.length;c++)s[c*o+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}},c0={kernelName:_N,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:i}=t,{strides:a,pad:s,dilations:l}=r,c=n,u=c.data.get(o.dataId).values,d=o.shape.length,h=c.data.get(i.dataId).values,p=i.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:_,filterWidth:k,dilationHeight:T,dilationWidth:E,outShape:C}=wF(o.shape,i.shape,a,s,"NHWC",l),I=KA(C),j=C.length,A=iO(o.dtype,I);for(let O=0;O<f;++O)for(let e=0;e<v;++e){const t=e*w-x.top;for(let n=0;n<b;++n){const r=n*S-x.left;for(let a=0;a<y;++a){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<_;++e){const n=t+e*T;if(n>=0&&n<m)for(let t=0;t<k;++t){const l=r+t*E;if(l>=0&&l<g){const r=xO([O,n,l,a],d,pO(o.shape)),c=xO([e,t,a],p,pO(i.shape)),f=u[r]+h[c];f>s&&(s=f)}}}A[xO([O,e,n,a],j,pO(C))]=s}}}return{dataId:c.write(fM(A,o.dtype),C,o.dtype),shape:C,dtype:o.dtype}}},u0={kernelName:TN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:i,dy:a}=t,{strides:s,pad:l,dilations:c}=r,u=n,d=mO(o.shape,u.data.get(o.dataId).values),h=mO(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:_,dilationHeight:k,dilationWidth:T,outShape:E}=wF(o.shape,i.shape,s,l,"NHWC",c);qA(a.rank===E.length,(()=>"Error in ".concat(TN,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(a.rank)));const C=mO(E,u.data.get(a.dataId).values),I=vO(i.shape,i.dtype);for(let j=0;j<p;++j)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let o=0;o<g;++o){let i=Number.MIN_SAFE_INTEGER,a=0,s=0;for(let e=0;e<S;++e){const n=t+e*k;if(n>=0&&n<f)for(let t=0;t<_;++t){const l=r+t*T;if(l>=0&&l<m){const r=d[j][n][l][o]+h[e][t][o];r>i&&(i=r,a=e,s=t)}}}I[a][s][o]+=C[j][e][n][o]}}}return{dataId:u.write(fM(I,o.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},d0={kernelName:kN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:i,dy:a}=t,{strides:s,pad:l,dilations:c}=r,u=n,d=mO(o.shape,u.data.get(o.dataId).values),h=mO(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:_,dilationHeight:k,dilationWidth:T,outShape:E}=wF(o.shape,i.shape,s,l,"NHWC",c);qA(a.rank===E.length,(()=>"Error in ".concat(kN,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(a.rank)));const C=mO(E,u.data.get(a.dataId).values),I=vO(o.shape,o.dtype);for(let j=0;j<p;++j)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let o=0;o<g;++o){let i=Number.MIN_SAFE_INTEGER,a=t<0?0:t,s=r<0?0:r;for(let e=0;e<S;++e){const n=t+e*k;if(n>=0&&n<f)for(let t=0;t<_;++t){const l=r+t*T;if(l>=0&&l<m){const r=d[j][n][l][o]+h[e][t][o];r>i&&(i=r,a=n,s=l)}}}I[j][a][s][o]+=C[j][e][n][o]}}}return{dataId:u.write(fM(I,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};const h0={kernelName:EN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o}=t,{canvas:i,options:a}=r,{contextOptions:s,imageOptions:l}=a||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));const d=i.getContext(u,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==d)throw new Error("Could not get the context with ".concat(u," type."));const[h,p]=o.shape.slice(0,2),f=2===o.shape.length?1:o.shape[2],m=n.data.get(o.dataId).values,g="float32"===o.dtype?255:1,y=new Uint8ClampedArray(p*h*4);for(let b=0;b<h*p;++b){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=m[b*f+n];if("float32"===o.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===o.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}i.width=p,i.height=h;const v=new ImageData(y,p,h);return d.putImageData(v,0,0),o}},p0=dJ(((e,t)=>e*t)),f0=NJ(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),m0=OJ(SR,p0,f0),g0={kernelName:SR,backendName:"cpu",kernelFunc:m0};function y0(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;let s;$Q(o,"sum"),s="bool"===o.dtype?jJ({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):sJ({inputs:{x:o},backend:n});const l=s.shape.length,c=nO(i,s.shape),u=EB(c,l);let d=c,h=s;null!=u&&(h=ZJ({inputs:{x:s},backend:n,attrs:{perm:u}}),d=IB(d.length,l)),TB("sum",d,h.shape.length);const[p,f]=_B(h.shape,d);let m=TJ(n,p,WM(h.dtype,"int32"));const g=KA(f),y=n.data.get(m.dataId).values,v=n.data.get(h.dataId).values;for(let b=0;b<y.length;++b){const e=b*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];y[b]=t}if(a){const e=m;m=LJ({inputs:{x:m},backend:n,attrs:{shape:kB(m.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=u&&n.disposeIntermediateTensorInfo(h),m}const v0={kernelName:cP,backendName:"cpu",kernelFunc:y0};const b0={kernelName:IN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,i=t,{allDims:a,summedDims:s,idDims:l}=hV(o,i.length);fV(a.length,l,i);const{path:c,steps:u}=mV(s,l),d=u.length;let h=null,p=a.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=pV(p,l[e]);let o;gV(t)?o=i[e]:(o=ZJ({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(o));const a=o.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);ZA(o.shape,a)||(o=LJ({inputs:{x:o},backend:n,attrs:{shape:a}}),f.push(o)),null===h?h=o:(h=m0({inputs:{a:o,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=y0({inputs:{x:h},backend:n,attrs:{axis:c[m]-(a.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}};const x0={kernelName:AN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;$Q([r,o],"eluGrad");const i=new Float32Array(KA(o.shape)),a=n.data.get(o.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const e=a[l];i[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(o.shape,"float32",i)}},w0=dJ(((e,t)=>e===t?1:0)),S0=OJ(NN,w0,null,"bool"),_0={kernelName:NN,backendName:"cpu",kernelFunc:S0},k0=Yz,T0=Kz,E0=Zz,C0=Qz,I0=Jz,j0=$z,A0=rJ(ON,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+k0*n);return t*(1-((((j0*r+I0)*r+C0)*r+E0)*r+T0)*r*Math.exp(-n*n))})),O0={kernelName:ON,backendName:"cpu",kernelFunc:A0},N0=nJ((e=>Math.exp(e))),R0=oJ(RN,N0,"float32"),P0={kernelName:RN,backendName:"cpu",kernelFunc:R0};function M0(e){const{inputs:t,backend:n,attrs:r}=e,{input:o}=t,{dim:i}=r,a=o.shape.length,s=o.shape.slice();let l=i;return i<0&&(qA(-(a+1)<=i,(()=>"Axis must be in the interval [".concat(-(a+1),", ").concat(a,"]"))),l=a+i+1),s.splice(l,0,1),LJ({inputs:{x:o},backend:n,attrs:{shape:s}})}const D0={kernelName:PN,backendName:"cpu",kernelFunc:M0},L0=nJ((e=>Math.expm1(e))),F0=oJ(MN,L0),B0={kernelName:MN,backendName:"cpu",kernelFunc:F0},U0=dJ(((e,t)=>e/t)),z0=OJ(CN,U0),V0={kernelName:CN,backendName:"cpu",kernelFunc:z0},G0=dJ(((e,t)=>e-t)),W0=NJ(((e,t,n,r)=>({real:e-n,imag:t-r}))),H0=OJ(TP,G0,W0),q0={kernelName:TP,backendName:"cpu",kernelFunc:H0};function X0(e,t,n){const r=e.shape,o=r[0],i=r[1],a=n.data.get(e.dataId),s=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[o,i],u=KA(c),d=oO("float32",u),h=oO("float32",u);for(let g=0;g<o;g++){const e=S$({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,i]}}),r=S$({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),o=_J({inputs:{real:e,imag:r},backend:n}),{real:a,imag:c}=Y0(o,t,n),u=eV(a,c);for(let t=0;t<i;t++){const e=oV(u,t);d[g*i+t]=e.real,h[g*i+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o)}const p=n.makeTensorInfo(c,"float32",d),f=n.makeTensorInfo(c,"float32",h),m=_J({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function Y0(e,t,n){const r=KA(e.shape),o=n.data.get(e.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,a=n.data.get(o.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){const o=K0(i,a,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",o.real),t=n.makeTensorInfo(s,"float32",o.imag),i=n.makeTensorInfo([],"float32",pM(r,"float32")),a=sJ({inputs:{x:i},backend:n}),l=V0.kernelFunc({inputs:{a:e,b:i},backend:n}),c=V0.kernelFunc({inputs:{a:t,b:a},backend:n}),u=n.data.get(l.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:d}}return o}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let o=0;o<t;o++){let i=0,a=0;for(let r=0;r<t;r++){const s=sV(o*r,t,n),l=oV(e,r);i+=l.real*s.real-l.imag*s.imag,a+=l.real*s.imag+l.imag*s.real}n&&(i/=t,a/=t),iV(r,i,a,o)}return r}(eV(i,a),r,t);return tV(e)}}function K0(e,t,n,r,o){if(1===n)return{real:e,imag:t};const i=eV(e,t),a=n/2,s=nV(i),l=s.real,c=s.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),h=o.makeTensorInfo(u,"float32",c),p=_J({inputs:{real:d,imag:h},backend:o}),f=rV(i),m=f.real,g=f.imag,y=[m.length],v=o.makeTensorInfo(y,"float32",m),b=o.makeTensorInfo(y,"float32",g),x=_J({inputs:{real:v,imag:b},backend:o}),w=K0(l,c,a,r,o),S=w.real,_=w.imag,k=[S.length],T=o.makeTensorInfo(k,"float32",S),E=o.makeTensorInfo(k,"float32",_),C=_J({inputs:{real:T,imag:E},backend:o}),I=K0(m,g,a,r,o),j=I.real,A=I.imag,O=[j.length],N=o.makeTensorInfo(O,"float32",j),R=o.makeTensorInfo(O,"float32",A),P=_J({inputs:{real:N,imag:R},backend:o}),M=aV(n,r),D=[M.real.length],L=o.makeTensorInfo(D,"float32",M.real),F=o.makeTensorInfo(D,"float32",M.imag),B=_J({inputs:{real:L,imag:F},backend:o}),U=m0({inputs:{a:B,b:P},backend:o}),z=MJ({inputs:{a:C,b:U},backend:o}),V=H0({inputs:{a:C,b:U},backend:o}),G=EJ({inputs:{input:z},backend:o}),W=EJ({inputs:{input:V},backend:o}),H=F$({inputs:{input:z},backend:o}),q=F$({inputs:{input:V},backend:o}),X=U$({inputs:[G,W],backend:o,attrs:{axis:0}}),Y=U$({inputs:[H,q],backend:o,attrs:{axis:0}}),K=o.data.get(X.dataId).values,Z=o.data.get(Y.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(C),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(Y),{real:K,imag:Z}}const Z0={kernelName:DN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=KA(r.shape),i=r.shape[r.shape.length-1],a=LJ({inputs:{x:r},backend:n,attrs:{shape:[o/i,i]}}),s=X0(a,!1,n),l=LJ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}};function Q0(e){const{backend:t,attrs:n}=e,{shape:r,value:o,dtype:i}=n,a=i||uO(o),s=iO(a,KA(r));return function(e,t,n){e.fill(t)}(s,o),t.makeTensorInfo(r,a,s)}const J0={kernelName:LN,backendName:"cpu",kernelFunc:Q0};const $0={kernelName:FN,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,i=r,a=oO(o.dtype,KA(o.shape)),[s,l,c,u]=o.shape,d=i.data.get(o.dataId).values;for(let h=0;h<s;h++){const e=h*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let o=0;o<u;o++){const i=Math.round(c-t-1),s=e+n+r+o;let l=d[s];if(i>=0&&i<c){l=d[e+n+i*u+o]}a[s]=l}}}}return{dataId:i.write(a,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},e1=nJ((e=>Math.floor(e))),t1=oJ(BN,e1),n1={kernelName:BN,backendName:"cpu",kernelFunc:t1},r1=dJ(((e,t)=>Math.floor(e/t))),o1=OJ(UN,r1,null,"int32"),i1={kernelName:UN,backendName:"cpu",kernelFunc:o1};const a1={kernelName:UP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=V$({inputs:{x:o,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const e=m;if("NCHW"===u&&1===a.shape.length&&1!==a.shape[0]){const e=LJ({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=MJ({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=MJ({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=LJ({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=SJ(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=SJ(n,m,p,s,f);n.disposeIntermediateTensorInfo(e)}return m}};const s1={kernelName:zP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=o0({inputs:{x:o,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const e=m;m=MJ({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=SJ(n,m,p,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function l1(e,t,n,r,o,i,a,s,l){const c=uL([r,i],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<o;t++){const i=e[u*o+t];r+=i*a[t],n.push(i)}if(r<0||r>=l/i)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<i;e++)c.values[u*i+e]=t.get(...t.indexToLoc(r*i+e))}return c}const c1={kernelName:GN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,i=KA(r.shape),a=o.shape,s=a[a.length-1],[l,c,u,d]=Vz(r,o);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const h=l1(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,c,s,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}};function u1(e,t,n){const r=uL(n,e.dtype);for(let o=0;o<r.size;++o){const n=r.indexToLoc(o).slice(),i=n[0],a=n[2],s=t.locToIndex([i,a]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[o]=e.values[l])}return r}const d1={kernelName:VN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:a,batchDims:s}=r;$Q([o,i],"gatherV2");const l=nO(a,o.shape)[0],c=n.data.get(i.dataId).values,u=o.shape[l];for(let b=0;b<c.length;++b){const e=c[b];qA(e<=u-1&&e>=0,(()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]")))}let d=s;null==s&&(d=0);const h=KA(i.shape),p=RV(o,i,l,d),f=LJ({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=LJ({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=u1(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},h1=dJ(((e,t)=>e>t?1:0)),p1=OJ(WN,h1,null,"bool"),f1={kernelName:WN,backendName:"cpu",kernelFunc:p1},m1=dJ(((e,t)=>e>=t?1:0)),g1=OJ(HN,m1,null,"bool"),y1={kernelName:HN,backendName:"cpu",kernelFunc:g1};const v1={kernelName:XN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=KA(r.shape),i=r.shape[r.shape.length-1],a=LJ({inputs:{x:r},backend:n,attrs:{shape:[o/i,i]}}),s=X0(a,!0,n),l=LJ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}},b1=rJ(KN,(e=>Number.isFinite(e)?1:0),"bool"),x1={kernelName:KN,backendName:"cpu",kernelFunc:b1},w1=rJ(ZN,(e=>Math.abs(e)===1/0?1:0),"bool"),S1={kernelName:ZN,backendName:"cpu",kernelFunc:w1},_1=rJ(QN,(e=>Number.isNaN(e)?1:0),"bool"),k1={kernelName:QN,backendName:"cpu",kernelFunc:_1},T1=dJ(((e,t)=>e<t?1:0)),E1=OJ($N,T1,null,"bool"),C1={kernelName:$N,backendName:"cpu",kernelFunc:E1},I1=dJ(((e,t)=>e<=t?1:0)),j1=OJ(eR,I1,null,"bool"),A1={kernelName:eR,backendName:"cpu",kernelFunc:j1};function O1(e,t,n){const r=(t-e)/(n-1),o=yO(n,"float32");o[0]=e;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}const N1={kernelName:tR,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:i}=n,a=O1(r,o,i);return t.makeTensorInfo([a.length],"float32",a)}},R1=nJ((e=>Math.log(e))),P1=oJ(nR,R1),M1={kernelName:nR,backendName:"cpu",kernelFunc:P1},D1=rJ(rR,(e=>Math.log1p(e))),L1={kernelName:rR,backendName:"cpu",kernelFunc:D1},F1=dJ(((e,t)=>e&&t)),B1=OJ(oR,F1,null,"bool"),U1={kernelName:oR,backendName:"cpu",kernelFunc:B1},z1=rJ(iR,(e=>e?0:1),"bool"),V1={kernelName:iR,backendName:"cpu",kernelFunc:z1},G1=dJ(((e,t)=>e||t)),W1=OJ(aR,G1,null,"bool"),H1={kernelName:aR,backendName:"cpu",kernelFunc:W1};const q1={kernelName:sR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:a,alpha:s,beta:l}=r;$Q(o,"LRN");const c=o.shape[3],u=c-1,d=n.data.get(o.dataId).values,h=KA(o.shape),p=new Float32Array(h);function f(e){const t=e%c;let n=e-t+Math.max(0,t-i);const r=e-t+Math.min(t+i,u);let o=0;for(;n<=r;n++){const e=d[n];o+=e*e}return o}for(let m=0;m<h;m++){const e=f(m),t=d[m]*Math.pow(a+s*e,-l);p[m]=t}return n.makeTensorInfo(o.shape,o.dtype,p)}};const X1={kernelName:lR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:a}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r;$Q(a,"LRNGrad");const d=KA(a.shape),h=a.shape[3],p=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),y=d;for(let v=0;v<y;v++){const e=v%h,t=v-e+Math.max(0,e-s),n=v-e+Math.min(h,e+s+1);let r=0;for(let o=t;o<n;o++)r+=Math.pow(f[o],2);r=c*r+l;for(let o=t;o<n;o++){let e=-2*c*u*f[o]*m[v]/r;v===o&&(e+=Math.pow(r,-u)),e*=p[v],g[o]+=e}}return n.makeTensorInfo(a.shape,o.dtype,g)}};function Y1(e,t,n,r){const o=oO(r,KA(n));for(let i=0;i<o.length;++i){const n=i*t;let r=e[n];for(let o=0;o<t;++o){const t=e[n+o];(Number.isNaN(t)||t>r)&&(r=t)}o[i]=r}return o}function K1(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:a}=r,s=n;let l=o.shape;const c=l.length,u=nO(i,l);let d=u;const h=EB(d,c);let p=s.data.get(o.dataId).values;if(null!=h){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[h[t]];p=KJ(p,l,o.dtype,h,e),d=IB(d.length,c),l=e}$Q(o,"max"),TB("max",d,c);const[f,m]=_B(l,d),g=Y1(p,KA(m),f,o.dtype),y=s.write(g,f,o.dtype);let v=f;if(a){v=kB(f,u)}return{dataId:y,shape:v,dtype:o.dtype}}const Z1={kernelName:cR,backendName:"cpu",kernelFunc:K1},Q1=dJ(((e,t)=>Math.max(e,t))),J1=OJ(uR,Q1),$1={kernelName:uR,backendName:"cpu",kernelFunc:J1};const e2={kernelName:dR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;$Q(o,"maxPool");const{filterSize:i,strides:a,pad:s,dimRoundingMode:l}=r;qA(NF(a,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const c=SF(o.shape,i,a,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ZA(c.inShape,c.outShape))u=sJ({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=pO(o.shape),r=p$(e,o.shape,o.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,o.dtype,r.values)}return u}};const t2={kernelName:pR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:l,dataFormat:c}=r;$Q(o,"maxPool3d");const u=_F(o.shape,i,a,1,s,l,c),d=m$(n.data.get(o.dataId).values,o.shape,o.dtype,pO(o.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const n2={kernelName:fR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:c}=r;$Q([o,i],"maxPool3DGrad");const u=_F(i.shape,a,s,1,l,c),d=function(e,t){const n=uL(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const v=y*r-h;let b=v;for(;b<0;)b+=a;const x=Math.min(t.inDepth,c+v);for(let r=0;r<t.outHeight;++r){const c=r*o-p;let h=c;for(;h<0;)h+=s;const w=Math.min(t.inHeight,u+c);for(let o=0;o<t.outWidth;++o){const p=o*i-f;let S=p;for(;S<0;)S+=l;const _=Math.min(t.inWidth,d+p);let k=Number.NEGATIVE_INFINITY,T=-1;for(let t=b;t<x;t+=a){const n=t-v;for(let r=h;r<w;r+=s){const o=r-c;for(let i=S;i<_;i+=l){const a=i-p,s=e.get(m,t,r,i,g);s>=k&&(k=s,T=n*u*d+o*u+a)}}}n.set(T,m,y,r,o,g)}}}return n}(n.bufferSync(i),u),h=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterDepth,b=u.effectiveFilterHeight,x=u.effectiveFilterWidth,w=v-1-u.padInfo.front,S=x-1-u.padInfo.left,_=b-1-u.padInfo.top,k=uL(i.shape,"float32"),T=n.bufferSync(o);for(let E=0;E<u.batchSize;++E)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-w,i=n-_,a=r-S;let s=0;for(let t=0;t<v;t+=m){const n=(o+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=g){const o=(i+r)/p;if(!(o<0||o>=u.outHeight||Math.floor(o)!==o))for(let i=0;i<x;i+=y){const l=(a+i)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=v*b*x-1-d.get(E,n,o,l,e)===t*b*x+r*x+i?1:0;if(0===c)continue;s+=T.get(E,n,o,l,e)*c}}}k.set(s,E,t,n,r,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};const r2={kernelName:hR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:a}=t,s=i;$Q([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=SF(s.shape,l,c,1,u,d),p=n.data.get(s.dataId).values,f=uL(h.outShape,s.dtype,f$(p,s.shape,s.dtype,h).values),m=h.strideHeight,g=h.strideWidth,y=h.dilationHeight,v=h.dilationWidth,b=h.effectiveFilterHeight,x=h.effectiveFilterWidth,w=x-1-h.padInfo.left,S=b-1-h.padInfo.top,_=uL(s.shape,"float32"),k=n.data.get(o.dataId).values,T=uL(o.shape,"float32",k);for(let E=0;E<h.batchSize;++E)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-S,o=n-w;let i=0;for(let t=0;t<b;t+=y){const n=(r+t)/m;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const a=(o+r)/g;if(a<0||a>=h.outWidth||Math.floor(a)!==a)continue;const s=b*x-1-f.get(E,n,a,e)===t*x+r?1:0;if(0===s)continue;i+=T.get(E,n,a,e)*s}}_.set(i,E,t,n,e)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};const o2={kernelName:mR,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:i,strides:a,pad:s,includeBatchInIndex:l}=n,c=r;$Q(o,"MaxPoolWithArgmax");const u=c.data.get(o.dataId).values,d=SF(o.shape,i,a,[1,1],s),[h,p]=function(e,t,n,r,o){const i=p$(e,0,n,pO(t),o,"max"),a=f$(e,t,n,o,!0,r);return[i.values,a.values]}(u,o.shape,o.dtype,l,d),f=c.write(h,d.outShape,o.dtype),m=c.write(p,d.outShape,o.dtype);return[{dataId:f,shape:d.outShape,dtype:o.dtype},{dataId:m,shape:d.outShape,dtype:"int32"}]}};const i2={kernelName:gR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,s=nO(i,o.shape),l=KA(_B(o.shape,s)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const d=jJ({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});c.push(d);const h=z0({inputs:{a:d,b:u},backend:n});c.push(h);const p=y0({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:a}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const a2={kernelName:yR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;$Q(o,"min");const s=nO(i,o.shape);let l=s;const c=EB(l,o.shape.length);let u=o;null!=c&&(u=ZJ({inputs:{x:o},backend:n,attrs:{perm:c}}),l=IB(l.length,o.shape.length)),TB("min",l,u.shape.length);const[d,h]=_B(u.shape,l),p=KA(h),f=yO(KA(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(a){const e=LJ({inputs:{x:g},backend:n,attrs:{shape:kB(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},s2=dJ(((e,t)=>Math.min(e,t))),l2=OJ(vR,s2),c2={kernelName:vR,backendName:"cpu",kernelFunc:l2};const u2={kernelName:bR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,mode:a}=r;$Q(o,"mirrorPad");const s=i.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=i.map((e=>e[0])),c=i.map(((e,t)=>e[0]+o.shape[t])),u="reflect"===a?0:1,d=n.data.get(o.dataId).values,h=o.shape.length,p=pO(o.shape),f=KA(s),m=s.length,g=pO(s),y=oO(o.dtype,f);for(let v=0;v<f;v++){let e=wO(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map(((e,t)=>e-l[t]));const t=xO(e,h,p);y[v]=d[t]}return{dataId:n.write(y,s,o.dtype),shape:s,dtype:o.dtype}}},d2=dJ(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),h2=OJ(xR,d2),p2={kernelName:xR,backendName:"cpu",kernelFunc:h2};function f2(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:i}=r,a=o.shape.length;let s=i;if(-1===s&&(s=a-1),s!==a-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(a," and dim was ").concat(s));const l=nO([s],o.shape),c=K1({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=kB(c.shape,l),d=LJ({inputs:{x:c},backend:n,attrs:{shape:u}}),h=H0({inputs:{a:o,b:d},backend:n}),p=R0({inputs:{x:h},backend:n}),f=y0({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=LJ({inputs:{x:f},backend:n,attrs:{shape:u}}),g=z0({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const m2={kernelName:hP,backendName:"cpu",kernelFunc:f2};const g2={kernelName:wR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:a,normalized:s}=r;$Q(o,"multinomial");const l=s?o:f2({inputs:{logits:o},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],p=yO(KA(h),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=d[e];for(let o=1;o<t.length;++o)t[o]=t[o-1]+d[e+o];const n=qB.alea(a.toString()),r=f*i;for(let o=0;o<i;++o){const e=n();p[r+o]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+o]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}};function y2(e,t,n){const r=pM(-1,n);return p0([],t,r,e,n)}const v2={kernelName:_R,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;$Q(r,"neg");const o=n.data.get(r.dataId).values,[i,a]=y2(o,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}},b2=YU;const x2={kernelName:TR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r;$Q(o,"NonMaxSuppression");const c=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=b2(c,u,a,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},w2=KU;const S2={kernelName:ER,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r;$Q(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:p}=w2(u,d,a,s,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},_2=ZU;const k2={kernelName:CR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r;$Q(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,h=a,p=s,f=l,m=c,{selectedIndices:g,selectedScores:y}=_2(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},T2=dJ(((e,t)=>e!==t?1:0)),E2=OJ(kR,T2,null,"bool"),C2={kernelName:kR,backendName:"cpu",kernelFunc:E2};const I2={kernelName:jR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:i,depth:a,onValue:s,offValue:l}=r;$Q(o,"oneHot");const c=KA(o.shape),u=new Float32Array(c*a);u.fill(l);const d=n.data.get(o.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<a&&(u[h*a+d[h]]=s);return n.makeTensorInfo([...o.shape,a],i,u)}};function j2(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=EJ({inputs:{input:r},backend:n}),t=j2({inputs:{x:e},backend:n}),o=F$({inputs:{input:r},backend:n}),i=j2({inputs:{x:o},backend:n}),a=_J({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),a}return Q0({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const A2={kernelName:MP,backendName:"cpu",kernelFunc:j2};const O2={kernelName:IR,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===o.dtype){const t=EJ({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),i=F$({inputs:{input:o},backend:r}),a=j2({inputs:{x:i},backend:r}),s=_J({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),s}return Q0({backend:r,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}};function N2(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return M0({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const i=t[0].shape,a=t[0].dtype;t.forEach((e=>{XA(i,e.shape,"All tensors passed to stack must have matching shapes"),qA(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=M0({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),c=U$({inputs:l,backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const R2={kernelName:AR,backendName:"cpu",kernelFunc:N2};const P2={kernelName:OR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:a}=r;$Q(o,"pad");const s=i.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=i.map((e=>e[0])),c=n.data.get(o.dataId).values,u=KA(o.shape),d=o.shape.length,h=pO(o.shape),p=KA(s),f=s.length,m=pO(s),g=oO(o.dtype,p);0!==a&&g.fill(a);for(let y=0;y<u;y++){const e=wO(y,d,h).map(((e,t)=>e+l[t]));g[xO(e,f,m)]=c[y]}return{dataId:n.write(g,s,o.dtype),shape:s,dtype:o.dtype}}},M2=dJ(((e,t)=>Math.pow(e,t))),D2=OJ(NR,M2),L2={kernelName:NR,backendName:"cpu",kernelFunc:D2};function F2(e,t,n,r){const[o,i]=_B(e,r),a=WM(t,"int32"),s=yO(KA(o),a),l=KA(i);for(let c=0;c<s.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[c]=t}return{outVals:s,outShape:o,outDtype:a}}const B2={kernelName:PR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;$Q(o,"prod");const s=o.shape.length,l=nO(i,o.shape),c=EB(l,s);let u=l,d=o;const h=[];null!=c&&(d=ZJ({inputs:{x:o},backend:n,attrs:{perm:c}}),h.push(d),u=IB(u.length,s));const p=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=F2(d.shape,d.dtype,p,u);let y=m;return a&&(y=kB(m,l)),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(y,g,f)}};function U2(e,t,n,r){const o=[];let i=0;const a=t.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],o=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)s[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],a=e[c]+1;for(let e=0;e<n.length;++e){const o=n[e],i=e+t.length-1;if(i>=0){const e=s[i],t=e[e.length-1]-o[r];for(let n=r;n<a;++n)s[i].push(o[n+1]+t)}r=o[r],a=o[a]}a!==r&&(o.push([r,a]),i+=a-r)}return{outSplits:s,valueSlices:o,numValues:i}}function z2(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function V2(e,t,n,r,o){const i=t.slice();i[0]=o;const a=iO(n,KA(i)),s=e.length;return function(e,t,n,r,o,i){const a=z2(t,2)[1],s=z2(i,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)o[l*s+n]=e[t*a+n];++l}}(e,t,r,0===s?0:s/t[0],a,i),[a,i]}function G2(e,t,n,r,o,i,a,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const o=wO(r,t.length,pO(t)).join(",");throw new Error("indices[".concat(o,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,a,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:d}=U2(i,a,e,l),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=iO("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(c),p=V2(n,r,o,u,d);return[h,p[0],p[1]]}const W2={kernelName:MR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:i,indices:a}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.data.get(e.dataId).values)),c=o.map((e=>e.shape)),u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,[h,p,f]=G2(l,c,u,i.shape,i.dtype,d,a.shape),m=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}},H2=2147483647;function q2(e,t,n,r,o,i,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===o.length,c=0===a.length,u=[];s||u.push(t[0]),l||u.push(o[0]),c||u.push(a[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],h=iO("int32",d+1);h[0]=0;for(let m=0;m<d;++m){const t=s?e[0]:e[m],n=l?r[0]:r[m],o=c?i[0]:i[m];if(0===o)throw new Error("Requires delta != 0");let a;if(o>0&&n<t||o<0&&n>t)a=0;else if(a=Math.ceil(Math.abs((n-t)/o)),a>H2)throw new Error("Requires ((limit - start) / delta) <= ".concat(H2));h[m+1]=h[m]+a}const p=iO(n,h[d]);let f=0;for(let m=0;m<d;++m){const t=h[m+1]-h[m];let n=s?e[0]:e[m];const r=c?i[0]:i[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[h,p]}const X2={kernelName:DR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:i}=t,a=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[c,u]=q2(a,r.shape,r.dtype,s,o.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var Y2=jz;class K2{constructor(e,t,n,r,o,i,a,s,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=Oz(c),this.raggedRank=Nz(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Y2.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Y2.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Y2.VALUE_ROWIDS:return K2.getMaxWidthValueRowID(t);case Y2.ROW_SPLITS:return K2.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Y2[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],o=0;for(let i=1;i<t;++i){const t=e[i];t!==r&&(r=t,o=Math.max(i-n,o),n=i)}return Math.max(t-n,o)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Q2(e,n)}calculateOutputSize(e){const t=this.valuesShape;Rz(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=Az(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let o=1;o<=this.raggedRank;++o)r[o]<0&&(r[o]=this.getMaxWidth(o));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),o=[];let i=0;for(let a=0;a<r;++a,i+=t)o.push(i);for(let a=r;a<e;++a)o.push(-1);return qA(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,r){const o=e.length,i=[];for(let a=0;a<o-1;++a){const o=e[a+1]-e[a];let s=Math.min(r,o),l=t[a];-1===l&&(s=0);for(let e=0;e<s;++e)i.push(l),l+=n;for(let e=0;e<o-s;++e)i.push(-1)}if(o>0&&i.length!==e[o-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){const o=e.length,i=[];if(0===o)return[];let a=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let l=t[s];i.push(l);for(let c=1;c<o;++c){const o=e[c];if(o===s)l>=0&&(++a,a<r?l+=n:l=-1);else{if(a=0,s=o,o>=t.length)throw new Error("Got nextValueRowId=".concat(o," which is not less than ").concat(t.length));l=t[o]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){const o=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Y2.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,t,n,r);case Y2.ROW_SPLITS:if(o.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(o.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(o,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Y2[i]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Y2.FIRST_DIM_SIZE:return e[0];case Y2.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Y2.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Y2[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];const r=Q2(t,!1),o=iO(this.valuesDType,KA(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){i=this.calculateOutputIndex(e-1,i,n[e],t[e])}this.setOutput(this.raggedRank,i,o,r)}return[r,o]}setOutput(e,t,n,r){if(0===n.length)return;const o=this.values,i=n;let a=r.slice();a=a.slice(e+1);const s=KA(a),l=t.length;let c=this.defaultValue;if(c.length!==s&&1!==c.length){const e=this.defaultValueShape;wD((()=>{const t=DF(c,e),n=GF(t,a);c=n.dataSync()}))}let u=0,d=0,h=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==h){if(d<h){const e=o.subarray(u*s);Z2(i.subarray(d*s),e,(h-d)*s)}if(p>=l){const t=n.length;e=Math.floor(t/s)}if(e>h)if(1===this.defaultValue.length)i.subarray(h*s,e*s).fill(this.defaultValue[0]),h=e;else for(;e>h;){Z2(i.slice(h*s),c,s),++h}e<0?(u=p+1,d=h):(u=p,d=h,h=d+1)}else++h}}}function Z2(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Q2(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function J2(e,t,n,r,o,i,a,s,l,c){return new K2(e,t,n,r,o,i,a,s,l,c).compute()}const $2={kernelName:LR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:i,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,h=s.map((e=>n.data.get(e.dataId).values)),p=s.map((e=>e.shape)),[f,m]=J2(c,o.shape,u,i.shape,i.dtype,d,a.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}};function e3(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return yO(0,r);const o=yO(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(let i=1;i<o.length;i++)o[i]=o[i-1]+n;return o}const t3={kernelName:FR,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,dtype:i,step:a}=n,s=e3(r,o,a,i);return t.makeTensorInfo([s.length],i,s)}},n3=rJ(UR,(e=>1/e)),r3={kernelName:UR,backendName:"cpu",kernelFunc:n3};const o3={kernelName:HR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:s}=r;$Q(o,"resizeBilinear");const l=pO(o.shape),[c,u]=s,[d,h,p,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(KA([d,c,u,f])),y=[i&&c>1?h-1:h,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<d;S++)for(let e=0;e<c;e++){let t;t=a?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,o=Math.min(h-1,Math.ceil(t)),i=S*l[0]+n*l[1],s=S*l[0]+o*l[1];for(let e=0;e<u;e++){let t;t=a?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),o=t-n,c=Math.min(p-1,Math.ceil(t)),u=i+n*l[2],d=s+n*l[2],h=i+c*l[2],y=s+c*l[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[d+e],i=t+(m[h+e]-t)*o,a=i+(n+(m[y+e]-n)*o-i)*r;g[b++]=a}}}return n.makeTensorInfo([d,c,u,f],"float32",g)}};const i3={kernelName:qR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:a}=r;$Q([i,o],"resizeBilinearGrad");const s=pO(o.shape),[l,c,u,d]=o.shape,[,h,p]=i.shape,f=new Float32Array(l*c*u*d),m=[a&&h>1?c-1:c,a&&p>1?u-1:u],g=[a&&h>1?h-1:h,a&&p>1?p-1:p],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(i.dataId).values;let x=0;for(let w=0;w<l;w++){const e=w*s[0];for(let t=0;t<h;t++){const n=t*y,r=Math.floor(n),o=Math.min(Math.ceil(n),c-1),i=e+r*s[1],a=e+o*s[1],l=n-r,h=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),o=t-n,c=1-o,p=i+n*s[2],m=i+r*s[2],g=a+n*s[2],y=a+r*s[2],w=h*c,S=h*o,_=l*c,k=l*o;for(let e=0;e<d;e++){const t=b[x++];f[p+e]+=t*w,f[m+e]+=t*S,f[g+e]+=t*_,f[y+e]+=t*k}}}}return n.makeTensorInfo([l,u,c,d],"float32",f)}};const a3={kernelName:GR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:s}=r;$Q(o,"resizeNearestNeighbor");const l=pO(o.shape),[c,u]=s,[d,h,p,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*c*u*f),y=[i&&c>1?h-1:h,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let S=0;S<d;S++){const e=S*l[0];for(let t=0;t<c;t++){const n=a?b*(t+.5):b*t;let r=Math.min(h-1,i?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));const o=e+r*l[1];for(let e=0;e<u;e++){const t=a?x*(e+.5):x*e;let n=Math.min(p-1,i?Math.round(t):Math.floor(t));a&&(n=Math.max(0,n));const r=o+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([d,c,u,f],o.dtype,g)}};const s3={kernelName:WR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:a}=r;$Q([i,o],"resizeNearestNeighborGrad");const s=pO(o.shape),l=pO(i.shape),[c,u,d,h]=o.shape,[,p,f]=i.shape,m=new Float32Array(c*u*d*h),g=n.data.get(i.dataId).values,y=[a&&p>1?u-1:u,a&&f>1?d-1:d],v=[a&&p>1?p-1:p,a&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,S=1/x,_=2*Math.ceil(w)+2,k=2*Math.ceil(S)+2;for(let T=0;T<c;T++){const e=T*s[0];for(let t=0;t<u;t++){const n=e+t*s[1],r=Math.floor(t*w),o=Math.floor(r-_/2);for(let i=0;i<d;i++){const r=n+i*s[2],c=Math.floor(i*S),y=Math.floor(c-k/2);for(let n=0;n<h;n++){let s=0;for(let r=0;r<_;r++){const c=r+o;if(c<0||c>=p)continue;const h=e+c*l[1],m=c*b;if(t===Math.min(u-1,a?Math.round(m):Math.floor(m)))for(let e=0;e<k;e++){const t=e+y;if(t<0||t>=f)continue;const r=h+t*l[2],o=t*x;i===Math.min(d-1,a?Math.round(o):Math.floor(o))&&(s+=g[r+n])}}m[r+n]=s}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}};const l3={kernelName:YR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r;$Q(o,"reverse");const a=o.shape.length,s=nO(i,o.shape);if(0===a)return sJ({inputs:{x:o},backend:n});const l=new OM(o.shape,o.dtype),c=n.bufferSync(o);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();s.forEach((e=>t[e]=o.shape[e]-1-t[e])),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},c3={kernelName:FP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:i,fillValue:a,center:s}=n,l=r,c=oO(o.dtype,KA(o.shape)),[u,d,h,p]=o.shape,[f,m]=Dz(s,d,h),g=Math.sin(i),y=Math.cos(i),v=l.data.get(o.dataId).values;for(let b=0;b<u;b++){const e=b*h*d*p;for(let t=0;t<d;t++){const n=t*(h*p);for(let r=0;r<h;r++){const o=r*p;for(let i=0;i<p;i++){const s=[u,t,r,i],l=s[2],b=s[1];let x=(l-f)*y-(b-m)*g,w=(l-f)*g+(b-m)*y;x=Math.round(x+f),w=Math.round(w+m);let S=a;if("number"!==typeof a&&(S=3===i?255:a[i]),x>=0&&x<h&&w>=0&&w<d){S=v[e+w*(h*p)+x*p+i]}c[e+n+o+i]=S}}}}return{dataId:l.write(c,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},u3=rJ(KR,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),d3={kernelName:KR,backendName:"cpu",kernelFunc:u3},h3=nJ((e=>1/Math.sqrt(e))),p3=oJ(ZR,h3),f3={kernelName:ZR,backendName:"cpu",kernelFunc:p3};function m3(e,t,n,r,o,i,a,s,l,c){const u=[r/o,o],d=e.values,h=t.values;if(0===r)return uL(n,t.dtype);const p=l instanceof OM?l:uL(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<i;f++){const e=[];let i=0;for(let t=0;t<a;t++){const n=d[f*a+t];e.push(n),i+=n*s[t]}if(i<0||i>=r/o)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<o;n++)c?p.values[i*o+n]+=h[f*o+n]:p.values[i*o+n]=0===t.rank?h[0]:h[f*o+n]}return p}const g3={kernelName:QR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:i}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Hz(0,o,a),h=m3(n.bufferSync(o),n.bufferSync(i),a,d,c,l,s,u,0,!0);return n.makeTensorInfo(a,h.dtype,h.values)}};function y3(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<t?n=o+1:r=o;return r}function v3(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<=t?n=o+1:r=o;return r}const b3={kernelName:$R,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:i}=t,{side:a}=r,s=function(e,t,n,r,o,i){const a=iO("int32",n*o);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*o;for(let e=0;e<o;++e)a[l+e]="left"===i?y3(n,t[e+l]):v3(n,t[e+l])}return a}(n.data.get(o.dataId).values,n.data.get(i.dataId).values,o.shape[0],o.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",s)}};const x3={kernelName:eP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t;$Q([r,o,i],"select");const a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,u=WM(o.dtype,i.dtype),d=yO(KA(o.shape),u);let h=0;const p=0===a||a>1||1===o.shape.length?1:KA(o.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?d[h++]=l[f]:d[h++]=c[f];return n.makeTensorInfo(o.shape,u,d)}},w3=qz,S3=Xz,_3=rJ(tP,(e=>e>=0?S3*e:w3*(Math.exp(e)-1))),k3={kernelName:tP,backendName:"cpu",kernelFunc:_3},T3=rJ(iP,(e=>e<0?-1:e>0?1:0)),E3={kernelName:iP,backendName:"cpu",kernelFunc:T3},C3=rJ(rP,(e=>Math.sin(e))),I3={kernelName:rP,backendName:"cpu",kernelFunc:C3},j3=rJ(oP,(e=>Math.sinh(e))),A3={kernelName:oP,backendName:"cpu",kernelFunc:j3},O3=Math.log(1.1920928955078125e-7)+2,N3=rJ(sP,(e=>{const t=e>-O3,n=e<O3,r=Math.exp(e);let o;return o=n?r:t?e:Math.log(1+r),o})),R3={kernelName:sP,backendName:"cpu",kernelFunc:N3};const P3={kernelName:uP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:a}=r;$Q([o],"spaceToBatchND");const s=KA(i),l=[[0,0]];l.push(...a);for(let g=1+i.length;g<o.shape.length;++g)l.push([0,0]);const c=P2.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),u=Lz(c.shape,i,s,!1),d=Fz(u.length,i.length,!1),h=Bz(c.shape,i,s,!1),p=LJ({inputs:{x:c},backend:n,attrs:{shape:u}}),f=ZJ({inputs:{x:p},backend:n,attrs:{perm:d}}),m=LJ({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function M3(e,t,n,r,o,i,a){const s=t[0],l=i[0],c=new Array(l),u=new Array(s),d=t[1];if(0===l){if(0!==s)throw new Error(bV(s));return[iO(n,0),[0,d],iO(o,0),c,u]}let h=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<s;++g){const t=e[g*d];if(t<0)throw new Error(xV(g,t));if(t>=l)throw new Error(wV(g,t,l));++f[t],h=h&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];c[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){const t=e,n=r;for(let e=0;e<s;++e)u[e]=e;return[t,[s,d],n,c,u]}{const t=f[l-1],i=iO(n,t*d),h=iO(o,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*d],o=p[t],a=(0===t?0:f[t-1])+o;p[t]++;for(let r=0;r<d;++r)i[a*d+r]=e[n*d+r];h[a]=r[n],u[n]=a}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];i[t*d+0]=e;for(let e=1;e<d;++e)i[t*d+e]=0;h[t]=a}}return[i,[t,d],h,c,u]}}const D3={kernelName:pP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:i,defaultValue:a}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==a.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(a.shape));const s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values[0],[d,h,p,f,m]=M3(s,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],o.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function L3(e,t,n,r,o){const i=KA(r),a=t[0],s=o.length,l=[];let c=1,u=-1;for(let m=0;m<s;++m){const e=o[m];if(-1===e){if(-1!==u)throw new Error(SV(u,m));u=m,l.push(1)}else{if(e<0)throw new Error(_V(m,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(i/c);if(c*e!==i)throw new Error(TV(r,l));l[u]=e}if(KA(l)!==i)throw new Error(EV(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let e=d-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=iO(n,a*s);for(let m=0;m<a;++m){let t=0;for(let n=0;n<d;++n)t+=e[m*d+n]*h[n];for(let e=0;e<s;++e)f[m*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[a,s],l]}const F3={kernelName:fP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const a=Array.from(n.data.get(o.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=L3(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};function B3(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],c=l[1],u=s>0?o[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=u;const h=d.reduce(((e,t)=>e*t),1),p=iO(n,h);if(0===s)return u>0&&p.fill(a),[p,d];if(u<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=o[f];for(;;){let t=0;if(m<s){if(t=o[m],y===t){++m;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=u)throw new Error(jV(y,u));y>g&&p.fill(a,g*c,y*c);for(let n=f;n<m;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(AV(n,r[n],l[0]));for(let n=0;n<c;n++)p[y*c+n]+=e[t*c+n]}if(i)for(let e=0;e<c;e++)p[y*c+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>s)break}return g<u&&p.fill(a,g*c,u*c),[p,d]}const U3={kernelName:mP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[c,u]=B3(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const z3={kernelName:gP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,[c,u]=B3(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const V3={kernelName:yP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:i,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Hz(0,o,s),p=!1,f=n.bufferSync(o);let m;switch(i.dtype){case"bool":m=m3(f,n.bufferSync(i),s,h,u,c,l,d,Boolean(n.data.get(a.dataId).values[0]),p);break;case"float32":m=m3(f,n.bufferSync(i),s,h,u,c,l,d,n.data.get(a.dataId).values[0],p);break;case"int32":m=m3(f,n.bufferSync(i),s,h,u,c,l,d,n.data.get(a.dataId).values[0],p);break;case"string":m=m3(f,n.bufferSync(i),s,h,u,c,l,d,yM(n.data.get(a.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(s,m.dtype,m.values)}};const G3={kernelName:dP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:i,axis:a}=r,s=nO(a,o.shape)[0],l=vV(o,i,s),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map((e=>{const t=[...u];t[s]=e;const r=S$({inputs:{x:o},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},W3=nJ((e=>Math.sqrt(e))),H3=rJ(lP,(e=>Math.sqrt(e))),q3={kernelName:lP,backendName:"cpu",kernelFunc:H3},X3={kernelName:bP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,o=n;$Q(r,"square");const i=o.data.get(r.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const e=i[s];a[s]=e*e}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Y3=dJ(((e,t)=>{const n=e-t;return n*n})),K3=OJ(vP,Y3),Z3={kernelName:vP,backendName:"cpu",kernelFunc:K3},Q3=nJ(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)})),J3=oJ(xP,Q3),$3={kernelName:xP,backendName:"cpu",kernelFunc:J3},e4=rJ(DP,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),t4={kernelName:DP,backendName:"cpu",kernelFunc:e4};function n4(e,t,n,r){const o=uL(e,t.dtype);for(let i=0;i<o.size;i++){const e=o.indexToLoc(i),a=new Array(e.length);for(let t=0;t<a.length;t++)a[t]=e[t]*n[t]+r[t];o.set(t.get(...a),...e)}return o}const r4={kernelName:wP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:a,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;$Q(o,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=gF(o.shape,i,a,s,l,c,u,d,h);let w;if(m)w=LJ({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||y){qA(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=rF(v,b,x),t=S$({inputs:{x:o},backend:n,attrs:{begin:v,size:e}});w=LJ({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=n4(p,n.bufferSync(o),x,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class o4{constructor(e,t,n,r,o,i){this.separator=gM(e),this.nGramWidths=t,this.leftPad=gM(n),this.rightPad=gM(r),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,i){for(let a=0;a<o;++a){const s=this.getPadWidth(i),l=Math.max(0,s-a),c=Math.max(0,s-(o-(a+1))),u=i-(l+c),d=t+(l>0?0:a-s);let h=0;h+=l*this.leftPad.length;for(let t=0;t<u;++t)h+=e[d+t].length;h+=c*this.rightPad.length;h+=(l+c+u-1)*this.separator.length,n[r+a]=new Uint8Array(h);const p=n[r+a];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[d+t]),m(this.separator);if(u>0){m(e[d+u-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(e,", ").concat(n,"]"));e=t[o]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const o=r-1,i=iO("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=o;++t)i[t]=0;return[e,i]}i[0]=0;for(let s=1;s<=o;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),i[s]=i[s-1]+n}const a=new Array(i[o]);for(let s=0;s<o;++s){const n=t[s];let r=i[s];if(this.nGramWidths.forEach((o=>{const i=t[s+1]-t[s],l=this.getNumNGrams(i,o);this.createNGrams(e,n,a,r,l,o),r+=l})),this.preserveShort&&r===i[s]){const o=t[s+1]-t[s];if(0===o)continue;const i=o+2*this.padWidth,l=1;this.createNGrams(e,n,a,r,l,i)}}return[a,i]}}function i4(e,t,n,r,o,i,a,s){return new o4(n,r,o,i,a,s).compute(e,t)}const a4={kernelName:SP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:i,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[f,m]=i4(h,p,o,i,a,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function s4(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let i=e.indexOf(o);for(;-1!==i;){const t=e.subarray(0,i);n&&0===t.length||r.push(t),i=(e=e.subarray(i+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){const t=e.subarray(o,i);n&&0===t.length||r.push(t),o=i+1}}function l4(e,t,n){const r=e.length,o=[];let i=0,a=0;const s=new Array(r);for(let h=0;h<r;++h){const r=o.length;s4(e[h],t,n,o);const l=o.length-r;s[h]=l,i+=l,a=Math.max(a,l)}const l=iO("int32",2*i),c=new Array(i),u=[r,a];let d=0;for(let h=0;h<r;++h)for(let e=0;e<s[h];++e)l[2*d]=h,l[2*d+1]=e,c[d]=o[d],++d;return[l,c,u]}const c4={kernelName:_P,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:i,delimiter:a}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==a.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(a.shape));const s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values[0],[c,u,d]=l4(s,l,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function u4(e,t){const n=iO("int32",e.length);for(let r=0;r<e.length;++r)n[r]=hM(e[r]).modulo(t).getLowBitsUnsigned();return n}const d4={kernelName:kP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const a=u4(n.data.get(i.dataId).values,o);return n.makeTensorInfo(i.shape,"int32",a)}},h4=rJ(EP,(e=>Math.tan(e))),p4={kernelName:EP,backendName:"cpu",kernelFunc:h4},f4=rJ(CP,(e=>Math.tanh(e)));const m4={kernelName:JR,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:o,updates:i}=t,{sliceRank:a,numUpdates:s,sliceSize:l,strides:c,outputSize:u}=Hz(0,o,r.shape),d=n.bufferSync(o),h=n.bufferSync(i),p=n.bufferSync(r),f=m3(d,h,r.shape,u,l,s,a,c,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function g4(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const r=uL(n,e.dtype);for(let o=0;o<r.values.length;++o){const t=r.indexToLoc(o),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const i=e.locToIndex(n);r.values[o]=e.values[i]}return r}const y4={kernelName:IP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:i}=r;$Q(o,"tile");const a=g4(n.bufferSync(o),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}},v4=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function b4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const o=r-n+1,i=t-n+1,a=Math.log(o),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(o-s)/o)*Math.sign(i-o/2);b4(e,t,Math.max(n,Math.floor(t-i*s/o+l)),Math.min(r,Math.floor(t+(o-i)*s/o+l)))}const o=e[t];let i=n,a=r;for(HA(e,n,t),v4(e[r],o)>0&&HA(e,n,r);i<a;){for(HA(e,i,a),i++,a--;v4(e[i],o)<0;)i+=1;for(;v4(e[a],o)>0;)a-=1}0===v4(e[n],o)?HA(e,n,a):(a+=1,HA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function x4(e,t,n,r,o){const i=t[t.length-1],[a,s]=[e.length/i,i],l=oO(n,a*r),c=oO("int32",a*r);for(let d=0;d<a;d++){const t=d*s,n=e.subarray(t,t+s);let i=new Array(n.length);n.forEach(((e,t)=>i[t]={value:e,index:t})),r<i.length&&(b4(i,r),i=i.slice(0,r)),o&&i.sort(v4);const a=d*r,u=l.subarray(a,a+r),h=c.subarray(a,a+r);for(let e=0;e<r;e++)u[e]=i[e].value,h[e]=i[e].index}const u=t.slice();return u[u.length-1]=r,[uL(u,n,l),uL(u,"int32",c)]}const w4={kernelName:jP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:i,sorted:a}=r;$Q(o,"topk");const s=n.data.get(o.dataId).values,[l,c]=x4(s,o.shape,o.dtype,i,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const S4={kernelName:AP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:o,transforms:i}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:c}=n,[u,d,h,p]=o.shape,[f,m]=null!=c?c:[d,h],g=[u,f,m,p],y=pO(o.shape),v=y[0],b=y[1],x=y[2],w=pO(g),S=w[0],_=w[1],k=w[2],T=oO(o.dtype,KA(g));T.fill(l);const E=r.data.get(o.dataId).values,C=r.data.get(i.dataId).values;for(let I=0;I<u;++I){const e=1===i.shape[0]?C:C.subarray(8*I,8*I+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let o;const i=e[6]*n+e[7]*t+1;if(0===i)continue;const c=(e[0]*n+e[1]*t+e[2])/i,u=(e[3]*n+e[4]*t+e[5])/i,p=_4(c,h,s),f=_4(u,d,s);switch(a){case"nearest":o=T4(E,d,h,v,b,x,I,f,p,r,l);break;case"bilinear":o=E4(E,d,h,v,b,x,I,f,p,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(a))}T[I*S+t*_+n*k+r]=o}return r.makeTensorInfo(g,o.dtype,T)}return{dataId:r.write(T,g,o.dtype),shape:o.shape,dtype:o.dtype}}};function _4(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return GA(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return GA(0,n,t-1)}(e,t);case"nearest":return function(e,t){return GA(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function k4(e,t,n,r,o,i,a,s,l,c,u){return 0<=s&&s<t&&0<=l&&l<n?e[a*r+s*o+l*i+c]:u}function T4(e,t,n,r,o,i,a,s,l,c,u){return k4(e,t,n,r,o,i,a,Math.round(s),Math.round(l),c,u)}function E4(e,t,n,r,o,i,a,s,l,c,u){const d=Math.floor(s),h=Math.floor(l),p=d+1,f=h+1;return(p-s)*((f-l)*k4(e,t,n,r,o,i,a,d,h,c,u)+(l-h)*k4(e,t,n,r,o,i,a,d,f,c,u))+(s-d)*((f-l)*k4(e,t,n,r,o,i,a,p,h,c,u)+(l-h)*k4(e,t,n,r,o,i,a,p,f,c,u))}function C4(e,t,n,r){const o=nO(t,n)[0],i=[1,n[0],1];for(let f=0;f<o;f++)i[0]*=n[f];i[1]=n[o];for(let f=o+1;f<n.length;f++)i[2]*=n[f];const a=new Map,s=new Int32Array(n[o]),l=new OM(i,r,e),c=[],u=1===i[0]&&1===i[2];for(let f=0;f<n[o];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<i[0];t++)for(let n=0;n<i[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=a.get(t);if(null!=n)s[f]=n;else{const e=a.size;a.set(t,e),s[f]=e,c.push(f)}}const d=i.slice();d[1]=a.size;const h=new OM(d,r);c.forEach(((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)h.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[o]=d[1],{outputValues:h.values,outputShape:p,indices:s}}const I4={kernelName:NP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:i}=t;$Q(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:c}=C4(a,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const j4={kernelName:RP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:i}=r;i<0&&(i+=o.shape.length);const a=o.shape.length,s=o.shape[i],l=new Array(a-1);let c=0;for(let p=0;p<a;p++)p!==i&&(l[c++]=o.shape[p]);const u=new Array(a).fill(0),d=o.shape.slice();d[i]=1;const h=new Array(s);for(let p=0;p<h.length;p++){u[i]=p;const e=S$({inputs:{x:o},backend:n,attrs:{begin:u,size:d}});h[p]=LJ({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return h}};const A4={kernelName:PP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:a}=r;$Q(o,"unsortedSegmentSum");const s=[],l=[],c=o.shape.length-i.shape.length;let u=i;for(let h=0;h<c;++h){const e=M0({inputs:{input:u},backend:n,attrs:{dim:h+1}});u=e,l.push(e)}for(let h=0;h<a;++h){const e=pM(h,"int32"),t=n.makeTensorInfo([],"int32",e),r=S0({inputs:{a:t,b:u},backend:n}),i=jJ({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=m0({inputs:{a:i,b:o},backend:n}),c=y0({inputs:{x:a},backend:n,attrs:{axis:0,keepDims:!1}});s.push(c),l.push(t),l.push(r),l.push(i),l.push(a),l.push(c)}const d=N2({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},O4=[zJ,GJ,HJ,XJ,DJ,YJ,JJ,$J,e$,t$,r$,i$,s$,u$,h$,g$,y$,v$,b$,UJ,x$,k$,C$,j$,A$,AJ,R$,M$,kJ,D$,z$,G$,W$,H$,q$,X$,Y$,Z$,J$,$$,e0,t0,n0,r0,i0,a0,s0,l0,c0,u0,d0,h0,b0,aJ,x0,_0,O0,P0,D0,B0,Z0,J0,$0,n1,i1,a1,s1,c1,d1,f1,y1,lJ,v1,B$,x1,S1,k1,uJ,C1,A1,N1,M1,L1,U1,V1,H1,q1,X1,Z1,$1,e2,t2,n2,r2,o2,i2,a2,c2,u2,p2,g2,g0,v2,x2,S2,k2,C2,I2,O2,R2,P2,L2,fJ,B2,W2,X2,$2,t3,CJ,V0,r3,gJ,vJ,FJ,o3,i3,a3,s3,l3,c3,d3,f3,g3,b3,x3,k3,wJ,E3,I3,A3,_$,m2,R3,P3,D3,F3,U3,z3,V3,G3,q3,X3,Z3,$3,t4,r4,a4,c4,d4,q0,v0,p4,{kernelName:CP,backendName:"cpu",kernelFunc:f4},m4,y4,w4,S4,QJ,I4,j4,A4,A2];for(const r of O4)KP(r);const N4={},R4={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function P4(e,t){if(!(e in N4)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(EO().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete N4[e]}),!1),EO().getBool("SOFTWARE_WEBGL_ENABLED")&&(R4.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",R4)||n.getContext("experimental-webgl",R4);return n.getContext("webgl2",R4)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;N4[e]=n}const n=N4[e];return null==n||n.isContextLost()?(delete N4[e],P4(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),N4[e])}var M4,D4,L4;function F4(e,t){return[t,e]}function B4(e){const t=KA(e);return JA(Math.ceil(t/4))}function U4(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function z4(e,t){const n=e;let r,o,i,a,s,l,c,u,d,h;return 2===EO().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,i=n.RGBA16F,a=n.RGBA32F,s=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,o=e.RGBA,i=e.RGBA,a=n.RGBA,s=e.RGBA,c=4,u=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function V4(e,t){const n=t();return EO().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(M4||(M4={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(D4||(D4={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(L4||(L4={}));function G4(e){return!!(EO().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function W4(e,t){return $4(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const H4=/ERROR: [0-9]+:([0-9]+):/g;function q4(e,t){const n=H4.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map(((e,t)=>$A((t+1).toString(),i)+e));let s=0;for(let d=0;d<a.length;d++)s=Math.max(a[d].length,s);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat($A(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function X4(e,t){if(V4(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Y4(e,t,n,r,o,i,a){const s=e.getAttribLocation(t,n);return-1!==s&&(V4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),V4(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,i,a))),V4(e,(()=>e.enableVertexAttribArray(s))),!0)}function K4(e,t,n,r){V4(e,(()=>function(e,t,n){e5(e,n),V4(e,(()=>e.activeTexture(e.TEXTURE0+n))),V4(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),V4(e,(()=>e.uniform1i(n,r)))}function Z4(e,t,n){V4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),V4(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Q4(e,t){V4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),V4(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function J4(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function $4(e,t,n){const r=V4(e,(()=>t()));if(null==r)throw new Error(n);return r}function e5(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function t5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return KA(e.slice(0,e.length-t))}function n5(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function r5(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[t5(e),...n5(e)]),t}function o5(e){return e%2===0}function i5(e,t){if(ZA(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(o5(n)&&o5(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&o5(e[0])&&o5(t[0])}let a5,s5;function l5(e,t){return null!=e.getExtension(t)}function c5(e){try{if(null!=P4(e))return!0}catch(pg){return console.log("Error when getting WebGL context: ",pg),!1}return!1}function u5(e){if(0===e)return!1;const t=P4(e);if(1!==e){if(l5(t,"EXT_color_buffer_float"))return d5(t);const e="EXT_color_buffer_half_float";if(l5(t,e)){const n=t.getExtension(e);return function(e,t){const n=z4(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const o=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}if(!l5(t,"OES_texture_float"))return!1;if(!l5(t,"WEBGL_color_buffer_float"))return!1;return d5(t)}function d5(e){const t=z4(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function h5(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&qA("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const p5=EO();function f5(){let e,t,n,r,o,i,a,s,l,c;return 2===EO().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s=EO().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function m5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=pO(t);return r.map(((t,o)=>{const i="int ".concat(e[o]," = ").concat(n," / ").concat(t),a=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * ").concat(t):"index -= ".concat(e[o]," * ").concat(t);return"".concat(i,"; ").concat(a,";")})).join("")}function g5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=pO(t);return r.map(((t,o)=>{const i="int ".concat(e[o]," = ").concat(n," / outShapeStrides[").concat(o,"]"),a=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * outShapeStrides[").concat(o,"]"):"index -= ".concat(e[o]," * outShapeStrides[").concat(o,"]");return"".concat(i,"; ").concat(a,";")})).join("")}function y5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map(((e,t)=>t)),o=function(e,t){const n=e.length,r=e.map((e=>"".concat(t,"[").concat(e,"]"))),o=new Array(n-1);o[n-2]=r[n-1];for(let i=n-3;i>=0;--i)o[i]="(".concat(o[i+1]," * ").concat(r[i+1],")");return o}(r,t);return o.map(((t,r)=>{const i="int ".concat(e[r]," = ").concat(n," / ").concat(o[r]),a=r===o.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(o[r]):"index -= ".concat(e[r]," * ").concat(o[r]);return"".concat(i,"; ").concat(a,";")})).join("")}function v5(e){const t=pO(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}p5.registerFlag("HAS_WEBGL",(()=>p5.getNumber("WEBGL_VERSION")>0)),p5.registerFlag("WEBGL_VERSION",(()=>c5(2)?2:c5(1)?1:0)),p5.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),p5.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===p5.get("WEBGL_VERSION"))),p5.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),p5.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),p5.registerFlag("WEBGL_PACK",(()=>p5.getBool("HAS_WEBGL"))),p5.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_CLIP",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_REDUCE",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_LAZILY_UNPACK",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_CONV_IM2COL",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>p5.getBool("WEBGL_PACK"))),p5.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==a5){const t=P4(e);a5=t.getParameter(t.MAX_TEXTURE_SIZE)}return a5}(p5.getNumber("WEBGL_VERSION")))),p5.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==s5){const t=P4(e);s5=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,s5)}(p5.getNumber("WEBGL_VERSION")))),p5.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=p5.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=P4(e);return t=l5(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:l5(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),p5.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>p5.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!iD())),p5.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=P4(e);if(1===e){if(!l5(t,"OES_texture_float"))return!1}else if(!l5(t,"EXT_color_buffer_float"))return!1;return d5(t)}(p5.getNumber("WEBGL_VERSION")))),p5.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!p5.getBool("WEBGL_FORCE_F16_TEXTURES")&&p5.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),p5.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>u5(p5.getNumber("WEBGL_VERSION")))),p5.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=p5.getNumber("WEBGL_VERSION"))&&null!=P4(e).fenceSync;var e})),p5.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>p5.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),p5.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),p5.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>iD()?1:-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),p5.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),p5.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),p5.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),p5.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),p5.registerFlag("WEBGL_EXP_CONV",(()=>!1)),p5.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>p5.getBool("IS_TEST"))),p5.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),p5.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),p5.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),p5.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const b5="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:x5}=o;function w5(e,t,n){const r=[];if(e.forEach((e=>{const t=KA(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=O5(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const o=r.join("\n"),i=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o="";o+=n?_5(e,r):S5(e,r);const i=e.shapeInfo.logicalShape,a=t.logicalShape;i.length<=a.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s=x5(e.shapeInfo.logicalShape,t.logicalShape),l=A5(a),c=a-i;let u;const d=["x","y","z","w","u","v"];u=0===i?"":a<2&&s.length>=1?"coords = 0;":s.map((e=>"coords.".concat(d[e+c]," = 0;"))).join("\n");let h="";h=a<2&&i>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(d[t+c]))).join(", ");let p="return outputValue;";const f=1===KA(e.shapeInfo.logicalShape),m=KA(t.logicalShape),g=1===m;if(1!==i||f||g){if(f&&!g)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=i-2,t=i-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&ZA(a,i))return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=A5(l),u=x5(e.shapeInfo.logicalShape,t.logicalShape),d=l-s;let h;const p=["x","y","z","w","u","v"];h=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map((e=>"coords.".concat(p[e+d]," = 0;"))).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(p[t+d]))).join(", ");return"\n    float ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,s=f5(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let c,u,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(k5,"\n    ").concat(T5,"\n    ").concat(E5,"\n  ");return t}(s);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ZA(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2);let a=i,s="",l="b, r, c";for(let c=2;c<e.length-1;c++)a*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(a,";\n      index -= b").concat(c," * ").concat(a,";\n    ")+s,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,a,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(ZA(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=g5(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=m5(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=g5(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=m5(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=m5(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=m5(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,a,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(d+=C5);return[d,l,u,o,c,i,n.userCode].join("\n")}function S5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[o,i]=e.shapeInfo.texShape;if(1===o&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const a=I5(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(l,", ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(j5(e),"\n      }\n    ");const o=e.shapeInfo.texShape,i=o[0],a=o[1];if(1===a&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=I5(n);if(1===a)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(a,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(a,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&ZA(n,i)){if(t)return"\n      float ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=i[0],n=i[1];return"\n    float ".concat(o,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:a,keptDims:s}=rO(n),l=a;if(l.length<n.length){const n=N5(e,l),r=["row","col"];return"\n      ".concat(S5(n,t),"\n      float ").concat(o,"(int row, int col) {\n        return ").concat(o,"(").concat(R5(r,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(j5(e),"\n      }\n    ");const c=i[0],u=i[1],d=I5(r);if(1===u)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(o,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(o,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=rO(n),c=s;if(c.length<n.length){const n=N5(e,c),r=["row","col","depth"];return"\n        ".concat(S5(n,t),"\n        float ").concat(o,"(int row, int col, int depth) {\n          return ").concat(o,"(").concat(R5(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(a,", 1)));\n        ").concat(j5(e),"\n      }\n    ");const u=e.shapeInfo.texShape,d=u[0],h=u[1],p=e.shapeInfo.flatOffset;if(h===i&&null==p)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(o,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(a,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===a&&null==p)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=I5(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(o,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(a," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,s=n[1]*a,{newShape:l,keptDims:c}=rO(n);if(l.length<n.length){const n=N5(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(S5(n,t),"\n      float ").concat(o,"(int row, int col, int depth, int depth2) {\n        return ").concat(o,"(").concat(R5(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(a,", ").concat(i,", 1)));\n        ").concat(j5(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===s&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(a,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===i&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const y=I5(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(a," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,a=t[2]*i,s=t[1]*a,{newShape:l,keptDims:c}=rO(t);if(l.length<t.length){const t=N5(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(S5(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(R5(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(a,", ").concat(i,", ").concat(o,")) +\n          depth3;\n        ").concat(j5(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===s&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(a,", ").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===o&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=I5(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(a," + depth * ").concat(i," +\n          depth2 * ").concat(o," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:i}=rO(t);if(o.length<t.length){const t=N5(e,o),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(S5(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(R5(n,i),");\n      }\n    ")}const a=t[5],s=t[4]*a,l=t[3]*s,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(a,", 1)));\n        ").concat(j5(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(s,", ").concat(a,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=I5(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(s," + depth3 * ").concat(a," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function _5(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=f5();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=f5();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");const a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=i[0],s=i[1],l=f5();if(null!=i&&ZA(n,i))return t?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(a,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){const r=[1,2],i=N5(e,n.slice(1)),a=["b","row","col"];return"\n        ".concat(_5(i,t),"\n        vec4 ").concat(o,"(int b, int row, int col) {\n          return ").concat(o,"(").concat(R5(a,r),");\n        }\n      ")}const s=f5();if(t)return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=a[0],c=a[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=f5();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=e.shapeInfo.logicalShape,a=i.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[a-1]/2);let h=d*Math.ceil(i[a-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<a-1;m++)p="int b".concat(m,", ")+p,h*=i[a-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const k5="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",T5="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",E5="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C5="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function I5(e){return"offset".concat(e)}function j5(e){const t=e.name,n=KA(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function A5(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function O5(e,t,n){const{newShape:r,keptDims:o}=rO(t),i=t.length,a=e&&3===i&&1===t[0],s=a?t.slice(1):r,l=!e&&i>1&&!ZA(t,n)&&r.length<i||a;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:o}}function N5(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function R5(e,t){return t.map((t=>e[t])).join(", ")}function P5(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=w5(o,a,t),l=function(e,t){const n=$4(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(V4(e,(()=>e.shaderSource(n,t))),V4(e,(()=>e.compileShader(n))),EO().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw q4(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(l);return EO().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:a},M5(e,t,c)))}function M5(e,t,n){const r=[],o=[];let i,a,s,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===EO().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of t.variableNames){const o={name:d,uniform:e.getUniformLocation(n,d,u),offset:e.getUniformLocation(n,"offset".concat(d),u)};t.enableShapeUniforms&&(o.shape=e.getUniformLocation(n,"".concat(d,"Shape"),u),o.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),u)),r.push(o)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",u),s=e.getUniformLocation(n,"outShapeStrides",u),a=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const d of t.customUniforms)o.push(e.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:a}}function D5(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],i=o.shape;if(!ZA(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(e.isUniform&&o.isUniform)return;const a=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!ZA(a,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(a," and ").concat(s," must match"))}))}function L5(e){return EO().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class F5{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=M4.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=f5();this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?g5(["r","c","d"],e):m5(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class B5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=M4.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=f5();this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?g5(["r","c","d"],e):m5(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class U5{constructor(e){this.variableNames=["A"],this.outTexUsage=D4.DOWNLOAD;const t=f5();this.outputShape=e,this.userCode="\n      ".concat(b5,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class z5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=D4.DOWNLOAD;const t=f5();this.outputShape=e,this.userCode="\n      ".concat(b5,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const V5={R:0,G:1,B:2,A:3};class G5{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=f5();this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length);let o="result";t&&(o="floor(result * 255. + 0.5)");let i="";for(let a=0;a<n.length;a++){const e=n[a];i+="\n          if(offset == ".concat(a,") {\n            result = values[").concat(V5[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v5(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(o,", 0., 0., 0.);\n      }\n    ")}}class W5{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=f5();this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let t=0;t<=1;t++){const o=2*i+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(o,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(o,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(o,"] = values[2];\n            } else {\n              result[").concat(o,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v5(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(o,";\n        }\n    ")}}function H5(e){const t=f5();return function(e,t){const n=$4(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(V4(e,(()=>e.shaderSource(n,t))),V4(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function q5(e){return function(e,t){const n=$4(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return V4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),V4(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function X5(e){return function(e,t){const n=$4(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return V4(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),V4(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Y5(e,t,n,r,o,i){!function(e,t){const n=EO().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);const a=function(e){return $4(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return V4(e,(()=>e.bindTexture(s,a))),V4(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),V4(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),V4(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),V4(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===EO().getNumber("WEBGL_VERSION")?V4(e,(()=>e.texImage2D(s,0,r,t,n,0,o,i,null))):V4(e,(()=>e.texStorage2D(s,1,r,t,n))),V4(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function K5(e){return e.internalFormatFloat}function Z5(e){return e.internalFormatHalfFloat}function Q5(e){return e.downloadTextureFormat}function J5(e){return e.internalFormatPackedFloat}function $5(e){return e.internalFormatPackedHalfFloat}function e6(e,t,n,r,o,i,a,s){const l=e,c=new Float32Array(function(e,t){const[n,r]=U4(e,t);return n*r*4}(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class t6{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=EO().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){N4[e]=t}(t,e)):this.gl=P4(t),e=this.gl,2===EO().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>V4(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>V4(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>V4(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>V4(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>V4(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>V4(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>V4(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>V4(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===EO().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=W4(this.gl,e),l5(this.gl,t))this.textureHalfFloatExtension=W4(this.gl,t);else if(EO().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),l5(this.gl,r))this.colorBufferHalfFloatExtension=W4(this.gl,r);else if(EO().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",l5(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!l5(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=q5(this.gl),this.indexBuffer=X5(this.gl),this.framebuffer=function(e){return $4(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=z4(this.gl,this.textureHalfFloatExtension)}get debug(){return EO().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;V4(e,(()=>e.finish())),V4(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),V4(e,(()=>e.deleteFramebuffer(this.framebuffer))),V4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),V4(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),V4(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,i]=F4(t,n);return Y5(e,o,i,K5(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,i]=F4(t,n);return Y5(e,o,i,Z5(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,i]=F4(t,n);return Y5(e,o,i,Q5(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){V4(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===EO().getNumber("WEBGL_VERSION")?V4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):V4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===EO().getNumber("WEBGL_VERSION")?V4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):V4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),V4(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,o,i){let a,s,l;V4(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=i.internalFormatPackedFloat),a.set(o),2===EO().getNumber("WEBGL_VERSION")?V4(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a))):V4(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a))),V4(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,i]=U4(t,n);return Y5(e,o,i,$5(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,i]=U4(t,n);return Y5(e,o,i,J5(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Q4(this.gl,this.framebuffer),this.outputTexture=null),V4(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[o,i]=F4(t,n),a=new Uint8Array(t*n*4);return V4(e,(()=>e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,a))),new Float32Array(a.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,i){return e6(this.gl,e,0,0,0,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const o=e.createBuffer();V4(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const i=16*t*n;return V4(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),V4(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),V4(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(EO().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return V4(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=H5(t));const n=function(e){return $4(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);V4(t,(()=>t.attachShader(n,this.vertexShader))),V4(t,(()=>t.attachShader(n,e))),function(e,t){if(V4(e,(()=>e.linkProgram(t))),!EO().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&X4(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;V4(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){V4(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Y4(e,t,"clipSpacePos",n,3,20,0)&&Y4(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(V4(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&X4(this.gl,this.program),V4(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return $4(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),V4(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),K4(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=U4(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&X4(this.gl,this.program),J4(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}V4(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),V4(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=W4(this.gl,2===EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await eO((()=>this.disposed||this.isQueryAvailable(e,EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in EO().platform&&(n=EO().platform.setTimeoutCustom.bind(EO().platform)),eO((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Z4(this.gl,e,this.framebuffer),this.debug&&J4(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(Z4(this.gl,this.outputTexture,this.framebuffer),this.debug&&J4(this.gl)):Q4(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;Z4(r,e,this.framebuffer),this.debug&&J4(r),this.outputTexture=e,V4(r,(()=>r.viewport(0,0,t,n))),V4(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),V4(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:n6,bincountImpl:r6,bincountReduceImpl:o6,bitwiseAndImpl:i6,castImpl:a6,ceilImpl:s6,concatImpl:l6,equalImpl:c6,expImpl:u6,expm1Impl:d6,floorImpl:h6,gatherNdImpl:p6,gatherV2Impl:f6,greaterImpl:m6,greaterEqualImpl:g6,lessImpl:y6,lessEqualImpl:v6,linSpaceImpl:b6,logImpl:x6,maxImpl:w6,maximumImpl:S6,minimumImpl:_6,multiplyImpl:k6,negImpl:T6,notEqualImpl:E6,prodImpl:C6,raggedGatherImpl:I6,raggedRangeImpl:j6,raggedTensorToTensorImpl:A6,rangeImpl:O6,rsqrtImpl:N6,scatterImpl:R6,sigmoidImpl:P6,simpleAbsImpl:M6,sliceImpl:D6,sparseFillEmptyRowsImpl:L6,sparseReshapeImpl:F6,sparseSegmentReductionImpl:B6,sqrtImpl:U6,staticRegexReplaceImpl:z6,stridedSliceImpl:V6,stringNGramsImpl:G6,stringSplitImpl:W6,stringToHashBucketFastImpl:H6,subImpl:q6,tileImpl:X6,topKImpl:Y6,transposeImpl:K6,uniqueImpl:Z6}=i;function Q6(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function J6(e,t){return 1===t?[e]:Q6(e,t)}class $6{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=L5(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=J6("rc",this.rank),t=A5(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let o="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)o="".concat(e[e.length-1-t],",")+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class e8{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?y5(["r","c","d"],"inputShape"):m5(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v5(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class t8{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=r8(t,n),o=o8(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=n8(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const e=this.freeTextures[o].pop();return this.usedTextures[o].push(e),e}let a;return r===L4.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===L4.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===L4.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===L4.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===L4.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=r8(n,r),i=o8(t,o,r);i in this.freeTextures||(this.freeTextures[i]=[]);const a=n8(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=EO().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function n8(e,t,n,r,o){const i=function(e,t){switch(e){case L4.PACKED_2X2_FLOAT32:return J5(t);case L4.PACKED_2X2_FLOAT16:return $5(t);case L4.UNPACKED_FLOAT32:return K5(t);case L4.UNPACKED_FLOAT16:return Z5(t);case L4.PACKED_4X1_UNSIGNED_BYTE:return Q5(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let a;if(o){const[t,n]=U4(e[0],e[1]);a=t*n}else{const[t,n]=F4(e[0],e[1]);a=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,i);return a*s}function r8(e,t){if(e===D4.UPLOAD)return L4.PACKED_2X2_FLOAT32;if(e===D4.RENDER||null==e)return function(e){return EO().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?L4.PACKED_2X2_FLOAT32:L4.UNPACKED_FLOAT32:e?L4.PACKED_2X2_FLOAT16:L4.UNPACKED_FLOAT16}(t);if(e===D4.DOWNLOAD||e===D4.PIXELS)return L4.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function o8(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class i8{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const a8="if (isnan(x)) return x;",s8="return x;",l8="return abs(x);";const c8="return (x >= 0.0) ? x : (exp(x) - 1.0);",u8=a8+"\n  return (x < 0.0) ? 0.0 : x;\n",d8=a8+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",h8="return x;",p8="return 1.0 / (1.0 + exp(-1.0 * x));",f8="return x;",m8="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",g8="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",y8="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",v8="return 1.0 / (1.0 + exp(-1.0 * x));";class b8{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class x8{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length);const t=e.length,n=J6("rc",t),r=A5(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(a,"));\n      }\n    ")}}const w8=DV,S8={};const _8=EO().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class k8 extends UA{nextDataId(){return k8.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!EO().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof t6)t=e;else{const n=P4(EO().getNumber("WEBGL_VERSION"),e);t=new t6(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=P4(EO().getNumber("WEBGL_VERSION"));t=new t6(e),this.binaryCache=((n=EO().getNumber("WEBGL_VERSION"))in S8||(S8[n]={}),S8[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new t8(this.gpgpu),this.numMBBeforeWarning=null==EO().global.screen?1024:EO().global.screen.height*EO().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new BA(this,bD())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,o,i){const a=this.makeTensorInfo(t,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,o]},s.texShape=[r,o];const l=r5(t),c=new G5(l,!1,i),u=this.runWebGLProgram(c,[a],n,[[r,o]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(a),u.dataId}write(e,t,n){if((EO().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||EO().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:D4.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,o){if(EO().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:D4.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:i,shape:a,isPacked:s}=t;if(null!=i){let t;t=s?new b8(a,h8):new i8(a,h8);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=mM()),"complex64"===r){u=eV(this.readSync(o.real.dataId),this.readSync(o.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=mM()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:i,complexTensorInfos:a,isPacked:s}=t;if(null!=o){let t;t=s?new b8(r,h8):new i8(r,h8);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:i}],i),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if(EO().getBool("DEBUG")&&!EO().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===EO().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==i&&EO().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...B4(r))}if(this.pendingRead.set(e,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);c=eV(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=KA(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;V4(e,(()=>e.deleteBuffer(u)))}const d=this.convertAndCacheOnCPU(e,c),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&bD().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:o,slice:i,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=s?new b8(o,h8):new i8(o,h8);const r=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:a}],a),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=bD().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>yM(e)));return uL(e.shape,e.dtype,n)}catch(Kae){throw new Error("Failed to decode encoded string bytes into utf-8")}return uL(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!G4(n)){if(EO().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=KA(t);if(EO().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...B4(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),i}const i=EO().getBool("WEBGL_PACK")&&!0===r,a=i?r5(t):t,s=i?new z5(a):new U5(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=bM(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),i=bM(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);a.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),a.getExtraProfileInfo=()=>e.map(((e,t)=>({name:i[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:mM(),endMs:null}}endTimer(e){return EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=mM(),e)}async getQueryTime(e){if(EO().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:i,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_8;return EO().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&KA(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){VP("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return w8(e.shape,t)}packedUnaryOp(e,t,n){const r=new b8(e.shape,t),o=this.compileAndRun(r,[e],n);return bD().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=M6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(EO().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,l8,e.dtype);const t=new i8(e.shape,l8),n=this.compileAndRun(t,[e]);return bD().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&lO(n[0])){const o=n.map((e=>gM(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return bD().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new x8(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new $6(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[t5(e.shape),...n5(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[t5(t),...n5(t)],i=new e8(o,n),a=[n],s=this.runWebGLProgram(i,[r],e.dtype,a,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:o,dtype:i}=n;if(null!=t){qA(KA(o)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=r5(o);let s;s=r?new B5(a):new F5(a);const l=[null!=t?t:B4(a)];return{dtype:i,shape:o,dataId:this.runWebGLProgram(s,[{shape:a,dtype:i,dataId:e}],i,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;const a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===M4.DENSE){const t=null!=i?i:B4(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===KA(a.shape))return s.values=oO(a.dtype,0),a;const l=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&KA(t.shape)<=EO().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!i5(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const u={shape:a.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const i=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=O5(e.packedInputs,t.shape,i);let c="",u="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=pO(s);d="".concat(e[0]===i[1],"_").concat(e[e.length-1]===i[1])}}else u="".concat(s[0]>1,"_").concat(s[1]>1);const h=t.shape.length,p=2===s.length&&ZA(t.shape,i),f=1===KA(t.shape),m=DL(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&ZA(i,n.texData.texShape),y=e.packedInputs||s.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(h,"_").concat(g,"_").concat(a?l:"","_").concat(s.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(c,"_").concat(u,"_").concat(d,"_").concat(y,"_").concat(o)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(o)}}));const o=e.userCode;let i=e.constructor.name;return i+="_"+r+"_"+o+"".concat(EO().getNumber("WEBGL_VERSION")),i}(e,c,u),h=this.getAndSaveBinary(d,(()=>P5(this.gpgpu,e,c,u))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),EO().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,o){t.program.enableShapeUniforms||(D5(t.inShapeInfos,n),D5([t.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):e.setOutputMatrixTexture(i.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===EO().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:o,offset:i,shape:a,texShape:s}=t.variablesLocations[l];if(a){const{uniformShape:n}=O5(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(a,new Int32Array(n));break;case 2:e.gl.uniform2iv(a,new Int32Array(n));break;case 3:e.gl.uniform3iv(a,new Int32Array(n));break;case 4:e.gl.uniform4iv(a,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=o)if(r.isUniform)if(KA(r.shape)<2)e.gl.uniform1f(o,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=r.texData.slice&&null!=i&&e.gl.uniform1i(i,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,o,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=pO(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],i=o[l];if("float"===n.type)e.gl.uniform1fv(r,i);else if("vec2"===n.type)e.gl.uniform2fv(r,i);else if("vec3"===n.type)e.gl.uniform3fv(r,i);else if("vec4"===n.type)e.gl.uniform4fv(r,i);else if("int"===n.type)e.gl.uniform1iv(r,i);else if("ivec2"===n.type)e.gl.uniform2iv(r,i);else if("ivec3"===n.type)e.gl.uniform3iv(r,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,i)}}e.executeProgram()}(this.gpgpu,h,c,u,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=EO().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=mM();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!EO().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!EO().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=wD((()=>{if(!EO().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=EO().getBool("DEBUG");EO().set("DEBUG",!1);const t=this.abs(SL(1e-8)).dataSync()[0];if(EO().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:i,usage:a,isPacked:s}=t;if(null!=i)return;const l=null!=this.activeTimers;let c;l&&(c=mM());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=EO().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=EO().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&EO().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?WA(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=rO(e);e=t.newShape}let o=KA(e),i=null;e.length<=1&&o<=n?i=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);const a=null!=i&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(null==i||a)if(t){const t=t5(e);let n=2,r=2;e.length&&([n,r]=n5(e)),o=t*(n/2)*(r/2),i=JA(o).map((e=>2*e))}else i=JA(o);return i}(n,s),t.texShape=u),null!=o){const e=r5(n);let i,a=u[1],d=u[0];const h=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!s&&h||([a,d]=U4(u[0],u[1])),i=s?new W5(e,h):new G5(e,h);const p=h?[d,a]:u,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=h?D4.PIXELS:D4.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,d,o);const g=[[d,a]],y=!0,v=this.runWebGLProgram(i,[f],r,g,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,EO().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=mM()-c)}else{const e=this.acquireTexture(u,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*sO(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Ez(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw q4(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:o,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}=M5(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:i,channels:a}=e,s=bD().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,o,i,a);return bD().makeTensorFromDataId(l,t,n,s)}}k8.nextDataId=0;aD()&&TD("webgl",(()=>new k8),2);const T8="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class E8{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=FL(t,n),this.enableShapeUniforms=L5(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const C8="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class I8{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=FL(t,n);const o=this.outputShape.length;this.enableShapeUniforms=L5(o);let i="";if(r)if(0===o||1===KA(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=A5(o);if(i="\n          ".concat(e," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=J6("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}}function j8(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const A8={kernelName:qN,backendName:"webgl",kernelFunc:j8};function O8(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(i.dataId),s=j8({inputs:{x:r},backend:n}),l=j8({inputs:{x:o},backend:n});return a.complexTensorInfos={real:s,imag:l},i}const N8={kernelName:rN,backendName:"webgl",kernelFunc:O8},R8="return (a < 0.) ? b * a : a;",P8="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const M8={kernelName:JN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r,a=n.makeTensorInfo([],"float32",pM(i,"float32")),s=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new I8(P8,o.shape,a.shape):new E8(R8,o.shape,a.shape),l=n.runWebGLProgram(s,[o,a],"float32");return n.disposeIntermediateTensorInfo(a),l}},D8="return (a < 0.) ? b * a : a;",L8="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const F8={kernelName:RR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,i=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new I8(L8,r.shape,o.shape):new E8(D8,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],"float32")}},B8="if (isnan(x)) return x;";function U8(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:o}=e;return e=>{let{inputs:i,backend:a}=e;const{x:s}=i,l=a,c=o||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,c);return l.makeTensorInfo(s.shape,c,t)}let u;return u=EO().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new b8(s.shape,n):new i8(s.shape,t),l.runWebGLProgram(u,[s],c)}}function z8(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:o=!1,cpuKernelImpl:i,dtype:a}=e;return e=>{let{inputs:s,backend:l}=e;const{a:c,b:u}=s,d=l;if(o&&"complex64"===c.dtype){const e=d.texData.get(c.dataId),n=d.texData.get(u.dataId),[r,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},a=new E8(t,c.shape,u.shape);return d.runWebGLProgram(a,[o,i],WM(n.dtype,r.dtype))})),i=O8({inputs:{real:r,imag:o},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(o),i}const h=a||WM(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||d.shouldExecuteOnCPU([c,u]))&&null!=i){const e=d.texData.get(c.dataId).values,t=d.texData.get(u.dataId).values,n="string"===c.dtype?PV(e):e,r="string"===c.dtype?PV(t):t,[o,a]=i(c.shape,u.shape,n,r,h),s=d.makeTensorInfo(a,h);return d.texData.get(s.dataId).values=o,s}let p;return p=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new I8(n,c.shape,u.shape,r):new E8(t,c.shape,u.shape),d.runWebGLProgram(p,[c,u],h)}}function V8(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?f8:s8;if("relu"===e)return t?g8:u8;if("elu"===e)return t?m8:c8;if("relu6"===e)return t?y8:d8;if("prelu"===e)return t?L8:D8;if("leakyrelu"===e)return t?P8:R8;if("sigmoid"===e)return t?v8:p8;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class G8{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=L5(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";a&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),g="result = activation(result);");const y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(b="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const W8={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class H8{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=FL(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const q8="return a * b;";function X8(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,i=WM(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),i=new H8(W8.REAL,r.shape,o.shape),a=new H8(W8.IMAG,r.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],l=n.runWebGLProgram(i,s,"float32"),c=n.runWebGLProgram(a,s,"float32"),u=O8({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[a,s]=k6(r.shape,o.shape,e.values,t.values,i),l=n.makeTensorInfo(s,i);return n.texData.get(l.dataId).values=a,l}let a;return a=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new I8(q8,r.shape,o.shape):new E8(q8,r.shape,o.shape),n.runWebGLProgram(a,[r,o],i)}const Y8={kernelName:SR,backendName:"webgl",kernelFunc:X8};function K8(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:i}=r,a=n,s=KA(o.shape),l=tO(i,s),c=KA(l);qA(s===c,(()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(o.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."));const u=a.texData.get(o.dataId);return!u.isPacked||i5(o.shape,l)||null!==u.texture&&i5(u.shape,l)?(a.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype}):function(e,t,n){const r=[t5(e.shape),...n5(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},i=[t5(t),...n5(t)],a=new e8(i,r),s=[r],l=n.runWebGLProgram(a,[o],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(o,l,a)}const Z8={kernelName:VR,backendName:"webgl",kernelFunc:K8};class Q8{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];const a=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(QA(e)?e.toPrecision(2):e,", ones);")}let c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(a,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class J8{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===t?(a="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(a="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(a,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(a,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function $8(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Mz(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let i=e;for(let a=0;a<o.length;a++){const{inSize:s,windowSize:l,outSize:c}=o[a];let u,d;u="mean"===n?0===a?new Q8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},s):new Q8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c}):new J8({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}class e9{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;const r=A5(this.rank),o=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}}class t9{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=A5(this.rank),o=Q6("rc",this.rank),i=new Array(this.rank);for(let c=0;c<t.length;c++)i[t[c]]=o[c];const a="vec2(".concat(i.slice(-2).join(),")"),s="++".concat(o[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(a,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(s,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(s,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function n9(e,t,n){const r=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t9(e.shape,t):new e9(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function r9(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r;return function(e,t,n,r){const o=t,i=e.shape.length,a=nO(o,e.shape);let s=a;const l=EB(s,i),c=null!=l;let u=e;c&&(u=n9(e,l,r),s=IB(s.length,i)),TB("sum",s,i);const[d,h]=_B(u.shape,s);let p=d;n&&(p=kB(d,a));const f=KA(h),m=K8({inputs:{x:u},attrs:{shape:[KA(e.shape)/f,f]},backend:r}),g=$8(m,HM(e.dtype),"sum",r),y=K8({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(u),y}(o,i,a,n)}const o9={kernelName:cP,backendName:"webgl",kernelFunc:r9};function i9(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:i}=r,a=n,s=o.shape.length,l=new Array(s);for(let u=0;u<l.length;u++)l[u]=o.shape[i[u]];let c;if(a.shouldExecuteOnCPU([o])){const e=a.texData.get(o.dataId).values,t=K6(e,o.shape,o.dtype,i,l);c=a.makeTensorInfo(l,o.dtype);a.texData.get(c.dataId).values=t}else c=n9(o,i,a);return c}const a9={kernelName:OP,backendName:"webgl",kernelFunc:i9},s9=1e3;function l9(e){let{a:t,b:n,transposeA:r,transposeB:o,backend:i,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,d=n.shape.length,h=r?t.shape[u-2]:t.shape[u-1],p=o?n.shape[d-1]:n.shape[d-2],f=r?t.shape[u-1]:t.shape[u-2],m=o?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=KA(g),b=KA(y),x=FL(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);qA(h===p,(()=>"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const w=r?[v,h,f]:[v,f,h],S=o?[b,m,p]:[b,p,m],_=K8({inputs:{x:t},backend:i,attrs:{shape:w}}),k=K8({inputs:{x:n},backend:i,attrs:{shape:S}}),T=[_,k],E=Math.max(v,b),C=r?_.shape[1]:_.shape[2],I=null!=a,j=null!=s,A="leakyrelu"===c,O=null!=c?V8(c,!0):null;let N;if((1===f||1===m)&&C>s9&&!1===(I||j||A||null!=O)){let e=_,t=k;r&&(e=i9({inputs:{x:_},backend:i,attrs:{perm:[0,2,1]}}),T.push(e)),o&&(t=i9({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),T.push(t));const n=1===m;let a=e;1!==m&&(a=K8({inputs:{x:e},backend:i,attrs:{shape:[E,C,1]}}),T.push(a));const s=1===m?2:1;let l=t;n&&(l=K8({inputs:{x:t},backend:i,attrs:{shape:[E,1,C]}}),T.push(l));const c=X8({inputs:{a:a,b:l},backend:i});N=r9({inputs:{x:c},backend:i,attrs:{axis:s,keepDims:!0}}),T.push(c)}else{const e=WM(t.dtype,n.dtype),c=new G8(w,S,[E,f,m],r,o,I,O,j,A),u=[_,k];if(null!=a&&u.push(a),j&&u.push(s),A){const e=i.makeTensorInfo([],"float32",pM(l,"float32"));u.push(e),T.push(e)}N=i.runWebGLProgram(c,u,e)}const R=K8({inputs:{x:N},backend:i,attrs:{shape:x}});T.push(N);for(const P of T)i.disposeIntermediateTensorInfo(P);return R}const c9={kernelName:BP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return l9({a:o,b:i,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:d,activation:u})}},u9="return abs(x);";const d9={kernelName:OO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=M6(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=EO().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new b8(r.shape,u9):new i8(r.shape,u9),n.runWebGLProgram(o,[r],r.dtype)}},h9=U8({opSnippet:a8+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),p9={kernelName:NO,backendName:"webgl",kernelFunc:h9},f9=U8({opSnippet:a8+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),m9={kernelName:RO,backendName:"webgl",kernelFunc:f9},g9="return a + b;",y9=z8({opSnippet:g9,packedOpSnippet:g9,supportsComplex:!0,cpuKernelImpl:n6}),v9={kernelName:PO,backendName:"webgl",kernelFunc:y9};class b9{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class x9{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const w9={kernelName:MO,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return j8({inputs:{x:o[0]},backend:r});if(o.length>EO().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),i=e({inputs:o.slice(t),backend:r});return e({inputs:[n,i],backend:r})}const i=o.map((e=>e.dtype)).reduce(((e,t)=>WM(e,t))),a=o.map((e=>e.shape)),s=EO().getBool("WEBGL_PACK")?new x9(o[0].shape,a):new b9(o[0].shape,a);return r.runWebGLProgram(s,o,i)}};const S9={kernelName:DO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,s=o.shape.length,l=nO(i,o.shape);let c=l;const u=EB(c,s);let d=o;null!=u&&(d=i9({inputs:{x:o},backend:n,attrs:{perm:u}}),c=IB(c.length,s)),TB("all",c,s);const[h,p]=_B(d.shape,c),f=K8({inputs:{x:d},backend:n,attrs:{shape:[-1,KA(p)]}}),m=$8(f,f.dtype,"all",n);let g;if(a){g=K8({inputs:{x:m},backend:n,attrs:{shape:kB(h,l)}})}else g=K8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};const _9={kernelName:LO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,s=o.shape.length,l=nO(i,o.shape);let c=l;const u=EB(c,s);let d=o;null!=u&&(d=i9({inputs:{x:o},backend:n,attrs:{perm:u}}),c=IB(c.length,s)),TB("any",c,s);const[h,p]=_B(d.shape,c),f=K8({inputs:{x:d},backend:n,attrs:{shape:[-1,KA(p)]}}),m=$8(f,f.dtype,"any",n);let g;if(a){g=K8({inputs:{x:m},backend:n,attrs:{shape:kB(h,l)}})}else g=K8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};class k9{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const a="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(a," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class T9{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,qA(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,l=A5(s),c=J6("coords",s);let u,d;if(1===i){d=s+1;const e=A5(d);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-2],";")}else d=s,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[s-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[s-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[s-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[s-2],";");const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map((e=>"int "+e)),m=J6("sourceLocR",d-1).concat("inIdx.r"),g=J6("sourceLocG",d-1).concat("inIdx.g"),y=J6("sourceLocB",d-1).concat("inIdx.b"),v=J6("sourceLocA",d-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),S=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[s-1]," < ").concat(a[s-1]-1,";\n        bool hasNextRow = ").concat(c[s-2]," < ").concat(a[s-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(b,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function E9(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.shape[0],i=t.shape[1];null!=r&&(o=r.shape[0],i=r.shape[1]);const a=Mz(i),s={windowSize:a,inSize:i,batchSize:o,outSize:Math.ceil(i/a)},l=new k9(s,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=E9(e,t,n,u);return e.disposeIntermediateTensorInfo(u),d}function C9(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null!=r?r.shape:t.shape,i=Mz(o[o.length-1]),a=new T9(o,i,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(a,s,"int32");if(l.shape.length===t.shape.length){const r=C9(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function I9(e,t,n,r){const o=[n];if(TB("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!EO().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],i=e.texData.get(t.dataId);let a=t;null!==i&&i.isPacked&&(a=e.unpackTensor(t),n.push(a));const[s,l]=_B(a.shape,o),c=KA(l),u=K8({inputs:{x:a},backend:e,attrs:{shape:[-1,c]}});n.push(u);const d=E9(e,u,r);n.push(d);const h=K8({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return C9(e,t,r)}const j9={kernelName:FO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;let a=nO(i,o.shape);const s=EB(a,o.shape.length);let l=o;const c=[];null!=s&&(l=i9({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),a=IB(a.length,l.shape.length)),TB("argMax",[a[0]],l.shape.length);const u=I9(n,l,a[0],"max");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};const A9={kernelName:BO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;let a=nO(i,o.shape);const s=EB(a,o.shape.length);let l=o;const c=[];null!=s&&(l=i9({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),a=IB(a.length,l.shape.length)),TB("argMin",[a[0]],l.shape.length);const u=I9(n,l,a[0],"min");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},O9=U8({opSnippet:a8+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),N9={kernelName:UO,backendName:"webgl",kernelFunc:O9},R9=U8({opSnippet:a8+"return log(x + sqrt(x * x + 1.0));"}),P9={kernelName:zO,backendName:"webgl",kernelFunc:R9},M9=U8({opSnippet:a8+"\n  return atan(x);\n"}),D9={kernelName:VO,backendName:"webgl",kernelFunc:M9},L9=z8({opSnippet:T8+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+C8+"\n  return result;\n"}),F9={kernelName:WO,backendName:"webgl",kernelFunc:L9},B9=U8({opSnippet:a8+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),U9={kernelName:GO,backendName:"webgl",kernelFunc:B9};class z9{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(a,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?o?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(i/4),x=i%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class V9{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,s=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(a,", ").concat(s,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?o?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(i/4),S=i%4,_="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(a,", ").concat(s,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(_,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(_,"\n            }\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}}const G9={kernelName:HO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;h5(o,"avgPool");const{filterSize:i,strides:a,pad:s,dimRoundingMode:l}=r;qA(NF(a,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const c=SF(o.shape,i,a,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&ZA(c.inShape,c.outShape))return j8({inputs:{x:o},backend:n});const u=new z9(c,"avg",!1);return n.runWebGLProgram(u,[o],"float32")}};const W9={kernelName:XO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:l,dataFormat:c}=r,u=_F(o.shape,i,a,[1,1,1],s,l,c),d=new V9(u,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}};class H9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(a,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class q9{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const X9={kernelName:YO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=_F(a.shape,s,l,[1,1,1],c,u),h=new q9(d);return n.runWebGLProgram(h,[o],a.dtype)}};const Y9={kernelName:qO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i;h5([o,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=SF(a.shape,s,l,1,c),d=new H9(u);return n.runWebGLProgram(d,[o],a.dtype)}};const K9={kernelName:KO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:a,transposeB:s}=r;return l9({a:o,b:i,transposeA:a,transposeB:s,backend:n})}};class Z9{constructor(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],FL(e,t),FL(e,n);let a="0.0";null!=r&&(FL(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=o&&(FL(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(a,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Q9{constructor(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],FL(e,t),FL(e,n);let a="vec4(0.0)";null!=r&&(FL(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=o&&(FL(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(a,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const J9={kernelName:zN,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,mean:i,variance:a,offset:s,scale:l}=t;qA(i.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),qA(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),qA(null==l||i.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[o,i,a];let d=null;null!=s&&(d=s.shape,u.push(s));let h=null;null!=l&&(h=l.shape,u.push(l));const p=EO().getBool("WEBGL_PACK_NORMALIZATION")?new Q9(o.shape,i.shape,a.shape,d,h,c):new Z9(o.shape,i.shape,a.shape,d,h,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class $9{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=A5(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return e7.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const o=e.map(((e,t)=>"sourceLoc.".concat(e7[t]," = start[").concat(t,"] + coords.").concat(e7[t],";")));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const e7=["x","y","z","w","u","v"];class t7{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=A5(this.rank),n=J6("coords",this.rank),r=J6("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(o,")"),a="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(a,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function n7(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:a}=r,[s,l]=mF(o,i,a);if(tF(o,s,l),0===KA(l))return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=D6(e.values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,t)}const{isPacked:c}=n.texData.get(o.dataId),u=pF(o.shape,s,l);if(c||!u){const e=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t7(l):new $9(l),t=[s];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),a=r.texData.get(i.dataId);Object.assign(a,o),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=fF(t,pO(e.shape));o.slice&&(s+=o.slice.flatOffset),a.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),i}(o,s,l,n)}const r7={kernelName:nP,backendName:"webgl",kernelFunc:n7},o7={kernelName:ZO,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:a}=r;qA(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=i.reduce(((e,t)=>e*t)),l=Lz(o.shape,i,s),c=Fz(l.length,i.length),u=Bz(o.shape,i,s),d=Uz(a,i.length),h=zz(u,a,i.length),p=[],f=K8({inputs:{x:o},backend:n,attrs:{shape:l}}),m=i9({inputs:{x:f},backend:n,attrs:{perm:c}}),g=K8({inputs:{x:m},backend:n,attrs:{shape:u}}),y=n7({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const i7={kernelName:QO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:a}=r,s=n.readSync(o.dataId),l=n.readSync(i.dataId),c=r6(s,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}};const a7={kernelName:JO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,i=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=EO().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||1===a){const e=n.texData.get(r.dataId).values,t=n.texData.get(o.dataId).values,[i,a]=i6(r.shape,o.shape,e,t,r.dtype),s=n.makeTensorInfo(a,r.dtype);return n.texData.get(s.dataId).values=i,s}let s;return s=i?new I8("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,o.shape,!1):new E8("\n  return float(int(a.r) & int(b.r));\n",r.shape,o.shape),n.runWebGLProgram(s,[r,o],r.dtype)}};const s7={kernelName:$O,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,i=n.readSync(r.dataId),a=n.readSync(o.dataId),s=FL(Array.from(i),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},l7=z8({opSnippet:"return float(a != b);",cpuKernelImpl:E6,dtype:"bool"}),c7={kernelName:kR,backendName:"webgl",kernelFunc:l7};function u7(e){const{inputs:t,backend:n}=e,{input:r}=t;return j8({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const d7={kernelName:BR,backendName:"webgl",kernelFunc:u7},h7="return float(int(x));";const p7={kernelName:eN,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:i}=n,{dtype:a}=o;if("complex64"===a){if("complex64"===i.dtype)return j8({inputs:{x:i},backend:r});const t=zB(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),o=O8({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===i.dtype){const t=u7({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!aO(i.dtype,a)){const e=j8({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if(r.shouldExecuteOnCPU([i])){const e=r.texData.get(i.dataId).values,[t,n,o]=a6(e,i.shape,i.dtype,a);return r.makeTensorInfo(t,n,o)}if("int32"===a)return function(e,t){const n=new i8(e.shape,h7),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===a){const e=r.makeTensorInfo([],"bool",oO("bool",1)),t=l7({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(a))}},f7="return ceil(x);",m7=U8({opSnippet:f7,packedOpSnippet:f7,cpuKernelImpl:s6}),g7={kernelName:tN,backendName:"webgl",kernelFunc:m7};class y7{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class v7{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const b7={kernelName:nN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:i,clipValueMax:a}=r;let s;s=EO().getBool("WEBGL_PACK_CLIP")?new v7(o.shape):new y7(o.shape);const l=[[i],[a]];return n.runWebGLProgram(s,[o],o.dtype,l)}};class x7{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function w7(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const S7={kernelName:oN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),i=new x7(r.shape),a=[w7(r,o.complexTensorInfos.real),w7(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}};class _7{constructor(e){this.outputShape=[],this.outputShape=Iz(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){const e=t[i-1];n.push("else if (yC < ".concat(t[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(e,"));"))}const r=t.length,o=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(o,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class k7{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Iz(e,t);const n=this.outputShape,r=n.length,o=A5(r),i=J6("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>"T".concat(t)));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=a[t],c=a.slice(-2),u=a.join();let d="if (".concat(l," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<s.length;f++){const e=s[f-1];d+="\n        if (".concat(l," < ").concat(s[f],"  && ").concat(l," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(T7(a,l,e),"),\n            vec2(").concat(T7(c,l,e),"));\n        }")}const h=s.length,p=s[s.length-1];d+="\n        return getChannel(\n          getT".concat(h,"(").concat(T7(a,l,p),"),\n          vec2(").concat(T7(c,l,p),"));"),this.userCode="\n      float getValue(".concat(a.map((e=>"int "+e)),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}}function T7(e,t,n){const r=e.indexOf(t),o=e.map(((e,t)=>t===r?"".concat(e," - ").concat(n):e));return o.join()}function E7(e){const{inputs:t,backend:n}=e,{input:r}=t;return j8({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const C7={kernelName:YN,backendName:"webgl",kernelFunc:E7};function I7(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>u7({inputs:{input:e},backend:n}))),o=e.map((e=>E7({inputs:{input:e},backend:n}))),i=I7(r,t,n),a=I7(o,t,n),s=O8({inputs:{real:i,imag:a},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),s}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=KA(e.shape.slice(t));return K8({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),i=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=Iz(o.map((e=>e.shape)),1),s=1===o[0].shape[0],l=l6(i,a,r,s),c=Iz(e.map((e=>e.shape)),t),u=n.makeTensorInfo(c,r,l);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const i=e.filter((e=>KA(e.shape)>0)),a=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(1===i.length){const t=a?new i8(e[0].shape,h8):new b8(e[0].shape,h8);return n.runWebGLProgram(t,e,r)}const s=EO().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>s){const e=[];for(let o=0;o<i.length;o+=s){const r=i.slice(o,o+s);e.push(I7(r,t,n))}const r=I7(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(a){const e=new k7(i.map((e=>e.shape)),t);return n.runWebGLProgram(e,i,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=Iz(e.map((e=>e.shape)),t),o=e.map((e=>K8({inputs:{x:e},attrs:{shape:[-1,KA(e.shape.slice(t))]},backend:n})));return{tensors2D:o,outShape:r}}(i,t,n),u=new _7(l.map((e=>e.shape))),d=n.runWebGLProgram(u,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const h=K8({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function j7(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,i=nO(o,t[0].shape)[0],a=t.map((e=>e.shape));Cz(a,i);const s=Iz(t.map((e=>e.shape)),i);if(0===KA(s))return n.makeTensorInfo(s,t[0].dtype,[]);const l=t.filter((e=>KA(e.shape)>0));return 1===l.length?j8({inputs:{x:l[0]},backend:n}):I7(l,i,n)}const A7={kernelName:iN,backendName:"webgl",kernelFunc:j7};class O7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",x="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class N7{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(a,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class R7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=L5(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)d+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<c;m++)d+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const t=2*m;if(d+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===a){if(t<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=i%2===0?WA(s):s;s%2===0&&i%2===1||s%2!==0&&i%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(h=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class P7{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=L5(this.outputShape.length);const{dataFormat:n}=t,r=f5(),o="channelsLast"===n,i=o?1:2,a=o?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(a,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function M7(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function D7(e){let{x:t,filter:n,convInfo:r,backend:o,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const c=t.shape,u=o.texData.get(t.dataId),d=r.inChannels,h=c[0]*c[1]*c[2],p=r.outChannels,f="channelsLast"===r.dataFormat;let m;const g=[];if(null!=a){const e=M7(a.shape,f);null!=e&&(a=K8({inputs:{x:a},backend:o,attrs:{shape:e}}),g.push(a))}if(null!=i){const e=M7(i.shape,f);null!=e&&(i=K8({inputs:{x:i},backend:o,attrs:{shape:e}}),g.push(i))}if(!((1===h||1===p)&&d>s9)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&ZA(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),d={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},h=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,qA(i5(u.shape,d.shape),(()=>"packed reshape ".concat(u.shape," to ").concat(d.shape," isn't free")));const p=K8({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}});g.push(p);const f=l9({a:d,b:p,backend:o,transposeA:false,transposeB:false,bias:i,activation:l,preluActivationWeights:a,leakyreluAlpha:s}),y=o.texData.get(f.dataId);qA(y.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=h,y.shape=r.outShape,m=j8({inputs:{x:f},backend:o}),m.shape=r.outShape,g.push(f)}else{const e=r.outHeight*r.outWidth,c=K8({inputs:{x:t},backend:o,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=K8({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=l9({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:false,backend:o,bias:i,activation:l,preluActivationWeights:a,leakyreluAlpha:s});m=K8({inputs:{x:d},backend:o,attrs:{shape:r.outShape}}),g.push(c),g.push(u),g.push(d)}for(const y of g)o.disposeIntermediateTensorInfo(y);return m}function L7(e){let{x:t,filter:n,convInfo:r,backend:o,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:h,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=c*u*d,y=p*h,v=[r.batchSize,g,y],b=[];if(null!=a){const e=M7(a.shape,m);null!=e&&(a=K8({inputs:{x:a},backend:o,attrs:{shape:e}}),b.push(a))}if(null!=i){const e=M7(i.shape,m);null!=e&&(i=K8({inputs:{x:i},backend:o,attrs:{shape:e}}),b.push(i))}const x=K8({inputs:{x:n},backend:o,attrs:{shape:[1,g,KA(n.shape)/g]}});b.push(x);const w=new P7(v,r),S=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],_=o.runWebGLProgram(w,[t],"float32",S),k=K8({inputs:{x:_},backend:o,attrs:{shape:v}});b.push(_),b.push(k);const T=null!=i,E=null!=a,C="leakyrelu"===l,I=l?V8(l,!0):null,j=new G8(m?k.shape:x.shape,m?x.shape:k.shape,m?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,T,I,E,C),A=m?[k,x]:[x,k];if(i&&A.push(i),E&&A.push(a),C){const e=o.makeTensorInfo([],"float32",pM(s,"float32"));A.push(e),b.push(e)}const O=o.runWebGLProgram(j,A,"float32"),N=K8({inputs:{x:O},backend:o,attrs:{shape:r.outShape}});b.push(O);for(const R of b)o.disposeIntermediateTensorInfo(R);return N}const F7={kernelName:aN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=PF(l),h=kF(o.shape,i.shape,a,c,s,u,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&EO().getBool("WEBGL_EXP_CONV")){const e=new R7(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(e,[o,i],"float32",t)}else if(EO().getBool("WEBGL_CONV_IM2COL"))p=L7({x:o,filter:i,convInfo:h,backend:n});else{const e=new O7(h);p=n.runWebGLProgram(e,[o,i],"float32")}else p=D7({x:o,filter:i,convInfo:h,backend:n});const f=K8({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class B7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class U7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class z7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(a,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class V7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const G7={kernelName:sN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=PF(l),h=kF(o.shape,u,a,1,s,c,!1,d),p=new B7(h);return n.runWebGLProgram(p,[o,i],"float32")}};class W7{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=L5(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,o=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const H7={kernelName:lN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:a,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=PF(c),h=kF(a,i.shape,s,1,l,u,!1,d);if(EO().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[h.strideHeight,h.strideWidth]],t=new W7(h);return n.runWebGLProgram(t,[o,i],"float32",e)}{const e=new U7(h);return n.runWebGLProgram(e,[o,i],"float32")}}};const q7={kernelName:cN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dilations:l}=r,c=TF(o.shape,i.shape,a,l,s),u=new N7(c);return n.runWebGLProgram(u,[o,i],"float32")}};const X7={kernelName:uN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,pad:s,filterShape:l}=r,c=TF(o.shape,l,a,1,s),u=new z7(c);return n.runWebGLProgram(u,[o,i],"float32")}};const Y7={kernelName:dN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:a,strides:s,inputShape:l}=r,c=TF(l,i.shape,s,1,a),u=new V7(c);return n.runWebGLProgram(u,[o,i],"float32")}},K7=U8({opSnippet:B8+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(C8,"\n  return result;\n")}),Z7={kernelName:hN,backendName:"webgl",kernelFunc:K7},Q7=U8({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),J7={kernelName:pN,backendName:"webgl",kernelFunc:Q7};class $7{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,s,l]=e,[c]=t,[u,d]=n;this.outputShape=[c,u,d,l];const h="bilinear"===r?1:0,[p,f]=["".concat(a-1,".0"),"".concat(s-1,".0")],[m,g,y]=u>1?["".concat((a-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,b,x]=d>1?["".concat((s-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(b,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const eee={kernelName:gN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:i,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:c}=r,u=new $7(o.shape,i.shape,s,l,c);return n.runWebGLProgram(u,[o,i,a],"float32")}};var tee;!function(e){e.Prod="*",e.Sum="+"}(tee||(tee={}));class nee{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===tee.Prod?"1.0":"0.0",a=n?i:"getX(".concat(ree(o,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != ".concat(s-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(s):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(A5(o)," coords = getOutputCoords();\n        int end = ").concat(oee(o,"coords",this.op),";\n        float val = ").concat(a,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(oee(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(ree(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function ree(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function oee(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function iee(e,t,n,r,o,i){const a=t.shape.length,s=EB([r],a);let l=t;null!=s&&(l=i9({inputs:{x:t},backend:n,attrs:{perm:s}}));const c=IB(1,a)[0];if(c!==a-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=l.shape[c];let d=j8({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const t=new nee(e,l.shape,!1,i),r=[[h]],o=d;d=n.runWebGLProgram(t,[d],d.dtype,r),n.disposeIntermediateTensorInfo(o)}if(o){const t=new nee(e,l.shape,o,i),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=i9({inputs:{x:d},backend:n,attrs:{perm:CB(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const aee={kernelName:fN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:a,reverse:s}=r;return iee(tee.Prod,o,n,i,a,s)}};const see={kernelName:mN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:a,reverse:s}=r;return iee(tee.Sum,o,n,i,a,s)}};const lee={kernelName:yN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:a,binaryOutput:s}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(i.dataId),r=r6(e,t,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(i),r=o6(e,t,a,s);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};class cee{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const uee={kernelName:vN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:i,dataFormat:a}=r,s=o.shape[0],l=("NHWC"===a?o.shape[1]:o.shape[2])*i,c=("NHWC"===a?o.shape[2]:o.shape[3])*i,u=("NHWC"===a?o.shape[3]:o.shape[1])/(i*i),d=new cee("NHWC"===a?[s,l,c,u]:[s,u,l,c],i,a);return n.runWebGLProgram(d,[o],o.dtype)}};class dee{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=L5(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,s=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class hee{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=L5(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){const e=2*g;if(h+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===s){if(e<u&&(a%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),h+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=a%2===0?WA(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),h+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):h+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(a%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(h+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(h+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(h+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const pee={kernelName:bN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),qA(NF(a,u),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(a," and dilations '").concat(u,"'")));const d=kF(o.shape,i.shape,a,u,s,c,!0);let h;h=EO().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new hee(d):new dee(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[o,i],"float32",p)}};class fee{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class mee{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const gee={kernelName:xN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r,d=kF(o.shape,u,a,s,l,c,!0),h=new fee(d);return n.runWebGLProgram(h,[o,i],"float32")}};const yee={kernelName:wN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r,d=kF(u,i.shape,a,s,l,c,!0),h=new mee(d);return n.runWebGLProgram(h,[o,i],"float32")}};class vee{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const bee={kernelName:SN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],i=KA(r.shape),a=K8({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new vee(i),l=n.runWebGLProgram(s,[a],a.dtype),c=K8({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}};class xee{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:i,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:c}=e,{top:u,left:d}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(a,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const wee={kernelName:_N,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:a,pad:s,dilations:l}=r,c=wF(o.shape,i.shape,a,s,"NHWC",l);let u;const d=new xee(c);u=n.runWebGLProgram(d,[o,i],"float32");const h=K8({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}};const See={kernelName:IN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,i=t,{allDims:a,summedDims:s,idDims:l}=hV(o,i.length);fV(a.length,l,i);const{path:c,steps:u}=mV(s,l),d=u.length;let h=null,p=a.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=pV(p,l[e]);let o;gV(t)?o=i[e]:(o=i9({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(o));const a=o.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);ZA(o.shape,a)||(o=K8({inputs:{x:o},backend:n,attrs:{shape:a}}),f.push(o)),null===h?h=o:(h=X8({inputs:{a:o,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=r9({inputs:{x:h},backend:n,attrs:{axis:c[m]-(a.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}},_ee=U8({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),kee={kernelName:jN,backendName:"webgl",kernelFunc:_ee},Tee={kernelName:AN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,i=EO().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new I8("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new E8("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(i,[r,o],r.dtype)}},Eee=z8({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:c6}),Cee={kernelName:NN,backendName:"webgl",kernelFunc:Eee},Iee=U8({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Yz,";\n  float a1 = ").concat(Kz,";\n  float a2 = ").concat(Zz,";\n  float a3 = ").concat(Qz,";\n  float a4 = ").concat(Jz,";\n  float a5 = ").concat($z,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),jee={kernelName:ON,backendName:"webgl",kernelFunc:Iee},Aee=U8({opSnippet:B8+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:u6,dtype:"float32"}),Oee={kernelName:RN,backendName:"webgl",kernelFunc:Aee};function Nee(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:i}=t,a=i.shape.length,s=i.shape.slice();let l=o;return o<0&&(qA(-(a+1)<=o,(()=>"Axis must be in the interval [".concat(-(a+1),", ").concat(a,"]"))),l=a+o+1),s.splice(l,0,1),K8({inputs:{x:i},backend:r,attrs:{shape:s}})}const Ree={kernelName:PN,backendName:"webgl",kernelFunc:Nee},Pee="return exp(x) - 1.0;",Mee=U8({opSnippet:Pee,packedOpSnippet:Pee,cpuKernelImpl:d6}),Dee={kernelName:MN,backendName:"webgl",kernelFunc:Mee};class Lee{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=n?"".concat(r,".0"):"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));a="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(a,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function Fee(e,t,n){const r=n.texData.get(e.dataId),o=KA(e.shape),i=e.shape[e.shape.length-1],a=K8({inputs:{x:e},backend:n,attrs:{shape:[o/i,i]}}),s=a.shape,l=new Lee("real",s,t),c=new Lee("imag",s,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(l,u,"float32"),h=n.runWebGLProgram(c,u,"float32"),p=O8({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const f=K8({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),f}const Bee={kernelName:DN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fee(r,!1,n)}};class Uee{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function zee(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:i}=n;if(i=i||uO(o),"string"===i){const e=iO(i,KA(r));return e.fill(o),t.makeTensorInfo(r,i,e)}{const e=new Uee(r,o),n=[[o]];return t.runWebGLProgram(e,[],i,n)}}const Vee={kernelName:LN,backendName:"webgl",kernelFunc:zee};class Gee{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const Wee={kernelName:FN,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,o=n,i=new Gee(r.shape);return o.runWebGLProgram(i,[r],r.dtype)}},Hee="return floor(x);",qee=U8({opSnippet:Hee,packedOpSnippet:Hee,cpuKernelImpl:h6}),Xee={kernelName:BN,backendName:"webgl",kernelFunc:qee},Yee=z8({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Kee={kernelName:UN,backendName:"webgl",kernelFunc:Yee};class Zee{constructor(e){this.variableNames=["A"];const t=f5(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class Qee{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=f5(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const Jee={kernelName:LP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:i}=r,a="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,[l,c]=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,i];if(s||a){const e=EO().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=$ee&&e===ete||(ete=e,$ee=document.createElement("canvas").getContext("2d",{willReadFrequently:ete})),$ee.canvas.width=l,$ee.canvas.height=c,$ee.drawImage(o,0,0,l,c),o=$ee.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=D4.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);const p=EO().getBool("WEBGL_PACK")?new Qee(d):new Zee(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}};let $ee,ete=EO().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const tte={kernelName:UP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=PF(u),g=kF(o.shape,i.shape,l,d,c,h,!1,m);let y;const v=[],b=null!=a,x=null!=s,w="leakyrelu"===p,S=()=>{const e=[o,i],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=K8({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(a,u)),x&&e.push(t(s,u)),w){const t=n.makeTensorInfo([],"float32",pM(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&EO().getBool("WEBGL_EXP_CONV")){const e=p?V8(p,!0):null,t=new R7(g,b,e,x,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],o=S();y=n.runWebGLProgram(t,o,"float32",r)}else if(EO().getBool("WEBGL_CONV_IM2COL"))y=L7({x:o,filter:i,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?V8(p,!1):null,t=new O7(g,b,e,x,w),r=S();y=n.runWebGLProgram(t,r,"float32")}else y=D7({x:o,filter:i,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const _=K8({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),_}};const nte={kernelName:zP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:a,preluActivationWeights:s}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=[];let m=u;null==m&&(m=[1,1]),qA(NF(l,m),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'")));const g=kF(o.shape,i.shape,l,m,c,d,!0),y=EO().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=h?V8(h,y):null,b=[o,i],x=null!=a,w=null!=s,S="leakyrelu"===h;if(x&&b.push(a),w&&b.push(s),S){const e=n.makeTensorInfo([],"float32",pM(p,"float32"));b.push(e),f.push(e)}let _;_=y?new hee(g,x,v,w,S):new dee(g,x,v,w,S);const k=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(_,b,"float32",k);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),T}};class rte{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const o=A5(n.length);let i="\n    int index;";for(let a=0;a<this.sliceDim;a++)i+="\n          index = round(getIndices(coords[0], ".concat(a,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[a],";\n          flattenIndex += index * ").concat(this.strides[a],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const ote={kernelName:GN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,i=o.shape,a=i[i.length-1],s=KA(r.shape),[l,c,u,d]=Vz(r,o),h=K8({inputs:{x:o},backend:n,attrs:{shape:[c,a]}}),p=K8({inputs:{x:r},backend:n,attrs:{shape:[KA(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),i=p6(e,t,r.dtype,c,a,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,i.values)}const f=new rte(a,d,[c,u],r.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=K8({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class ite{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=A5(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<e.length;o++)2===o?r.push("index"):r.push("".concat(n[o]));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function ate(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:a,batchDims:s}=r,l=nO(a,o.shape)[0];if(EO().get("DEBUG")){const e=n.readSync(i.dataId),t=o.shape[l];for(let n=0;n<e.length;++n){const r=e[n];qA(r<=t-1&&r>=0,(()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")))}}const c=RV(o,i,l,s),u=KA(i.shape),d=[],h=K8({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=K8({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,i])||"string"===o.dtype){const e=n.bufferSync(p),t=n.bufferSync(h),r=f6(t,e,f);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const m=new ite(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);d.push(g);const y=K8({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const ste={kernelName:VN,backendName:"webgl",kernelFunc:ate},lte=z8({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:m6,dtype:"bool"}),cte={kernelName:WN,backendName:"webgl",kernelFunc:lte},ute=z8({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:g6}),dte={kernelName:HN,backendName:"webgl",kernelFunc:ute};const hte={kernelName:XN,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fee(r,!0,n)}},pte=U8({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),fte={kernelName:KN,backendName:"webgl",kernelFunc:pte},mte=U8({opSnippet:"return float(isinf(x));",dtype:"bool"}),gte={kernelName:ZN,backendName:"webgl",kernelFunc:mte},yte=U8({opSnippet:"return float(isnan(x));",dtype:"bool"}),vte={kernelName:QN,backendName:"webgl",kernelFunc:yte},bte=z8({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:y6,dtype:"bool"}),xte={kernelName:$N,backendName:"webgl",kernelFunc:bte},wte=z8({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:v6,dtype:"bool"}),Ste={kernelName:eR,backendName:"webgl",kernelFunc:wte};const _te={kernelName:tR,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:i}=n,a=b6(r,o,i);return t.makeTensorInfo([a.length],"float32",a)}},kte=U8({opSnippet:B8+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:x6}),Tte={kernelName:nR,backendName:"webgl",kernelFunc:kte},Ete=U8({opSnippet:B8+"\n  return log(1.0 + x);\n"}),Cte={kernelName:rR,backendName:"webgl",kernelFunc:Ete},Ite=z8({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),jte={kernelName:oR,backendName:"webgl",kernelFunc:Ite},Ate=U8({opSnippet:"return float(!(x >= 1.0));"}),Ote={kernelName:iR,backendName:"webgl",kernelFunc:Ate},Nte=z8({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Rte={kernelName:aR,backendName:"webgl",kernelFunc:Nte};class Pte{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const i=t,a=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(a,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class Mte{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,a=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(a,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const Dte={kernelName:sR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:a,alpha:s,beta:l}=r,c=EO().getBool("WEBGL_PACK_NORMALIZATION")?new Mte(o.shape,i,a,s,l):new Pte(o.shape,i,a,s,l);return n.runWebGLProgram(c,[o],o.dtype)}};class Lte{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const Fte={kernelName:lR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:a}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r,d=new Lte(o.shape,s,l,c,u);return n.runWebGLProgram(d,[o,i,a],o.dtype)}};function Bte(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:a}=r,s=o.shape.length,l=nO(i,o.shape);let c=l;const u=EB(c,s),d=null!=u,h=n.shouldExecuteOnCPU([o]);let p=o;if(d){if(h){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=o.shape[u[n]];const r=K6(e,o.shape,o.dtype,u,t);p=n.makeTensorInfo(t,o.dtype);n.texData.get(p.dataId).values=r}else p=n9(o,u,n);c=IB(c.length,s)}TB("max",c,s);const[f,m]=_B(p.shape,c);let g,y=f;if(a&&(y=kB(f,l)),h){const e=n.texData.get(p.dataId).values,t=w6(e,KA(m),y,o.dtype);g=n.makeTensorInfo(y,o.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const o=KA(t),i=K8({inputs:{x:e},attrs:{shape:[KA(e.shape)/o,o]},backend:r}),a=$8(i,e.dtype,"max",r),s=K8({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),s}(p,m,y,n);return d&&n.disposeIntermediateTensorInfo(p),g}const Ute={kernelName:cR,backendName:"webgl",kernelFunc:Bte},zte=z8({opSnippet:T8+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+C8+"\n  return result;\n",cpuKernelImpl:S6}),Vte={kernelName:uR,backendName:"webgl",kernelFunc:zte};const Gte={kernelName:dR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;h5(o,"maxPool");const{filterSize:i,strides:a,pad:s,dimRoundingMode:l}=r;qA(NF(a,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const c=SF(o.shape,i,a,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&ZA(c.inShape,c.outShape))return j8({inputs:{x:o},backend:n});const u=new z9(c,"max",!1);return n.runWebGLProgram(u,[o],o.dtype)}};const Wte={kernelName:pR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:a,pad:s,dataFormat:l,dimRoundingMode:c}=r,u=_F(o.shape,i,a,[1,1,1],s,c,l),d=new V9(u,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}};class Hte{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,s=i-1-e.padInfo.left,l=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class qte{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=s*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(a,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Xte={kernelName:fR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,a=i,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=_F(a.shape,s,l,[1,1,1],c,u),h=new V9(d,"max",!0),p=n.runWebGLProgram(h,[a],a.dtype),f=new qte(d),m=n.runWebGLProgram(f,[o,p],a.dtype);return n.disposeIntermediateTensorInfo(p),m}};const Yte={kernelName:hR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:a}=t,s=i;h5([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=SF(s.shape,l,c,1,u,d),p=new z9(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new Hte(h),g=n.runWebGLProgram(m,[o,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const Kte={kernelName:mR,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:i,strides:a,pad:s,includeBatchInIndex:l}=n,c=r;qA(4===o.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")));const u=[1,1];qA(NF(a,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(u,"'")));const d=SF(o.shape,i,a,u,s),[h,p]=function(e,t,n,r){let o=new z9(n,"max",!1);const i=r.runWebGLProgram(o,[e],"float32");return o=new z9(n,"max",!0,!0,t),[i,r.runWebGLProgram(o,[e],"float32")]}(o,l,d,c);return[h,p]}};const Zte={kernelName:gR,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{keepDims:i,axis:a}=n,s=r,l=o.shape.length,c=nO(a,o.shape);let u=c;const d=EB(u,l),h=null!=d,p=s.shouldExecuteOnCPU([o]),f=[];let m=o;if(h){if(p){const e=s.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=o.shape[d[r]];const n=K6(e,o.shape,o.dtype,d,t);m=s.makeTensorInfo(t,o.dtype);s.texData.get(m.dataId).values=n}else m=n9(o,d,s);f.push(m),u=IB(u.length,l)}TB("sum",u,l);const[g,y]=_B(m.shape,u);let v=g;i&&(v=kB(g,c));const b=function(e,t,n,r){const o=KA(t),i=K8({inputs:{x:e},attrs:{shape:[KA(e.shape)/o,o]},backend:r}),a=$8(i,"float32","mean",r),s=K8({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),s}(m,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const Qte={kernelName:yR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,s=o.shape.length,l=nO(i,o.shape);let c=l;const u=EB(c,s);let d=o;null!=u&&(d=i9({inputs:{x:o},backend:n,attrs:{perm:u}}),c=IB(c.length,o.shape.length)),TB("min",c,s);const[h,p]=_B(d.shape,c),f=K8({inputs:{x:d},backend:n,attrs:{shape:[-1,KA(p)]}}),m=$8(f,f.dtype,"min",n);let g;if(a){g=K8({inputs:{x:m},backend:n,attrs:{shape:kB(h,l)}})}else g=K8({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}},Jte=z8({opSnippet:T8+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+C8+"\n  return result;\n",cpuKernelImpl:_6}),$te={kernelName:vR,backendName:"webgl",kernelFunc:Jte};class ene{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=A5(r),i=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(a,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class tne{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=A5(r),i=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=J6("rc",r),l=J6("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===n?0:1;let h="";if(1===r){const e="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(a,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const nne={kernelName:bR,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o}=t,{paddings:i,mode:a}=r,s=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tne(o.shape,i,a):new ene(o.shape,i,a);return n.runWebGLProgram(s,[o],o.dtype)}},rne=z8({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+C8+"\n  return result;\n"}),one={kernelName:xR,backendName:"webgl",kernelFunc:rne};class ine{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const ane=z8({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),sne={kernelName:CN,backendName:"webgl",kernelFunc:ane},lne="return a - b;",cne=z8({opSnippet:lne,packedOpSnippet:lne,supportsComplex:!0,cpuKernelImpl:q6}),une={kernelName:TP,backendName:"webgl",kernelFunc:cne};function dne(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:i}=r,a=nO([i],o.shape),s=Bte({inputs:{x:o},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=kB(s.shape,a),c=K8({inputs:{x:s},backend:n,attrs:{shape:l}}),u=cne({inputs:{a:o,b:c},backend:n}),d=Aee({inputs:{x:u},backend:n}),h=r9({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),p=K8({inputs:{x:h},backend:n,attrs:{shape:l}}),f=ane({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}const hne={kernelName:hP,backendName:"webgl",kernelFunc:dne};const pne={kernelName:wR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:a,normalized:s}=r,l=s?o:dne({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new ine(c,u,i),h=[[a]],p=n.runWebGLProgram(d,[l],"int32",h);return s||n.disposeIntermediateTensorInfo(l),p}},fne=a8+"\n  return -x;\n";const mne={kernelName:_R,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=T6(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=EO().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new b8(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new i8(r.shape,fne),n.runWebGLProgram(o,[r],r.dtype)}},gne=YU;const yne={kernelName:TR,backendName:"webgl",kernelFunc:function(e){VP("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r,c=n.readSync(o.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=gne(c,u,a,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},vne=KU;const bne={kernelName:ER,backendName:"webgl",kernelFunc:function(e){VP("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(o.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=vne(u,d,a,s,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},xne=ZU;const wne={kernelName:CR,backendName:"webgl",kernelFunc:function(e){VP("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(o.dataId),d=n.readSync(i.dataId),h=a,p=s,f=l,m=c,{selectedIndices:g,selectedScores:y}=xne(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class Sne{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const _ne={kernelName:jR,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:i,depth:a,onValue:s,offValue:l}=r,c=KA(o.shape),u=new Sne(c,a,s,l),d=K8({inputs:{x:o},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const p=K8({inputs:{x:h},backend:n,attrs:{shape:[...o.shape,a]}});return n.disposeIntermediateTensorInfo(h),p}};function kne(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=u7({inputs:{input:r},backend:n}),t=kne({inputs:{x:e},backend:n}),o=E7({inputs:{input:r},backend:n}),i=kne({inputs:{x:o},backend:n}),a=O8({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),a}return zee({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Tne={kernelName:MP,backendName:"webgl",kernelFunc:kne};const Ene={kernelName:IR,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=u7({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),i=E7({inputs:{input:o},backend:r}),a=kne({inputs:{x:i},backend:r}),s=O8({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(a),s}return zee({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}};const Cne={kernelName:AR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return Nee({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const i=t[0].shape,a=t[0].dtype;t.forEach((e=>{XA(i,e.shape,"All tensors passed to stack must have matching shapes"),qA(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=Nee({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),c=j7({inputs:l,backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class Ine{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=A5(r),i=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(a,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class jne{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=A5(r),i=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=J6("rc",r),l=J6("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(o," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(c,") {")],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+="\n        ".concat(d[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(a,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const Ane=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:a}=r;if(0===KA(o.shape)){const e=i.map(((e,t)=>e[0]+o.shape[t]+e[1]));return zee({backend:n,attrs:{shape:e,value:a,dtype:o.dtype}})}const s=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jne(o.shape,i,a):new Ine(o.shape,i,a),l=[[a]];return n.runWebGLProgram(s,[o],o.dtype,l)},One={kernelName:OR,backendName:"webgl",kernelFunc:Ane},Nne=z8({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+C8+"\n  return result;\n"}),Rne={kernelName:NR,backendName:"webgl",kernelFunc:Nne};const Pne={kernelName:PR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:a}=r,s=o.shape.length,l=[],c=nO(i,o.shape);let u=c;const d=EB(u,s);let h,p=o;if(null!=d&&(p=i9({inputs:{x:o},backend:n,attrs:{perm:d}}),u=IB(u.length,s),l.push(p)),TB("prod",u,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:o}=C6(p.shape,p.dtype,e,u);h=n.makeTensorInfo(r,o,t)}else{const[e,t]=_B(p.shape,u),r=KA(t),i=K8({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),a=$8(i,HM(o.dtype),"prod",n);h=K8({inputs:{x:a},backend:n,attrs:{shape:e}}),l.push(i),l.push(a)}if(a){l.push(h);const e=kB(h.shape,c);h=K8({inputs:{x:h},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const Mne={kernelName:MR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:i,indices:a}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.readSync(e.dataId))),c=o.map((e=>e.shape)),u=n.readSync(i.dataId),d=n.readSync(a.dataId),[h,p,f]=I6(l,c,u,i.shape,i.dtype,d,a.shape,s),m=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}};const Dne={kernelName:DR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:i}=t,a=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(i.dataId),[c,u]=j6(a,r.shape,r.dtype,s,o.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const Lne={kernelName:LR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:i,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.readSync(o.dataId),u=n.readSync(i.dataId),d=n.readSync(a.dataId),h=s.map((e=>n.readSync(e.dataId))),p=s.map((e=>e.shape)),[f,m]=A6(c,o.shape,u,i.shape,i.dtype,d,a.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}},Fne=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:i,dtype:a}=n,s=O6(r,o,i,a);return t.makeTensorInfo([s.length],a,s)},Bne={kernelName:FR,backendName:"webgl",kernelFunc:Fne},Une=U8({opSnippet:"return 1.0 / x;"}),zne={kernelName:UR,backendName:"webgl",kernelFunc:Une},Vne=U8({opSnippet:a8+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Gne={kernelName:zR,backendName:"webgl",kernelFunc:Vne},Wne=U8({opSnippet:a8+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Hne={kernelName:XR,backendName:"webgl",kernelFunc:Wne};class qne{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[i,a,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?a-1:a,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class Xne{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?a-1:a,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const Yne={kernelName:HR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:s}=r,[l,c]=s,u=EO().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Xne(o.shape,l,c,i,a):new qne(o.shape,l,c,i,a);return n.runWebGLProgram(u,[o],"float32")}};class Kne{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,i,a]=e,s=[n&&i>1?r-1:r,n&&a>1?o-1:o],l=[n&&i>1?i-1:i,n&&a>1?a-1:a],c=s[0]/l[0],u=s[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Zne={kernelName:qR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:a}=r,s=new Kne(i.shape,o.shape,a);return n.runWebGLProgram(s,[i],i.dtype)}};class Qne{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[i,a,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?a-1:a,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class Jne{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?a-1:a,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const $ne={kernelName:GR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:a,size:s}=r,[l,c]=s,u=EO().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Jne(o.shape,l,c,i,a):new Qne(o.shape,l,c,i,a);return n.runWebGLProgram(u,[o],o.dtype)}};class ere{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,i,a]=e,s=[n&&i>1?r-1:r,n&&a>1?o-1:o],l=[n&&i>1?i-1:i,n&&a>1?a-1:a],c=s[0]/l[0],u=s[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const tre={kernelName:WR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:a}=r,s=new ere(i.shape,o.shape,a);return n.runWebGLProgram(s,[i],i.dtype)}};class nre{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r))).join(","),o=A5(n);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class rre{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=J6("rc",n),o="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),a=A5(n);function s(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(o,n))),o=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(o,"), vec2(").concat(i,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(r.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const ore={kernelName:YR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r,a=o.shape.length,s=nO(i,o.shape);if(0===a)return j8({inputs:{x:o},backend:n});const l=EO().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rre(o.shape,s):new nre(o.shape,s);return n.runWebGLProgram(l,[o],o.dtype)}};class ire{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const are={kernelName:FP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:i,fillValue:a,center:s}=n,l=r,c=new ire(o.shape,a),[u,d]=Dz(s,o.shape[1],o.shape[2]),h=[[u,d,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[o],o.dtype,h)}},sre=U8({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),lre={kernelName:KR,backendName:"webgl",kernelFunc:sre},cre=U8({opSnippet:"return inversesqrt(x);",cpuKernelImpl:N6}),ure={kernelName:ZR,backendName:"webgl",kernelFunc:cre};class dre{constructor(e,t,n,r,o,i){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const s=A5(o.length),l=A5(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";a&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class hre{constructor(e,t,n,r,o,i){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const s=A5(o.length),l=A5(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";a&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const pre={kernelName:QR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:i}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Hz(0,o,a),h=[d/c,c];if(0===d)return n.makeTensorInfo(a,o.dtype);const p=K8({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=K8({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=EO().getBool("WEBGL_PACK")?new hre(l,s,p.shape.length,f.shape.length,u,h):new dre(l,s,p.shape.length,f.shape.length,u,h);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),v=K8({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}};class fre{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),i=2===EO().getNumber("WEBGL_VERSION")?"while (left < right) {":o,a="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(a," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const mre={kernelName:$R,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:i}=t,{side:a}=r,s=new fre(o.shape[0],o.shape[1],i.shape[1],a),l=[[o.shape[1]]];return n.runWebGLProgram(s,[o,i],"int32",l)}};class gre{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=[];for(let r=0;r<t.length;r++)a.push("".concat(n[r])),r<e&&i.push("".concat(n[r]));r=i.join(),o=a.join()}const i=A5(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}}const yre={kernelName:eP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t,a=new gre(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(a,[r,o,i],WM(o.dtype,i.dtype))}},vre=U8({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(qz,";\n  float scale = ").concat(Xz,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),bre={kernelName:tP,backendName:"webgl",kernelFunc:vre},xre=U8({opSnippet:B8+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:P6}),wre={kernelName:aP,backendName:"webgl",kernelFunc:xre},Sre=U8({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),_re={kernelName:iP,backendName:"webgl",kernelFunc:Sre},kre=U8({opSnippet:B8+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(C8,"\n  return result;\n")}),Tre={kernelName:rP,backendName:"webgl",kernelFunc:kre},Ere=U8({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Cre={kernelName:oP,backendName:"webgl",kernelFunc:Ere},Ire=U8({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),jre={kernelName:sP,backendName:"webgl",kernelFunc:Ire},Are={kernelName:uP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:a}=r;qA(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=i.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...a);for(let y=1+i.length;y<o.shape.length;++y)l.push([0,0]);const c=[],u=Ane({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Lz(u.shape,i,s,!1),h=Fz(d.length,i.length,!1),p=Bz(u.shape,i,s,!1),f=K8({inputs:{x:u},backend:n,attrs:{shape:d}}),m=i9({inputs:{x:f},backend:n,attrs:{perm:h}}),g=K8({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const Ore={kernelName:pP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:i,defaultValue:a}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==a.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(a.shape));const s=n.readSync(r.dataId),l=n.readSync(o.dataId),c=n.readSync(i.dataId),u=n.readSync(a.dataId)[0],[d,h,p,f,m]=L6(s,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],o.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const Nre={kernelName:fP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const a=Array.from(n.readSync(o.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=F6(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};const Rre={kernelName:mP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));const a=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(i.dataId),[c,u]=B6(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const Pre={kernelName:gP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));const a=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(i.dataId),[c,u]=B6(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const Mre={kernelName:yP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:i,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Hz(0,o,s);if("string"===i.dtype){const e=n.bufferSync(o),t=n.bufferSync(i),r=yM(n.readSync(a.dataId)[0]),p=R6(e,t,s,h,u,c,l,d,r,false);return n.makeTensorInfo(s,p.dtype,p.values)}const p=new dre(c,l,o.shape.length,i.shape.length,d,[h,1],false),f=n.runWebGLProgram(p,[i,o,a],i.dtype),m=K8({inputs:{x:f},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(f),m}};const Dre={kernelName:dP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:i,axis:a}=r,s=nO(a,o.shape)[0],l=vV(o,i,s),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map((e=>{const t=[...d];t[s]=e;const r=n7({inputs:{x:o},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},Lre="return sqrt(x);",Fre=U8({opSnippet:Lre,packedOpSnippet:Lre,cpuKernelImpl:U6}),Bre={kernelName:lP,backendName:"webgl",kernelFunc:Fre},Ure={kernelName:bP,backendName:"webgl",kernelFunc:U8({opSnippet:"return x * x;"})},zre="return (a - b) * (a - b);",Vre=z8({opSnippet:zre,packedOpSnippet:zre}),Gre={kernelName:vP,backendName:"webgl",kernelFunc:Vre};const Wre={kernelName:xP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");const i=PV(n.readSync(o.dataId)),a=z6(i,"string",r);return n.makeTensorInfo(o.shape,"string",a)}};const Hre={kernelName:DP,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,i=a8+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),a=new i8(o.shape,i);return r.runWebGLProgram(a,[o],o.dtype)}};class qre{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=A5(n.length),i=A5(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map(((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]")))).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(e,");\n      ").concat(o," strides = ").concat(o,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}const Xre={kernelName:wP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:a,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=gF(o.shape,i,a,s,l,c,u,d,h);let w;if(m)w=K8({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||y){qA(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=rF(v,b,x),t=n7({inputs:{x:o},backend:n,attrs:{begin:v,size:e}});w=K8({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=uL(o.shape,o.dtype,e),r=V6(p,t,x,v);w=n.makeTensorInfo(f,o.dtype,r.values)}else{const e=new qre(v,x,p);w=n.runWebGLProgram(e,[o],o.dtype)}}const S=K8({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),S}};const Yre={kernelName:SP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:i,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.readSync(u.dataId),p=n.readSync(d.dataId),[f,m]=G6(h,p,o,i,a,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const Kre={kernelName:_P,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:i,delimiter:a}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==a.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(a.shape));const s=n.readSync(i.dataId),l=n.readSync(a.dataId)[0],[c,u,d]=W6(s,l,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const Zre={kernelName:kP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),s=H6(a,o);return n.makeTensorInfo(i.shape,"int32",s)}},Qre=U8({opSnippet:"return tan(x);"}),Jre={kernelName:EP,backendName:"webgl",kernelFunc:Qre},$re=U8({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),eoe={kernelName:CP,backendName:"webgl",kernelFunc:$re};const toe={kernelName:JR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:i,updates:a}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Hz(0,i,o.shape),h=[d/c,c];if(0===d)return n.makeTensorInfo(o.shape,i.dtype);const p=K8({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),f=K8({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),m=K8({inputs:{x:o},backend:n,attrs:{shape:h}}),g=new dre(l,s,p.shape.length,f.shape.length,u,h,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),v=K8({inputs:{x:y},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class noe{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;const r=A5(this.rank),o=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push("imod(".concat(n[o],", ").concat(e[o],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}}function roe(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:i}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>yM(e))):e,r=uL(o.shape,o.dtype,t),a=X6(r,i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new noe(o.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const ooe={kernelName:IP,backendName:"webgl",kernelFunc:roe};class ioe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class aoe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function soe(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function loe(e){let t=1;for(;t<e;)t*=2;return t}const coe={kernelName:jP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:i,sorted:a}=r,s=EO().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=EO().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([o])||u<s||i>l){const e=n.readSync(o.dataId),[t,r]=Y6(e,c,o.dtype,i,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[o,zee({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(o):o,f=KA(c)/u,m=K8({inputs:{x:p},attrs:{shape:[f,u]},backend:n});h&&soe(n,p);const g=loe(i),y=loe(u);let v=null;const b=()=>null===v?[m,m]:[m,v],x=(e,t,r)=>{const o=b(),i=new ioe(r),a=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(i,o,"int32",a),soe(n,s)};for(let T=1;T<g;T*=2){const e=2*T;for(let t=T;t>=1;t/=2)x(e,t,[f,y])}for(let T=y;T>g;T/=2){const e=b(),t=new aoe([f,T/2]),r=[[u],[null===v?1:0],[g]],o=v;v=n.runWebGLProgram(t,e,"int32",r),soe(n,o);const i=g/2,a=2*i;for(let n=i;n>=1;n/=2)x(a,n,v.shape)}let w=v;v=n7({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,i]}}),soe(n,w);let S=ate({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});soe(n,m);const _=c.slice(0,-1);_.push(i),w=v,v=K8({inputs:{x:v},attrs:{shape:_},backend:n}),soe(n,w);const k=S;return S=K8({inputs:{x:S},attrs:{shape:_},backend:n}),soe(n,k),[S,v]}};class uoe{constructor(e,t,n,r,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(a," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const doe={kernelName:AP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:i}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:c}=r,[u,d,h,p]=o.shape,[f,m]=null!=c?c:[d,h],g=new uoe(d,h,a,s,l,[u,f,m,p]);return n.runWebGLProgram(g,[o,i],"float32")}};const hoe={kernelName:NP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:i}=t;h5(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:c}=Z6(a,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const poe={kernelName:RP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:i}=r;i<0&&(i+=o.shape.length);const a=o,s=a.shape.length,l=o.shape[i],c=new Array(s-1);let u=0;for(let m=0;m<s;m++)m!==i&&(c[u++]=a.shape[m]);const d=[],h=new Array(s).fill(0),p=a.shape.slice();p[i]=1;const f=new Array(l);for(let m=0;m<f.length;m++){h[i]=m;const e=n7({inputs:{x:a},backend:n,attrs:{begin:h,size:p}}),t=K8({inputs:{x:e},backend:n,attrs:{shape:c}});f[m]=t,d.push(e)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class foe{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];const s=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";o%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));let d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const moe={kernelName:PP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:a}=r,s=o.shape.length,l=[];let c=0;const u=EB([c],s);let d=o;null!=u&&(d=i9({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(d),c=IB(1,s)[0]);const h=NV(d.shape,c,a),p=KA([d.shape[c]]),f=K8({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=HM(o.dtype),g=(e,t,r,o,i)=>{const a=e.shape[0],s=e.shape[1],c=OV(s,i),u=new foe({windowSize:c,inSize:s,batchSize:a,numSegments:i},t),d=n.compileAndRun(u,[e,r],o);if(l.push(d),d.shape[1]===i)return d;const h=Fne({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),p=roe({inputs:{x:h},backend:n,attrs:{reps:[s/c]}});l.push(h),l.push(p);return g(d,t,p,o,i)},y=K8({inputs:{x:g(f,"unsortedSegmentSum",i,m,a)},backend:n,attrs:{shape:h}});let v=y;if(null!=u){l.push(y);const e=CB(u);v=i9({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},goe=[c9,d9,p9,m9,v9,w9,S9,_9,j9,A9,N9,P9,D9,F9,U9,G9,W9,X9,Y9,K9,J9,o7,i7,a7,s7,p7,g7,b7,N8,S7,A7,F7,G7,H7,q7,X7,Y7,Z7,J7,eee,aee,see,lee,uee,pee,gee,yee,bee,wee,See,kee,Tee,Cee,jee,Oee,Ree,Dee,Bee,Vee,Wee,Xee,Kee,Jee,tte,nte,ote,ste,cte,dte,A8,hte,C7,fte,gte,vte,M8,xte,Ste,_te,Tte,Cte,jte,Ote,Rte,Dte,Fte,Ute,Vte,Gte,Wte,Xte,Yte,Kte,Zte,Qte,$te,nne,one,pne,Y8,mne,yne,bne,wne,c7,_ne,Ene,Cne,One,Rne,F8,Pne,Mne,Dne,Lne,Bne,d7,sne,zne,Gne,Hne,Z8,Yne,Zne,$ne,tre,ore,are,lre,ure,pre,mre,yre,bre,wre,_re,Tre,Cre,r7,hne,jre,Are,Ore,Nre,Rre,Pre,Mre,Dre,Bre,Ure,Gre,Wre,Hre,Xre,Yre,Kre,Zre,une,o9,Jre,eoe,toe,ooe,coe,doe,a9,hoe,poe,moe,Tne];for(const r of goe)KP(r);const yoe=()=>{const[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)("");(0,l.useEffect)((()=>(async function(){try{"webgl"===kD()?console.log("Using WebGL backend"):console.log("Using CPU backend");const e=function(e){return new nK(e)}();e.add(new vZ({units:1,inputShape:[1]})),e.compile({optimizer:"sgd",loss:"meanSquaredError"});const t=mU([1,2,3,4],[4,1]),n=mU([2,4,6,8],[4,1]);await e.fit(t,n,{epochs:100});const r=e.predict(mU([5],[1,1])).dataSync()[0];console.log("Prediction:",r)}catch(e){console.error("Error initializing model:",e)}}(),()=>{nD.disposeVariables()})),[]);return(0,Je.jsxs)("div",{className:"iaStyles",children:[(0,Je.jsx)("h1",{children:"Simple Model Component"}),(0,Je.jsx)("p",{children:"Verifica la consola para ver la predicci\xf3n del modelo."}),(0,Je.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Ingresa una palabra para buscar una imagen"}),(0,Je.jsx)("button",{onClick:async()=>{try{const e="UBY0Kz6IFJA3fuqc374tGGu4A9uodS7F9uT3PFwWOXuRz0YuabbOtFoM",r=n.split(",");let o=[];for(let t of r){const n="https://api.pexels.com/v1/search?query=".concat(t.trim(),"&per_page=10"),r=await fetch(n,{headers:{Authorization:e}});if(!r.ok)throw new Error("Failed to fetch data");const i=await r.json();i.photos&&i.photos.length>0&&(o=[...o,...i.photos.map((e=>e.src.large))])}t(o)}catch(e){console.error("Error fetching data:",e)}},children:"Buscar Imagen"}),e&&(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h2",{children:"Imagen Relacionada"}),(0,Je.jsx)("img",{src:e,alt:"Imagen Relacionada"})]})]})},voe=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{(async()=>{const e=await(async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/sketches/sketches")),t=await e.json();return console.log("Sketch Data:",t),t}catch(e){return console.error("Error fetching sketch data:",e),[]}})();t(e),r(!1)})()}),[]),(0,Je.jsxs)("div",{className:"sketchListContainer",children:[(0,Je.jsx)("h2",{className:"titleSketch",children:"SKETCHES"}),n?(0,Je.jsx)("div",{className:"loading",children:"Loading..."}):(0,Je.jsx)("ul",{className:"sketchList",children:e.map((e=>(0,Je.jsx)("li",{children:(0,Je.jsxs)(Oe,{to:"/".concat(e.FilePath),style:{textDecoration:"none",color:"#27343a"},children:[(0,Je.jsx)("h3",{className:"titleSketch",children:e.Title}),(0,Je.jsx)("img",{className:"sketchImage",src:e.Image,alt:e.Title})]})},e.ID)))})]})},boe=()=>{const[e,t]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/movies/movies"));return e.ok?await e.json():(console.error("Error fetching movies"),[])}catch(e){return console.error("Error fetching movies:",e),[]}})();t(e)}catch(e){console.error("Error fetching videos:",e.message)}})()}),[]),(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"video-list-container",children:[(0,Je.jsx)("h1",{className:"view-title",children:"MOVIES"}),(0,Je.jsx)("div",{className:"video-list",children:e.map((e=>(0,Je.jsx)(Oe,{to:"/movie/".concat(e.ID),className:"video-item-link",children:(0,Je.jsxs)("div",{className:"video-item",children:[(0,Je.jsx)("video",{className:"video-pic",children:(0,Je.jsx)("source",{src:e.VideoImage,type:"video/mp4"})}),(0,Je.jsx)("p",{className:"video-list-title",children:e.Title})]})},e.ID)))})]})})},xoe=()=>{const[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)({Title:"",Duration:"",Description:"",Director:"",ArtistID:""}),[o,i]=(0,l.useState)([]),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(0),[d,h]=(0,l.useState)(null);(0,l.useEffect)((()=>{(async()=>{const e=await Vt();i(e)})()}),[]);const p=e=>{const{name:t,value:o}=e.target;r({...n,[t]:o})},f=function(e){h({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout((()=>{h(null)}),5e3)};return(0,Je.jsxs)("div",{className:"my-container-movie",children:[(0,Je.jsx)("h3",{className:"form-title",children:" CREATE MOVIE "}),d&&(0,Je.jsx)("div",{className:"alert ".concat(d.type),children:d.message}),(0,Je.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{s(!0);const t=new FormData;t.append("VideoFile",e),t.append("Title",n.Title),t.append("Duration",n.Duration),t.append("Description",n.Description),t.append("Director",n.Director),t.append("ArtistID",n.ArtistID);const r=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/movies/createMovie"),{method:"POST",body:e});if(t.ok){const e=await t.json();return console.log("Video created successfully:",e),{success:!0,data:e}}return console.error("Error creating video"),{success:!1,error:"Error creating video"}}catch(t){return console.error("Error creating video:",t),{success:!1,error:"Error creating video"}}})(t);r.success?f("Video created successfully","success"):f("Error creating video","error")}catch(r){console.error("Error creating video:",r.message),f("Error creating video","error")}finally{s(!1),u(0)}},className:"my-container-form",children:[(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Title",className:"my-label-form",children:"Title"}),(0,Je.jsx)("input",{type:"text",id:"Title",name:"Title",value:n.Title,onChange:p,className:"my-input-form"})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Duration",className:"my-label-form",children:"Duration"}),(0,Je.jsx)("input",{type:"text",id:"Duration",name:"Duration",value:n.Duration,onChange:p,className:"my-input-form"})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Description",className:"my-label-form",children:"Description"}),(0,Je.jsx)("textarea",{id:"Description",name:"Description",value:n.Description,onChange:p,className:"my-textarea-form"})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"Director",className:"my-label-form",children:"Director"}),(0,Je.jsx)("input",{type:"text",id:"Director",name:"Director",value:n.Director,onChange:p,className:"my-input-form"})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"ArtistID",className:"my-label-form",children:"Artist:"}),(0,Je.jsxs)("select",{id:"ArtistID",name:"ArtistID",value:n.ArtistID,onChange:p,className:"my-select-form",children:[(0,Je.jsx)("option",{value:"",disabled:!0,children:"SELECT AN ARTIST"}),o.map((e=>(0,Je.jsx)("option",{value:e.ID,children:e.Name},e.ID)))]})]}),(0,Je.jsxs)("div",{className:"my-form-group",children:[(0,Je.jsx)("label",{htmlFor:"VideoFile",className:"my-label-form",children:"Video File"}),(0,Je.jsx)("input",{type:"file",id:"VideoFile",name:"VideoFile",onChange:e=>{t(e.target.files[0])},className:"my-input-form"})]}),(0,Je.jsx)("button",{type:"submit",className:"my-button-form",disabled:a,children:a?"Uploading... ".concat(c,"%"):"Create Video"}),a&&(0,Je.jsxs)("div",{className:"my-progress",children:[(0,Je.jsx)("progress",{value:c,max:100}),(0,Je.jsxs)("span",{children:[c,"%"]})]})]})]})},woe=()=>{const{id:e}=ie(),{t:t}=Ye(),[n,r]=(0,l.useState)(null),[o,i]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async()=>{try{const t=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/movies/movies/").concat(e));return t.ok?await t.json():(console.error("Error fetching movie details"),null)}catch(t){return console.error("Error fetching movie details:",t),null}})(e);r(t),i(t.Artist?t.Artist.name:"")}catch(t){console.error("Error fetching movie details:",t)}})()}),[e]),n?(0,Je.jsxs)("div",{className:"movie-container",children:[(0,Je.jsx)("div",{className:"video-container",children:(0,Je.jsx)("li",{children:(0,Je.jsx)("video",{width:"420",height:"340",controls:!0,children:(0,Je.jsx)("source",{src:n.VideoFile,type:"video/mp4"})})},n.ID)}),(0,Je.jsxs)("div",{className:"movie-details-container",children:[(0,Je.jsx)("h2",{className:"movie-title",children:n.Title}),(0,Je.jsx)("p",{className:"movie-description",children:n.Description}),(0,Je.jsxs)("p",{className:"movie-description",children:[t("Duration"),": ",n.Duration]}),(0,Je.jsxs)("p",{className:"movie-description",children:[t("Director"),": ",n.Director]}),(0,Je.jsxs)("p",{className:"movie-description",children:[t("Artist"),": ",o]})]})]}):(0,Je.jsx)("p",{children:"Loading..."})},Soe=[...Ht,...MS,...[{path:"/createSketch",element:(0,Je.jsx)(DS,{})},{path:"/DrawShapesSketch",element:(0,Je.jsx)(Yj,{})},{path:"/DrawImagesSketch",element:(0,Je.jsx)(RS,{})},{path:"/StarsSketch",element:(0,Je.jsx)(Xj,{})},{path:"/AudioParticlesSketch",element:(0,Je.jsx)(LA,{})},{path:"/AudioVisualizerSketch",element:(0,Je.jsx)(RA,{})},{path:"/SphereImagesSketch",element:(0,Je.jsx)(PA,{})},{path:"/ShapeSketch",element:(0,Je.jsx)(FA,{})},{path:"/IAimages",element:(0,Je.jsx)(yoe,{})},{path:"/SketchList",element:(0,Je.jsx)(voe,{})}],...[{path:"/movies",element:(0,Je.jsx)(boe,{})},{path:"/movieForm",element:(0,Je.jsx)(xoe,{})},{path:"/movie/:id",element:(0,Je.jsx)(woe,{})}]],_oe=()=>(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"footer",children:[(0,Je.jsx)("p",{className:"foot-text",children:"\xa9 2023 Hologram . Todos los derechos reservados."}),(0,Je.jsx)("p",{className:"foot-text",children:"hologram.workspace@gmail.com"})]})}),koe=()=>(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("div",{className:"home-img",children:(0,Je.jsx)("div",{className:"home-sketch"})})}),Toe=e=>{let{handleLogin:t}=e;const{t:n}=Ye(),[r,o]=(0,l.useState)({Username:"",Password:""}),[i,a]=(0,l.useState)(""),s=e=>{const{name:t,value:n}=e.target;o({...r,[t]:n})};return(0,Je.jsxs)("div",{className:"my-container-login",children:[(0,Je.jsx)("h3",{className:"form-title",children:n("signIn")}),(0,Je.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();return console.log("Inicio de sesi\xf3n exitoso:",e),{success:!0,token:e.token,user:e.user}}return console.error("Error en el inicio de sesi\xf3n"),{success:!1,error:"Error en el inicio de sesi\xf3n"}}catch(i){return console.error("Error en la solicitud:",i),{success:!1,error:"Error en la solicitud"}}})(r);if(e.token)return localStorage.setItem("token",e.token),t(e.user),(0,Je.jsx)(be,{to:"/profile"});a(n("loginError"))}catch(i){a(n("loginError"))}},children:[(0,Je.jsxs)("div",{className:"my-input-container-form",children:[(0,Je.jsxs)("label",{className:"my-label-form",children:[" ",n("username")]}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Username",value:r.Username,onChange:s})]}),(0,Je.jsxs)("div",{className:"my-input-container-form",children:[(0,Je.jsxs)("label",{className:"my-label-form",children:[" ",n("password")]}),(0,Je.jsx)("input",{className:"my-input-form",type:"password",name:"Password",value:r.Password,onChange:s})]}),i&&(0,Je.jsx)("div",{style:{color:"red"},children:i}),(0,Je.jsx)("button",{className:"my-button-form",type:"submit",children:n("signIn")})]}),(0,Je.jsx)(Oe,{className:"my-link-form",to:"/Register",children:n("signUp")})]})},Eoe=e=>{let{formData:t,isLoading:n,handleChange:r,handleSubmit:o}=e;return(0,Je.jsxs)("div",{className:"my-container-register",children:[(0,Je.jsx)("h3",{className:"form-title",children:"SIGN UP"}),(0,Je.jsxs)("div",{className:"my-form-container-form",children:[n&&(0,Je.jsx)("div",{className:"loading-form",children:"LOADING..."}),(0,Je.jsxs)("form",{className:"my-form-form",onSubmit:o,encType:"multipart/form-data",children:[(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"Username",children:"USERNAME"}),(0,Je.jsx)("input",{type:"text",className:"my-input-form",name:"Username",value:t.Username,onChange:r})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"Password",children:"PASSWORD"}),(0,Je.jsx)("input",{type:"password",className:"my-input-form",name:"Password",value:t.Password,onChange:r})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"Email",children:"EMAIL"}),(0,Je.jsx)("input",{type:"email",className:"my-input-form",name:"Email",value:t.Email,onChange:r})]}),(0,Je.jsxs)("div",{className:"my-form-group-form",children:[(0,Je.jsx)("label",{className:"my-label-form",htmlFor:"Image",children:"IMAGES"}),(0,Je.jsx)("input",{type:"file",className:"my-input-form",id:"inputGroupFile01",name:"Image",onChange:r})]}),(0,Je.jsx)("input",{type:"submit",value:"Enviar",className:"my-button-form"})]})]})]})},Coe=()=>{const[e,t]=(0,l.useState)({Username:"",Password:"",Email:"",Image:null}),[n,r]=(0,l.useState)(!1);return(0,Je.jsx)(Eoe,{formData:e,isLoading:n,handleChange:e=>{const{name:n,value:r}=e.target;t("Image"===n?t=>({...t,[n]:e.target.files[0]}):e=>({...e,[n]:r}))},handleSubmit:async n=>{n.preventDefault(),r(!0);const o=await(async e=>{try{const t="".concat("https://holograma-3.onrender.com","/users/createUser"),n=new FormData;for(const o in e)n.append(o,e[o]);const r=await fetch(t,{method:"POST",body:n});if(r.ok){const e=await r.json();return console.log("Solicitud creada:",e),{success:!0,data:e}}return console.error("Error al crear la solicitud"),{success:!1,error:"Error al crear la solicitud"}}catch(t){return console.error("Error en la solicitud:",t),{success:!1,error:"Error en la solicitud"}}})(e);r(!1),o.success?(alert("Request sent correctly"),t({Username:"",Password:"",Email:"",DateOfBirth:"",PhoneNumber:"",Image:null})):console.error(o.error)}})},Ioe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfwAAAIACAMAAABQNC7eAAAAolBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgESU6AAAANXRSTlMAAwYJDRIYHyQrMTc5PkdOVFleX2Vscnd8gYSGh4ySmZ+kp6itsrW7wsXIztTZ3+Xr8fX4/Gd9vE8AAAv5SURBVHja7d2JVuLaEoDhAmRwQlQmOSLYIiAzJPX+r3bX7TPYbWtUMu2d+v8nOItv9UkqO7GE8qjWGkyW20MYHrbLyaBV4xex0sVwpW9aDy/4XYpftbvWd1t3q/w6he5ksNcP2w/gL3C3O41s1y7xIxWz+kw/bV7ndypiV3v9QvsWv1Tx6usXG/BbFazSSL/cmAt/sewf9Rs9oV8we/SxRx979LFHH3v0sUcfe/SxR99/e/SxRx979LFHH3v0sUcfe/SxRx979LFH3z979LFHH3v0sUcfe/SxRx979LFHH3v0sUcfe/SxRx979LFH3z179LFHH3v0sUcfe/SxRx979LFHH3v0sUcfe/SxRx979LFHH3v0sUcfe/SxRz97e/Stdq/oo48++uijjz766KOPPvroo48++uijjz766KOPPvroo48++uijjz766KOPPvroo48++uijjz766KOPPvroo0/fqzQ6R9/u93h79M3aK/p27dG3a4++XXv0zdsr+vbs0ccefXv26GOPPvbo27FHH3v0sY+n/xf6Htmjj32x9cdgv2NvRf8vuP+wt6N/Dfgbe0P6+wbkb+wN6S+46Xtjb0m/g/qrvTX9fRX3V3tr+kPgX+2t6R9q0L/aW9O/w/7V3pr+toS9qlX9JvZqVn+EvV39LfaG9U+xt6vfxv54/Ytj9LnoO2JvXH+OvV39DfZ29QPss9cfqCNVsLerX8U+D33wc7RH//9VsM9Hnxu+nOzR/9kWe7v6L9jnp8/j3czt0f+3DvZ29c+wN6u/K2FvVv8H9nb1W9ib1d9VsM9fn++1MrBH/9fCBvZO6POHeVK2R/+3gjr2ZvUH2JvVX1ewt6ofnmNvVr+HvVn9R+zN6s8q2FvVfznB3qr+HHtH9bFP0B597NHH3gt97BOxRx979LH3SB/7mPboY48+9t7pY3+0PfrYo4+9p/rYH2GPPvboY++1Pvbfskcfe/SxL4A+9l+0Rx979HlPtzD62H9qjz726GNfMH3sI+zRxx597Aupj/279uhjjz72BdbH/o09+tijj33h9bH/zx597NHH3og+9o+q6GOPPvam9LFHH3v0sbemjz362NvUxx597G3qY29ZH3vL+thb1sfesH4Z+8Lo00f26GOPPvboY48+9uhjjz726GOPPvboY48+9l9pt5g9z5Z79K3Z70atmvxdoz0J0Ldjv7wuy69Ve1v0bdhvb+SPKoMAfQP2z1V5r7MV+oW3v5MPqkzRL7Z92I76r0G/0PY3ElF5hr5Ve5GTDfpW7UXOQ/St2os8MO+btZfqHn2r9iJDnvSatZcGpzxm7UWWmlNT7HO1j7/alN2IPttLE3uz9lLH3qy9SIC9WXvZYW/WXjbYm7WXHfZm7UsB9lbtpY69WXu5wt6svQyxN2sva+zN2p9hb9Zextibta8H2Fu1lwn2Zu2vsDdrX9thb9X+ZIm9VfvyDHuz9lPssccee+yxxx577LHHHnvssccee+yxxx577LHHHnvssccee+yxxx577LHHHnvssccee+yxxx577N8W3mKPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899thjjz322GOPPfbYY4899th/2B32Zu1lgb1Z+2qIvVV7ucberL2MsTdrL1vszdqfYW/WXvrYm7WXOfZ/2jPoYV/0WtibtZcR9m/tGfSwL36n2Ju1lx72v9sz6GFvoZMAe6v2coX9r/YMetgbaYP9qz2DHvZW6mJv1l5m2Ju1rwTY/2PPoPd7+2fsC9yDRvVcfsa+uK01qo7E1Mfe4RoaWUPi6Xexd7iORrUWiaU/wt7lphrVg8TSX5axd7jKQaNqShz98Ax7l2tqVIeKxNEfYe/xoDcViaEf1rH3eNDrShz9CfY+D3qnEke/hb3Hg95GJIZ+UMHe6aI9RxJHf46905UPGtWVxNF/wN7jQS84kTj6HeydbqhRzUTi6Lewd7qVRtWTWPpN7F2u/tmgF0v/CnuXa2tUW5FY+jfYu9xEoxpLPP0e9g5X3mtULYmn/4i9w11qVGFV4umvsXe4e43qRSSmfh17d1tqVH2Jq9/F3tlqGtmZxNVfYe9stxrVriSx9ZvYu9rTZ/fqsfWXJezdrLTXqK4lAf029r4OevH19w3snWygUS1EktBfnWDv36B3J8nozyryYRXs3Rz0LiQh/XlVPqg6xz6nbj4b9JLSX5/Ku52usc+rHxrVk0hi+kGvLH9U7gfY51Vpp1HdSoL6url9w19ubxT73DrXyGqSqL7uhpf/+ZcvH3aKvbOrc5ciCeurHhbj+37/frw4qGLv8Orce4mlHx32bm9UupTv6mNflNW5+7J8Wx97b3pM+tvq8jP2xRj02nKMPvaFWJ1bl6P0sS/A6tyVyHH62PvQi0Y1lGP1sfd+0GvK0frYe74691CR4/Wxd72xRjUViaGPvderczsSSx97nwe9hsTTx97f1blrkZj62Hu7OvdBYutj7+vq3CuJr4+9nxuVgookoI+9l6tzZyJJ6GPv4+rcriSjj72Hq3NPJSF97L1bnbsRSUofe99W544kOX3sPRv0WpKgPvZ+DXonkqQ+9j4NenORRPWx92jQ60nC+tj7s1HpTJLWx96XjUpbkcT1sfdkde5YUtDH3o/VudeShj72PmxUCquSij72HqzOXYiko4+9+6tz7yQtfeydH/TOJTV97B0f9HYlSU8fe7cHvR8iKepj7/Tq3BtJVR97hwc9rUm6+ti7uzp3KZKyPvbOrs4dSOr62Lu6OvdS0tfH3s3VufuSZKCPvZOrcyciWehj7+Lq3LZko4+9exuVtC4Z6WPv3OrclUhW+ti7NugNJTt97B0b9JqSoT72Tg16h7JkqY+9S4Pes0im+tg7tDq3IxnrY+/OoNeQrPWxd2V17lokc33sHVmdO5Qc9LF3Y3VuUzKudDlcY59RtzH+0HbiVa7GO/6f78rq3KlkV639fOBeL8tKOzcGvdPePGTGy7gLjayR1WWeZzvOrc5dZ3OZ55mui6tzHzK4zHOW4+NGpfiX+ZeQM9wcu85p0Ctd3q95byfnHvMY9CpXoy3v61kc9Kq3kwPv6brQecaDXqM7D3k/35H6GQ56pfPBiu9yHOolq0Gv0hxt+R7P4qBXvZns+Q7Xr0EvqCR1mef7e+9W585yu8xHN8c+/dW5vSSmeez9XJ17Fvsyj72vq3O3MS/z2Hu8OvdRjurs52Uee78HvVv5duWf0zz2HtRK9tlu9eZpr4q9H40TvOTX2tNAU247xj6jQe9Jvly9Ow815Vb35yXIshr0OvK1TvtLTblw3m3glWj9BKb8Rn+lKXd4btfAynbQO5Tks+q9pabcbnxVQSrzQW8h0dW6C0259fCSy3wug95YIqq2U7/DW/RPMcpp0NO+fFSlNQk01YIpl/k8Bz1ty7uVmuO9ptr+xzXjfD6DXvS6/LPhVlNt89AsY5P3oKc374x1a0215d0ZLpn0otH1sr25D2adOihuDHqqc3mt3pmHKV/mq5Dk8upm9Ilu+fJuqWm2HXGZz2PQi27W7/Qe5gdNs9WAy3xOg150HNcYGPRy6TC55TKfU33Ns92I4xo3Bz2OawwMenkULnoc1zg66HFcw6CXRrvHFsc1jv4xFo5rGPTSaNHnOY7JQS+Yclzj6qubvJVhr5OAy7zZrjTllhzXONso5eMaLvMOt9G02k9uOK5xuoam05bjGvdrawqt7y84rvGgCcc1PNvlI1qe7fIRraG6vJVht2e+ruGSf3zhC6/d+tlpXPlZhxs8k1N+MGvzBM/kG1zBlFftPW+tRxXyb97/TsJj5Odc54vQhX67BWe0Bamj32vVZ6orTA/6jbb3PMkpUlP9avsxT29t3uwHkxYnNoXr8KWbe8a6IlbRT1v2uLkvZlWNbnPPOzmF7UQj2o24xSt0gX7QYdLiE5uCt/rgzOaGz+qK35DTOrs1Av2t/RPf2Njp+lU/XA75lNZWp6N1EO6Wk36Tf/Km+h9mv+5naYquSwAAAABJRU5ErkJggg==",joe=async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/media/byUser/").concat(e));return await t.json()}catch(t){return console.error("Error fetching media for user with ID ".concat(e,":"),t),[]}},Aoe=e=>{let{isLoggedIn:t,userData:n,onPhotoUpload:r}=e;const[o,i]=(0,l.useState)(null),[a,s]=(0,l.useState)(null),[c,u]=(0,l.useState)(!1);return(0,Je.jsx)("div",{className:"image-uploader",children:a?(0,Je.jsx)("p",{children:a}):(0,Je.jsxs)("div",{children:[t&&!c&&(0,Je.jsx)("button",{className:"button-image-uploader",onClick:()=>{u(!0)},children:"POST PHOTO"}),c&&(0,Je.jsxs)("div",{children:[(0,Je.jsx)("input",{className:"input-image-uploader",type:"file",onChange:e=>{i(e.target.files[0])}}),(0,Je.jsx)("button",{className:"button-image-uploader",onClick:async()=>{if(!o)return void alert("Por favor selecciona un archivo");const e=new FormData;e.append("Image",o),e.append("UserID",n?n.ID:null);try{(await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/media/upload"),{method:"POST",body:e});if(t.ok){const e=await t.json();return console.log("Media uploaded successfully:",e),{success:!0,data:e}}return console.error("Error uploading media"),{success:!1,error:"Error uploading media"}}catch(t){return console.error("Error uploading media:",t),{success:!1,error:"Error uploading media"}}})(e)).success?(s("\xa1Foto subida exitosamente!"),window.location.reload()):s("Error al subir la foto")}catch(t){console.error("Error uploading photo:",t),s("Error al subir la foto")}},children:"POST PHOTO"})]})]})})};function Ooe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if("undefined"!==typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return r[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}const Noe="undefined"!==typeof window?l.useLayoutEffect:l.useEffect;function Roe(e,t,n){const[r,o]=function(e,t,n){const[r,o]=(0,l.useState)((()=>t(e))),i=(0,l.useCallback)((()=>{const i=t(e);tm(r,i)||(o(i),n&&n())}),[r,e,n]);return Noe(i),[r,i]}(e,t,n);return Noe((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),r}function Poe(e,t,n){return Roe(t,e||(()=>({})),(()=>n.reconnect()))}function Moe(e,t){const n=[...t||[]];return null==t&&"function"!==typeof e&&n.push(e),(0,l.useMemo)((()=>"function"===typeof e?e():e),n)}function Doe(e){return(0,l.useMemo)((()=>e.hooks.dragSource()),[e])}function Loe(e){return(0,l.useMemo)((()=>e.hooks.dragPreview()),[e])}function Foe(e,t,n,r){let o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<i.length;l++){const a=i[l];if(!s(a))return!1;const c=e[a],u=t[a];if(o=n?n.call(r,c,u,a):void 0,!1===o||void 0===o&&c!==u)return!1}return!0}function Boe(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Uoe(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,l.isValidElement)(t)){const r=t;return e(r,n),r}const r=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}(r);return function(e,t){const n=e.ref;return Ooe("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,l.cloneElement)(e,{ref:e=>{Voe(n,e),Voe(t,e)}}):(0,l.cloneElement)(e,{ref:t})}(r,n?t=>e(t,n):e)}}function zoe(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=Uoe(r);t[n]=()=>e}})),t}function Voe(e,t){"function"===typeof e?e(t):e.current=t}class Goe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Foe(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Foe(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=zoe({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,Boe(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,Boe(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}const Woe=(0,l.createContext)({dragDropManager:void 0});function Hoe(){const{dragDropManager:e}=(0,l.useContext)(Woe);return Ooe(null!=e,"Expected drag drop context"),e}let qoe=!1,Xoe=!1;class Yoe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Ooe(!qoe,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return qoe=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{qoe=!1}}isDragging(){if(!this.sourceId)return!1;Ooe(!Xoe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Xoe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Xoe=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class Koe{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==n&&void 0!==n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:o}=n;return o?o(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function Zoe(e,t,n){const r=Hoe(),o=function(e,t,n){const r=(0,l.useMemo)((()=>new Koe(e,t,n)),[t,n]);return(0,l.useEffect)((()=>{r.spec=e}),[e]),r}(e,t,n),i=function(e){return(0,l.useMemo)((()=>{const t=e.type;return Ooe(null!=t,"spec.type must be defined"),t}),[e])}(e);Noe((function(){if(null!=i){const[e,a]=function(e,t,n){const r=n.getRegistry(),o=r.addSource(e,t);return[o,()=>r.removeSource(o)]}(i,o,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),a}}),[r,t,n,o,i])}function Qoe(e,t){const n=Moe(e,t);Ooe(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=function(){const e=Hoe();return(0,l.useMemo)((()=>new Yoe(e)),[e])}(),o=function(e,t){const n=Hoe(),r=(0,l.useMemo)((()=>new Goe(n.getBackend())),[n]);return Noe((()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource())),[r,e]),Noe((()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview())),[r,t]),r}(n.options,n.previewOptions);return Zoe(n,r,o),[Poe(n.collect,r,o),Doe(o),Loe(o)]}const Joe=e=>{let{id:t,image:n}=e;const[{isDragging:r},o]=Qoe((()=>({type:"image",item:{id:t},collect:e=>({isDragging:!!e.isDragging()})})));return(0,Je.jsx)("div",{ref:o,style:{opacity:r?.5:1,cursor:"move",marginBottom:"8px"},children:(0,Je.jsx)("img",{src:n,alt:"Picture ".concat(t),style:{width:"150px",border:"5px solid transparent"}})})};function $oe(e){return(0,l.useMemo)((()=>e.hooks.dropTarget()),[e])}class eie{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Foe(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=zoe({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,Boe(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}let tie=!1;class nie{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;Ooe(!tie,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return tie=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{tie=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class rie{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function oie(e,t,n){const r=Hoe(),o=function(e,t){const n=(0,l.useMemo)((()=>new rie(e,t)),[t]);return(0,l.useEffect)((()=>{n.spec=e}),[e]),n}(e,t),i=function(e){const{accept:t}=e;return(0,l.useMemo)((()=>(Ooe(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);Noe((function(){const[e,a]=function(e,t,n){const r=n.getRegistry(),o=r.addTarget(e,t);return[o,()=>r.removeTarget(o)]}(i,o,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),a}),[r,t,o,n,i.map((e=>e.toString())).join("|")])}function iie(e,t){const n=Moe(e,t),r=function(){const e=Hoe();return(0,l.useMemo)((()=>new nie(e)),[e])}(),o=function(e){const t=Hoe(),n=(0,l.useMemo)((()=>new eie(t.getBackend())),[t]);return Noe((()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget())),[e]),n}(n.options);return oie(n,r,o),[Poe(n.collect,r,o),$oe(o)]}const aie=function(e){let{userId:t}=e;const[n,r]=(0,l.useState)([]),[o,i]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(async()=>{try{const e=await joe(t);i(e),s(!1)}catch(e){console.error("Error fetching user media",e)}})()}),[t]),(0,l.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("board"));e&&r(e)}),[]),(0,l.useEffect)((()=>{localStorage.setItem("board",JSON.stringify(n))}),[n]),(0,l.useEffect)((()=>{localStorage.setItem("userMedia",JSON.stringify(o))}),[o]);const[{isOver:c},u]=iie((()=>({accept:"image",drop:e=>{(e=>{const t=JSON.parse(localStorage.getItem("userMedia")).find((t=>t.ID===e));t?r((e=>[...e,t])):console.error("Image not found with ID:",e)})(e.id)},collect:e=>({isOver:!!e.isOver()})})));if(a)return(0,Je.jsx)("div",{className:"loading",children:"LOADING..."});const d=Math.ceil(o.length/3),h=Array.from({length:3}).map(((e,t)=>o.slice(t*d,(t+1)*d)));return(0,Je.jsxs)("div",{className:"media-container",children:[(0,Je.jsx)("div",{className:"photos",children:(0,Je.jsx)("div",{className:"columns-photos-container",children:h.map(((e,t)=>(0,Je.jsx)("div",{className:"column-photo",children:e.map((e=>(0,Je.jsx)("div",{className:"",children:(0,Je.jsx)(Joe,{id:e.ID,image:e.Image})},e.ID)))},t)))})}),(0,Je.jsx)("div",{className:"board",ref:u,children:n.map((e=>(0,Je.jsx)("div",{className:"board-picture",children:(0,Je.jsx)(Joe,{id:e.ID,image:e.Image})},e.ID)))})]})};function sie(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var lie="function"===typeof Symbol&&Symbol.observable||"@@observable",cie=function(){return Math.random().toString(36).substring(7).split("").join(".")},uie={INIT:"@@redux/INIT"+cie(),REPLACE:"@@redux/REPLACE"+cie(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cie()}};function die(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hie(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(sie(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(sie(1));return n(hie)(e,t)}if("function"!==typeof e)throw new Error(sie(2));var o=e,i=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(sie(3));return i}function d(e){if("function"!==typeof e)throw new Error(sie(4));if(l)throw new Error(sie(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(sie(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function h(e){if(!die(e))throw new Error(sie(7));if("undefined"===typeof e.type)throw new Error(sie(8));if(l)throw new Error(sie(9));try{l=!0,i=o(i,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:uie.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(sie(10));o=e,h({type:uie.REPLACE})}})[lie]=function(){var e,t=d;return e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(sie(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}},e[lie]=function(){return this},e},r}function pie(e){return"object"===typeof e}const fie="dnd-core/INIT_COORDS",mie="dnd-core/BEGIN_DRAG",gie="dnd-core/PUBLISH_DRAG_SOURCE",yie="dnd-core/HOVER",vie="dnd-core/DROP",bie="dnd-core/END_DRAG";function xie(e,t){return{type:fie,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const wie={type:fie,payload:{clientOffset:null,sourceClientOffset:null}};function Sie(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0};const{publishSource:r=!0,clientOffset:o,getSourceClientOffset:i}=n,a=e.getMonitor(),s=e.getRegistry();e.dispatch(xie(o)),function(e,t,n){Ooe(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Ooe(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,a,s);const l=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,a);if(null==l)return void e.dispatch(wie);let c=null;if(o){if(!i)throw new Error("getSourceClientOffset must be defined");!function(e){Ooe("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(i),c=i(l)}e.dispatch(xie(o,c));const u=s.getSource(l).beginDrag(a,l);if(null==u)return;!function(e){Ooe(pie(e),"Item must be an object.")}(u),s.pinSource(l);const d=s.getSourceType(l);return{type:mie,payload:{itemType:d,item:u,sourceId:l,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!r}}}}function _ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_ie(e,t,n[t])}))}return e}function Tie(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.getMonitor(),r=e.getRegistry();!function(e){Ooe(e.isDragging(),"Cannot call drop while not dragging."),Ooe(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const o=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);o.forEach(((o,i)=>{const a=function(e,t,n,r){const o=n.getTarget(e);let i=o?o.drop(r,e):void 0;(function(e){Ooe("undefined"===typeof e||pie(e),"Drop result must either be an object or undefined.")})(i),"undefined"===typeof i&&(i=0===t?{}:r.getDropResult());return i}(o,i,r,n),s={type:vie,payload:{dropResult:kie({},t,a)}};e.dispatch(s)}))}}function Eie(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){Ooe(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:bie}}}function Cie(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function Iie(e){return function(t){let{clientOffset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){Ooe(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),o=e.getMonitor(),i=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const o=e[r];Cie(t.getTargetType(o),n)||e.splice(r,1)}}(r,i,o.getItemType()),function(e,t,n){Ooe(t.isDragging(),"Cannot call hover while not dragging."),Ooe(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const t=e[r];Ooe(e.lastIndexOf(t)===r,"Expected targetIds to be unique in the passed array.");Ooe(n.getTarget(t),"Expected targetIds to be registered.")}}(r,o,i),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,o,i),{type:yie,payload:{targetIds:r,clientOffset:n||null}}}}function jie(e){return function(){if(e.getMonitor().isDragging())return{type:gie}}}class Aie{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:Sie(e),publishDragSource:jie(e),hover:Iie(e),drop:Tie(e),endDrag:Eie(e)}}(this);return Object.keys(n).reduce(((r,o)=>{const i=n[o];var a;return r[o]=(a=i,function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const i=a.apply(e,r);"undefined"!==typeof i&&t(i)}),r}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Oie(e,t){return{x:e.x-t.x,y:e.y-t.y}}const Nie=[],Rie=[];Nie.__IS_NONE__=!0,Rie.__IS_ALL__=!0;class Pie{subscribeToStateChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{handlerIds:n}=t;Ooe("function"===typeof e,"listener must be a function."),Ooe("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),o=t.stateId;try{const i=o===r||o===r+1&&!function(e,t){if(e===Nie)return!1;if(e===Rie||"undefined"===typeof t)return!0;const n=(r=e,t.filter((e=>r.indexOf(e)>-1)));var r;return n.length>0}(t.dirtyHandlerIds,n);i||e()}finally{r=o}}))}subscribeToOffsetChange(e){Ooe("function"===typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return Ooe(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(Ooe(t,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;return Cie(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(Ooe(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Cie(r,o))return!1;const i=this.getTargetIds();if(!i.length)return!1;const a=i.indexOf(e);return n?a===i.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?Oie(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?Oie(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Mie="undefined"!==typeof global?global:self,Die=Mie.MutationObserver||Mie.WebKitMutationObserver;function Lie(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const Fie="function"===typeof Die?function(e){let t=1;const n=new Die(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:Lie;class Bie{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const Uie=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Fie(this.flush),this.requestErrorThrow=Lie((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},zie=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new Bie(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(Uie.registerPendingError);const Vie="dnd-core/ADD_SOURCE",Gie="dnd-core/ADD_TARGET",Wie="dnd-core/REMOVE_SOURCE",Hie="dnd-core/REMOVE_TARGET";function qie(e,t){t&&Array.isArray(e)?e.forEach((e=>qie(e,!1))):Ooe("string"===typeof e||"symbol"===typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Xie;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(Xie||(Xie={}));let Yie=0;function Kie(e){const t=(Yie++).toString();switch(e){case Xie.SOURCE:return"S".concat(t);case Xie.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Zie(e){switch(e[0]){case"S":return Xie.SOURCE;case"T":return Xie.TARGET;default:throw new Error("Cannot parse handler ID: ".concat(e))}}function Qie(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,o]}=n.next();if(o===t)return!0;r=!!e}while(!r);return!1}class Jie{addSource(e,t){qie(e),function(e){Ooe("function"===typeof e.canDrag,"Expected canDrag to be a function."),Ooe("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),Ooe("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(Xie.SOURCE,e,t);return this.store.dispatch(function(e){return{type:Vie,payload:{sourceId:e}}}(n)),n}addTarget(e,t){qie(e,!0),function(e){Ooe("function"===typeof e.canDrop,"Expected canDrop to be a function."),Ooe("function"===typeof e.hover,"Expected hover to be a function."),Ooe("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(Xie.TARGET,e,t);return this.store.dispatch(function(e){return{type:Gie,payload:{targetId:e}}}(n)),n}containsHandler(e){return Qie(this.dragSources,e)||Qie(this.dropTargets,e)}getSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ooe(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Ooe(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Ooe(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Ooe(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Zie(e)===Xie.SOURCE}isTargetId(e){return Zie(e)===Xie.TARGET}removeSource(e){var t;Ooe(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:Wie,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},Uie.enqueueTask(zie.create(t))}removeTarget(e){Ooe(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:Hie,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);Ooe(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Ooe(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=Kie(e);return this.types.set(r,t),e===Xie.SOURCE?this.dragSources.set(r,n):e===Xie.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const $ie=(e,t)=>e===t;function eae(){let e=arguments.length>1?arguments[1]:void 0;switch(e.type){case yie:break;case Vie:case Gie:case Hie:case Wie:return Nie;default:return Rie}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const o=[];return n.forEach(((e,t)=>{1===e&&o.push(t)})),o}(t,n),o=r.length>0||!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$ie;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(t,n);if(!o)return Nie;const i=n[n.length-1],a=t[t.length-1];return i!==a&&(i&&r.push(i),a&&r.push(a)),r}function tae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nae={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function rae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nae,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case fie:case mie:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case yie:return r=e.clientOffset,o=n.clientOffset,!r&&!o||r&&o&&r.x===o.x&&r.y===o.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tae(e,t,n[t])}))}return e}({},e,{clientOffset:n.clientOffset});case bie:case vie:return nae;default:return e}var r,o}function oae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oae(e,t,n[t])}))}return e}const aae={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function sae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aae,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case mie:return iae({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case gie:return iae({},e,{isSourcePublic:!0});case yie:return iae({},e,{targetIds:n.targetIds});case Hie:return-1===e.targetIds.indexOf(n.targetId)?e:iae({},e,{targetIds:(r=e.targetIds,o=n.targetId,r.filter((e=>e!==o)))});case vie:return iae({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case bie:return iae({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var r,o}function lae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case Vie:case Gie:return e+1;case Wie:case Hie:return e-1;default:return e}}function cae(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function uae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){uae(e,t,n[t])}))}return e}function hae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:eae(e.dirtyHandlerIds,{type:t.type,payload:dae({},t.payload,{prevTargetIds:(n=e,r="dragOperation.targetIds",o=[],r.split(".").reduce(((e,t)=>e&&e[t]?e[t]:o||null),n))})}),dragOffset:rae(e.dragOffset,t),refCount:lae(e.refCount,t),dragOperation:sae(e.dragOperation,t),stateId:cae(e.stateId)};var n,r,o}function pae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){const t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return hie(hae,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),o=new Pie(r,new Jie(r)),i=new Aie(r,o),a=e(i,t,n);return i.receiveBackend(a),i}function fae(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}let mae=0;const gae=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var yae=(0,l.memo)((function(e){var{children:t}=e,n=fae(e,["children"]);const[r,o]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vae(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=t;o[gae]||(o[gae]={dragDropManager:pae(e,t,n,r)});return o[gae]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(n);return(0,l.useEffect)((()=>{if(o){const e=vae();return++mae,()=>{0===--mae&&(e[gae]=null)}}}),[]),(0,Je.jsx)(Woe.Provider,{value:r,children:t})}));function vae(){return"undefined"!==typeof global?global:window}function bae(e){let t=null;return()=>(null==t&&(t=e()),t)}class xae{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);const o=[];return n.forEach((e=>o.push(e))),o}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var n,r;return this.entered=(n=this.entered.filter(this.isNodeInDocument),r=e,n.filter((e=>e!==r))),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class wae{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn("Browser doesn't allow reading \"".concat(e,'" until the drop event.')),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((n=>{const r=this.config.exposeProperties[n];null!=r&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Sae="__NATIVE_FILE__",_ae="__NATIVE_URL__",kae="__NATIVE_TEXT__",Tae="__NATIVE_HTML__";function Eae(e,t,n){const r=t.reduce(((t,n)=>t||e.getData(n)),"");return null!=r?r:n}const Cae={[Sae]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Tae]:{exposeProperties:{html:(e,t)=>Eae(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[_ae]:{exposeProperties:{urls:(e,t)=>Eae(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[kae]:{exposeProperties:{text:(e,t)=>Eae(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Iae(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(Cae).filter((e=>{const n=Cae[e];return!!(null===n||void 0===n?void 0:n.matchesTypes)&&n.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const jae=bae((()=>/firefox/i.test(navigator.userAgent))),Aae=bae((()=>Boolean(window.safari)));class Oae{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:o,c3s:i}=this;let a=t.length-1;if(e===t[a])return n[a];let s,l=0,c=i.length-1;for(;l<=c;){s=Math.floor(.5*(l+c));const r=t[s];if(r<e)l=s+1;else{if(!(r>e))return n[s];c=s-1}}a=Math.max(0,c);const u=e-t[a],d=u*u;return n[a]+r[a]*u+o[a]*d+i[a]*u*d}constructor(e,t){const{length:n}=e,r=[];for(let p=0;p<n;p++)r.push(p);r.sort(((t,n)=>e[t]<e[n]?-1:1));const o=[],i=[],a=[];let s,l;for(let p=0;p<n-1;p++)s=e[p+1]-e[p],l=t[p+1]-t[p],i.push(s),o.push(l),a.push(l/s);const c=[a[0]];for(let p=0;p<i.length-1;p++){const e=a[p],t=a[p+1];if(e*t<=0)c.push(0);else{s=i[p];const n=i[p+1],r=s+n;c.push(3*r/((r+n)/e+(r+s)/t))}}c.push(a[a.length-1]);const u=[],d=[];let h;for(let p=0;p<c.length-1;p++){h=a[p];const e=c[p],t=1/i[p],n=e+c[p+1]-h-h;u.push((h-e-n)*t),d.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const Nae=1;function Rae(e){const t=e.nodeType===Nae?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Pae(e){return{x:e.clientX,y:e.clientY}}function Mae(e,t,n,r,o){const i=function(e){var t;return"IMG"===e.nodeName&&(jae()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),a=Rae(i?e:t),s={x:n.x-a.x,y:n.y-a.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:u,anchorY:d}=r,{dragPreviewWidth:h,dragPreviewHeight:p}=function(e,t,n,r){let o=e?t.width:n,i=e?t.height:r;return Aae()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,l,c),{offsetX:f,offsetY:m}=o,g=0===m||m;return{x:0===f||f?f:new Oae([0,.5,1],[s.x,s.x/l*h,s.x+h-l]).interpolate(u),y:g?m:(()=>{let e=new Oae([0,.5,1],[s.y,s.y/c*p,s.y+p-c]).interpolate(d);return Aae()&&i&&(e+=(window.devicePixelRatio-1)*p),e})()}}class Dae{get window(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Lae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lae(e,t,n[t])}))}return e}class Bae{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=t=>this.handleDragStart(t,e),o=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),o=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Fae({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return Fae({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(a).some((t=>a[t]===e))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=Cae[e];if(!n)throw new Error("native type ".concat(e," has no configuration"));const r=new wae(n);return r.loadDataTransfer(t),r}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&Rae(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!==typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!==typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=Pae(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:r}=e,o=Iae(r);if(this.monitor.isDragging()){if(r&&"function"===typeof r.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),o=this.sourcePreviewNodes.get(e)||t;if(o){const{anchorX:e,anchorY:i,offsetX:a,offsetY:s}=this.getCurrentSourcePreviewNodeOptions(),l=Mae(t,o,n,{anchorX:e,anchorY:i},{offsetX:a,offsetY:s});r.setDragImage(o,l.x,l.y)}}try{null===r||void 0===r||r.setData("application/json",{})}catch(Zae){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(o)this.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,r=Iae(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Pae(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=Pae(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Iae(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Pae(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Dae(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new xae(this.isNodeInDocument)}}const Uae=function(e,t,n){return new Bae(e,t,n)},zae=e=>{let{children:t}=e;return(0,Je.jsx)("div",{className:"centered-container",children:(0,Je.jsx)(yae,{backend:Uae,children:t})})};const Vae=function(e){let{isLoggedIn:t,userData:n,setUserData:r}=e;const[o,i]=(0,l.useState)(!1),[a,s]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[p,f]=(0,l.useState)([]);(0,l.useEffect)((()=>{n&&n.ID&&(async e=>{try{const t=await joe(e);f(t),console.log(t)}catch(t){console.error("Error fetching user media",t)}})(n.ID)}),[n]);const m=()=>{i(!0)};return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"profile",children:[t&&n&&(0,Je.jsxs)("div",{className:"profile-container",children:[(0,Je.jsxs)("div",{className:"bio-username",children:[(0,Je.jsxs)("div",{className:"username-container",children:[o?(0,Je.jsx)("input",{className:"input-edit-username",type:"text",value:c||n.Username,onChange:e=>{u(e.target.value)}}):(0,Je.jsx)("span",{className:"username",children:n.Username}),(0,Je.jsx)("div",{className:"edit-icon-container ".concat(o?"":"hidden"),onClick:m,children:(0,Je.jsx)("img",{src:Ioe,alt:"Edit",className:"edit-icon"})})]}),(0,Je.jsxs)("div",{className:"bio-container",children:[o?(0,Je.jsx)("textarea",{value:d||n.Bio,onChange:e=>{h(e.target.value)},className:"input-edit-bio",rows:4}):(0,Je.jsx)("span",{className:"bio",children:n.Bio}),(0,Je.jsx)("div",{className:"edit-icon-container ".concat(o?"":"hidden"),onClick:m,children:(0,Je.jsx)("img",{src:Ioe,alt:"Edit",className:"edit-icon"})})]})]}),(0,Je.jsxs)("div",{className:"profile-image-container",children:[o?(0,Je.jsx)("input",{className:"input-edit",type:"file",onChange:e=>{s(e.target.value)}}):(0,Je.jsx)("img",{src:n.Image,alt:"Profile",className:"profile-image"}),(0,Je.jsx)("div",{className:"edit-icon-container ".concat(o?"":"hidden"),onClick:m,children:(0,Je.jsx)("img",{src:Ioe,alt:"Edit",className:"edit-icon"})})]}),o&&(0,Je.jsx)("button",{onClick:async()=>{const e=n.ID,t=localStorage.getItem("token"),o={Username:c||n.Username,Bio:d||n.Bio,Image:a||n.Image},s=await(async(e,t,n)=>{try{console.log("ID del usuario:",e),console.log("Token de autenticaci\xf3n:",n);const r="".concat("https://holograma-3.onrender.com","/users/user/").concat(e,"/edit"),o=new FormData;for(const e in t)o.append(e,t[e]);const i={method:"PUT",headers:{Authorization:"Bearer ".concat(n)},body:o};return(await fetch(r,i)).ok?(console.log("Perfil de usuario actualizado correctamente"),{success:!0}):(console.error("Error al actualizar el perfil del usuario"),{success:!1,error:"Error al actualizar el perfil del usuario"})}catch(r){return console.error("Error en la solicitud:",r),{success:!1,error:"Error en la solicitud"}}})(e,o,t);s.success?(console.log("Perfil de usuario actualizado correctamente"),r((e=>({...e,...o}))),localStorage.setItem("userData",JSON.stringify(n)),h(o.Bio)):console.error("Error al actualizar el perfil del usuario"),i(!1)},children:"SAVE"})]}),(0,Je.jsxs)("div",{className:"edit-profile",children:[t&&n&&(0,Je.jsx)("button",{className:"button-edit-profile",onClick:m,children:"EDIT PROFILE"}),(0,Je.jsx)(Aoe,{isLoggedIn:t,userData:n})]}),(0,Je.jsx)(zae,{children:(0,Je.jsx)(aie,{userId:n.ID})})]})})},Gae=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(null);return(0,l.useEffect)((()=>{const t=async()=>{try{const t=await(async e=>{try{const t=await fetch("".concat("https://holograma-3.onrender.com","/users/users/").concat(e),{method:"GET"});if(t.ok){const e=await t.json();return console.log("Perfil del usuario encontrado:",e),{success:!0,user:e.user}}return console.error("Error al buscar el perfil del usuario"),{success:!1,error:"Error al buscar el perfil del usuario"}}catch(t){return console.error("Error en la solicitud:",t),{success:!1,error:"Error en la solicitud"}}})(e);t.success?r(t.user):r(null)}catch(t){console.error("Error fetching user profile:",t)}};""!==e.trim()&&t()}),[e]),(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"search-input-container",children:[(0,Je.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"SEARCH PROFILE",className:"search-input-profile"}),n&&(0,Je.jsx)(Oe,{to:"/searched-profile/".concat(n.ID),className:"user-preview-link",children:(0,Je.jsxs)("div",{className:"user-preview",children:[(0,Je.jsx)("img",{src:n.Image,alt:"Profile",className:"profile-preview-image"}),(0,Je.jsx)("p",{className:"username-preview",children:n.Username})]})})]})})};const Wae=function(e){let{userId:t}=e;const[n,r]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{const e=await fetch("".concat("https://holograma-3.onrender.com","/media/media"));if(!e.ok)throw new Error("Error fetching media");return await e.json()}catch(e){throw console.error("Error fetching media:",e),e}})();r(e)}catch(e){console.error("Error fetching media:",e)}})()}),[]);const o=t?n.filter((e=>e.UserID===t)):n;return(0,Je.jsx)("div",{className:"media-container",children:(0,Je.jsx)("div",{className:"columns-photos-container",children:Array.from({length:Math.ceil(o.length/3)}).map(((e,t)=>(0,Je.jsx)("div",{className:"column-photo",children:o.filter(((e,n)=>n%3===t)).map((e=>(0,Je.jsx)("div",{className:"photo-container",children:(0,Je.jsx)("img",{className:"photo-image",src:e.Image,alt:"Photo ".concat(e.ID)})},e.ID)))},t)))})})},Hae=e=>{let{userData:t}=e;return console.log("userData:",t),t?(console.log("Rendering user profile with userData:",t),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsxs)("div",{className:"full-profile-container",children:[(0,Je.jsxs)("div",{className:"bio-username",children:[(0,Je.jsx)("div",{className:"username-container",children:(0,Je.jsx)("p",{className:"username",children:t.Username})}),(0,Je.jsx)("div",{className:"bio-container",children:(0,Je.jsxs)("p",{className:"Bio",children:["Bio: ",t.Bio]})})]}),(0,Je.jsx)("div",{className:"profile-image-container",children:(0,Je.jsx)("img",{src:t.Image,alt:"Profile",className:"profile-image"})})]}),(0,Je.jsx)("div",{className:"search-media-container",children:(0,Je.jsx)(Wae,{userId:t.ID})})]})):(console.log("userData is null or undefined"),(0,Je.jsx)("p",{children:"Loading..."}))},qae=r.p+"static/media/flan.5db1c98ccac743628f58.png",Xae=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(null);let o=0,i=0;class a{constructor(e,t,r){this.position=e.createVector(t,r),this.velocity=e.createVector(e.random(-1,1),e.random(-1,1)),this.acceleration=e.createVector(),this.maxSpeed=3,this.maxForce=.05,this.particleImg=n,this.radius=e.random(2,10),this.alpha=255,this.particleImg=e.loadImage(qae),this.lifespan=30}update(e){this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed),this.position.add(this.velocity),this.acceleration.mult(0),this.alpha-=105/this.lifespan}display(e){const t=this.particleImg.width/this.particleImg.height,n=2*this.radius,r=n/t;e.imageMode(e.CENTER),e.image(this.particleImg,this.position.x,this.position.y,n,r)}isDead(){return this.alpha<=0}}return(0,Je.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1},children:(0,Je.jsx)(NS(),{setup:(t,n)=>{t.createCanvas(window.innerWidth,window.innerHeight).parent(n),t.angleMode(t.DEGREES),t.rectMode(t.CENTER),r(t.loadImage(qae));for(let r=0;r<50;r++){const n=new a(t,t.random(t.width),t.random(t.height));e.push(n)}},draw:t=>{t.background(255),t.noFill();for(let n=e.length-1;n>=0;n--){const r=e[n];r.update(t),r.display(t),r.isDead()&&e.splice(n,1)}if(o!==t.mouseX||i!==t.mouseY){if(e.length<50){const n=new a(t,t.mouseX,t.mouseY);e.push(n)}o=t.mouseX,i=t.mouseY}}})})};const Yae=function(){const e=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):null,[t,n]=(0,l.useState)(!1),[r,o]=(0,l.useState)(e);(0,l.useEffect)((()=>{"true"===localStorage.getItem("isLoggedIn")&&n(!0)}),[]);const i=()=>{n(!1),localStorage.removeItem("userData"),localStorage.removeItem("isLoggedIn"),o(null)};return(0,Je.jsxs)(Ke,{i18n:Ft,children:[(0,Je.jsxs)(Ie,{children:[(0,Je.jsx)(Xae,{}),(0,Je.jsx)("div",{className:"App",children:(0,Je.jsxs)("div",{className:"header-parent",children:[(0,Je.jsx)($e,{isLoggedIn:t,handleLogout:i,userData:r}),(0,Je.jsxs)(Se,{children:[(0,Je.jsx)(xe,{path:"/hologramassa/",element:(0,Je.jsx)(koe,{})}),Soe.map(((e,t)=>(0,Je.jsx)(xe,{path:e.path,element:e.element},t))),(0,Je.jsx)(xe,{path:"/register",element:t?(0,Je.jsx)(be,{to:"/hologramassa/"}):(0,Je.jsx)(Coe,{})}),(0,Je.jsx)(xe,{path:"/login",element:t?(0,Je.jsx)(be,{to:"/hologramassa/"}):(0,Je.jsx)(Toe,{handleLogin:async e=>{n(!0),o(e),localStorage.setItem("userData",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true")}})}),(0,Je.jsx)(xe,{path:"/profile",element:(0,Je.jsx)(Vae,{isLoggedIn:t,handleLogout:i,userData:r,setUserData:o})}),(0,Je.jsx)(xe,{path:"/search-profile",element:(0,Je.jsx)(Gae,{})}),(0,Je.jsx)(xe,{path:"/searched-profile/:userId",element:(0,Je.jsx)(Hae,{userData:r})}),(0,Je.jsx)(xe,{path:"/upload-photo",element:(0,Je.jsx)(Aoe,{isLoggedIn:t,userData:r})}),(0,Je.jsx)(xe,{path:"/drag-and-drop",element:(0,Je.jsx)(zae,{children:(0,Je.jsx)(aie,{})})})]})]})})]}),(0,Je.jsx)(_oe,{})]})};u.render((0,Je.jsx)(l.StrictMode,{children:(0,Je.jsx)(Yae,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.2adbd8dc.js.map